define("qtype_uml/uml-editor",["exports","qtype_uml/uml-editor-compression","qtype_uml/uml-editor-change-handler","qtype_uml/Elements/UMLActor","qtype_uml/Elements/UMLClass"],(function(_exports,_umlEditorCompression,_umlEditorChangeHandler,_UMLActor,_UMLClass){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.UmlEditor=void 0;class UmlEditor extends HTMLElement{get attributeInputId(){return this.getAttribute("inputId")}get attributeDiagram(){const diagram=this.getAttribute("diagram");return diagram?(0,_umlEditorCompression.decodeDiagram)(diagram):null}get attributeAllowEdit(){return"1"===this.getAttribute("allowEdit")}constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n    <style>\n        :host {\n            display: flex;\n            flex-direction: row;\n            height: 100%;\n            width: 100%;\n            gap: 2px;\n            padding: 4px;\n        }\n        \n        .left {\n            width: 30%;\n            background-color: grey;\n        }\n        \n        .right {\n            width: 100%;\n        }\n    \n        #editor {\n            width: 100%;\n            height: 100%;\n            border: 1px solid #ccc;\n        }\n    </style>\n    \n    <div class="left">\n        <div id="toolBox"></div>\n    </div>\n    <div class="right">\n        <div id="editor"></div>\n    </div>\n    ';const editorDiv=this.shadowRoot.querySelector("#editor"),toolBoxDiv=this.shadowRoot.querySelector("#toolBox"),graphEditor=new joint.dia.Graph,graphToolBox=new joint.dia.Graph,paperEditor=initPaper(editorDiv,graphEditor,!0),paperToolbox=initPaper(toolBoxDiv,graphToolBox,!1);!function(){const customActor=new _UMLActor.UMLActor,class1=new _UMLClass.UMLClass;customActor.position(20,120),class1.position(20,20),graphToolBox.addCell(customActor),graphToolBox.addCell(class1)}();const diagramFromAttribute=this.attributeDiagram;function initPaper(el,model,isInteractive){return new joint.dia.Paper({el:el,model:model,width:"100%",height:"100%",gridSize:10,drawGrid:!0,interactive:isInteractive})}diagramFromAttribute&&this.displayDiagramSchema(diagramFromAttribute),paperToolbox.on("element:pointerup",((cellView,evt,x,y)=>{const clickedClass=cellView.model.clone();let tmpX=Math.floor(481*Math.random())+20,tmpY=Math.floor(481*Math.random())+20;clickedClass.position(tmpX,tmpY),graphEditor.addCell(clickedClass)})),paperEditor.on("cell:mouseenter",(function(cellView){const tools=new joint.dia.ToolsView({tools:[new joint.elementTools.Boundary({padding:3,rotate:!0,useModelGeometry:!0}),new joint.linkTools.Remove({scale:1.2,distance:15})]});cellView.addTools(tools)})),paperEditor.on("element:pointerdblclick",(function(elementView,evt){switch(evt.target.attributes[0].value){case"headerText":console.log("Header section double-clicked");break;case"variablesRect":let rectWidth=150,headerHeight=20;elementView.model.updateView();let variableYCounter=0;const position=elementView.model.position();let variableComponent=new joint.shapes.standard.TextBlock({position:{x:position.x,y:position.y+headerHeight+elementView.model.getcounterVariables()},size:{width:rectWidth,height:20},text:"Sample Text",fill:"black",fontSize:10,fontFamily:"Arial, helvetica, sans-serif","ref-y":headerHeight,"ref-x":0,ref:"variablesRect","text-anchor":"middle","pointer-events":"none"});elementView.model.attr().body2=variableComponent,elementView.model.embed(variableComponent),graphEditor.addCell(variableComponent),variableYCounter+=20,elementView.model.counterVariablesUp();break;case"functionsRect":console.log("Functions section double-clicked");break;default:console.log("Clicked outside the sections")}})),paperEditor.on("cell:mouseleave",(function(cellView){cellView.removeTools()})),paperEditor.on("cell:pointerup",((cellView,evt,x,y)=>{}))}emitDiagramChanged(){const diagram=(0,_umlEditorCompression.encodeDiagram)(this.objects);(0,_umlEditorChangeHandler.emitDiagramDataChangedEvent)(this.attributeInputId,diagram)}}_exports.UmlEditor=UmlEditor}));

//# sourceMappingURL=uml-editor.min.js.map