(()=>{var vA={717:(Gn,fr,qn)=>{var Si,gt,it;it="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,Si=[qn(670),qn(276),fr],void 0!==(gt=function(Tr,Qn,ot){it.Backbone=function(Pr,it,Me,Xn){var Tr=Pr.Backbone,Qn=Array.prototype.slice;it.VERSION="1.4.1",it.$=Xn,it.noConflict=function(){return Pr.Backbone=Tr,this},it.emulateHTTP=!1,it.emulateJSON=!1;var vr,ot=it.Events={},Gr=/\s+/,Dt=function(T,N,j,J,Te){var F,Se=0;if(j&&"object"==typeof j)for((void 0!==J&&"context"in Te&&void 0===Te.context&&(Te.context=J),F=Me.keys(j));Se<F.length;Se++)N=Dt(T,N,F[Se],j[F[Se]],Te);else if(j&&Gr.test(j))for(F=j.split(Gr);Se<F.length;Se++)N=T(N,F[Se],J,Te);else N=T(N,j,J,Te);return N};ot.on=function(T,N,j){return this._events=Dt(_n,this._events||{},T,N,{context:j,ctx:this,listening:vr}),vr&&((this._listeners||(this._listeners={}))[vr.id]=vr,vr.interop=!1),this},ot.listenTo=function(T,N,j){if(!T)return this;var J=T._listenId||(T._listenId=Me.uniqueId("l")),Te=this._listeningTo||(this._listeningTo={}),Se=vr=Te[J];Se||(this._listenId||(this._listenId=Me.uniqueId("l")),Se=vr=Te[J]=new so(this,T));var F=Ui(T,N,j,this);if(vr=void 0,F)throw F;return Se.interop&&Se.on(N,j),this};var _n=function(T,N,j,J){if(j){var Te=T[N]||(T[N]=[]),Se=J.context,F=J.ctx,z=J.listening;z&&z.count++,Te.push({callback:j,context:Se,ctx:Se||F,listening:z})}return T},Ui=function(T,N,j,J){try{T.on(N,j,J)}catch(Te){return Te}};ot.off=function(T,N,j){return this._events?(this._events=Dt(et,this._events,T,N,{context:j,listeners:this._listeners}),this):this},ot.stopListening=function(T,N,j){var J=this._listeningTo;if(!J)return this;for(var Te=T?[T._listenId]:Me.keys(J),Se=0;Se<Te.length;Se++){var F=J[Te[Se]];if(!F)break;F.obj.off(N,j,this),F.interop&&F.off(N,j)}return Me.isEmpty(J)&&(this._listeningTo=void 0),this};var et=function(T,N,j,J){if(T){var z,Te=J.context,Se=J.listeners,F=0;if(!N&&!Te&&!j){for(z=Me.keys(Se);F<z.length;F++)Se[z[F]].cleanup();return}for(z=N?[N]:Me.keys(T);F<z.length;F++){var le=T[N=z[F]];if(!le)break;for(var se=[],X=0;X<le.length;X++){var ye=le[X];if(j&&j!==ye.callback&&j!==ye.callback._callback||Te&&Te!==ye.context)se.push(ye);else{var qe=ye.listening;qe&&qe.off(N,j)}}se.length?T[N]=se:delete T[N]}return T}};ot.once=function(T,N,j){var J=Dt(kt,{},T,N,this.off.bind(this));return"string"==typeof T&&null==j&&(N=void 0),this.on(J,N,j)},ot.listenToOnce=function(T,N,j){var J=Dt(kt,{},N,j,this.stopListening.bind(this,T));return this.listenTo(T,J)};var kt=function(T,N,j,J){if(j){var Te=T[N]=Me.once(function(){J(N,Te),j.apply(this,arguments)});Te._callback=j}return T};ot.trigger=function(T){if(!this._events)return this;for(var N=Math.max(0,arguments.length-1),j=Array(N),J=0;J<N;J++)j[J]=arguments[J+1];return Dt(ri,this._events,T,void 0,j),this};var ri=function(T,N,j,J){if(T){var Te=T[N],Se=T.all;Te&&Se&&(Se=Se.slice()),Te&&bt(Te,J),Se&&bt(Se,[N].concat(J))}return T},bt=function(T,N){var j,J=-1,Te=T.length,Se=N[0],F=N[1],z=N[2];switch(N.length){case 0:for(;++J<Te;)(j=T[J]).callback.call(j.ctx);return;case 1:for(;++J<Te;)(j=T[J]).callback.call(j.ctx,Se);return;case 2:for(;++J<Te;)(j=T[J]).callback.call(j.ctx,Se,F);return;case 3:for(;++J<Te;)(j=T[J]).callback.call(j.ctx,Se,F,z);return;default:for(;++J<Te;)(j=T[J]).callback.apply(j.ctx,N);return}},so=function(T,N){this.id=T._listenId,this.listener=T,this.obj=N,this.interop=!0,this.count=0,this._events=void 0};so.prototype.on=ot.on,so.prototype.off=function(T,N){var j;this.interop?(this._events=Dt(et,this._events,T,N,{context:void 0,listeners:void 0}),j=!this._events):(this.count--,j=0===this.count),j&&this.cleanup()},so.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},ot.bind=ot.on,ot.unbind=ot.off,Me.extend(it,ot);var di=it.Model=function(T,N){var j=T||{};N||(N={}),this.preinitialize.apply(this,arguments),this.cid=Me.uniqueId(this.cidPrefix),this.attributes={},N.collection&&(this.collection=N.collection),N.parse&&(j=this.parse(j,N)||{});var J=Me.result(this,"defaults");j=Me.defaults(Me.extend({},J,j),J),this.set(j,N),this.changed={},this.initialize.apply(this,arguments)};Me.extend(di.prototype,ot,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(T){return Me.clone(this.attributes)},sync:function(){return it.sync.apply(this,arguments)},get:function(T){return this.attributes[T]},escape:function(T){return Me.escape(this.get(T))},has:function(T){return null!=this.get(T)},matches:function(T){return!!Me.iteratee(T,this)(this.attributes)},set:function(T,N,j){if(null==T)return this;var J;if("object"==typeof T?(J=T,j=N):(J={})[T]=N,j||(j={}),!this._validate(J,j))return!1;var Te=j.unset,Se=j.silent,F=[],z=this._changing;this._changing=!0,z||(this._previousAttributes=Me.clone(this.attributes),this.changed={});var le=this.attributes,se=this.changed,X=this._previousAttributes;for(var ye in J)Me.isEqual(le[ye],N=J[ye])||F.push(ye),Me.isEqual(X[ye],N)?delete se[ye]:se[ye]=N,Te?delete le[ye]:le[ye]=N;if(this.idAttribute in J){var qe=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,qe,j)}if(!Se){F.length&&(this._pending=j);for(var Oe=0;Oe<F.length;Oe++)this.trigger("change:"+F[Oe],this,le[F[Oe]],j)}if(z)return this;if(!Se)for(;this._pending;)j=this._pending,this._pending=!1,this.trigger("change",this,j);return this._pending=!1,this._changing=!1,this},unset:function(T,N){return this.set(T,void 0,Me.extend({},N,{unset:!0}))},clear:function(T){var N={};for(var j in this.attributes)N[j]=void 0;return this.set(N,Me.extend({},T,{unset:!0}))},hasChanged:function(T){return null==T?!Me.isEmpty(this.changed):Me.has(this.changed,T)},changedAttributes:function(T){if(!T)return!!this.hasChanged()&&Me.clone(this.changed);var J,N=this._changing?this._previousAttributes:this.attributes,j={};for(var Te in T){var Se=T[Te];Me.isEqual(N[Te],Se)||(j[Te]=Se,J=!0)}return!!J&&j},previous:function(T){return null!=T&&this._previousAttributes?this._previousAttributes[T]:null},previousAttributes:function(){return Me.clone(this._previousAttributes)},fetch:function(T){T=Me.extend({parse:!0},T);var N=this,j=T.success;return T.success=function(J){var Te=T.parse?N.parse(J,T):J;if(!N.set(Te,T))return!1;j&&j.call(T.context,N,J,T),N.trigger("sync",N,J,T)},Gi(this,T),this.sync("read",this,T)},save:function(T,N,j){var J;null==T||"object"==typeof T?(J=T,j=N):(J={})[T]=N;var Te=(j=Me.extend({validate:!0,parse:!0},j)).wait;if(J&&!Te){if(!this.set(J,j))return!1}else if(!this._validate(J,j))return!1;var Se=this,F=j.success,z=this.attributes;j.success=function(X){Se.attributes=z;var ye=j.parse?Se.parse(X,j):X;if(Te&&(ye=Me.extend({},J,ye)),ye&&!Se.set(ye,j))return!1;F&&F.call(j.context,Se,X,j),Se.trigger("sync",Se,X,j)},Gi(this,j),J&&Te&&(this.attributes=Me.extend({},z,J));var le=this.isNew()?"create":j.patch?"patch":"update";"patch"===le&&!j.attrs&&(j.attrs=J);var se=this.sync(le,this,j);return this.attributes=z,se},destroy:function(T){T=T?Me.clone(T):{};var N=this,j=T.success,J=T.wait,Te=function(){N.stopListening(),N.trigger("destroy",N,N.collection,T)};T.success=function(F){J&&Te(),j&&j.call(T.context,N,F,T),N.isNew()||N.trigger("sync",N,F,T)};var Se=!1;return this.isNew()?Me.defer(T.success):(Gi(this,T),Se=this.sync("delete",this,T)),J||Te(),Se},url:function(){var T=Me.result(this,"urlRoot")||Me.result(this.collection,"url")||ai();if(this.isNew())return T;var N=this.get(this.idAttribute);return T.replace(/[^\/]$/,"$&/")+encodeURIComponent(N)},parse:function(T,N){return T},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(T){return this._validate({},Me.extend({},T,{validate:!0}))},_validate:function(T,N){if(!N.validate||!this.validate)return!0;T=Me.extend({},this.attributes,T);var j=this.validationError=this.validate(T,N)||null;return!j||(this.trigger("invalid",this,j,Me.extend(N,{validationError:j})),!1)}});var xr=it.Collection=function(T,N){N||(N={}),this.preinitialize.apply(this,arguments),N.model&&(this.model=N.model),void 0!==N.comparator&&(this.comparator=N.comparator),this._reset(),this.initialize.apply(this,arguments),T&&this.reset(T,Me.extend({silent:!0},N))},Wn={add:!0,remove:!0,merge:!0},ii={add:!0,remove:!1},y=function(T,N,j){j=Math.min(Math.max(j,0),T.length);var Se,J=Array(T.length-j),Te=N.length;for(Se=0;Se<J.length;Se++)J[Se]=T[Se+j];for(Se=0;Se<Te;Se++)T[Se+j]=N[Se];for(Se=0;Se<J.length;Se++)T[Se+Te+j]=J[Se]};Me.extend(xr.prototype,ot,{model:di,preinitialize:function(){},initialize:function(){},toJSON:function(T){return this.map(function(N){return N.toJSON(T)})},sync:function(){return it.sync.apply(this,arguments)},add:function(T,N){return this.set(T,Me.extend({merge:!1},N,ii))},remove:function(T,N){N=Me.extend({},N);var j=!Me.isArray(T);T=j?[T]:T.slice();var J=this._removeModels(T,N);return!N.silent&&J.length&&(N.changes={added:[],merged:[],removed:J},this.trigger("update",this,N)),j?J[0]:J},set:function(T,N){if(null!=T){(N=Me.extend({},Wn,N)).parse&&!this._isModel(T)&&(T=this.parse(T,N)||[]);var j=!Me.isArray(T);T=j?[T]:T.slice();var J=N.at;null!=J&&(J=+J),J>this.length&&(J=this.length),J<0&&(J+=this.length+1);var Ze,Ge,Te=[],Se=[],F=[],z=[],le={},se=N.add,X=N.merge,ye=N.remove,qe=!1,Oe=this.comparator&&null==J&&!1!==N.sort,vt=Me.isString(this.comparator)?this.comparator:null;for(Ge=0;Ge<T.length;Ge++){var yt=this.get(Ze=T[Ge]);if(yt){if(X&&Ze!==yt){var pt=this._isModel(Ze)?Ze.attributes:Ze;N.parse&&(pt=yt.parse(pt,N)),yt.set(pt,N),F.push(yt),Oe&&!qe&&(qe=yt.hasChanged(vt))}le[yt.cid]||(le[yt.cid]=!0,Te.push(yt)),T[Ge]=yt}else se&&(Ze=T[Ge]=this._prepareModel(Ze,N))&&(Se.push(Ze),this._addReference(Ze,N),le[Ze.cid]=!0,Te.push(Ze))}if(ye){for(Ge=0;Ge<this.length;Ge++)le[(Ze=this.models[Ge]).cid]||z.push(Ze);z.length&&this._removeModels(z,N)}var ct=!1;if(Te.length&&!Oe&&se&&ye?(ct=this.length!==Te.length||Me.some(this.models,function(ln,Bn){return ln!==Te[Bn]}),this.models.length=0,y(this.models,Te,0),this.length=this.models.length):Se.length&&(Oe&&(qe=!0),y(this.models,Se,J??this.length),this.length=this.models.length),qe&&this.sort({silent:!0}),!N.silent){for(Ge=0;Ge<Se.length;Ge++)null!=J&&(N.index=J+Ge),(Ze=Se[Ge]).trigger("add",Ze,this,N);(qe||ct)&&this.trigger("sort",this,N),(Se.length||z.length||F.length)&&(N.changes={added:Se,removed:z,merged:F},this.trigger("update",this,N))}return j?T[0]:T}},reset:function(T,N){N=N?Me.clone(N):{};for(var j=0;j<this.models.length;j++)this._removeReference(this.models[j],N);return N.previousModels=this.models,this._reset(),T=this.add(T,Me.extend({silent:!0},N)),N.silent||this.trigger("reset",this,N),T},push:function(T,N){return this.add(T,Me.extend({at:this.length},N))},pop:function(T){var N=this.at(this.length-1);return this.remove(N,T)},unshift:function(T,N){return this.add(T,Me.extend({at:0},N))},shift:function(T){var N=this.at(0);return this.remove(N,T)},slice:function(){return Qn.apply(this.models,arguments)},get:function(T){if(null!=T)return this._byId[T]||this._byId[this.modelId(this._isModel(T)?T.attributes:T,T.idAttribute)]||T.cid&&this._byId[T.cid]},has:function(T){return null!=this.get(T)},at:function(T){return T<0&&(T+=this.length),this.models[T]},where:function(T,N){return this[N?"find":"filter"](T)},findWhere:function(T){return this.where(T,!0)},sort:function(T){var N=this.comparator;if(!N)throw new Error("Cannot sort a set without a comparator");T||(T={});var j=N.length;return Me.isFunction(N)&&(N=N.bind(this)),1===j||Me.isString(N)?this.models=this.sortBy(N):this.models.sort(N),T.silent||this.trigger("sort",this,T),this},pluck:function(T){return this.map(T+"")},fetch:function(T){var N=(T=Me.extend({parse:!0},T)).success,j=this;return T.success=function(J){j[T.reset?"reset":"set"](J,T),N&&N.call(T.context,j,J,T),j.trigger("sync",j,J,T)},Gi(this,T),this.sync("read",this,T)},create:function(T,N){var j=(N=N?Me.clone(N):{}).wait;if(!(T=this._prepareModel(T,N)))return!1;j||this.add(T,N);var J=this,Te=N.success;return N.success=function(Se,F,z){j&&J.add(Se,z),Te&&Te.call(z.context,Se,F,z)},T.save(null,N),T},parse:function(T,N){return T},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(T,N){return T[N||this.model.prototype.idAttribute||"id"]},values:function(){return new Jt(this,bo)},keys:function(){return new Jt(this,mn)},entries:function(){return new Jt(this,qr)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(T,N){return this._isModel(T)?(T.collection||(T.collection=this),T):((N=N?Me.clone(N):{}).collection=this,(j=this.model.prototype?new this.model(T,N):this.model(T,N)).validationError?(this.trigger("invalid",this,j.validationError,N),!1):j);var j},_removeModels:function(T,N){for(var j=[],J=0;J<T.length;J++){var Te=this.get(T[J]);if(Te){var Se=this.indexOf(Te);this.models.splice(Se,1),this.length--,delete this._byId[Te.cid];var F=this.modelId(Te.attributes,Te.idAttribute);null!=F&&delete this._byId[F],N.silent||(N.index=Se,Te.trigger("remove",Te,this,N)),j.push(Te),this._removeReference(Te,N)}}return j},_isModel:function(T){return T instanceof di},_addReference:function(T,N){this._byId[T.cid]=T;var j=this.modelId(T.attributes,T.idAttribute);null!=j&&(this._byId[j]=T),T.on("all",this._onModelEvent,this)},_removeReference:function(T,N){delete this._byId[T.cid];var j=this.modelId(T.attributes,T.idAttribute);null!=j&&delete this._byId[j],this===T.collection&&delete T.collection,T.off("all",this._onModelEvent,this)},_onModelEvent:function(T,N,j,J){if(N){if(("add"===T||"remove"===T)&&j!==this)return;if("destroy"===T&&this.remove(N,J),"changeId"===T){var Te=this.modelId(N.previousAttributes(),N.idAttribute),Se=this.modelId(N.attributes,N.idAttribute);null!=Te&&delete this._byId[Te],null!=Se&&(this._byId[Se]=N)}}this.trigger.apply(this,arguments)}});var oi="function"==typeof Symbol&&Symbol.iterator;oi&&(xr.prototype[oi]=xr.prototype.values);var Jt=function(T,N){this._collection=T,this._kind=N,this._index=0},bo=1,mn=2,qr=3;oi&&(Jt.prototype[oi]=function(){return this}),Jt.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var N,T=this._collection.at(this._index);if(this._index++,this._kind===bo)N=T;else{var j=this._collection.modelId(T.attributes,T.idAttribute);N=this._kind===mn?j:[j,T]}return{value:N,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var Mt=it.View=function(T){this.cid=Me.uniqueId("view"),this.preinitialize.apply(this,arguments),Me.extend(this,Me.pick(T,Zr)),this._ensureElement(),this.initialize.apply(this,arguments)},Wr=/^(\S+)\s*(.*)$/,Zr=["model","collection","el","id","attributes","className","tagName","events"];Me.extend(Mt.prototype,ot,{tagName:"div",$:function(T){return this.$el.find(T)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(T){return this.undelegateEvents(),this._setElement(T),this.delegateEvents(),this},_setElement:function(T){this.$el=T instanceof it.$?T:it.$(T),this.el=this.$el[0]},delegateEvents:function(T){if(T||(T=Me.result(this,"events")),!T)return this;for(var N in this.undelegateEvents(),T){var j=T[N];if(Me.isFunction(j)||(j=this[j]),j){var J=N.match(Wr);this.delegate(J[1],J[2],j.bind(this))}}return this},delegate:function(T,N,j){return this.$el.on(T+".delegateEvents"+this.cid,N,j),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(T,N,j){return this.$el.off(T+".delegateEvents"+this.cid,N,j),this},_createElement:function(T){return document.createElement(T)},_ensureElement:function(){if(this.el)this.setElement(Me.result(this,"el"));else{var T=Me.extend({},Me.result(this,"attributes"));this.id&&(T.id=Me.result(this,"id")),this.className&&(T.class=Me.result(this,"className")),this.setElement(this._createElement(Me.result(this,"tagName"))),this._setAttributes(T)}},_setAttributes:function(T){this.$el.attr(T)}});var Nr=function(T,N,j,J){Me.each(j,function(Te,Se){N[Se]&&(T.prototype[Se]=function(T,N,j,J){switch(N){case 1:return function(){return T[j](this[J])};case 2:return function(Te){return T[j](this[J],Te)};case 3:return function(Te,Se){return T[j](this[J],Eo(Te,this),Se)};case 4:return function(Te,Se,F){return T[j](this[J],Eo(Te,this),Se,F)};default:return function(){var Te=Qn.call(arguments);return Te.unshift(this[J]),T[j].apply(T,Te)}}}(N,Te,Se,J))})},Eo=function(T,N){return Me.isFunction(T)?T:Me.isObject(T)&&!N._isModel(T)?$i(T):Me.isString(T)?function(j){return j.get(T)}:T},$i=function(T){var N=Me.matches(T);return function(j){return N(j.attributes)}};Me.each([[xr,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[di,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(T){var N=T[0],j=T[1],J=T[2];N.mixin=function(Te){var Se=Me.reduce(Me.functions(Te),function(F,z){return F[z]=0,F},{});Nr(N,Te,Se,J)},Nr(N,Me,j,J)}),it.sync=function(T,N,j){var J=yr[T];Me.defaults(j||(j={}),{emulateHTTP:it.emulateHTTP,emulateJSON:it.emulateJSON});var Te={type:J,dataType:"json"};if(j.url||(Te.url=Me.result(N,"url")||ai()),null==j.data&&N&&("create"===T||"update"===T||"patch"===T)&&(Te.contentType="application/json",Te.data=JSON.stringify(j.attrs||N.toJSON(j))),j.emulateJSON&&(Te.contentType="application/x-www-form-urlencoded",Te.data=Te.data?{model:Te.data}:{}),j.emulateHTTP&&("PUT"===J||"DELETE"===J||"PATCH"===J)){Te.type="POST",j.emulateJSON&&(Te.data._method=J);var Se=j.beforeSend;j.beforeSend=function(le){if(le.setRequestHeader("X-HTTP-Method-Override",J),Se)return Se.apply(this,arguments)}}"GET"!==Te.type&&!j.emulateJSON&&(Te.processData=!1);var F=j.error;j.error=function(le,se,X){j.textStatus=se,j.errorThrown=X,F&&F.call(j.context,le,se,X)};var z=j.xhr=it.ajax(Me.extend(Te,j));return N.trigger("request",N,z,j),z};var yr={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};it.ajax=function(){return it.$.ajax.apply(it.$,arguments)};var Ii=it.Router=function(T){T||(T={}),this.preinitialize.apply(this,arguments),T.routes&&(this.routes=T.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},Do=/\((.*?)\)/g,ko=/(\(\?)?:\w+/g,Es=/\*\w+/g,Lo=/[\-{}\[\]+?.,\\\^$|#\s]/g;Me.extend(Ii.prototype,ot,{preinitialize:function(){},initialize:function(){},route:function(T,N,j){Me.isRegExp(T)||(T=this._routeToRegExp(T)),Me.isFunction(N)&&(j=N,N=""),j||(j=this[N]);var J=this;return it.history.route(T,function(Te){var Se=J._extractParameters(T,Te);!1!==J.execute(j,Se,N)&&(J.trigger.apply(J,["route:"+N].concat(Se)),J.trigger("route",N,Se),it.history.trigger("route",J,N,Se))}),this},execute:function(T,N,j){T&&T.apply(this,N)},navigate:function(T,N){return it.history.navigate(T,N),this},_bindRoutes:function(){if(this.routes){this.routes=Me.result(this,"routes");for(var T,N=Me.keys(this.routes);null!=(T=N.pop());)this.route(T,this.routes[T])}},_routeToRegExp:function(T){return T=T.replace(Lo,"\\$&").replace(Do,"(?:$1)?").replace(ko,function(N,j){return j?N:"([^/?]+)"}).replace(Es,"([^?]*?)"),new RegExp("^"+T+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(T,N){var j=T.exec(N).slice(1);return Me.map(j,function(J,Te){return Te===j.length-1?J||null:J?decodeURIComponent(J):null})}});var wr=it.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},si=/^[#\/]|\s+$/g,Hr=/^\/+|\/+$/g,Fo=/#.*$/;wr.started=!1,Me.extend(wr.prototype,ot,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(T){return decodeURI(T.replace(/%25/g,"%2525"))},getSearch:function(){var T=this.location.href.replace(/#.*/,"").match(/\?.+/);return T?T[0]:""},getHash:function(T){var N=(T||this).location.href.match(/#(.*)$/);return N?N[1]:""},getPath:function(){var T=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===T.charAt(0)?T.slice(1):T},getFragment:function(T){return null==T&&(T=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),T.replace(si,"")},start:function(T){if(wr.started)throw new Error("Backbone.history has already been started");if(wr.started=!0,this.options=Me.extend({root:"/"},this.options,T),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Hr,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var N=this.root.slice(0,-1)||"/";return this.location.replace(N+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var j=document.body,J=j.insertBefore(this.iframe,j.firstChild).contentWindow;J.document.open(),J.document.close(),J.location.hash="#"+this.fragment}var Te=window.addEventListener||function(Se,F){return attachEvent("on"+Se,F)};if(this._usePushState?Te("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?Te("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var T=window.removeEventListener||function(N,j){return detachEvent("on"+N,j)};this._usePushState?T("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&T("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),wr.started=!1},route:function(T,N){this.handlers.unshift({route:T,callback:N})},checkUrl:function(T){var N=this.getFragment();if(N===this.fragment&&this.iframe&&(N=this.getHash(this.iframe.contentWindow)),N===this.fragment)return!1;this.iframe&&this.navigate(N),this.loadUrl()},loadUrl:function(T){return!!this.matchRoot()&&(T=this.fragment=this.getFragment(T),Me.some(this.handlers,function(N){if(N.route.test(T))return N.callback(T),!0}))},navigate:function(T,N){if(!wr.started)return!1;(!N||!0===N)&&(N={trigger:!!N}),T=this.getFragment(T||"");var j=this.root;(""===T||"?"===T.charAt(0))&&(j=j.slice(0,-1)||"/");var J=j+T;T=T.replace(Fo,"");var Te=this.decodeFragment(T);if(this.fragment!==Te){if(this.fragment=Te,this._usePushState)this.history[N.replace?"replaceState":"pushState"]({},document.title,J);else{if(!this._wantsHashChange)return this.location.assign(J);if(this._updateHash(this.location,T,N.replace),this.iframe&&T!==this.getHash(this.iframe.contentWindow)){var Se=this.iframe.contentWindow;N.replace||(Se.document.open(),Se.document.close()),this._updateHash(Se.location,T,N.replace)}}if(N.trigger)return this.loadUrl(T)}},_updateHash:function(T,N,j){if(j){var J=T.href.replace(/(javascript:|#).*$/,"");T.replace(J+"#"+N)}else T.hash="#"+N}}),it.history=new wr;di.extend=xr.extend=Ii.extend=Mt.extend=wr.extend=function(T,N){var J,j=this;return J=T&&Me.has(T,"constructor")?T.constructor:function(){return j.apply(this,arguments)},Me.extend(J,j,N),J.prototype=Me.create(j.prototype,T),J.prototype.constructor=J,J.__super__=j.prototype,J};var ai=function(){throw new Error('A "url" property or function must be specified')},Gi=function(T,N){var j=N.error;N.error=function(J){j&&j.call(N.context,T,J,N),T.trigger("error",T,J,N)}};return it}(it,ot,Tr,Qn)}.apply(fr,Si))&&(Gn.exports=gt)},276:function(Gn,fr){var Si;!function(gt,Pr){"use strict";"object"==typeof Gn.exports?Gn.exports=gt.document?Pr(gt,!0):function(it){if(!it.document)throw new Error("jQuery requires a window with a document");return Pr(it)}:Pr(gt)}(typeof window<"u"?window:this,function(gt,Pr){"use strict";var it=[],Me=Object.getPrototypeOf,Xn=it.slice,Tr=it.flat?function(l){return it.flat.call(l)}:function(l){return it.concat.apply([],l)},Qn=it.push,ot=it.indexOf,Gr={},vr=Gr.toString,Dt=Gr.hasOwnProperty,_n=Dt.toString,Ui=_n.call(Object),et={},kt=function(h){return"function"==typeof h&&"number"!=typeof h.nodeType&&"function"!=typeof h.item},ri=function(h){return null!=h&&h===h.window},bt=gt.document,so={type:!0,src:!0,nonce:!0,noModule:!0};function di(l,h,g){var v,_,C=(g=g||bt).createElement("script");if(C.text=l,h)for(v in so)(_=h[v]||h.getAttribute&&h.getAttribute(v))&&C.setAttribute(v,_);g.head.appendChild(C).parentNode.removeChild(C)}function xr(l){return null==l?l+"":"object"==typeof l||"function"==typeof l?Gr[vr.call(l)]||"object":typeof l}var ii=/HTML$/i,y=function(l,h){return new y.fn.init(l,h)};function oi(l){var h=!!l&&"length"in l&&l.length,g=xr(l);return!kt(l)&&!ri(l)&&("array"===g||0===h||"number"==typeof h&&h>0&&h-1 in l)}function Jt(l,h){return l.nodeName&&l.nodeName.toLowerCase()===h.toLowerCase()}y.fn=y.prototype={jquery:"3.7.1",constructor:y,length:0,toArray:function(){return Xn.call(this)},get:function(l){return null==l?Xn.call(this):l<0?this[l+this.length]:this[l]},pushStack:function(l){var h=y.merge(this.constructor(),l);return h.prevObject=this,h},each:function(l){return y.each(this,l)},map:function(l){return this.pushStack(y.map(this,function(h,g){return l.call(h,g,h)}))},slice:function(){return this.pushStack(Xn.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(y.grep(this,function(l,h){return(h+1)%2}))},odd:function(){return this.pushStack(y.grep(this,function(l,h){return h%2}))},eq:function(l){var h=this.length,g=+l+(l<0?h:0);return this.pushStack(g>=0&&g<h?[this[g]]:[])},end:function(){return this.prevObject||this.constructor()},push:Qn,sort:it.sort,splice:it.splice},y.extend=y.fn.extend=function(){var l,h,g,v,_,C,A=arguments[0]||{},U=1,H=arguments.length,G=!1;for("boolean"==typeof A&&(G=A,A=arguments[U]||{},U++),"object"!=typeof A&&!kt(A)&&(A={}),U===H&&(A=this,U--);U<H;U++)if(null!=(l=arguments[U]))for(h in l)v=l[h],"__proto__"!==h&&A!==v&&(G&&v&&(y.isPlainObject(v)||(_=Array.isArray(v)))?(g=A[h],C=_&&!Array.isArray(g)?[]:_||y.isPlainObject(g)?g:{},_=!1,A[h]=y.extend(G,C,v)):void 0!==v&&(A[h]=v));return A},y.extend({expando:"jQuery"+("3.7.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(l){throw new Error(l)},noop:function(){},isPlainObject:function(l){var h,g;return!(!l||"[object Object]"!==vr.call(l)||(h=Me(l))&&("function"!=typeof(g=Dt.call(h,"constructor")&&h.constructor)||_n.call(g)!==Ui))},isEmptyObject:function(l){var h;for(h in l)return!1;return!0},globalEval:function(l,h,g){di(l,{nonce:h&&h.nonce},g)},each:function(l,h){var g,v=0;if(oi(l))for(g=l.length;v<g&&!1!==h.call(l[v],v,l[v]);v++);else for(v in l)if(!1===h.call(l[v],v,l[v]))break;return l},text:function(l){var h,g="",v=0,_=l.nodeType;if(!_)for(;h=l[v++];)g+=y.text(h);return 1===_||11===_?l.textContent:9===_?l.documentElement.textContent:3===_||4===_?l.nodeValue:g},makeArray:function(l,h){var g=h||[];return null!=l&&(oi(Object(l))?y.merge(g,"string"==typeof l?[l]:l):Qn.call(g,l)),g},inArray:function(l,h,g){return null==h?-1:ot.call(h,l,g)},isXMLDoc:function(l){var g=l&&(l.ownerDocument||l).documentElement;return!ii.test(l&&l.namespaceURI||g&&g.nodeName||"HTML")},merge:function(l,h){for(var g=+h.length,v=0,_=l.length;v<g;v++)l[_++]=h[v];return l.length=_,l},grep:function(l,h,g){for(var _=[],C=0,A=l.length,U=!g;C<A;C++)!h(l[C],C)!==U&&_.push(l[C]);return _},map:function(l,h,g){var v,_,C=0,A=[];if(oi(l))for(v=l.length;C<v;C++)null!=(_=h(l[C],C,g))&&A.push(_);else for(C in l)null!=(_=h(l[C],C,g))&&A.push(_);return Tr(A)},guid:1,support:et}),"function"==typeof Symbol&&(y.fn[Symbol.iterator]=it[Symbol.iterator]),y.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(l,h){Gr["[object "+h+"]"]=h.toLowerCase()});var bo=it.pop,mn=it.sort,qr=it.splice,Mt="[\\x20\\t\\r\\n\\f]",Wr=new RegExp("^"+Mt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Mt+"+$","g");y.contains=function(l,h){var g=h&&h.parentNode;return l===g||!(!g||1!==g.nodeType||!(l.contains?l.contains(g):l.compareDocumentPosition&&16&l.compareDocumentPosition(g)))};var Zr=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function bs(l,h){return h?"\0"===l?"\ufffd":l.slice(0,-1)+"\\"+l.charCodeAt(l.length-1).toString(16)+" ":"\\"+l}y.escapeSelector=function(l){return(l+"").replace(Zr,bs)};var Nr=bt,Eo=Qn;!function(){var l,h,g,v,_,A,U,H,G,me,C=Eo,ge=y.expando,ae=0,Re=0,Nt=te(),tn=te(),ke=te(),Un=te(),rr=function(k,Q){return k===Q&&(_=!0),0},co="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Oi="(?:\\\\[\\da-fA-F]{1,6}"+Mt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Ae="\\["+Mt+"*("+Oi+")(?:"+Mt+"*([*^$|!~]?=)"+Mt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Oi+"))|)"+Mt+"*\\]",yi=":("+Oi+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Ae+")*)|.*)\\)|)",qt=new RegExp(Mt+"+","g"),zn=new RegExp("^"+Mt+"*,"+Mt+"*"),jo=new RegExp("^"+Mt+"*([>+~]|"+Mt+")"+Mt+"*"),Uo=new RegExp(Mt+"|>"),Er=new RegExp(yi),lo=new RegExp("^"+Oi+"$"),Ri={ID:new RegExp("^#("+Oi+")"),CLASS:new RegExp("^\\.("+Oi+")"),TAG:new RegExp("^("+Oi+"|[*])"),ATTR:new RegExp("^"+Ae),PSEUDO:new RegExp("^"+yi),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Mt+"*(even|odd|(([+-]|)(\\d*)n|)"+Mt+"*(?:([+-]|)"+Mt+"*(\\d+)|))"+Mt+"*\\)|)","i"),bool:new RegExp("^(?:"+co+")$","i"),needsContext:new RegExp("^"+Mt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Mt+"*((?:-\\d)?\\d*)"+Mt+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,Yt=/^h\d$/i,wi=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Qa=/[+~]/,Wi=new RegExp("\\\\[\\da-fA-F]{1,6}"+Mt+"?|\\\\([^\\r\\n\\f])","g"),$o=function(k,Q){var ue="0x"+k.slice(1)-65536;return Q||(ue<0?String.fromCharCode(ue+65536):String.fromCharCode(ue>>10|55296,1023&ue|56320))},E=function(){zo()},I=Et(function(k){return!0===k.disabled&&Jt(k,"fieldset")},{dir:"parentNode",next:"legend"});try{C.apply(it=Xn.call(Nr.childNodes),Nr.childNodes)}catch{C={apply:function(Q,ue){Eo.apply(Q,Xn.call(ue))},call:function(Q){Eo.apply(Q,Xn.call(arguments,1))}}}function B(k,Q,ue,de){var _e,je,Qe,at,Pe,sn,Ot,dt=Q&&Q.ownerDocument,cn=Q?Q.nodeType:9;if(ue=ue||[],"string"!=typeof k||!k||1!==cn&&9!==cn&&11!==cn)return ue;if(!de&&(zo(Q),Q=Q||A,H)){if(11!==cn&&(Pe=wi.exec(k)))if(_e=Pe[1]){if(9===cn){if(!(Qe=Q.getElementById(_e)))return ue;if(Qe.id===_e)return C.call(ue,Qe),ue}else if(dt&&(Qe=dt.getElementById(_e))&&B.contains(Q,Qe)&&Qe.id===_e)return C.call(ue,Qe),ue}else{if(Pe[2])return C.apply(ue,Q.getElementsByTagName(k)),ue;if((_e=Pe[3])&&Q.getElementsByClassName)return C.apply(ue,Q.getElementsByClassName(_e)),ue}if(!(Un[k+" "]||G&&G.test(k))){if(Ot=k,dt=Q,1===cn&&(Uo.test(k)||jo.test(k))){for(((dt=Qa.test(k)&&Or(Q.parentNode)||Q)!=Q||!et.scope)&&((at=Q.getAttribute("id"))?at=y.escapeSelector(at):Q.setAttribute("id",at=ge)),je=(sn=ku(k)).length;je--;)sn[je]=(at?"#"+at:":scope")+" "+Xr(sn[je]);Ot=sn.join(",")}try{return C.apply(ue,dt.querySelectorAll(Ot)),ue}catch{Un(k,!0)}finally{at===ge&&Q.removeAttribute("id")}}}return eu(k.replace(Wr,"$1"),Q,ue,de)}function te(){var k=[];return function Q(ue,de){return k.push(ue+" ")>h.cacheLength&&delete Q[k.shift()],Q[ue+" "]=de}}function K(k){return k[ge]=!0,k}function we(k){var Q=A.createElement("fieldset");try{return!!k(Q)}catch{return!1}finally{Q.parentNode&&Q.parentNode.removeChild(Q),Q=null}}function $e(k){return function(Q){return Jt(Q,"input")&&Q.type===k}}function $t(k){return function(Q){return(Jt(Q,"input")||Jt(Q,"button"))&&Q.type===k}}function Ft(k){return function(Q){return"form"in Q?Q.parentNode&&!1===Q.disabled?"label"in Q?"label"in Q.parentNode?Q.parentNode.disabled===k:Q.disabled===k:Q.isDisabled===k||Q.isDisabled!==!k&&I(Q)===k:Q.disabled===k:"label"in Q&&Q.disabled===k}}function Jn(k){return K(function(Q){return Q=+Q,K(function(ue,de){for(var _e,je=k([],ue.length,Q),Qe=je.length;Qe--;)ue[_e=je[Qe]]&&(ue[_e]=!(de[_e]=ue[_e]))})})}function Or(k){return k&&typeof k.getElementsByTagName<"u"&&k}function zo(k){var Q,ue=k?k.ownerDocument||k:Nr;return ue==A||9!==ue.nodeType||!ue.documentElement||(U=(A=ue).documentElement,H=!y.isXMLDoc(A),me=U.matches||U.webkitMatchesSelector||U.msMatchesSelector,U.msMatchesSelector&&Nr!=A&&(Q=A.defaultView)&&Q.top!==Q&&Q.addEventListener("unload",E),et.getById=we(function(de){return U.appendChild(de).id=y.expando,!A.getElementsByName||!A.getElementsByName(y.expando).length}),et.disconnectedMatch=we(function(de){return me.call(de,"*")}),et.scope=we(function(){return A.querySelectorAll(":scope")}),et.cssHas=we(function(){try{return A.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),et.getById?(h.filter.ID=function(de){var _e=de.replace(Wi,$o);return function(je){return je.getAttribute("id")===_e}},h.find.ID=function(de,_e){if(typeof _e.getElementById<"u"&&H){var je=_e.getElementById(de);return je?[je]:[]}}):(h.filter.ID=function(de){var _e=de.replace(Wi,$o);return function(je){var Qe=typeof je.getAttributeNode<"u"&&je.getAttributeNode("id");return Qe&&Qe.value===_e}},h.find.ID=function(de,_e){if(typeof _e.getElementById<"u"&&H){var je,Qe,at,Pe=_e.getElementById(de);if(Pe){if((je=Pe.getAttributeNode("id"))&&je.value===de)return[Pe];for(at=_e.getElementsByName(de),Qe=0;Pe=at[Qe++];)if((je=Pe.getAttributeNode("id"))&&je.value===de)return[Pe]}return[]}}),h.find.TAG=function(de,_e){return typeof _e.getElementsByTagName<"u"?_e.getElementsByTagName(de):_e.querySelectorAll(de)},h.find.CLASS=function(de,_e){if(typeof _e.getElementsByClassName<"u"&&H)return _e.getElementsByClassName(de)},G=[],we(function(de){var _e;U.appendChild(de).innerHTML="<a id='"+ge+"' href='' disabled='disabled'></a><select id='"+ge+"-\r\\' disabled='disabled'><option selected=''></option></select>",de.querySelectorAll("[selected]").length||G.push("\\["+Mt+"*(?:value|"+co+")"),de.querySelectorAll("[id~="+ge+"-]").length||G.push("~="),de.querySelectorAll("a#"+ge+"+*").length||G.push(".#.+[+~]"),de.querySelectorAll(":checked").length||G.push(":checked"),(_e=A.createElement("input")).setAttribute("type","hidden"),de.appendChild(_e).setAttribute("name","D"),U.appendChild(de).disabled=!0,2!==de.querySelectorAll(":disabled").length&&G.push(":enabled",":disabled"),(_e=A.createElement("input")).setAttribute("name",""),de.appendChild(_e),de.querySelectorAll("[name='']").length||G.push("\\["+Mt+"*name"+Mt+"*="+Mt+"*(?:''|\"\")")}),et.cssHas||G.push(":has"),G=G.length&&new RegExp(G.join("|")),rr=function(de,_e){if(de===_e)return _=!0,0;var je=!de.compareDocumentPosition-!_e.compareDocumentPosition;return je||(1&(je=(de.ownerDocument||de)==(_e.ownerDocument||_e)?de.compareDocumentPosition(_e):1)||!et.sortDetached&&_e.compareDocumentPosition(de)===je?de===A||de.ownerDocument==Nr&&B.contains(Nr,de)?-1:_e===A||_e.ownerDocument==Nr&&B.contains(Nr,_e)?1:v?ot.call(v,de)-ot.call(v,_e):0:4&je?-1:1)}),A}for(l in B.matches=function(k,Q){return B(k,null,null,Q)},B.matchesSelector=function(k,Q){if(zo(k),H&&!Un[Q+" "]&&(!G||!G.test(Q)))try{var ue=me.call(k,Q);if(ue||et.disconnectedMatch||k.document&&11!==k.document.nodeType)return ue}catch{Un(Q,!0)}return B(Q,A,null,[k]).length>0},B.contains=function(k,Q){return(k.ownerDocument||k)!=A&&zo(k),y.contains(k,Q)},B.attr=function(k,Q){(k.ownerDocument||k)!=A&&zo(k);var ue=h.attrHandle[Q.toLowerCase()],de=ue&&Dt.call(h.attrHandle,Q.toLowerCase())?ue(k,Q,!H):void 0;return void 0!==de?de:k.getAttribute(Q)},B.error=function(k){throw new Error("Syntax error, unrecognized expression: "+k)},y.uniqueSort=function(k){var Q,ue=[],de=0,_e=0;if(_=!et.sortStable,v=!et.sortStable&&Xn.call(k,0),mn.call(k,rr),_){for(;Q=k[_e++];)Q===k[_e]&&(de=ue.push(_e));for(;de--;)qr.call(k,ue[de],1)}return v=null,k},y.fn.uniqueSort=function(){return this.pushStack(y.uniqueSort(Xn.apply(this)))},(h=y.expr={cacheLength:50,createPseudo:K,match:Ri,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(k){return k[1]=k[1].replace(Wi,$o),k[3]=(k[3]||k[4]||k[5]||"").replace(Wi,$o),"~="===k[2]&&(k[3]=" "+k[3]+" "),k.slice(0,4)},CHILD:function(k){return k[1]=k[1].toLowerCase(),"nth"===k[1].slice(0,3)?(k[3]||B.error(k[0]),k[4]=+(k[4]?k[5]+(k[6]||1):2*("even"===k[3]||"odd"===k[3])),k[5]=+(k[7]+k[8]||"odd"===k[3])):k[3]&&B.error(k[0]),k},PSEUDO:function(k){var Q,ue=!k[6]&&k[2];return Ri.CHILD.test(k[0])?null:(k[3]?k[2]=k[4]||k[5]||"":ue&&Er.test(ue)&&(Q=ku(ue,!0))&&(Q=ue.indexOf(")",ue.length-Q)-ue.length)&&(k[0]=k[0].slice(0,Q),k[2]=ue.slice(0,Q)),k.slice(0,3))}},filter:{TAG:function(k){var Q=k.replace(Wi,$o).toLowerCase();return"*"===k?function(){return!0}:function(ue){return Jt(ue,Q)}},CLASS:function(k){var Q=Nt[k+" "];return Q||(Q=new RegExp("(^|"+Mt+")"+k+"("+Mt+"|$)"))&&Nt(k,function(ue){return Q.test("string"==typeof ue.className&&ue.className||typeof ue.getAttribute<"u"&&ue.getAttribute("class")||"")})},ATTR:function(k,Q,ue){return function(de){var _e=B.attr(de,k);return null==_e?"!="===Q:!Q||(_e+="","="===Q?_e===ue:"!="===Q?_e!==ue:"^="===Q?ue&&0===_e.indexOf(ue):"*="===Q?ue&&_e.indexOf(ue)>-1:"$="===Q?ue&&_e.slice(-ue.length)===ue:"~="===Q?(" "+_e.replace(qt," ")+" ").indexOf(ue)>-1:"|="===Q&&(_e===ue||_e.slice(0,ue.length+1)===ue+"-"))}},CHILD:function(k,Q,ue,de,_e){var je="nth"!==k.slice(0,3),Qe="last"!==k.slice(-4),at="of-type"===Q;return 1===de&&0===_e?function(Pe){return!!Pe.parentNode}:function(Pe,sn,Ot){var dt,cn,_t,Ct,Zi,bi=je!==Qe?"nextSibling":"previousSibling",ft=Pe.parentNode,fo=at&&Pe.nodeName.toLowerCase(),Ts=!Ot&&!at,li=!1;if(ft){if(je){for(;bi;){for(_t=Pe;_t=_t[bi];)if(at?Jt(_t,fo):1===_t.nodeType)return!1;Zi=bi="only"===k&&!Zi&&"nextSibling"}return!0}if(Zi=[Qe?ft.firstChild:ft.lastChild],Qe&&Ts){for(li=(Ct=(dt=(cn=ft[ge]||(ft[ge]={}))[k]||[])[0]===ae&&dt[1])&&dt[2],_t=Ct&&ft.childNodes[Ct];_t=++Ct&&_t&&_t[bi]||(li=Ct=0)||Zi.pop();)if(1===_t.nodeType&&++li&&_t===Pe){cn[k]=[ae,Ct,li];break}}else if(Ts&&(li=Ct=(dt=(cn=Pe[ge]||(Pe[ge]={}))[k]||[])[0]===ae&&dt[1]),!1===li)for(;(_t=++Ct&&_t&&_t[bi]||(li=Ct=0)||Zi.pop())&&(!(at?Jt(_t,fo):1===_t.nodeType)||!++li||(Ts&&((cn=_t[ge]||(_t[ge]={}))[k]=[ae,li]),_t!==Pe)););return(li-=_e)===de||li%de==0&&li/de>=0}}},PSEUDO:function(k,Q){var ue,de=h.pseudos[k]||h.setFilters[k.toLowerCase()]||B.error("unsupported pseudo: "+k);return de[ge]?de(Q):de.length>1?(ue=[k,k,"",Q],h.setFilters.hasOwnProperty(k.toLowerCase())?K(function(_e,je){for(var Qe,at=de(_e,Q),Pe=at.length;Pe--;)_e[Qe=ot.call(_e,at[Pe])]=!(je[Qe]=at[Pe])}):function(_e){return de(_e,0,ue)}):de}},pseudos:{not:K(function(k){var Q=[],ue=[],de=Ja(k.replace(Wr,"$1"));return de[ge]?K(function(_e,je,Qe,at){for(var Pe,sn=de(_e,null,at,[]),Ot=_e.length;Ot--;)(Pe=sn[Ot])&&(_e[Ot]=!(je[Ot]=Pe))}):function(_e,je,Qe){return Q[0]=_e,de(Q,null,Qe,ue),Q[0]=null,!ue.pop()}}),has:K(function(k){return function(Q){return B(k,Q).length>0}}),contains:K(function(k){return k=k.replace(Wi,$o),function(Q){return(Q.textContent||y.text(Q)).indexOf(k)>-1}}),lang:K(function(k){return lo.test(k||"")||B.error("unsupported lang: "+k),k=k.replace(Wi,$o).toLowerCase(),function(Q){var ue;do{if(ue=H?Q.lang:Q.getAttribute("xml:lang")||Q.getAttribute("lang"))return(ue=ue.toLowerCase())===k||0===ue.indexOf(k+"-")}while((Q=Q.parentNode)&&1===Q.nodeType);return!1}}),target:function(k){var Q=gt.location&&gt.location.hash;return Q&&Q.slice(1)===k.id},root:function(k){return k===U},focus:function(k){return k===function L(){try{return A.activeElement}catch{}}()&&A.hasFocus()&&!!(k.type||k.href||~k.tabIndex)},enabled:Ft(!1),disabled:Ft(!0),checked:function(k){return Jt(k,"input")&&!!k.checked||Jt(k,"option")&&!!k.selected},selected:function(k){return!0===k.selected},empty:function(k){for(k=k.firstChild;k;k=k.nextSibling)if(k.nodeType<6)return!1;return!0},parent:function(k){return!h.pseudos.empty(k)},header:function(k){return Yt.test(k.nodeName)},input:function(k){return mt.test(k.nodeName)},button:function(k){return Jt(k,"input")&&"button"===k.type||Jt(k,"button")},text:function(k){var Q;return Jt(k,"input")&&"text"===k.type&&(null==(Q=k.getAttribute("type"))||"text"===Q.toLowerCase())},first:Jn(function(){return[0]}),last:Jn(function(k,Q){return[Q-1]}),eq:Jn(function(k,Q,ue){return[ue<0?ue+Q:ue]}),even:Jn(function(k,Q){for(var ue=0;ue<Q;ue+=2)k.push(ue);return k}),odd:Jn(function(k,Q){for(var ue=1;ue<Q;ue+=2)k.push(ue);return k}),lt:Jn(function(k,Q,ue){var de;for(de=ue<0?ue+Q:ue>Q?Q:ue;--de>=0;)k.push(de);return k}),gt:Jn(function(k,Q,ue){for(var de=ue<0?ue+Q:ue;++de<Q;)k.push(de);return k})}}).pseudos.nth=h.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})h.pseudos[l]=$e(l);for(l in{submit:!0,reset:!0})h.pseudos[l]=$t(l);function Ka(){}function ku(k,Q){var ue,de,_e,je,Qe,at,Pe,sn=tn[k+" "];if(sn)return Q?0:sn.slice(0);for(Qe=k,at=[],Pe=h.preFilter;Qe;){for(je in(!ue||(de=zn.exec(Qe)))&&(de&&(Qe=Qe.slice(de[0].length)||Qe),at.push(_e=[])),ue=!1,(de=jo.exec(Qe))&&(ue=de.shift(),_e.push({value:ue,type:de[0].replace(Wr," ")}),Qe=Qe.slice(ue.length)),h.filter)(de=Ri[je].exec(Qe))&&(!Pe[je]||(de=Pe[je](de)))&&(ue=de.shift(),_e.push({value:ue,type:je,matches:de}),Qe=Qe.slice(ue.length));if(!ue)break}return Q?Qe.length:Qe?B.error(k):tn(k,at).slice(0)}function Xr(k){for(var Q=0,ue=k.length,de="";Q<ue;Q++)de+=k[Q].value;return de}function Et(k,Q,ue){var de=Q.dir,_e=Q.next,je=_e||de,Qe=ue&&"parentNode"===je,at=Re++;return Q.first?function(Pe,sn,Ot){for(;Pe=Pe[de];)if(1===Pe.nodeType||Qe)return k(Pe,sn,Ot);return!1}:function(Pe,sn,Ot){var dt,cn,_t=[ae,at];if(Ot){for(;Pe=Pe[de];)if((1===Pe.nodeType||Qe)&&k(Pe,sn,Ot))return!0}else for(;Pe=Pe[de];)if(1===Pe.nodeType||Qe)if(cn=Pe[ge]||(Pe[ge]={}),_e&&Jt(Pe,_e))Pe=Pe[de]||Pe;else{if((dt=cn[je])&&dt[0]===ae&&dt[1]===at)return _t[2]=dt[2];if(cn[je]=_t,_t[2]=k(Pe,sn,Ot))return!0}return!1}}function jf(k){return k.length>1?function(Q,ue,de){for(var _e=k.length;_e--;)if(!k[_e](Q,ue,de))return!1;return!0}:k[0]}function ol(k,Q,ue,de,_e){for(var je,Qe=[],at=0,Pe=k.length,sn=null!=Q;at<Pe;at++)(je=k[at])&&(!ue||ue(je,de,_e))&&(Qe.push(je),sn&&Q.push(at));return Qe}function Uf(k,Q,ue,de,_e,je){return de&&!de[ge]&&(de=Uf(de)),_e&&!_e[ge]&&(_e=Uf(_e,je)),K(function(Qe,at,Pe,sn){var Ot,dt,cn,_t,Ct=[],Zi=[],bi=at.length,ft=Qe||function _0(k,Q,ue){for(var de=0,_e=Q.length;de<_e;de++)B(k,Q[de],ue);return ue}(Q||"*",Pe.nodeType?[Pe]:Pe,[]),fo=!k||!Qe&&Q?ft:ol(ft,Ct,k,Pe,sn);if(ue?ue(fo,_t=_e||(Qe?k:bi||de)?[]:at,Pe,sn):_t=fo,de)for(Ot=ol(_t,Zi),de(Ot,[],Pe,sn),dt=Ot.length;dt--;)(cn=Ot[dt])&&(_t[Zi[dt]]=!(fo[Zi[dt]]=cn));if(Qe){if(_e||k){if(_e){for(Ot=[],dt=_t.length;dt--;)(cn=_t[dt])&&Ot.push(fo[dt]=cn);_e(null,_t=[],Ot,sn)}for(dt=_t.length;dt--;)(cn=_t[dt])&&(Ot=_e?ot.call(Qe,cn):Ct[dt])>-1&&(Qe[Ot]=!(at[Ot]=cn))}}else _t=ol(_t===at?_t.splice(bi,_t.length):_t),_e?_e(null,at,_t,sn):C.apply(at,_t)})}function En(k){for(var Q,ue,de,_e=k.length,je=h.relative[k[0].type],Qe=je||h.relative[" "],at=je?1:0,Pe=Et(function(dt){return dt===Q},Qe,!0),sn=Et(function(dt){return ot.call(Q,dt)>-1},Qe,!0),Ot=[function(dt,cn,_t){var Ct=!je&&(_t||cn!=g)||((Q=cn).nodeType?Pe(dt,cn,_t):sn(dt,cn,_t));return Q=null,Ct}];at<_e;at++)if(ue=h.relative[k[at].type])Ot=[Et(jf(Ot),ue)];else{if((ue=h.filter[k[at].type].apply(null,k[at].matches))[ge]){for(de=++at;de<_e&&!h.relative[k[de].type];de++);return Uf(at>1&&jf(Ot),at>1&&Xr(k.slice(0,at-1).concat({value:" "===k[at-2].type?"*":""})).replace(Wr,"$1"),ue,at<de&&En(k.slice(at,de)),de<_e&&En(k=k.slice(de)),de<_e&&Xr(k))}Ot.push(ue)}return jf(Ot)}function Ja(k,Q){var ue,de=[],_e=[],je=ke[k+" "];if(!je){for(Q||(Q=ku(k)),ue=Q.length;ue--;)(je=En(Q[ue]))[ge]?de.push(je):_e.push(je);je=ke(k,function C0(k,Q){var ue=Q.length>0,de=k.length>0,_e=function(je,Qe,at,Pe,sn){var Ot,dt,cn,_t=0,Ct="0",Zi=je&&[],bi=[],ft=g,fo=je||de&&h.find.TAG("*",sn),Ts=ae+=null==ft?1:Math.random()||.1,li=fo.length;for(sn&&(g=Qe==A||Qe||sn);Ct!==li&&null!=(Ot=fo[Ct]);Ct++){if(de&&Ot){for(dt=0,!Qe&&Ot.ownerDocument!=A&&(zo(Ot),at=!H);cn=k[dt++];)if(cn(Ot,Qe||A,at)){C.call(Pe,Ot);break}sn&&(ae=Ts)}ue&&((Ot=!cn&&Ot)&&_t--,je&&Zi.push(Ot))}if(_t+=Ct,ue&&Ct!==_t){for(dt=0;cn=Q[dt++];)cn(Zi,bi,Qe,at);if(je){if(_t>0)for(;Ct--;)Zi[Ct]||bi[Ct]||(bi[Ct]=bo.call(Pe));bi=ol(bi)}C.apply(Pe,bi),sn&&!je&&bi.length>0&&_t+Q.length>1&&y.uniqueSort(Pe)}return sn&&(ae=Ts,g=ft),Zi};return ue?K(_e):_e}(_e,de)),je.selector=k}return je}function eu(k,Q,ue,de){var _e,je,Qe,at,Pe,sn="function"==typeof k&&k,Ot=!de&&ku(k=sn.selector||k);if(ue=ue||[],1===Ot.length){if((je=Ot[0]=Ot[0].slice(0)).length>2&&"ID"===(Qe=je[0]).type&&9===Q.nodeType&&H&&h.relative[je[1].type]){if(!(Q=(h.find.ID(Qe.matches[0].replace(Wi,$o),Q)||[])[0]))return ue;sn&&(Q=Q.parentNode),k=k.slice(je.shift().value.length)}for(_e=Ri.needsContext.test(k)?0:je.length;_e--&&!h.relative[at=(Qe=je[_e]).type];)if((Pe=h.find[at])&&(de=Pe(Qe.matches[0].replace(Wi,$o),Qa.test(je[0].type)&&Or(Q.parentNode)||Q))){if(je.splice(_e,1),!(k=de.length&&Xr(je)))return C.apply(ue,de),ue;break}}return(sn||Ja(k,Ot))(de,Q,!H,ue,!Q||Qa.test(k)&&Or(Q.parentNode)||Q),ue}Ka.prototype=h.filters=h.pseudos,h.setFilters=new Ka,et.sortStable=ge.split("").sort(rr).join("")===ge,zo(),et.sortDetached=we(function(k){return 1&k.compareDocumentPosition(A.createElement("fieldset"))}),y.find=B,y.expr[":"]=y.expr.pseudos,y.unique=y.uniqueSort,B.compile=Ja,B.select=eu,B.setDocument=zo,B.tokenize=ku,B.escape=y.escapeSelector,B.getText=y.text,B.isXML=y.isXMLDoc,B.selectors=y.expr,B.support=y.support,B.uniqueSort=y.uniqueSort}();var $i=function(l,h,g){for(var v=[],_=void 0!==g;(l=l[h])&&9!==l.nodeType;)if(1===l.nodeType){if(_&&y(l).is(g))break;v.push(l)}return v},zi=function(l,h){for(var g=[];l;l=l.nextSibling)1===l.nodeType&&l!==h&&g.push(l);return g},ur=y.expr.match.needsContext,yr=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Ii(l,h,g){return kt(h)?y.grep(l,function(v,_){return!!h.call(v,_,v)!==g}):h.nodeType?y.grep(l,function(v){return v===h!==g}):"string"!=typeof h?y.grep(l,function(v){return ot.call(h,v)>-1!==g}):y.filter(h,l,g)}y.filter=function(l,h,g){var v=h[0];return g&&(l=":not("+l+")"),1===h.length&&1===v.nodeType?y.find.matchesSelector(v,l)?[v]:[]:y.find.matches(l,y.grep(h,function(_){return 1===_.nodeType}))},y.fn.extend({find:function(l){var h,g,v=this.length,_=this;if("string"!=typeof l)return this.pushStack(y(l).filter(function(){for(h=0;h<v;h++)if(y.contains(_[h],this))return!0}));for(g=this.pushStack([]),h=0;h<v;h++)y.find(l,_[h],g);return v>1?y.uniqueSort(g):g},filter:function(l){return this.pushStack(Ii(this,l||[],!1))},not:function(l){return this.pushStack(Ii(this,l||[],!0))},is:function(l){return!!Ii(this,"string"==typeof l&&ur.test(l)?y(l):l||[],!1).length}});var Do,ko=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Es=y.fn.init=function(l,h,g){var v,_;if(!l)return this;if(g=g||Do,"string"==typeof l){if(!(v="<"===l[0]&&">"===l[l.length-1]&&l.length>=3?[null,l,null]:ko.exec(l))||!v[1]&&h)return!h||h.jquery?(h||g).find(l):this.constructor(h).find(l);if(v[1]){if(y.merge(this,y.parseHTML(v[1],(h=h instanceof y?h[0]:h)&&h.nodeType?h.ownerDocument||h:bt,!0)),yr.test(v[1])&&y.isPlainObject(h))for(v in h)kt(this[v])?this[v](h[v]):this.attr(v,h[v]);return this}return(_=bt.getElementById(v[2]))&&(this[0]=_,this.length=1),this}return l.nodeType?(this[0]=l,this.length=1,this):kt(l)?void 0!==g.ready?g.ready(l):l(y):y.makeArray(l,this)};Es.prototype=y.fn,Do=y(bt);var Lo=/^(?:parents|prev(?:Until|All))/,wr={children:!0,contents:!0,next:!0,prev:!0};function si(l,h){for(;(l=l[h])&&1!==l.nodeType;);return l}y.fn.extend({has:function(l){var h=y(l,this),g=h.length;return this.filter(function(){for(var v=0;v<g;v++)if(y.contains(this,h[v]))return!0})},closest:function(l,h){var g,v=0,_=this.length,C=[],A="string"!=typeof l&&y(l);if(!ur.test(l))for(;v<_;v++)for(g=this[v];g&&g!==h;g=g.parentNode)if(g.nodeType<11&&(A?A.index(g)>-1:1===g.nodeType&&y.find.matchesSelector(g,l))){C.push(g);break}return this.pushStack(C.length>1?y.uniqueSort(C):C)},index:function(l){return l?"string"==typeof l?ot.call(y(l),this[0]):ot.call(this,l.jquery?l[0]:l):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(l,h){return this.pushStack(y.uniqueSort(y.merge(this.get(),y(l,h))))},addBack:function(l){return this.add(null==l?this.prevObject:this.prevObject.filter(l))}}),y.each({parent:function(l){var h=l.parentNode;return h&&11!==h.nodeType?h:null},parents:function(l){return $i(l,"parentNode")},parentsUntil:function(l,h,g){return $i(l,"parentNode",g)},next:function(l){return si(l,"nextSibling")},prev:function(l){return si(l,"previousSibling")},nextAll:function(l){return $i(l,"nextSibling")},prevAll:function(l){return $i(l,"previousSibling")},nextUntil:function(l,h,g){return $i(l,"nextSibling",g)},prevUntil:function(l,h,g){return $i(l,"previousSibling",g)},siblings:function(l){return zi((l.parentNode||{}).firstChild,l)},children:function(l){return zi(l.firstChild)},contents:function(l){return null!=l.contentDocument&&Me(l.contentDocument)?l.contentDocument:(Jt(l,"template")&&(l=l.content||l),y.merge([],l.childNodes))}},function(l,h){y.fn[l]=function(g,v){var _=y.map(this,h,g);return"Until"!==l.slice(-5)&&(v=g),v&&"string"==typeof v&&(_=y.filter(v,_)),this.length>1&&(wr[l]||y.uniqueSort(_),Lo.test(l)&&_.reverse()),this.pushStack(_)}});var Hr=/[^\x20\t\r\n\f]+/g;function Ai(l){return l}function ai(l){throw l}function Gi(l,h,g,v){var _;try{l&&kt(_=l.promise)?_.call(l).done(h).fail(g):l&&kt(_=l.then)?_.call(l,h,g):h.apply(void 0,[l].slice(v))}catch(C){g.apply(void 0,[C])}}y.Callbacks=function(l){l="string"==typeof l?function Fo(l){var h={};return y.each(l.match(Hr)||[],function(g,v){h[v]=!0}),h}(l):y.extend({},l);var h,g,v,_,C=[],A=[],U=-1,H=function(){for(_=_||l.once,v=h=!0;A.length;U=-1)for(g=A.shift();++U<C.length;)!1===C[U].apply(g[0],g[1])&&l.stopOnFalse&&(U=C.length,g=!1);l.memory||(g=!1),h=!1,_&&(C=g?[]:"")},G={add:function(){return C&&(g&&!h&&(U=C.length-1,A.push(g)),function me(ge){y.each(ge,function(ae,Re){kt(Re)?(!l.unique||!G.has(Re))&&C.push(Re):Re&&Re.length&&"string"!==xr(Re)&&me(Re)})}(arguments),g&&!h&&H()),this},remove:function(){return y.each(arguments,function(me,ge){for(var ae;(ae=y.inArray(ge,C,ae))>-1;)C.splice(ae,1),ae<=U&&U--}),this},has:function(me){return me?y.inArray(me,C)>-1:C.length>0},empty:function(){return C&&(C=[]),this},disable:function(){return _=A=[],C=g="",this},disabled:function(){return!C},lock:function(){return _=A=[],!g&&!h&&(C=g=""),this},locked:function(){return!!_},fireWith:function(me,ge){return _||(ge=[me,(ge=ge||[]).slice?ge.slice():ge],A.push(ge),h||H()),this},fire:function(){return G.fireWith(this,arguments),this},fired:function(){return!!v}};return G},y.extend({Deferred:function(l){var h=[["notify","progress",y.Callbacks("memory"),y.Callbacks("memory"),2],["resolve","done",y.Callbacks("once memory"),y.Callbacks("once memory"),0,"resolved"],["reject","fail",y.Callbacks("once memory"),y.Callbacks("once memory"),1,"rejected"]],g="pending",v={state:function(){return g},always:function(){return _.done(arguments).fail(arguments),this},catch:function(C){return v.then(null,C)},pipe:function(){var C=arguments;return y.Deferred(function(A){y.each(h,function(U,H){var G=kt(C[H[4]])&&C[H[4]];_[H[1]](function(){var me=G&&G.apply(this,arguments);me&&kt(me.promise)?me.promise().progress(A.notify).done(A.resolve).fail(A.reject):A[H[0]+"With"](this,G?[me]:arguments)})}),C=null}).promise()},then:function(C,A,U){var H=0;function G(me,ge,ae,Re){return function(){var Nt=this,tn=arguments,ke=function(){var rr,co;if(!(me<H)){if((rr=ae.apply(Nt,tn))===ge.promise())throw new TypeError("Thenable self-resolution");kt(co=rr&&("object"==typeof rr||"function"==typeof rr)&&rr.then)?Re?co.call(rr,G(H,ge,Ai,Re),G(H,ge,ai,Re)):(H++,co.call(rr,G(H,ge,Ai,Re),G(H,ge,ai,Re),G(H,ge,Ai,ge.notifyWith))):(ae!==Ai&&(Nt=void 0,tn=[rr]),(Re||ge.resolveWith)(Nt,tn))}},Un=Re?ke:function(){try{ke()}catch(rr){y.Deferred.exceptionHook&&y.Deferred.exceptionHook(rr,Un.error),me+1>=H&&(ae!==ai&&(Nt=void 0,tn=[rr]),ge.rejectWith(Nt,tn))}};me?Un():(y.Deferred.getErrorHook?Un.error=y.Deferred.getErrorHook():y.Deferred.getStackHook&&(Un.error=y.Deferred.getStackHook()),gt.setTimeout(Un))}}return y.Deferred(function(me){h[0][3].add(G(0,me,kt(U)?U:Ai,me.notifyWith)),h[1][3].add(G(0,me,kt(C)?C:Ai)),h[2][3].add(G(0,me,kt(A)?A:ai))}).promise()},promise:function(C){return null!=C?y.extend(C,v):v}},_={};return y.each(h,function(C,A){var U=A[2],H=A[5];v[A[1]]=U.add,H&&U.add(function(){g=H},h[3-C][2].disable,h[3-C][3].disable,h[0][2].lock,h[0][3].lock),U.add(A[3].fire),_[A[0]]=function(){return _[A[0]+"With"](this===_?void 0:this,arguments),this},_[A[0]+"With"]=U.fireWith}),v.promise(_),l&&l.call(_,_),_},when:function(l){var h=arguments.length,g=h,v=Array(g),_=Xn.call(arguments),C=y.Deferred(),A=function(U){return function(H){v[U]=this,_[U]=arguments.length>1?Xn.call(arguments):H,--h||C.resolveWith(v,_)}};if(h<=1&&(Gi(l,C.done(A(g)).resolve,C.reject,!h),"pending"===C.state()||kt(_[g]&&_[g].then)))return C.then();for(;g--;)Gi(_[g],A(g),C.reject);return C.promise()}});var T=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;y.Deferred.exceptionHook=function(l,h){gt.console&&gt.console.warn&&l&&T.test(l.name)&&gt.console.warn("jQuery.Deferred exception: "+l.message,l.stack,h)},y.readyException=function(l){gt.setTimeout(function(){throw l})};var N=y.Deferred();function j(){bt.removeEventListener("DOMContentLoaded",j),gt.removeEventListener("load",j),y.ready()}y.fn.ready=function(l){return N.then(l).catch(function(h){y.readyException(h)}),this},y.extend({isReady:!1,readyWait:1,ready:function(l){(!0===l?--y.readyWait:y.isReady)||(y.isReady=!0,!(!0!==l&&--y.readyWait>0)&&N.resolveWith(bt,[y]))}}),y.ready.then=N.then,"complete"===bt.readyState||"loading"!==bt.readyState&&!bt.documentElement.doScroll?gt.setTimeout(y.ready):(bt.addEventListener("DOMContentLoaded",j),gt.addEventListener("load",j));var J=function(l,h,g,v,_,C,A){var U=0,H=l.length,G=null==g;if("object"===xr(g))for(U in _=!0,g)J(l,h,U,g[U],!0,C,A);else if(void 0!==v&&(_=!0,kt(v)||(A=!0),G&&(A?(h.call(l,v),h=null):(G=h,h=function(me,ge,ae){return G.call(y(me),ae)})),h))for(;U<H;U++)h(l[U],g,A?v:v.call(l[U],U,h(l[U],g)));return _?l:G?h.call(l):H?h(l[0],g):C},Te=/^-ms-/,Se=/-([a-z])/g;function F(l,h){return h.toUpperCase()}function z(l){return l.replace(Te,"ms-").replace(Se,F)}var le=function(l){return 1===l.nodeType||9===l.nodeType||!+l.nodeType};function se(){this.expando=y.expando+se.uid++}se.uid=1,se.prototype={cache:function(l){var h=l[this.expando];return h||(h={},le(l)&&(l.nodeType?l[this.expando]=h:Object.defineProperty(l,this.expando,{value:h,configurable:!0}))),h},set:function(l,h,g){var v,_=this.cache(l);if("string"==typeof h)_[z(h)]=g;else for(v in h)_[z(v)]=h[v];return _},get:function(l,h){return void 0===h?this.cache(l):l[this.expando]&&l[this.expando][z(h)]},access:function(l,h,g){return void 0===h||h&&"string"==typeof h&&void 0===g?this.get(l,h):(this.set(l,h,g),void 0!==g?g:h)},remove:function(l,h){var g,v=l[this.expando];if(void 0!==v){if(void 0!==h)for((g=(h=Array.isArray(h)?h.map(z):(h=z(h))in v?[h]:h.match(Hr)||[]).length);g--;)delete v[h[g]];(void 0===h||y.isEmptyObject(v))&&(l.nodeType?l[this.expando]=void 0:delete l[this.expando])}},hasData:function(l){var h=l[this.expando];return void 0!==h&&!y.isEmptyObject(h)}};var X=new se,ye=new se,qe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Oe=/[A-Z]/g;function Ze(l,h,g){var v;if(void 0===g&&1===l.nodeType)if(v="data-"+h.replace(Oe,"-$&").toLowerCase(),"string"==typeof(g=l.getAttribute(v))){try{g=function vt(l){return"true"===l||"false"!==l&&("null"===l?null:l===+l+""?+l:qe.test(l)?JSON.parse(l):l)}(g)}catch{}ye.set(l,h,g)}else g=void 0;return g}y.extend({hasData:function(l){return ye.hasData(l)||X.hasData(l)},data:function(l,h,g){return ye.access(l,h,g)},removeData:function(l,h){ye.remove(l,h)},_data:function(l,h,g){return X.access(l,h,g)},_removeData:function(l,h){X.remove(l,h)}}),y.fn.extend({data:function(l,h){var g,v,_,C=this[0],A=C&&C.attributes;if(void 0===l){if(this.length&&(_=ye.get(C),1===C.nodeType&&!X.get(C,"hasDataAttrs"))){for(g=A.length;g--;)A[g]&&0===(v=A[g].name).indexOf("data-")&&(v=z(v.slice(5)),Ze(C,v,_[v]));X.set(C,"hasDataAttrs",!0)}return _}return"object"==typeof l?this.each(function(){ye.set(this,l)}):J(this,function(U){var H;if(C&&void 0===U)return void 0!==(H=ye.get(C,l))||void 0!==(H=Ze(C,l))?H:void 0;this.each(function(){ye.set(this,l,U)})},null,h,arguments.length>1,null,!0)},removeData:function(l){return this.each(function(){ye.remove(this,l)})}}),y.extend({queue:function(l,h,g){var v;if(l)return v=X.get(l,h=(h||"fx")+"queue"),g&&(!v||Array.isArray(g)?v=X.access(l,h,y.makeArray(g)):v.push(g)),v||[]},dequeue:function(l,h){var g=y.queue(l,h=h||"fx"),v=g.length,_=g.shift(),C=y._queueHooks(l,h);"inprogress"===_&&(_=g.shift(),v--),_&&("fx"===h&&g.unshift("inprogress"),delete C.stop,_.call(l,function(){y.dequeue(l,h)},C)),!v&&C&&C.empty.fire()},_queueHooks:function(l,h){var g=h+"queueHooks";return X.get(l,g)||X.access(l,g,{empty:y.Callbacks("once memory").add(function(){X.remove(l,[h+"queue",g])})})}}),y.fn.extend({queue:function(l,h){var g=2;return"string"!=typeof l&&(h=l,l="fx",g--),arguments.length<g?y.queue(this[0],l):void 0===h?this:this.each(function(){var v=y.queue(this,l,h);y._queueHooks(this,l),"fx"===l&&"inprogress"!==v[0]&&y.dequeue(this,l)})},dequeue:function(l){return this.each(function(){y.dequeue(this,l)})},clearQueue:function(l){return this.queue(l||"fx",[])},promise:function(l,h){var g,v=1,_=y.Deferred(),C=this,A=this.length,U=function(){--v||_.resolveWith(C,[C])};for("string"!=typeof l&&(h=l,l=void 0),l=l||"fx";A--;)(g=X.get(C[A],l+"queueHooks"))&&g.empty&&(v++,g.empty.add(U));return U(),_.promise(h)}});var Ge=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,yt=new RegExp("^(?:([+-])=|)("+Ge+")([a-z%]*)$","i"),pt=["Top","Right","Bottom","Left"],ct=bt.documentElement,en=function(l){return y.contains(l.ownerDocument,l)},ln={composed:!0};ct.getRootNode&&(en=function(l){return y.contains(l.ownerDocument,l)||l.getRootNode(ln)===l.ownerDocument});var Bn=function(l,h){return"none"===(l=h||l).style.display||""===l.style.display&&en(l)&&"none"===y.css(l,"display")};function Hn(l,h,g,v){var _,C,A=20,U=v?function(){return v.cur()}:function(){return y.css(l,h,"")},H=U(),G=g&&g[3]||(y.cssNumber[h]?"":"px"),me=l.nodeType&&(y.cssNumber[h]||"px"!==G&&+H)&&yt.exec(y.css(l,h));if(me&&me[3]!==G){for(G=G||me[3],me=+(H/=2)||1;A--;)y.style(l,h,me+G),(1-C)*(1-(C=U()/H||.5))<=0&&(A=0),me/=C;y.style(l,h,(me*=2)+G),g=g||[]}return g&&(me=+me||+H||0,_=g[1]?me+(g[1]+1)*g[2]:+g[2],v&&(v.unit=G,v.start=me,v.end=_)),_}var It={};function nt(l){var h,g=l.ownerDocument,v=l.nodeName,_=It[v];return _||(h=g.body.appendChild(g.createElement(v)),_=y.css(h,"display"),h.parentNode.removeChild(h),"none"===_&&(_="block"),It[v]=_,_)}function Tn(l,h){for(var g,v,_=[],C=0,A=l.length;C<A;C++)(v=l[C]).style&&(g=v.style.display,h?("none"===g&&(_[C]=X.get(v,"display")||null,_[C]||(v.style.display="")),""===v.style.display&&Bn(v)&&(_[C]=nt(v))):"none"!==g&&(_[C]="none",X.set(v,"display",g)));for(C=0;C<A;C++)null!=_[C]&&(l[C].style.display=_[C]);return l}y.fn.extend({show:function(){return Tn(this,!0)},hide:function(){return Tn(this)},toggle:function(l){return"boolean"==typeof l?l?this.show():this.hide():this.each(function(){Bn(this)?y(this).show():y(this).hide()})}});var h,g,nn=/^(?:checkbox|radio)$/i,Zn=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,rn=/^$|^module$|\/(?:java|ecma)script/i;h=bt.createDocumentFragment().appendChild(bt.createElement("div")),(g=bt.createElement("input")).setAttribute("type","radio"),g.setAttribute("checked","checked"),g.setAttribute("name","t"),h.appendChild(g),et.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,h.innerHTML="<textarea>x</textarea>",et.noCloneChecked=!!h.cloneNode(!0).lastChild.defaultValue,h.innerHTML="<option></option>",et.option=!!h.lastChild;var Ye={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Bt(l,h){var g;return g=typeof l.getElementsByTagName<"u"?l.getElementsByTagName(h||"*"):typeof l.querySelectorAll<"u"?l.querySelectorAll(h||"*"):[],void 0===h||h&&Jt(l,h)?y.merge([l],g):g}function We(l,h){for(var g=0,v=l.length;g<v;g++)X.set(l[g],"globalEval",!h||X.get(h[g],"globalEval"))}Ye.tbody=Ye.tfoot=Ye.colgroup=Ye.caption=Ye.thead,Ye.th=Ye.td,et.option||(Ye.optgroup=Ye.option=[1,"<select multiple='multiple'>","</select>"]);var on=/<|&#?\w+;/;function wt(l,h,g,v,_){for(var C,A,U,H,G,me,ge=h.createDocumentFragment(),ae=[],Re=0,Nt=l.length;Re<Nt;Re++)if((C=l[Re])||0===C)if("object"===xr(C))y.merge(ae,C.nodeType?[C]:C);else if(on.test(C)){for(A=A||ge.appendChild(h.createElement("div")),U=(Zn.exec(C)||["",""])[1].toLowerCase(),A.innerHTML=(H=Ye[U]||Ye._default)[1]+y.htmlPrefilter(C)+H[2],me=H[0];me--;)A=A.lastChild;y.merge(ae,A.childNodes),(A=ge.firstChild).textContent=""}else ae.push(h.createTextNode(C));for(ge.textContent="",Re=0;C=ae[Re++];)if(v&&y.inArray(C,v)>-1)_&&_.push(C);else if(G=en(C),A=Bt(ge.appendChild(C),"script"),G&&We(A),g)for(me=0;C=A[me++];)rn.test(C.type||"")&&g.push(C);return ge}var fn=/^([^.]*)(?:\.(.+)|)/;function dr(){return!0}function xn(){return!1}function wn(l,h,g,v,_,C){var A,U;if("object"==typeof h){for(U in"string"!=typeof g&&(v=v||g,g=void 0),h)wn(l,U,g,v,h[U],C);return l}if(null==v&&null==_?(_=g,v=g=void 0):null==_&&("string"==typeof g?(_=v,v=void 0):(_=v,v=g,g=void 0)),!1===_)_=xn;else if(!_)return l;return 1===C&&(A=_,_=function(H){return y().off(H),A.apply(this,arguments)},_.guid=A.guid||(A.guid=y.guid++)),l.each(function(){y.event.add(this,h,_,v,g)})}function Sr(l,h,g){g?(X.set(l,h,!1),y.event.add(l,h,{namespace:!1,handler:function(v){var _,C=X.get(this,h);if(1&v.isTrigger&&this[h]){if(C)(y.event.special[h]||{}).delegateType&&v.stopPropagation();else if(C=Xn.call(arguments),X.set(this,h,C),this[h](),_=X.get(this,h),X.set(this,h,!1),C!==_)return v.stopImmediatePropagation(),v.preventDefault(),_}else C&&(X.set(this,h,y.event.trigger(C[0],C.slice(1),this)),v.stopPropagation(),v.isImmediatePropagationStopped=dr)}})):void 0===X.get(l,h)&&y.event.add(l,h,dr)}y.event={global:{},add:function(l,h,g,v,_){var C,A,U,H,G,me,ge,ae,Re,Nt,tn,ke=X.get(l);if(le(l))for(g.handler&&(g=(C=g).handler,_=C.selector),_&&y.find.matchesSelector(ct,_),g.guid||(g.guid=y.guid++),(H=ke.events)||(H=ke.events=Object.create(null)),(A=ke.handle)||(A=ke.handle=function(Un){return typeof y<"u"&&y.event.triggered!==Un.type?y.event.dispatch.apply(l,arguments):void 0}),G=(h=(h||"").match(Hr)||[""]).length;G--;)Re=tn=(U=fn.exec(h[G])||[])[1],Nt=(U[2]||"").split(".").sort(),Re&&(ge=y.event.special[Re]||{},ge=y.event.special[Re=(_?ge.delegateType:ge.bindType)||Re]||{},me=y.extend({type:Re,origType:tn,data:v,handler:g,guid:g.guid,selector:_,needsContext:_&&y.expr.match.needsContext.test(_),namespace:Nt.join(".")},C),(ae=H[Re])||((ae=H[Re]=[]).delegateCount=0,(!ge.setup||!1===ge.setup.call(l,v,Nt,A))&&l.addEventListener&&l.addEventListener(Re,A)),ge.add&&(ge.add.call(l,me),me.handler.guid||(me.handler.guid=g.guid)),_?ae.splice(ae.delegateCount++,0,me):ae.push(me),y.event.global[Re]=!0)},remove:function(l,h,g,v,_){var C,A,U,H,G,me,ge,ae,Re,Nt,tn,ke=X.hasData(l)&&X.get(l);if(ke&&(H=ke.events)){for(G=(h=(h||"").match(Hr)||[""]).length;G--;)if(Re=tn=(U=fn.exec(h[G])||[])[1],Nt=(U[2]||"").split(".").sort(),Re){for(ge=y.event.special[Re]||{},ae=H[Re=(v?ge.delegateType:ge.bindType)||Re]||[],U=U[2]&&new RegExp("(^|\\.)"+Nt.join("\\.(?:.*\\.|)")+"(\\.|$)"),A=C=ae.length;C--;)me=ae[C],(_||tn===me.origType)&&(!g||g.guid===me.guid)&&(!U||U.test(me.namespace))&&(!v||v===me.selector||"**"===v&&me.selector)&&(ae.splice(C,1),me.selector&&ae.delegateCount--,ge.remove&&ge.remove.call(l,me));A&&!ae.length&&((!ge.teardown||!1===ge.teardown.call(l,Nt,ke.handle))&&y.removeEvent(l,Re,ke.handle),delete H[Re])}else for(Re in H)y.event.remove(l,Re+h[G],g,v,!0);y.isEmptyObject(H)&&X.remove(l,"handle events")}},dispatch:function(l){var h,g,v,_,C,A,U=new Array(arguments.length),H=y.event.fix(l),G=(X.get(this,"events")||Object.create(null))[H.type]||[],me=y.event.special[H.type]||{};for(U[0]=H,h=1;h<arguments.length;h++)U[h]=arguments[h];if(H.delegateTarget=this,!me.preDispatch||!1!==me.preDispatch.call(this,H)){for(A=y.event.handlers.call(this,H,G),h=0;(_=A[h++])&&!H.isPropagationStopped();)for(H.currentTarget=_.elem,g=0;(C=_.handlers[g++])&&!H.isImmediatePropagationStopped();)(!H.rnamespace||!1===C.namespace||H.rnamespace.test(C.namespace))&&(H.handleObj=C,H.data=C.data,void 0!==(v=((y.event.special[C.origType]||{}).handle||C.handler).apply(_.elem,U))&&!1===(H.result=v)&&(H.preventDefault(),H.stopPropagation()));return me.postDispatch&&me.postDispatch.call(this,H),H.result}},handlers:function(l,h){var g,v,_,C,A,U=[],H=h.delegateCount,G=l.target;if(H&&G.nodeType&&!("click"===l.type&&l.button>=1))for(;G!==this;G=G.parentNode||this)if(1===G.nodeType&&("click"!==l.type||!0!==G.disabled)){for(C=[],A={},g=0;g<H;g++)void 0===A[_=(v=h[g]).selector+" "]&&(A[_]=v.needsContext?y(_,this).index(G)>-1:y.find(_,this,null,[G]).length),A[_]&&C.push(v);C.length&&U.push({elem:G,handlers:C})}return G=this,H<h.length&&U.push({elem:G,handlers:h.slice(H)}),U},addProp:function(l,h){Object.defineProperty(y.Event.prototype,l,{enumerable:!0,configurable:!0,get:kt(h)?function(){if(this.originalEvent)return h(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[l]},set:function(g){Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:g})}})},fix:function(l){return l[y.expando]?l:new y.Event(l)},special:{load:{noBubble:!0},click:{setup:function(l){var h=this||l;return nn.test(h.type)&&h.click&&Jt(h,"input")&&Sr(h,"click",!0),!1},trigger:function(l){var h=this||l;return nn.test(h.type)&&h.click&&Jt(h,"input")&&Sr(h,"click"),!0},_default:function(l){var h=l.target;return nn.test(h.type)&&h.click&&Jt(h,"input")&&X.get(h,"click")||Jt(h,"a")}},beforeunload:{postDispatch:function(l){void 0!==l.result&&l.originalEvent&&(l.originalEvent.returnValue=l.result)}}}},y.removeEvent=function(l,h,g){l.removeEventListener&&l.removeEventListener(h,g)},y.Event=function(l,h){if(!(this instanceof y.Event))return new y.Event(l,h);l&&l.type?(this.originalEvent=l,this.type=l.type,this.isDefaultPrevented=l.defaultPrevented||void 0===l.defaultPrevented&&!1===l.returnValue?dr:xn,this.target=l.target&&3===l.target.nodeType?l.target.parentNode:l.target,this.currentTarget=l.currentTarget,this.relatedTarget=l.relatedTarget):this.type=l,h&&y.extend(this,h),this.timeStamp=l&&l.timeStamp||Date.now(),this[y.expando]=!0},y.Event.prototype={constructor:y.Event,isDefaultPrevented:xn,isPropagationStopped:xn,isImmediatePropagationStopped:xn,isSimulated:!1,preventDefault:function(){var l=this.originalEvent;this.isDefaultPrevented=dr,l&&!this.isSimulated&&l.preventDefault()},stopPropagation:function(){var l=this.originalEvent;this.isPropagationStopped=dr,l&&!this.isSimulated&&l.stopPropagation()},stopImmediatePropagation:function(){var l=this.originalEvent;this.isImmediatePropagationStopped=dr,l&&!this.isSimulated&&l.stopImmediatePropagation(),this.stopPropagation()}},y.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},y.event.addProp),y.each({focus:"focusin",blur:"focusout"},function(l,h){function g(v){if(bt.documentMode){var _=X.get(this,"handle"),C=y.event.fix(v);C.type="focusin"===v.type?"focus":"blur",C.isSimulated=!0,_(v),C.target===C.currentTarget&&_(C)}else y.event.simulate(h,v.target,y.event.fix(v))}y.event.special[l]={setup:function(){var v;if(Sr(this,l,!0),!bt.documentMode)return!1;(v=X.get(this,h))||this.addEventListener(h,g),X.set(this,h,(v||0)+1)},trigger:function(){return Sr(this,l),!0},teardown:function(){var v;if(!bt.documentMode)return!1;(v=X.get(this,h)-1)?X.set(this,h,v):(this.removeEventListener(h,g),X.remove(this,h))},_default:function(v){return X.get(v.target,l)},delegateType:h},y.event.special[h]={setup:function(){var v=this.ownerDocument||this.document||this,_=bt.documentMode?this:v,C=X.get(_,h);C||(bt.documentMode?this.addEventListener(h,g):v.addEventListener(l,g,!0)),X.set(_,h,(C||0)+1)},teardown:function(){var v=this.ownerDocument||this.document||this,_=bt.documentMode?this:v,C=X.get(_,h)-1;C?X.set(_,h,C):(bt.documentMode?this.removeEventListener(h,g):v.removeEventListener(l,g,!0),X.remove(_,h))}}}),y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(l,h){y.event.special[l]={delegateType:h,bindType:h,handle:function(g){var v,C=g.relatedTarget,A=g.handleObj;return(!C||C!==this&&!y.contains(this,C))&&(g.type=A.origType,v=A.handler.apply(this,arguments),g.type=h),v}}}),y.fn.extend({on:function(l,h,g,v){return wn(this,l,h,g,v)},one:function(l,h,g,v){return wn(this,l,h,g,v,1)},off:function(l,h,g){var v,_;if(l&&l.preventDefault&&l.handleObj)return v=l.handleObj,y(l.delegateTarget).off(v.namespace?v.origType+"."+v.namespace:v.origType,v.selector,v.handler),this;if("object"==typeof l){for(_ in l)this.off(_,h,l[_]);return this}return(!1===h||"function"==typeof h)&&(g=h,h=void 0),!1===g&&(g=xn),this.each(function(){y.event.remove(this,l,g,h)})}});var hr=/<script|<style|<link/i,jn=/checked\s*(?:[^=]|=\s*.checked.)/i,un=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ke(l,h){return Jt(l,"table")&&Jt(11!==h.nodeType?h:h.firstChild,"tr")&&y(l).children("tbody")[0]||l}function q(l){return l.type=(null!==l.getAttribute("type"))+"/"+l.type,l}function ce(l){return"true/"===(l.type||"").slice(0,5)?l.type=l.type.slice(5):l.removeAttribute("type"),l}function lt(l,h){var g,v,_,A,U,H;if(1===h.nodeType){if(X.hasData(l)&&(H=X.get(l).events))for(_ in X.remove(h,"handle events"),H)for(g=0,v=H[_].length;g<v;g++)y.event.add(h,_,H[_][g]);ye.hasData(l)&&(A=ye.access(l),U=y.extend({},A),ye.set(h,U))}}function Pt(l,h){var g=h.nodeName.toLowerCase();"input"===g&&nn.test(l.type)?h.checked=l.checked:("input"===g||"textarea"===g)&&(h.defaultValue=l.defaultValue)}function Rn(l,h,g,v){h=Tr(h);var _,C,A,U,H,G,me=0,ge=l.length,ae=ge-1,Re=h[0],Nt=kt(Re);if(Nt||ge>1&&"string"==typeof Re&&!et.checkClone&&jn.test(Re))return l.each(function(tn){var ke=l.eq(tn);Nt&&(h[0]=Re.call(this,tn,ke.html())),Rn(ke,h,g,v)});if(ge&&(C=(_=wt(h,l[0].ownerDocument,!1,l,v)).firstChild,1===_.childNodes.length&&(_=C),C||v)){for(U=(A=y.map(Bt(_,"script"),q)).length;me<ge;me++)H=_,me!==ae&&(H=y.clone(H,!0,!0),U&&y.merge(A,Bt(H,"script"))),g.call(l[me],H,me);if(U)for(G=A[A.length-1].ownerDocument,y.map(A,ce),me=0;me<U;me++)rn.test((H=A[me]).type||"")&&!X.access(H,"globalEval")&&y.contains(G,H)&&(H.src&&"module"!==(H.type||"").toLowerCase()?y._evalUrl&&!H.noModule&&y._evalUrl(H.src,{nonce:H.nonce||H.getAttribute("nonce")},G):di(H.textContent.replace(un,""),H,G))}return l}function Le(l,h,g){for(var v,_=h?y.filter(h,l):l,C=0;null!=(v=_[C]);C++)!g&&1===v.nodeType&&y.cleanData(Bt(v)),v.parentNode&&(g&&en(v)&&We(Bt(v,"script")),v.parentNode.removeChild(v));return l}y.extend({htmlPrefilter:function(l){return l},clone:function(l,h,g){var v,_,C,A,U=l.cloneNode(!0),H=en(l);if(!(et.noCloneChecked||1!==l.nodeType&&11!==l.nodeType||y.isXMLDoc(l)))for(A=Bt(U),v=0,_=(C=Bt(l)).length;v<_;v++)Pt(C[v],A[v]);if(h)if(g)for(C=C||Bt(l),A=A||Bt(U),v=0,_=C.length;v<_;v++)lt(C[v],A[v]);else lt(l,U);return(A=Bt(U,"script")).length>0&&We(A,!H&&Bt(l,"script")),U},cleanData:function(l){for(var h,g,v,_=y.event.special,C=0;void 0!==(g=l[C]);C++)if(le(g)){if(h=g[X.expando]){if(h.events)for(v in h.events)_[v]?y.event.remove(g,v):y.removeEvent(g,v,h.handle);g[X.expando]=void 0}g[ye.expando]&&(g[ye.expando]=void 0)}}}),y.fn.extend({detach:function(l){return Le(this,l,!0)},remove:function(l){return Le(this,l)},text:function(l){return J(this,function(h){return void 0===h?y.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=h)})},null,l,arguments.length)},append:function(){return Rn(this,arguments,function(l){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ke(this,l).appendChild(l)})},prepend:function(){return Rn(this,arguments,function(l){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var h=Ke(this,l);h.insertBefore(l,h.firstChild)}})},before:function(){return Rn(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this)})},after:function(){return Rn(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this.nextSibling)})},empty:function(){for(var l,h=0;null!=(l=this[h]);h++)1===l.nodeType&&(y.cleanData(Bt(l,!1)),l.textContent="");return this},clone:function(l,h){return l=l??!1,h=h??l,this.map(function(){return y.clone(this,l,h)})},html:function(l){return J(this,function(h){var g=this[0]||{},v=0,_=this.length;if(void 0===h&&1===g.nodeType)return g.innerHTML;if("string"==typeof h&&!hr.test(h)&&!Ye[(Zn.exec(h)||["",""])[1].toLowerCase()]){h=y.htmlPrefilter(h);try{for(;v<_;v++)1===(g=this[v]||{}).nodeType&&(y.cleanData(Bt(g,!1)),g.innerHTML=h);g=0}catch{}}g&&this.empty().append(h)},null,l,arguments.length)},replaceWith:function(){var l=[];return Rn(this,arguments,function(h){var g=this.parentNode;y.inArray(this,l)<0&&(y.cleanData(Bt(this)),g&&g.replaceChild(h,this))},l)}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,h){y.fn[l]=function(g){for(var v,_=[],C=y(g),A=C.length-1,U=0;U<=A;U++)v=U===A?this:this.clone(!0),y(C[U])[h](v),Qn.apply(_,v.get());return this.pushStack(_)}});var Ve=new RegExp("^("+Ge+")(?!px)[a-z%]+$","i"),ve=/^--/,Fe=function(l){var h=l.ownerDocument.defaultView;return(!h||!h.opener)&&(h=gt),h.getComputedStyle(l)},st=function(l,h,g){var v,_,C={};for(_ in h)C[_]=l.style[_],l.style[_]=h[_];for(_ in v=g.call(l),h)l.style[_]=C[_];return v},Lt=new RegExp(pt.join("|"),"i");function tt(l,h,g){var v,_,C,A,U=ve.test(h),H=l.style;return(g=g||Fe(l))&&(A=g.getPropertyValue(h)||g[h],U&&A&&(A=A.replace(Wr,"$1")||void 0),""===A&&!en(l)&&(A=y.style(l,h)),!et.pixelBoxStyles()&&Ve.test(A)&&Lt.test(h)&&(v=H.width,_=H.minWidth,C=H.maxWidth,H.minWidth=H.maxWidth=H.width=A,A=g.width,H.width=v,H.minWidth=_,H.maxWidth=C)),void 0!==A?A+"":A}function ht(l,h){return{get:function(){if(!l())return(this.get=h).apply(this,arguments);delete this.get}}}!function(){function l(){if(G){H.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",G.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ct.appendChild(H).appendChild(G);var me=gt.getComputedStyle(G);g="1%"!==me.top,U=12===h(me.marginLeft),G.style.right="60%",C=36===h(me.right),v=36===h(me.width),G.style.position="absolute",_=12===h(G.offsetWidth/3),ct.removeChild(H),G=null}}function h(me){return Math.round(parseFloat(me))}var g,v,_,C,A,U,H=bt.createElement("div"),G=bt.createElement("div");G.style&&(G.style.backgroundClip="content-box",G.cloneNode(!0).style.backgroundClip="",et.clearCloneStyle="content-box"===G.style.backgroundClip,y.extend(et,{boxSizingReliable:function(){return l(),v},pixelBoxStyles:function(){return l(),C},pixelPosition:function(){return l(),g},reliableMarginLeft:function(){return l(),U},scrollboxSize:function(){return l(),_},reliableTrDimensions:function(){var me,ge,ae,Re;return null==A&&(me=bt.createElement("table"),ge=bt.createElement("tr"),ae=bt.createElement("div"),me.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ge.style.cssText="box-sizing:content-box;border:1px solid",ge.style.height="1px",ae.style.height="9px",ae.style.display="block",ct.appendChild(me).appendChild(ge).appendChild(ae),Re=gt.getComputedStyle(ge),A=parseInt(Re.height,10)+parseInt(Re.borderTopWidth,10)+parseInt(Re.borderBottomWidth,10)===ge.offsetHeight,ct.removeChild(me)),A}}))}();var jt=["Webkit","Moz","ms"],Vt=bt.createElement("div").style,Cn={};function Yr(l){return y.cssProps[l]||Cn[l]||(l in Vt?l:Cn[l]=function bn(l){for(var h=l[0].toUpperCase()+l.slice(1),g=jt.length;g--;)if((l=jt[g]+h)in Vt)return l}(l)||l)}var br=/^(none|table(?!-c[ea]).+)/,ss={position:"absolute",visibility:"hidden",display:"block"},Ds={letterSpacing:"0",fontWeight:"400"};function Gs(l,h,g){var v=yt.exec(h);return v?Math.max(0,v[2]-(g||0))+(v[3]||"px"):h}function as(l,h,g,v,_,C){var A="width"===h?1:0,U=0,H=0,G=0;if(g===(v?"border":"content"))return 0;for(;A<4;A+=2)"margin"===g&&(G+=y.css(l,g+pt[A],!0,_)),v?("content"===g&&(H-=y.css(l,"padding"+pt[A],!0,_)),"margin"!==g&&(H-=y.css(l,"border"+pt[A]+"Width",!0,_))):(H+=y.css(l,"padding"+pt[A],!0,_),"padding"!==g?H+=y.css(l,"border"+pt[A]+"Width",!0,_):U+=y.css(l,"border"+pt[A]+"Width",!0,_));return!v&&C>=0&&(H+=Math.max(0,Math.ceil(l["offset"+h[0].toUpperCase()+h.slice(1)]-C-H-U-.5))||0),H+G}function hi(l,h,g){var v=Fe(l),C=(!et.boxSizingReliable()||g)&&"border-box"===y.css(l,"boxSizing",!1,v),A=C,U=tt(l,h,v),H="offset"+h[0].toUpperCase()+h.slice(1);if(Ve.test(U)){if(!g)return U;U="auto"}return(!et.boxSizingReliable()&&C||!et.reliableTrDimensions()&&Jt(l,"tr")||"auto"===U||!parseFloat(U)&&"inline"===y.css(l,"display",!1,v))&&l.getClientRects().length&&(C="border-box"===y.css(l,"boxSizing",!1,v),(A=H in l)&&(U=l[H])),(U=parseFloat(U)||0)+as(l,h,g||(C?"border":"content"),A,v,U)+"px"}function Kn(l,h,g,v,_){return new Kn.prototype.init(l,h,g,v,_)}y.extend({cssHooks:{opacity:{get:function(l,h){if(h){var g=tt(l,"opacity");return""===g?"1":g}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(l,h,g,v){if(l&&3!==l.nodeType&&8!==l.nodeType&&l.style){var _,C,A,U=z(h),H=ve.test(h),G=l.style;if(H||(h=Yr(U)),A=y.cssHooks[h]||y.cssHooks[U],void 0===g)return A&&"get"in A&&void 0!==(_=A.get(l,!1,v))?_:G[h];if("string"==(C=typeof g)&&(_=yt.exec(g))&&_[1]&&(g=Hn(l,h,_),C="number"),null==g||g!=g)return;"number"===C&&!H&&(g+=_&&_[3]||(y.cssNumber[U]?"":"px")),!et.clearCloneStyle&&""===g&&0===h.indexOf("background")&&(G[h]="inherit"),(!A||!("set"in A)||void 0!==(g=A.set(l,g,v)))&&(H?G.setProperty(h,g):G[h]=g)}},css:function(l,h,g,v){var _,C,A,U=z(h);return ve.test(h)||(h=Yr(U)),(A=y.cssHooks[h]||y.cssHooks[U])&&"get"in A&&(_=A.get(l,!0,g)),void 0===_&&(_=tt(l,h,v)),"normal"===_&&h in Ds&&(_=Ds[h]),""===g||g?(C=parseFloat(_),!0===g||isFinite(C)?C||0:_):_}}),y.each(["height","width"],function(l,h){y.cssHooks[h]={get:function(g,v,_){if(v)return!br.test(y.css(g,"display"))||g.getClientRects().length&&g.getBoundingClientRect().width?hi(g,h,_):st(g,ss,function(){return hi(g,h,_)})},set:function(g,v,_){var C,A=Fe(g),U=!et.scrollboxSize()&&"absolute"===A.position,G=(U||_)&&"border-box"===y.css(g,"boxSizing",!1,A),me=_?as(g,h,_,G,A):0;return G&&U&&(me-=Math.ceil(g["offset"+h[0].toUpperCase()+h.slice(1)]-parseFloat(A[h])-as(g,h,"border",!1,A)-.5)),me&&(C=yt.exec(v))&&"px"!==(C[3]||"px")&&(g.style[h]=v,v=y.css(g,h)),Gs(0,v,me)}}}),y.cssHooks.marginLeft=ht(et.reliableMarginLeft,function(l,h){if(h)return(parseFloat(tt(l,"marginLeft"))||l.getBoundingClientRect().left-st(l,{marginLeft:0},function(){return l.getBoundingClientRect().left}))+"px"}),y.each({margin:"",padding:"",border:"Width"},function(l,h){y.cssHooks[l+h]={expand:function(g){for(var v=0,_={},C="string"==typeof g?g.split(" "):[g];v<4;v++)_[l+pt[v]+h]=C[v]||C[v-2]||C[0];return _}},"margin"!==l&&(y.cssHooks[l+h].set=Gs)}),y.fn.extend({css:function(l,h){return J(this,function(g,v,_){var C,A,U={},H=0;if(Array.isArray(v)){for(C=Fe(g),A=v.length;H<A;H++)U[v[H]]=y.css(g,v[H],!1,C);return U}return void 0!==_?y.style(g,v,_):y.css(g,v)},l,h,arguments.length>1)}}),y.Tween=Kn,Kn.prototype={constructor:Kn,init:function(l,h,g,v,_,C){this.elem=l,this.prop=g,this.easing=_||y.easing._default,this.options=h,this.start=this.now=this.cur(),this.end=v,this.unit=C||(y.cssNumber[g]?"":"px")},cur:function(){var l=Kn.propHooks[this.prop];return l&&l.get?l.get(this):Kn.propHooks._default.get(this)},run:function(l){var h,g=Kn.propHooks[this.prop];return this.pos=h=this.options.duration?y.easing[this.easing](l,this.options.duration*l,0,1,this.options.duration):l,this.now=(this.end-this.start)*h+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),g&&g.set?g.set(this):Kn.propHooks._default.set(this),this}},Kn.prototype.init.prototype=Kn.prototype,Kn.propHooks={_default:{get:function(l){var h;return 1!==l.elem.nodeType||null!=l.elem[l.prop]&&null==l.elem.style[l.prop]?l.elem[l.prop]:(h=y.css(l.elem,l.prop,""))&&"auto"!==h?h:0},set:function(l){y.fx.step[l.prop]?y.fx.step[l.prop](l):1!==l.elem.nodeType||!y.cssHooks[l.prop]&&null==l.elem.style[Yr(l.prop)]?l.elem[l.prop]=l.now:y.style(l.elem,l.prop,l.now+l.unit)}}},Kn.propHooks.scrollTop=Kn.propHooks.scrollLeft={set:function(l){l.elem.nodeType&&l.elem.parentNode&&(l.elem[l.prop]=l.now)}},y.easing={linear:function(l){return l},swing:function(l){return.5-Math.cos(l*Math.PI)/2},_default:"swing"},y.fx=Kn.prototype.init,y.fx.step={};var qi,ao,fa=/^(?:toggle|show|hide)$/,da=/queueHooks$/;function _o(){ao&&(!1===bt.hidden&&gt.requestAnimationFrame?gt.requestAnimationFrame(_o):gt.setTimeout(_o,y.fx.interval),y.fx.tick())}function Mi(){return gt.setTimeout(function(){qi=void 0}),qi=Date.now()}function pi(l,h){var g,v=0,_={height:l};for(h=h?1:0;v<4;v+=2-h)_["margin"+(g=pt[v])]=_["padding"+g]=l;return h&&(_.opacity=_.width=l),_}function Su(l,h,g){for(var v,_=(Pi.tweeners[h]||[]).concat(Pi.tweeners["*"]),C=0,A=_.length;C<A;C++)if(v=_[C].call(g,h,l))return v}function Pi(l,h,g){var v,_,C=0,A=Pi.prefilters.length,U=y.Deferred().always(function(){delete H.elem}),H=function(){if(_)return!1;for(var ge=qi||Mi(),ae=Math.max(0,G.startTime+G.duration-ge),Nt=1-(ae/G.duration||0),tn=0,ke=G.tweens.length;tn<ke;tn++)G.tweens[tn].run(Nt);return U.notifyWith(l,[G,Nt,ae]),Nt<1&&ke?ae:(ke||U.notifyWith(l,[G,1,0]),U.resolveWith(l,[G]),!1)},G=U.promise({elem:l,props:y.extend({},h),opts:y.extend(!0,{specialEasing:{},easing:y.easing._default},g),originalProperties:h,originalOptions:g,startTime:qi||Mi(),duration:g.duration,tweens:[],createTween:function(ge,ae){var Re=y.Tween(l,G.opts,ge,ae,G.opts.specialEasing[ge]||G.opts.easing);return G.tweens.push(Re),Re},stop:function(ge){var ae=0,Re=ge?G.tweens.length:0;if(_)return this;for(_=!0;ae<Re;ae++)G.tweens[ae].run(1);return ge?(U.notifyWith(l,[G,1,0]),U.resolveWith(l,[G,ge])):U.rejectWith(l,[G,ge]),this}}),me=G.props;for(function Au(l,h){var g,v,_,C,A;for(g in l)if(_=h[v=z(g)],C=l[g],Array.isArray(C)&&(_=C[1],C=l[g]=C[0]),g!==v&&(l[v]=C,delete l[g]),(A=y.cssHooks[v])&&"expand"in A)for(g in C=A.expand(C),delete l[v],C)g in l||(l[g]=C[g],h[g]=_);else h[v]=_}(me,G.opts.specialEasing);C<A;C++)if(v=Pi.prefilters[C].call(G,l,me,G.opts))return kt(v.stop)&&(y._queueHooks(G.elem,G.opts.queue).stop=v.stop.bind(v)),v;return y.map(me,Su,G),kt(G.opts.start)&&G.opts.start.call(l,G),G.progress(G.opts.progress).done(G.opts.done,G.opts.complete).fail(G.opts.fail).always(G.opts.always),y.fx.timer(y.extend(H,{elem:l,anim:G,queue:G.opts.queue})),G}y.Animation=y.extend(Pi,{tweeners:{"*":[function(l,h){var g=this.createTween(l,h);return Hn(g.elem,l,yt.exec(h),g),g}]},tweener:function(l,h){kt(l)?(h=l,l=["*"]):l=l.match(Hr);for(var g,v=0,_=l.length;v<_;v++)(Pi.tweeners[g=l[v]]=Pi.tweeners[g]||[]).unshift(h)},prefilters:[function Iu(l,h,g){var v,_,C,A,U,H,G,me,ge="width"in h||"height"in h,ae=this,Re={},Nt=l.style,tn=l.nodeType&&Bn(l),ke=X.get(l,"fxshow");for(v in g.queue||(null==(A=y._queueHooks(l,"fx")).unqueued&&(A.unqueued=0,U=A.empty.fire,A.empty.fire=function(){A.unqueued||U()}),A.unqueued++,ae.always(function(){ae.always(function(){A.unqueued--,y.queue(l,"fx").length||A.empty.fire()})})),h)if(fa.test(_=h[v])){if(delete h[v],C=C||"toggle"===_,_===(tn?"hide":"show")){if("show"!==_||!ke||void 0===ke[v])continue;tn=!0}Re[v]=ke&&ke[v]||y.style(l,v)}if((H=!y.isEmptyObject(h))||!y.isEmptyObject(Re))for(v in ge&&1===l.nodeType&&(g.overflow=[Nt.overflow,Nt.overflowX,Nt.overflowY],null==(G=ke&&ke.display)&&(G=X.get(l,"display")),"none"===(me=y.css(l,"display"))&&(G?me=G:(Tn([l],!0),G=l.style.display||G,me=y.css(l,"display"),Tn([l]))),("inline"===me||"inline-block"===me&&null!=G)&&"none"===y.css(l,"float")&&(H||(ae.done(function(){Nt.display=G}),null==G&&(G="none"===(me=Nt.display)?"":me)),Nt.display="inline-block")),g.overflow&&(Nt.overflow="hidden",ae.always(function(){Nt.overflow=g.overflow[0],Nt.overflowX=g.overflow[1],Nt.overflowY=g.overflow[2]})),H=!1,Re)H||(ke?"hidden"in ke&&(tn=ke.hidden):ke=X.access(l,"fxshow",{display:G}),C&&(ke.hidden=!tn),tn&&Tn([l],!0),ae.done(function(){for(v in tn||Tn([l]),X.remove(l,"fxshow"),Re)y.style(l,v,Re[v])})),H=Su(tn?ke[v]:0,v,ae),v in ke||(ke[v]=H.start,tn&&(H.end=H.start,H.start=0))}],prefilter:function(l,h){h?Pi.prefilters.unshift(l):Pi.prefilters.push(l)}}),y.speed=function(l,h,g){var v=l&&"object"==typeof l?y.extend({},l):{complete:g||!g&&h||kt(l)&&l,duration:l,easing:g&&h||h&&!kt(h)&&h};return y.fx.off?v.duration=0:"number"!=typeof v.duration&&(v.duration=v.duration in y.fx.speeds?y.fx.speeds[v.duration]:y.fx.speeds._default),(null==v.queue||!0===v.queue)&&(v.queue="fx"),v.old=v.complete,v.complete=function(){kt(v.old)&&v.old.call(this),v.queue&&y.dequeue(this,v.queue)},v},y.fn.extend({fadeTo:function(l,h,g,v){return this.filter(Bn).css("opacity",0).show().end().animate({opacity:h},l,g,v)},animate:function(l,h,g,v){var _=y.isEmptyObject(l),C=y.speed(h,g,v),A=function(){var U=Pi(this,y.extend({},l),C);(_||X.get(this,"finish"))&&U.stop(!0)};return A.finish=A,_||!1===C.queue?this.each(A):this.queue(C.queue,A)},stop:function(l,h,g){var v=function(_){var C=_.stop;delete _.stop,C(g)};return"string"!=typeof l&&(g=h,h=l,l=void 0),h&&this.queue(l||"fx",[]),this.each(function(){var _=!0,C=null!=l&&l+"queueHooks",A=y.timers,U=X.get(this);if(C)U[C]&&U[C].stop&&v(U[C]);else for(C in U)U[C]&&U[C].stop&&da.test(C)&&v(U[C]);for(C=A.length;C--;)A[C].elem===this&&(null==l||A[C].queue===l)&&(A[C].anim.stop(g),_=!1,A.splice(C,1));(_||!g)&&y.dequeue(this,l)})},finish:function(l){return!1!==l&&(l=l||"fx"),this.each(function(){var h,g=X.get(this),v=g[l+"queue"],_=g[l+"queueHooks"],C=y.timers,A=v?v.length:0;for(g.finish=!0,y.queue(this,l,[]),_&&_.stop&&_.stop.call(this,!0),h=C.length;h--;)C[h].elem===this&&C[h].queue===l&&(C[h].anim.stop(!0),C.splice(h,1));for(h=0;h<A;h++)v[h]&&v[h].finish&&v[h].finish.call(this);delete g.finish})}}),y.each(["toggle","show","hide"],function(l,h){var g=y.fn[h];y.fn[h]=function(v,_,C){return null==v||"boolean"==typeof v?g.apply(this,arguments):this.animate(pi(h,!0),v,_,C)}}),y.each({slideDown:pi("show"),slideUp:pi("hide"),slideToggle:pi("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(l,h){y.fn[l]=function(g,v,_){return this.animate(h,g,v,_)}}),y.timers=[],y.fx.tick=function(){var l,h=0,g=y.timers;for(qi=Date.now();h<g.length;h++)!(l=g[h])()&&g[h]===l&&g.splice(h--,1);g.length||y.fx.stop(),qi=void 0},y.fx.timer=function(l){y.timers.push(l),y.fx.start()},y.fx.interval=13,y.fx.start=function(){ao||(ao=!0,_o())},y.fx.stop=function(){ao=null},y.fx.speeds={slow:600,fast:200,_default:400},y.fn.delay=function(l,h){return l=y.fx&&y.fx.speeds[l]||l,this.queue(h=h||"fx",function(g,v){var _=gt.setTimeout(g,l);v.stop=function(){gt.clearTimeout(_)}})},function(){var l=bt.createElement("input"),g=bt.createElement("select").appendChild(bt.createElement("option"));l.type="checkbox",et.checkOn=""!==l.value,et.optSelected=g.selected,(l=bt.createElement("input")).value="t",l.type="radio",et.radioValue="t"===l.value}();var ha,Vo=y.expr.attrHandle;y.fn.extend({attr:function(l,h){return J(this,y.attr,l,h,arguments.length>1)},removeAttr:function(l){return this.each(function(){y.removeAttr(this,l)})}}),y.extend({attr:function(l,h,g){var v,_,C=l.nodeType;if(3!==C&&8!==C&&2!==C)return typeof l.getAttribute>"u"?y.prop(l,h,g):((1!==C||!y.isXMLDoc(l))&&(_=y.attrHooks[h.toLowerCase()]||(y.expr.match.bool.test(h)?ha:void 0)),void 0!==g?null===g?void y.removeAttr(l,h):_&&"set"in _&&void 0!==(v=_.set(l,g,h))?v:(l.setAttribute(h,g+""),g):_&&"get"in _&&null!==(v=_.get(l,h))?v:(v=y.find.attr(l,h))??void 0)},attrHooks:{type:{set:function(l,h){if(!et.radioValue&&"radio"===h&&Jt(l,"input")){var g=l.value;return l.setAttribute("type",h),g&&(l.value=g),h}}}},removeAttr:function(l,h){var g,v=0,_=h&&h.match(Hr);if(_&&1===l.nodeType)for(;g=_[v++];)l.removeAttribute(g)}}),ha={set:function(l,h,g){return!1===h?y.removeAttr(l,g):l.setAttribute(g,g),g}},y.each(y.expr.match.bool.source.match(/\w+/g),function(l,h){var g=Vo[h]||y.find.attr;Vo[h]=function(v,_,C){var A,U,H=_.toLowerCase();return C||(U=Vo[H],Vo[H]=A,A=null!=g(v,_,C)?H:null,Vo[H]=U),A}});var pa=/^(?:input|select|textarea|button)$/i,ui=/^(?:a|area)$/i;function ci(l){return(l.match(Hr)||[]).join(" ")}function Co(l){return l.getAttribute&&l.getAttribute("class")||""}function qs(l){return Array.isArray(l)?l:"string"==typeof l&&l.match(Hr)||[]}y.fn.extend({prop:function(l,h){return J(this,y.prop,l,h,arguments.length>1)},removeProp:function(l){return this.each(function(){delete this[y.propFix[l]||l]})}}),y.extend({prop:function(l,h,g){var v,_,C=l.nodeType;if(3!==C&&8!==C&&2!==C)return(1!==C||!y.isXMLDoc(l))&&(_=y.propHooks[h=y.propFix[h]||h]),void 0!==g?_&&"set"in _&&void 0!==(v=_.set(l,g,h))?v:l[h]=g:_&&"get"in _&&null!==(v=_.get(l,h))?v:l[h]},propHooks:{tabIndex:{get:function(l){var h=y.find.attr(l,"tabindex");return h?parseInt(h,10):pa.test(l.nodeName)||ui.test(l.nodeName)&&l.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),et.optSelected||(y.propHooks.selected={get:function(l){return null},set:function(l){}}),y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){y.propFix[this.toLowerCase()]=this}),y.fn.extend({addClass:function(l){var h,g,v,_,C,A;return kt(l)?this.each(function(U){y(this).addClass(l.call(this,U,Co(this)))}):(h=qs(l)).length?this.each(function(){if(v=Co(this),g=1===this.nodeType&&" "+ci(v)+" "){for(C=0;C<h.length;C++)g.indexOf(" "+(_=h[C])+" ")<0&&(g+=_+" ");A=ci(g),v!==A&&this.setAttribute("class",A)}}):this},removeClass:function(l){var h,g,v,_,C,A;return kt(l)?this.each(function(U){y(this).removeClass(l.call(this,U,Co(this)))}):arguments.length?(h=qs(l)).length?this.each(function(){if(v=Co(this),g=1===this.nodeType&&" "+ci(v)+" "){for(C=0;C<h.length;C++)for(_=h[C];g.indexOf(" "+_+" ")>-1;)g=g.replace(" "+_+" "," ");A=ci(g),v!==A&&this.setAttribute("class",A)}}):this:this.attr("class","")},toggleClass:function(l,h){var g,v,_,C,A=typeof l,U="string"===A||Array.isArray(l);return kt(l)?this.each(function(H){y(this).toggleClass(l.call(this,H,Co(this),h),h)}):"boolean"==typeof h&&U?h?this.addClass(l):this.removeClass(l):(g=qs(l),this.each(function(){if(U)for(C=y(this),_=0;_<g.length;_++)C.hasClass(v=g[_])?C.removeClass(v):C.addClass(v);else(void 0===l||"boolean"===A)&&((v=Co(this))&&X.set(this,"__className__",v),this.setAttribute&&this.setAttribute("class",v||!1===l?"":X.get(this,"__className__")||""))}))},hasClass:function(l){var h,g,v=0;for(h=" "+l+" ";g=this[v++];)if(1===g.nodeType&&(" "+ci(Co(g))+" ").indexOf(h)>-1)return!0;return!1}});var Ua=/\r/g;y.fn.extend({val:function(l){var h,g,v,_=this[0];return arguments.length?(v=kt(l),this.each(function(C){var A;1===this.nodeType&&(null==(A=v?l.call(this,C,y(this).val()):l)?A="":"number"==typeof A?A+="":Array.isArray(A)&&(A=y.map(A,function(U){return null==U?"":U+""})),(!(h=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()])||!("set"in h)||void 0===h.set(this,A,"value"))&&(this.value=A))})):_?(h=y.valHooks[_.type]||y.valHooks[_.nodeName.toLowerCase()])&&"get"in h&&void 0!==(g=h.get(_,"value"))?g:"string"==typeof(g=_.value)?g.replace(Ua,""):g??"":void 0}}),y.extend({valHooks:{option:{get:function(l){return y.find.attr(l,"value")??ci(y.text(l))}},select:{get:function(l){var h,g,v,_=l.options,C=l.selectedIndex,A="select-one"===l.type,U=A?null:[],H=A?C+1:_.length;for(v=C<0?H:A?C:0;v<H;v++)if(((g=_[v]).selected||v===C)&&!g.disabled&&(!g.parentNode.disabled||!Jt(g.parentNode,"optgroup"))){if(h=y(g).val(),A)return h;U.push(h)}return U},set:function(l,h){for(var g,v,_=l.options,C=y.makeArray(h),A=_.length;A--;)((v=_[A]).selected=y.inArray(y.valHooks.option.get(v),C)>-1)&&(g=!0);return g||(l.selectedIndex=-1),C}}}}),y.each(["radio","checkbox"],function(){y.valHooks[this]={set:function(l,h){if(Array.isArray(h))return l.checked=y.inArray(y(l).val(),h)>-1}},et.checkOn||(y.valHooks[this].get=function(l){return null===l.getAttribute("value")?"on":l.value})});var us=gt.location,ga={guid:Date.now()},Ws=/\?/;y.parseXML=function(l){var h,g;if(!l||"string"!=typeof l)return null;try{h=(new gt.DOMParser).parseFromString(l,"text/xml")}catch{}return g=h&&h.getElementsByTagName("parsererror")[0],(!h||g)&&y.error("Invalid XML: "+(g?y.map(g.childNodes,function(v){return v.textContent}).join("\n"):l)),h};var ma=/^(?:focusinfocus|focusoutblur)$/,gi=function(l){l.stopPropagation()};y.extend(y.event,{trigger:function(l,h,g,v){var _,C,A,U,H,G,me,ge,ae=[g||bt],Re=Dt.call(l,"type")?l.type:l,Nt=Dt.call(l,"namespace")?l.namespace.split("."):[];if(C=ge=A=g=g||bt,3!==g.nodeType&&8!==g.nodeType&&!ma.test(Re+y.event.triggered)&&(Re.indexOf(".")>-1&&(Nt=Re.split("."),Re=Nt.shift(),Nt.sort()),H=Re.indexOf(":")<0&&"on"+Re,(l=l[y.expando]?l:new y.Event(Re,"object"==typeof l&&l)).isTrigger=v?2:3,l.namespace=Nt.join("."),l.rnamespace=l.namespace?new RegExp("(^|\\.)"+Nt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l.result=void 0,l.target||(l.target=g),h=null==h?[l]:y.makeArray(h,[l]),me=y.event.special[Re]||{},v||!me.trigger||!1!==me.trigger.apply(g,h))){if(!v&&!me.noBubble&&!ri(g)){for(ma.test((U=me.delegateType||Re)+Re)||(C=C.parentNode);C;C=C.parentNode)ae.push(C),A=C;A===(g.ownerDocument||bt)&&ae.push(A.defaultView||A.parentWindow||gt)}for(_=0;(C=ae[_++])&&!l.isPropagationStopped();)ge=C,l.type=_>1?U:me.bindType||Re,(G=(X.get(C,"events")||Object.create(null))[l.type]&&X.get(C,"handle"))&&G.apply(C,h),(G=H&&C[H])&&G.apply&&le(C)&&(l.result=G.apply(C,h),!1===l.result&&l.preventDefault());return l.type=Re,!v&&!l.isDefaultPrevented()&&(!me._default||!1===me._default.apply(ae.pop(),h))&&le(g)&&H&&kt(g[Re])&&!ri(g)&&((A=g[H])&&(g[H]=null),y.event.triggered=Re,l.isPropagationStopped()&&ge.addEventListener(Re,gi),g[Re](),l.isPropagationStopped()&&ge.removeEventListener(Re,gi),y.event.triggered=void 0,A&&(g[H]=A)),l.result}},simulate:function(l,h,g){var v=y.extend(new y.Event,g,{type:l,isSimulated:!0});y.event.trigger(v,null,h)}}),y.fn.extend({trigger:function(l,h){return this.each(function(){y.event.trigger(l,h,this)})},triggerHandler:function(l,h){var g=this[0];if(g)return y.event.trigger(l,h,g,!0)}});var Mu=/\[\]$/,$a=/\r?\n/g,za=/^(?:submit|button|image|reset|file)$/i,Pu=/^(?:input|select|textarea|keygen)/i;function _s(l,h,g,v){var _;if(Array.isArray(h))y.each(h,function(C,A){g||Mu.test(l)?v(l,A):_s(l+"["+("object"==typeof A&&null!=A?C:"")+"]",A,g,v)});else if(g||"object"!==xr(h))v(l,h);else for(_ in h)_s(l+"["+_+"]",h[_],g,v)}y.param=function(l,h){var g,v=[],_=function(C,A){var U=kt(A)?A():A;v[v.length]=encodeURIComponent(C)+"="+encodeURIComponent(U??"")};if(null==l)return"";if(Array.isArray(l)||l.jquery&&!y.isPlainObject(l))y.each(l,function(){_(this.name,this.value)});else for(g in l)_s(g,l[g],h,_);return v.join("&")},y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var l=y.prop(this,"elements");return l?y.makeArray(l):this}).filter(function(){var l=this.type;return this.name&&!y(this).is(":disabled")&&Pu.test(this.nodeName)&&!za.test(l)&&(this.checked||!nn.test(l))}).map(function(l,h){var g=y(this).val();return null==g?null:Array.isArray(g)?y.map(g,function(v){return{name:h.name,value:v.replace($a,"\r\n")}}):{name:h.name,value:g.replace($a,"\r\n")}}).get()}});var Nu=/%20/g,va=/#.*$/,uo=/([?&])_=[^&]*/,Ga=/^(.*?):[ \t]*([^\r\n]*)$/gm,Wa=/^(?:GET|HEAD)$/,Za=/^\/\//,Zs={},ya={},Ni="*/".concat("*"),mi=bt.createElement("a");function Ou(l){return function(h,g){"string"!=typeof h&&(g=h,h="*");var v,_=0,C=h.toLowerCase().match(Hr)||[];if(kt(g))for(;v=C[_++];)"+"===v[0]?(v=v.slice(1)||"*",(l[v]=l[v]||[]).unshift(g)):(l[v]=l[v]||[]).push(g)}}function Bo(l,h,g,v){var _={},C=l===ya;function A(U){var H;return _[U]=!0,y.each(l[U]||[],function(G,me){var ge=me(h,g,v);return"string"!=typeof ge||C||_[ge]?C?!(H=ge):void 0:(h.dataTypes.unshift(ge),A(ge),!1)}),H}return A(h.dataTypes[0])||!_["*"]&&A("*")}function Cs(l,h){var g,v,_=y.ajaxSettings.flatOptions||{};for(g in h)void 0!==h[g]&&((_[g]?l:v||(v={}))[g]=h[g]);return v&&y.extend(!0,l,v),l}mi.href=us.href,y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:us.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(us.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ni,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(l,h){return h?Cs(Cs(l,y.ajaxSettings),h):Cs(y.ajaxSettings,l)},ajaxPrefilter:Ou(Zs),ajaxTransport:Ou(ya),ajax:function(l,h){"object"==typeof l&&(h=l,l=void 0);var g,v,_,C,A,U,H,G,me,ge,ae=y.ajaxSetup({},h=h||{}),Re=ae.context||ae,Nt=ae.context&&(Re.nodeType||Re.jquery)?y(Re):y.event,tn=y.Deferred(),ke=y.Callbacks("once memory"),Un=ae.statusCode||{},rr={},co={},Oi="canceled",Ae={readyState:0,getResponseHeader:function(qt){var zn;if(H){if(!C)for(C={};zn=Ga.exec(_);)C[zn[1].toLowerCase()+" "]=(C[zn[1].toLowerCase()+" "]||[]).concat(zn[2]);zn=C[qt.toLowerCase()+" "]}return null==zn?null:zn.join(", ")},getAllResponseHeaders:function(){return H?_:null},setRequestHeader:function(qt,zn){return null==H&&(qt=co[qt.toLowerCase()]=co[qt.toLowerCase()]||qt,rr[qt]=zn),this},overrideMimeType:function(qt){return null==H&&(ae.mimeType=qt),this},statusCode:function(qt){var zn;if(qt)if(H)Ae.always(qt[Ae.status]);else for(zn in qt)Un[zn]=[Un[zn],qt[zn]];return this},abort:function(qt){var zn=qt||Oi;return g&&g.abort(zn),yi(0,zn),this}};if(tn.promise(Ae),ae.url=((l||ae.url||us.href)+"").replace(Za,us.protocol+"//"),ae.type=h.method||h.type||ae.method||ae.type,ae.dataTypes=(ae.dataType||"*").toLowerCase().match(Hr)||[""],null==ae.crossDomain){U=bt.createElement("a");try{U.href=ae.url,U.href=U.href,ae.crossDomain=mi.protocol+"//"+mi.host!=U.protocol+"//"+U.host}catch{ae.crossDomain=!0}}if(ae.data&&ae.processData&&"string"!=typeof ae.data&&(ae.data=y.param(ae.data,ae.traditional)),Bo(Zs,ae,h,Ae),H)return Ae;for(me in(G=y.event&&ae.global)&&0==y.active++&&y.event.trigger("ajaxStart"),ae.type=ae.type.toUpperCase(),ae.hasContent=!Wa.test(ae.type),v=ae.url.replace(va,""),ae.hasContent?ae.data&&ae.processData&&0===(ae.contentType||"").indexOf("application/x-www-form-urlencoded")&&(ae.data=ae.data.replace(Nu,"+")):(ge=ae.url.slice(v.length),ae.data&&(ae.processData||"string"==typeof ae.data)&&(v+=(Ws.test(v)?"&":"?")+ae.data,delete ae.data),!1===ae.cache&&(v=v.replace(uo,"$1"),ge=(Ws.test(v)?"&":"?")+"_="+ga.guid+++ge),ae.url=v+ge),ae.ifModified&&(y.lastModified[v]&&Ae.setRequestHeader("If-Modified-Since",y.lastModified[v]),y.etag[v]&&Ae.setRequestHeader("If-None-Match",y.etag[v])),(ae.data&&ae.hasContent&&!1!==ae.contentType||h.contentType)&&Ae.setRequestHeader("Content-Type",ae.contentType),Ae.setRequestHeader("Accept",ae.dataTypes[0]&&ae.accepts[ae.dataTypes[0]]?ae.accepts[ae.dataTypes[0]]+("*"!==ae.dataTypes[0]?", "+Ni+"; q=0.01":""):ae.accepts["*"]),ae.headers)Ae.setRequestHeader(me,ae.headers[me]);if(ae.beforeSend&&(!1===ae.beforeSend.call(Re,Ae,ae)||H))return Ae.abort();if(Oi="abort",ke.add(ae.complete),Ae.done(ae.success),Ae.fail(ae.error),g=Bo(ya,ae,h,Ae)){if(Ae.readyState=1,G&&Nt.trigger("ajaxSend",[Ae,ae]),H)return Ae;ae.async&&ae.timeout>0&&(A=gt.setTimeout(function(){Ae.abort("timeout")},ae.timeout));try{H=!1,g.send(rr,yi)}catch(qt){if(H)throw qt;yi(-1,qt)}}else yi(-1,"No Transport");function yi(qt,zn,jo,Uo){var Er,lo,Ri,mt,Yt,wi=zn;H||(H=!0,A&&gt.clearTimeout(A),g=void 0,_=Uo||"",Ae.readyState=qt>0?4:0,Er=qt>=200&&qt<300||304===qt,jo&&(mt=function To(l,h,g){for(var v,_,C,A,U=l.contents,H=l.dataTypes;"*"===H[0];)H.shift(),void 0===v&&(v=l.mimeType||h.getResponseHeader("Content-Type"));if(v)for(_ in U)if(U[_]&&U[_].test(v)){H.unshift(_);break}if(H[0]in g)C=H[0];else{for(_ in g){if(!H[0]||l.converters[_+" "+H[0]]){C=_;break}A||(A=_)}C=C||A}if(C)return C!==H[0]&&H.unshift(C),g[C]}(ae,Ae,jo)),!Er&&y.inArray("script",ae.dataTypes)>-1&&y.inArray("json",ae.dataTypes)<0&&(ae.converters["text script"]=function(){}),mt=function Ya(l,h,g,v){var _,C,A,U,H,G={},me=l.dataTypes.slice();if(me[1])for(A in l.converters)G[A.toLowerCase()]=l.converters[A];for(C=me.shift();C;)if(l.responseFields[C]&&(g[l.responseFields[C]]=h),!H&&v&&l.dataFilter&&(h=l.dataFilter(h,l.dataType)),H=C,C=me.shift())if("*"===C)C=H;else if("*"!==H&&H!==C){if(!(A=G[H+" "+C]||G["* "+C]))for(_ in G)if((U=_.split(" "))[1]===C&&(A=G[H+" "+U[0]]||G["* "+U[0]])){!0===A?A=G[_]:!0!==G[_]&&(C=U[0],me.unshift(U[1]));break}if(!0!==A)if(A&&l.throws)h=A(h);else try{h=A(h)}catch(ge){return{state:"parsererror",error:A?ge:"No conversion from "+H+" to "+C}}}return{state:"success",data:h}}(ae,mt,Ae,Er),Er?(ae.ifModified&&((Yt=Ae.getResponseHeader("Last-Modified"))&&(y.lastModified[v]=Yt),(Yt=Ae.getResponseHeader("etag"))&&(y.etag[v]=Yt)),204===qt||"HEAD"===ae.type?wi="nocontent":304===qt?wi="notmodified":(wi=mt.state,lo=mt.data,Er=!(Ri=mt.error))):(Ri=wi,(qt||!wi)&&(wi="error",qt<0&&(qt=0))),Ae.status=qt,Ae.statusText=(zn||wi)+"",Er?tn.resolveWith(Re,[lo,wi,Ae]):tn.rejectWith(Re,[Ae,wi,Ri]),Ae.statusCode(Un),Un=void 0,G&&Nt.trigger(Er?"ajaxSuccess":"ajaxError",[Ae,ae,Er?lo:Ri]),ke.fireWith(Re,[Ae,wi]),G&&(Nt.trigger("ajaxComplete",[Ae,ae]),--y.active||y.event.trigger("ajaxStop")))}return Ae},getJSON:function(l,h,g){return y.get(l,h,g,"json")},getScript:function(l,h){return y.get(l,void 0,h,"script")}}),y.each(["get","post"],function(l,h){y[h]=function(g,v,_,C){return kt(v)&&(C=C||_,_=v,v=void 0),y.ajax(y.extend({url:g,type:h,dataType:C,data:v,success:_},y.isPlainObject(g)&&g))}}),y.ajaxPrefilter(function(l){var h;for(h in l.headers)"content-type"===h.toLowerCase()&&(l.contentType=l.headers[h]||"")}),y._evalUrl=function(l,h,g){return y.ajax({url:l,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(v){y.globalEval(v,h,g)}})},y.fn.extend({wrapAll:function(l){var h;return this[0]&&(kt(l)&&(l=l.call(this[0])),h=y(l,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&h.insertBefore(this[0]),h.map(function(){for(var g=this;g.firstElementChild;)g=g.firstElementChild;return g}).append(this)),this},wrapInner:function(l){return kt(l)?this.each(function(h){y(this).wrapInner(l.call(this,h))}):this.each(function(){var h=y(this),g=h.contents();g.length?g.wrapAll(l):h.append(l)})},wrap:function(l){var h=kt(l);return this.each(function(g){y(this).wrapAll(h?l.call(this,g):l)})},unwrap:function(l){return this.parent(l).not("body").each(function(){y(this).replaceWith(this.childNodes)}),this}}),y.expr.pseudos.hidden=function(l){return!y.expr.pseudos.visible(l)},y.expr.pseudos.visible=function(l){return!!(l.offsetWidth||l.offsetHeight||l.getClientRects().length)},y.ajaxSettings.xhr=function(){try{return new gt.XMLHttpRequest}catch{}};var wa={0:200,1223:204},Ho=y.ajaxSettings.xhr();et.cors=!!Ho&&"withCredentials"in Ho,et.ajax=Ho=!!Ho,y.ajaxTransport(function(l){var h,g;if(et.cors||Ho&&!l.crossDomain)return{send:function(v,_){var C,A=l.xhr();if(A.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(C in l.xhrFields)A[C]=l.xhrFields[C];for(C in l.mimeType&&A.overrideMimeType&&A.overrideMimeType(l.mimeType),!l.crossDomain&&!v["X-Requested-With"]&&(v["X-Requested-With"]="XMLHttpRequest"),v)A.setRequestHeader(C,v[C]);h=function(U){return function(){h&&(h=g=A.onload=A.onerror=A.onabort=A.ontimeout=A.onreadystatechange=null,"abort"===U?A.abort():"error"===U?"number"!=typeof A.status?_(0,"error"):_(A.status,A.statusText):_(wa[A.status]||A.status,A.statusText,"text"!==(A.responseType||"text")||"string"!=typeof A.responseText?{binary:A.response}:{text:A.responseText},A.getAllResponseHeaders()))}},A.onload=h(),g=A.onerror=A.ontimeout=h("error"),void 0!==A.onabort?A.onabort=g:A.onreadystatechange=function(){4===A.readyState&&gt.setTimeout(function(){h&&g()})},h=h("abort");try{A.send(l.hasContent&&l.data||null)}catch(U){if(h)throw U}},abort:function(){h&&h()}}}),y.ajaxPrefilter(function(l){l.crossDomain&&(l.contents.script=!1)}),y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(l){return y.globalEval(l),l}}}),y.ajaxPrefilter("script",function(l){void 0===l.cache&&(l.cache=!1),l.crossDomain&&(l.type="GET")}),y.ajaxTransport("script",function(l){var h,g;if(l.crossDomain||l.scriptAttrs)return{send:function(v,_){h=y("<script>").attr(l.scriptAttrs||{}).prop({charset:l.scriptCharset,src:l.url}).on("load error",g=function(C){h.remove(),g=null,C&&_("error"===C.type?404:200,C.type)}),bt.head.appendChild(h[0])},abort:function(){g&&g()}}});var l,vi=[],ba=/(=)\?(?=&|$)|\?\?/;y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var l=vi.pop()||y.expando+"_"+ga.guid++;return this[l]=!0,l}}),y.ajaxPrefilter("json jsonp",function(l,h,g){var v,_,C,A=!1!==l.jsonp&&(ba.test(l.url)?"url":"string"==typeof l.data&&0===(l.contentType||"").indexOf("application/x-www-form-urlencoded")&&ba.test(l.data)&&"data");if(A||"jsonp"===l.dataTypes[0])return v=l.jsonpCallback=kt(l.jsonpCallback)?l.jsonpCallback():l.jsonpCallback,A?l[A]=l[A].replace(ba,"$1"+v):!1!==l.jsonp&&(l.url+=(Ws.test(l.url)?"&":"?")+l.jsonp+"="+v),l.converters["script json"]=function(){return C||y.error(v+" was not called"),C[0]},l.dataTypes[0]="json",_=gt[v],gt[v]=function(){C=arguments},g.always(function(){void 0===_?y(gt).removeProp(v):gt[v]=_,l[v]&&(l.jsonpCallback=h.jsonpCallback,vi.push(v)),C&&kt(_)&&_(C[0]),C=_=void 0}),"script"}),et.createHTMLDocument=((l=bt.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===l.childNodes.length),y.parseHTML=function(l,h,g){return"string"!=typeof l?[]:("boolean"==typeof h&&(g=h,h=!1),h||(et.createHTMLDocument?((v=(h=bt.implementation.createHTMLDocument("")).createElement("base")).href=bt.location.href,h.head.appendChild(v)):h=bt),C=!g&&[],(_=yr.exec(l))?[h.createElement(_[1])]:(_=wt([l],h,C),C&&C.length&&y(C).remove(),y.merge([],_.childNodes)));var v,_,C},y.fn.load=function(l,h,g){var v,_,C,A=this,U=l.indexOf(" ");return U>-1&&(v=ci(l.slice(U)),l=l.slice(0,U)),kt(h)?(g=h,h=void 0):h&&"object"==typeof h&&(_="POST"),A.length>0&&y.ajax({url:l,type:_||"GET",dataType:"html",data:h}).done(function(H){C=arguments,A.html(v?y("<div>").append(y.parseHTML(H)).find(v):H)}).always(g&&function(H,G){A.each(function(){g.apply(this,C||[H.responseText,G,H])})}),this},y.expr.pseudos.animated=function(l){return y.grep(y.timers,function(h){return l===h.elem}).length},y.offset={setOffset:function(l,h,g){var v,_,C,A,U,H,me=y.css(l,"position"),ge=y(l),ae={};"static"===me&&(l.style.position="relative"),U=ge.offset(),C=y.css(l,"top"),H=y.css(l,"left"),("absolute"===me||"fixed"===me)&&(C+H).indexOf("auto")>-1?(A=(v=ge.position()).top,_=v.left):(A=parseFloat(C)||0,_=parseFloat(H)||0),kt(h)&&(h=h.call(l,g,y.extend({},U))),null!=h.top&&(ae.top=h.top-U.top+A),null!=h.left&&(ae.left=h.left-U.left+_),"using"in h?h.using.call(l,ae):ge.css(ae)}},y.fn.extend({offset:function(l){if(arguments.length)return void 0===l?this:this.each(function(_){y.offset.setOffset(this,l,_)});var h,g,v=this[0];return v?v.getClientRects().length?{top:(h=v.getBoundingClientRect()).top+(g=v.ownerDocument.defaultView).pageYOffset,left:h.left+g.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var l,h,g,v=this[0],_={top:0,left:0};if("fixed"===y.css(v,"position"))h=v.getBoundingClientRect();else{for(h=this.offset(),g=v.ownerDocument,l=v.offsetParent||g.documentElement;l&&(l===g.body||l===g.documentElement)&&"static"===y.css(l,"position");)l=l.parentNode;l&&l!==v&&1===l.nodeType&&((_=y(l).offset()).top+=y.css(l,"borderTopWidth",!0),_.left+=y.css(l,"borderLeftWidth",!0))}return{top:h.top-_.top-y.css(v,"marginTop",!0),left:h.left-_.left-y.css(v,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var l=this.offsetParent;l&&"static"===y.css(l,"position");)l=l.offsetParent;return l||ct})}}),y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(l,h){var g="pageYOffset"===h;y.fn[l]=function(v){return J(this,function(_,C,A){var U;if(ri(_)?U=_:9===_.nodeType&&(U=_.defaultView),void 0===A)return U?U[h]:_[C];U?U.scrollTo(g?U.pageXOffset:A,g?A:U.pageYOffset):_[C]=A},l,v,arguments.length)}}),y.each(["top","left"],function(l,h){y.cssHooks[h]=ht(et.pixelPosition,function(g,v){if(v)return v=tt(g,h),Ve.test(v)?y(g).position()[h]+"px":v})}),y.each({Height:"height",Width:"width"},function(l,h){y.each({padding:"inner"+l,content:h,"":"outer"+l},function(g,v){y.fn[v]=function(_,C){var A=arguments.length&&(g||"boolean"!=typeof _),U=g||(!0===_||!0===C?"margin":"border");return J(this,function(H,G,me){var ge;return ri(H)?0===v.indexOf("outer")?H["inner"+l]:H.document.documentElement["client"+l]:9===H.nodeType?(ge=H.documentElement,Math.max(H.body["scroll"+l],ge["scroll"+l],H.body["offset"+l],ge["offset"+l],ge["client"+l])):void 0===me?y.css(H,G,U):y.style(H,G,me,U)},h,A?_:void 0,A)}})}),y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(l,h){y.fn[h]=function(g){return this.on(h,g)}}),y.fn.extend({bind:function(l,h,g){return this.on(l,null,h,g)},unbind:function(l,h){return this.off(l,null,h)},delegate:function(l,h,g,v){return this.on(h,l,g,v)},undelegate:function(l,h,g){return 1===arguments.length?this.off(l,"**"):this.off(h,l||"**",g)},hover:function(l,h){return this.on("mouseenter",l).on("mouseleave",h||l)}}),y.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(l,h){y.fn[h]=function(g,v){return arguments.length>0?this.on(h,null,g,v):this.trigger(h)}});var Ys=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;y.proxy=function(l,h){var g,v,_;if("string"==typeof h&&(g=l[h],h=l,l=g),kt(l))return v=Xn.call(arguments,2),_=function(){return l.apply(h||this,v.concat(Xn.call(arguments)))},_.guid=l.guid=l.guid||y.guid++,_},y.holdReady=function(l){l?y.readyWait++:y.ready(!0)},y.isArray=Array.isArray,y.parseJSON=JSON.parse,y.nodeName=Jt,y.isFunction=kt,y.isWindow=ri,y.camelCase=z,y.type=xr,y.now=Date.now,y.isNumeric=function(l){var h=y.type(l);return("number"===h||"string"===h)&&!isNaN(l-parseFloat(l))},y.trim=function(l){return null==l?"":(l+"").replace(Ys,"$1")},void 0!==(Si=function(){return y}.apply(fr,[]))&&(Gn.exports=Si);var Ru=gt.jQuery,Xa=gt.$;return y.noConflict=function(l){return gt.$===y&&(gt.$=Xa),l&&gt.jQuery===y&&(gt.jQuery=Ru),y},typeof Pr>"u"&&(gt.jQuery=gt.$=y),y})},332:()=>{"use strict";!function(F){const z=F.performance;function le(un){z&&z.mark&&z.mark(un)}function se(un,Ke){z&&z.measure&&z.measure(un,Ke)}le("Zone");const X=F.__Zone_symbol_prefix||"__zone_symbol__";function ye(un){return X+un}const qe=!0===F[ye("forceDuplicateZoneCheck")];if(F.Zone){if(qe||"function"!=typeof F.Zone.__symbol__)throw new Error("Zone already loaded.");return F.Zone}let Oe=(()=>{class un{static#e=this.__symbol__=ye;static assertZonePatched(){if(F.Promise!==dr.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let q=un.current;for(;q.parent;)q=q.parent;return q}static get current(){return wn.zone}static get currentTask(){return Sr}static __load_patch(q,ce,lt=!1){if(dr.hasOwnProperty(q)){if(!lt&&qe)throw Error("Already loaded patch: "+q)}else if(!F["__Zone_disable_"+q]){const Pt="Zone:"+q;le(Pt),dr[q]=ce(F,un,xn),se(Pt,Pt)}}get parent(){return this._parent}get name(){return this._name}constructor(q,ce){this._parent=q,this._name=ce?ce.name||"unnamed":"<root>",this._properties=ce&&ce.properties||{},this._zoneDelegate=new Ze(this,this._parent&&this._parent._zoneDelegate,ce)}get(q){const ce=this.getZoneWith(q);if(ce)return ce._properties[q]}getZoneWith(q){let ce=this;for(;ce;){if(ce._properties.hasOwnProperty(q))return ce;ce=ce._parent}return null}fork(q){if(!q)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,q)}wrap(q,ce){if("function"!=typeof q)throw new Error("Expecting function got: "+q);const lt=this._zoneDelegate.intercept(this,q,ce),Pt=this;return function(){return Pt.runGuarded(lt,this,arguments,ce)}}run(q,ce,lt,Pt){wn={parent:wn,zone:this};try{return this._zoneDelegate.invoke(this,q,ce,lt,Pt)}finally{wn=wn.parent}}runGuarded(q,ce=null,lt,Pt){wn={parent:wn,zone:this};try{try{return this._zoneDelegate.invoke(this,q,ce,lt,Pt)}catch(Rn){if(this._zoneDelegate.handleError(this,Rn))throw Rn}}finally{wn=wn.parent}}runTask(q,ce,lt){if(q.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(q.zone||Tn).name+"; Execution: "+this.name+")");if(q.state===nn&&(q.type===fn||q.type===wt))return;const Pt=q.state!=Ye;Pt&&q._transitionTo(Ye,rn),q.runCount++;const Rn=Sr;Sr=q,wn={parent:wn,zone:this};try{q.type==wt&&q.data&&!q.data.isPeriodic&&(q.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,q,ce,lt)}catch(Le){if(this._zoneDelegate.handleError(this,Le))throw Le}}finally{q.state!==nn&&q.state!==We&&(q.type==fn||q.data&&q.data.isPeriodic?Pt&&q._transitionTo(rn,Ye):(q.runCount=0,this._updateTaskCount(q,-1),Pt&&q._transitionTo(nn,Ye,nn))),wn=wn.parent,Sr=Rn}}scheduleTask(q){if(q.zone&&q.zone!==this){let lt=this;for(;lt;){if(lt===q.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${q.zone.name}`);lt=lt.parent}}q._transitionTo(Zn,nn);const ce=[];q._zoneDelegates=ce,q._zone=this;try{q=this._zoneDelegate.scheduleTask(this,q)}catch(lt){throw q._transitionTo(We,Zn,nn),this._zoneDelegate.handleError(this,lt),lt}return q._zoneDelegates===ce&&this._updateTaskCount(q,1),q.state==Zn&&q._transitionTo(rn,Zn),q}scheduleMicroTask(q,ce,lt,Pt){return this.scheduleTask(new Ge(on,q,ce,lt,Pt,void 0))}scheduleMacroTask(q,ce,lt,Pt,Rn){return this.scheduleTask(new Ge(wt,q,ce,lt,Pt,Rn))}scheduleEventTask(q,ce,lt,Pt,Rn){return this.scheduleTask(new Ge(fn,q,ce,lt,Pt,Rn))}cancelTask(q){if(q.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(q.zone||Tn).name+"; Execution: "+this.name+")");if(q.state===rn||q.state===Ye){q._transitionTo(Bt,rn,Ye);try{this._zoneDelegate.cancelTask(this,q)}catch(ce){throw q._transitionTo(We,Bt),this._zoneDelegate.handleError(this,ce),ce}return this._updateTaskCount(q,-1),q._transitionTo(nn,Bt),q.runCount=0,q}}_updateTaskCount(q,ce){const lt=q._zoneDelegates;-1==ce&&(q._zoneDelegates=null);for(let Pt=0;Pt<lt.length;Pt++)lt[Pt]._updateTaskCount(q.type,ce)}}return un})();const vt={name:"",onHasTask:(un,Ke,q,ce)=>un.hasTask(q,ce),onScheduleTask:(un,Ke,q,ce)=>un.scheduleTask(q,ce),onInvokeTask:(un,Ke,q,ce,lt,Pt)=>un.invokeTask(q,ce,lt,Pt),onCancelTask:(un,Ke,q,ce)=>un.cancelTask(q,ce)};class Ze{constructor(Ke,q,ce){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=Ke,this._parentDelegate=q,this._forkZS=ce&&(ce&&ce.onFork?ce:q._forkZS),this._forkDlgt=ce&&(ce.onFork?q:q._forkDlgt),this._forkCurrZone=ce&&(ce.onFork?this.zone:q._forkCurrZone),this._interceptZS=ce&&(ce.onIntercept?ce:q._interceptZS),this._interceptDlgt=ce&&(ce.onIntercept?q:q._interceptDlgt),this._interceptCurrZone=ce&&(ce.onIntercept?this.zone:q._interceptCurrZone),this._invokeZS=ce&&(ce.onInvoke?ce:q._invokeZS),this._invokeDlgt=ce&&(ce.onInvoke?q:q._invokeDlgt),this._invokeCurrZone=ce&&(ce.onInvoke?this.zone:q._invokeCurrZone),this._handleErrorZS=ce&&(ce.onHandleError?ce:q._handleErrorZS),this._handleErrorDlgt=ce&&(ce.onHandleError?q:q._handleErrorDlgt),this._handleErrorCurrZone=ce&&(ce.onHandleError?this.zone:q._handleErrorCurrZone),this._scheduleTaskZS=ce&&(ce.onScheduleTask?ce:q._scheduleTaskZS),this._scheduleTaskDlgt=ce&&(ce.onScheduleTask?q:q._scheduleTaskDlgt),this._scheduleTaskCurrZone=ce&&(ce.onScheduleTask?this.zone:q._scheduleTaskCurrZone),this._invokeTaskZS=ce&&(ce.onInvokeTask?ce:q._invokeTaskZS),this._invokeTaskDlgt=ce&&(ce.onInvokeTask?q:q._invokeTaskDlgt),this._invokeTaskCurrZone=ce&&(ce.onInvokeTask?this.zone:q._invokeTaskCurrZone),this._cancelTaskZS=ce&&(ce.onCancelTask?ce:q._cancelTaskZS),this._cancelTaskDlgt=ce&&(ce.onCancelTask?q:q._cancelTaskDlgt),this._cancelTaskCurrZone=ce&&(ce.onCancelTask?this.zone:q._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const lt=ce&&ce.onHasTask;(lt||q&&q._hasTaskZS)&&(this._hasTaskZS=lt?ce:vt,this._hasTaskDlgt=q,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=Ke,ce.onScheduleTask||(this._scheduleTaskZS=vt,this._scheduleTaskDlgt=q,this._scheduleTaskCurrZone=this.zone),ce.onInvokeTask||(this._invokeTaskZS=vt,this._invokeTaskDlgt=q,this._invokeTaskCurrZone=this.zone),ce.onCancelTask||(this._cancelTaskZS=vt,this._cancelTaskDlgt=q,this._cancelTaskCurrZone=this.zone))}fork(Ke,q){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,Ke,q):new Oe(Ke,q)}intercept(Ke,q,ce){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,Ke,q,ce):q}invoke(Ke,q,ce,lt,Pt){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,Ke,q,ce,lt,Pt):q.apply(ce,lt)}handleError(Ke,q){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,Ke,q)}scheduleTask(Ke,q){let ce=q;if(this._scheduleTaskZS)this._hasTaskZS&&ce._zoneDelegates.push(this._hasTaskDlgtOwner),ce=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,Ke,q),ce||(ce=q);else if(q.scheduleFn)q.scheduleFn(q);else{if(q.type!=on)throw new Error("Task is missing scheduleFn.");It(q)}return ce}invokeTask(Ke,q,ce,lt){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,Ke,q,ce,lt):q.callback.apply(ce,lt)}cancelTask(Ke,q){let ce;if(this._cancelTaskZS)ce=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,Ke,q);else{if(!q.cancelFn)throw Error("Task is not cancelable");ce=q.cancelFn(q)}return ce}hasTask(Ke,q){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,Ke,q)}catch(ce){this.handleError(Ke,ce)}}_updateTaskCount(Ke,q){const ce=this._taskCounts,lt=ce[Ke],Pt=ce[Ke]=lt+q;if(Pt<0)throw new Error("More tasks executed then were scheduled.");0!=lt&&0!=Pt||this.hasTask(this.zone,{microTask:ce.microTask>0,macroTask:ce.macroTask>0,eventTask:ce.eventTask>0,change:Ke})}}class Ge{constructor(Ke,q,ce,lt,Pt,Rn){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=Ke,this.source=q,this.data=lt,this.scheduleFn=Pt,this.cancelFn=Rn,!ce)throw new Error("callback is not defined");this.callback=ce;const Le=this;this.invoke=Ke===fn&&lt&&lt.useG?Ge.invokeTask:function(){return Ge.invokeTask.call(F,Le,this,arguments)}}static invokeTask(Ke,q,ce){Ke||(Ke=this),hr++;try{return Ke.runCount++,Ke.zone.runTask(Ke,q,ce)}finally{1==hr&&nt(),hr--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(nn,Zn)}_transitionTo(Ke,q,ce){if(this._state!==q&&this._state!==ce)throw new Error(`${this.type} '${this.source}': can not transition to '${Ke}', expecting state '${q}'${ce?" or '"+ce+"'":""}, was '${this._state}'.`);this._state=Ke,Ke==nn&&(this._zoneDelegates=null)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const yt=ye("setTimeout"),pt=ye("Promise"),ct=ye("then");let Bn,en=[],ln=!1;function Hn(un){if(Bn||F[pt]&&(Bn=F[pt].resolve(0)),Bn){let Ke=Bn[ct];Ke||(Ke=Bn.then),Ke.call(Bn,un)}else F[yt](un,0)}function It(un){0===hr&&0===en.length&&Hn(nt),un&&en.push(un)}function nt(){if(!ln){for(ln=!0;en.length;){const un=en;en=[];for(let Ke=0;Ke<un.length;Ke++){const q=un[Ke];try{q.zone.runTask(q,null,null)}catch(ce){xn.onUnhandledError(ce)}}}xn.microtaskDrainDone(),ln=!1}}const Tn={name:"NO ZONE"},nn="notScheduled",Zn="scheduling",rn="scheduled",Ye="running",Bt="canceling",We="unknown",on="microTask",wt="macroTask",fn="eventTask",dr={},xn={symbol:ye,currentZoneFrame:()=>wn,onUnhandledError:jn,microtaskDrainDone:jn,scheduleMicroTask:It,showUncaughtError:()=>!Oe[ye("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:jn,patchMethod:()=>jn,bindArguments:()=>[],patchThen:()=>jn,patchMacroTask:()=>jn,patchEventPrototype:()=>jn,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>jn,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>jn,wrapWithCurrentZone:()=>jn,filterProperties:()=>[],attachOriginToPatched:()=>jn,_redefineProperty:()=>jn,patchCallbacks:()=>jn,nativeScheduleMicroTask:Hn};let wn={parent:null,zone:new Oe(null,null)},Sr=null,hr=0;function jn(){}se("Zone","Zone"),F.Zone=Oe}(globalThis);const Gn=Object.getOwnPropertyDescriptor,fr=Object.defineProperty,qn=Object.getPrototypeOf,Si=Object.create,gt=Array.prototype.slice,Pr="addEventListener",it="removeEventListener",Me=Zone.__symbol__(Pr),Xn=Zone.__symbol__(it),Tr="true",Qn="false",ot=Zone.__symbol__("");function Gr(F,z){return Zone.current.wrap(F,z)}function vr(F,z,le,se,X){return Zone.current.scheduleMacroTask(F,z,le,se,X)}const Dt=Zone.__symbol__,_n=typeof window<"u",Ui=_n?window:void 0,et=_n&&Ui||globalThis,kt="removeAttribute";function ri(F,z){for(let le=F.length-1;le>=0;le--)"function"==typeof F[le]&&(F[le]=Gr(F[le],z+"_"+le));return F}function so(F){return!F||!1!==F.writable&&!("function"==typeof F.get&&typeof F.set>"u")}const di=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,xr=!("nw"in et)&&typeof et.process<"u"&&"[object process]"==={}.toString.call(et.process),Wn=!xr&&!di&&!(!_n||!Ui.HTMLElement),ii=typeof et.process<"u"&&"[object process]"==={}.toString.call(et.process)&&!di&&!(!_n||!Ui.HTMLElement),y={},oi=function(F){if(!(F=F||et.event))return;let z=y[F.type];z||(z=y[F.type]=Dt("ON_PROPERTY"+F.type));const le=this||F.target||et,se=le[z];let X;return Wn&&le===Ui&&"error"===F.type?(X=se&&se.call(this,F.message,F.filename,F.lineno,F.colno,F.error),!0===X&&F.preventDefault()):(X=se&&se.apply(this,arguments),null!=X&&!X&&F.preventDefault()),X};function Jt(F,z,le){let se=Gn(F,z);if(!se&&le&&Gn(le,z)&&(se={enumerable:!0,configurable:!0}),!se||!se.configurable)return;const X=Dt("on"+z+"patched");if(F.hasOwnProperty(X)&&F[X])return;delete se.writable,delete se.value;const ye=se.get,qe=se.set,Oe=z.slice(2);let vt=y[Oe];vt||(vt=y[Oe]=Dt("ON_PROPERTY"+Oe)),se.set=function(Ze){let Ge=this;!Ge&&F===et&&(Ge=et),Ge&&("function"==typeof Ge[vt]&&Ge.removeEventListener(Oe,oi),qe&&qe.call(Ge,null),Ge[vt]=Ze,"function"==typeof Ze&&Ge.addEventListener(Oe,oi,!1))},se.get=function(){let Ze=this;if(!Ze&&F===et&&(Ze=et),!Ze)return null;const Ge=Ze[vt];if(Ge)return Ge;if(ye){let yt=ye.call(this);if(yt)return se.set.call(this,yt),"function"==typeof Ze[kt]&&Ze.removeAttribute(z),yt}return null},fr(F,z,se),F[X]=!0}function bo(F,z,le){if(z)for(let se=0;se<z.length;se++)Jt(F,"on"+z[se],le);else{const se=[];for(const X in F)"on"==X.slice(0,2)&&se.push(X);for(let X=0;X<se.length;X++)Jt(F,se[X],le)}}const mn=Dt("originalInstance");function qr(F){const z=et[F];if(!z)return;et[Dt(F)]=z,et[F]=function(){const X=ri(arguments,F);switch(X.length){case 0:this[mn]=new z;break;case 1:this[mn]=new z(X[0]);break;case 2:this[mn]=new z(X[0],X[1]);break;case 3:this[mn]=new z(X[0],X[1],X[2]);break;case 4:this[mn]=new z(X[0],X[1],X[2],X[3]);break;default:throw new Error("Arg list too long.")}},Zr(et[F],z);const le=new z(function(){});let se;for(se in le)"XMLHttpRequest"===F&&"responseBlob"===se||function(X){"function"==typeof le[X]?et[F].prototype[X]=function(){return this[mn][X].apply(this[mn],arguments)}:fr(et[F].prototype,X,{set:function(ye){"function"==typeof ye?(this[mn][X]=Gr(ye,F+"."+X),Zr(this[mn][X],ye)):this[mn][X]=ye},get:function(){return this[mn][X]}})}(se);for(se in z)"prototype"!==se&&z.hasOwnProperty(se)&&(et[F][se]=z[se])}function Mt(F,z,le){let se=F;for(;se&&!se.hasOwnProperty(z);)se=qn(se);!se&&F[z]&&(se=F);const X=Dt(z);let ye=null;if(se&&(!(ye=se[X])||!se.hasOwnProperty(X))&&(ye=se[X]=se[z],so(se&&Gn(se,z)))){const Oe=le(ye,X,z);se[z]=function(){return Oe(this,arguments)},Zr(se[z],ye)}return ye}function Wr(F,z,le){let se=null;function X(ye){const qe=ye.data;return qe.args[qe.cbIdx]=function(){ye.invoke.apply(this,arguments)},se.apply(qe.target,qe.args),ye}se=Mt(F,z,ye=>function(qe,Oe){const vt=le(qe,Oe);return vt.cbIdx>=0&&"function"==typeof Oe[vt.cbIdx]?vr(vt.name,Oe[vt.cbIdx],vt,X):ye.apply(qe,Oe)})}function Zr(F,z){F[Dt("OriginalDelegate")]=z}let bs=!1,Nr=!1;function $i(){if(bs)return Nr;bs=!0;try{const F=Ui.navigator.userAgent;(-1!==F.indexOf("MSIE ")||-1!==F.indexOf("Trident/")||-1!==F.indexOf("Edge/"))&&(Nr=!0)}catch{}return Nr}Zone.__load_patch("ZoneAwarePromise",(F,z,le)=>{const se=Object.getOwnPropertyDescriptor,X=Object.defineProperty,qe=le.symbol,Oe=[],vt=!1!==F[qe("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],Ze=qe("Promise"),Ge=qe("then"),yt="__creationTrace__";le.onUnhandledError=Le=>{if(le.showUncaughtError()){const Ve=Le&&Le.rejection;Ve?console.error("Unhandled Promise rejection:",Ve instanceof Error?Ve.message:Ve,"; Zone:",Le.zone.name,"; Task:",Le.task&&Le.task.source,"; Value:",Ve,Ve instanceof Error?Ve.stack:void 0):console.error(Le)}},le.microtaskDrainDone=()=>{for(;Oe.length;){const Le=Oe.shift();try{Le.zone.runGuarded(()=>{throw Le.throwOriginal?Le.rejection:Le})}catch(Ve){ct(Ve)}}};const pt=qe("unhandledPromiseRejectionHandler");function ct(Le){le.onUnhandledError(Le);try{const Ve=z[pt];"function"==typeof Ve&&Ve.call(this,Le)}catch{}}function en(Le){return Le&&Le.then}function ln(Le){return Le}function Bn(Le){return q.reject(Le)}const Hn=qe("state"),It=qe("value"),nt=qe("finally"),Tn=qe("parentPromiseValue"),nn=qe("parentPromiseState"),Zn="Promise.then",rn=null,Ye=!0,Bt=!1,We=0;function on(Le,Ve){return ve=>{try{xn(Le,Ve,ve)}catch(Fe){xn(Le,!1,Fe)}}}const wt=function(){let Le=!1;return function(ve){return function(){Le||(Le=!0,ve.apply(null,arguments))}}},fn="Promise resolved with itself",dr=qe("currentTaskTrace");function xn(Le,Ve,ve){const Fe=wt();if(Le===ve)throw new TypeError(fn);if(Le[Hn]===rn){let st=null;try{("object"==typeof ve||"function"==typeof ve)&&(st=ve&&ve.then)}catch(Lt){return Fe(()=>{xn(Le,!1,Lt)})(),Le}if(Ve!==Bt&&ve instanceof q&&ve.hasOwnProperty(Hn)&&ve.hasOwnProperty(It)&&ve[Hn]!==rn)Sr(ve),xn(Le,ve[Hn],ve[It]);else if(Ve!==Bt&&"function"==typeof st)try{st.call(ve,Fe(on(Le,Ve)),Fe(on(Le,!1)))}catch(Lt){Fe(()=>{xn(Le,!1,Lt)})()}else{Le[Hn]=Ve;const Lt=Le[It];if(Le[It]=ve,Le[nt]===nt&&Ve===Ye&&(Le[Hn]=Le[nn],Le[It]=Le[Tn]),Ve===Bt&&ve instanceof Error){const tt=z.currentTask&&z.currentTask.data&&z.currentTask.data[yt];tt&&X(ve,dr,{configurable:!0,enumerable:!1,writable:!0,value:tt})}for(let tt=0;tt<Lt.length;)hr(Le,Lt[tt++],Lt[tt++],Lt[tt++],Lt[tt++]);if(0==Lt.length&&Ve==Bt){Le[Hn]=We;let tt=ve;try{throw new Error("Uncaught (in promise): "+function ye(Le){return Le&&Le.toString===Object.prototype.toString?(Le.constructor&&Le.constructor.name||"")+": "+JSON.stringify(Le):Le?Le.toString():Object.prototype.toString.call(Le)}(ve)+(ve&&ve.stack?"\n"+ve.stack:""))}catch(ht){tt=ht}vt&&(tt.throwOriginal=!0),tt.rejection=ve,tt.promise=Le,tt.zone=z.current,tt.task=z.currentTask,Oe.push(tt),le.scheduleMicroTask()}}}return Le}const wn=qe("rejectionHandledHandler");function Sr(Le){if(Le[Hn]===We){try{const Ve=z[wn];Ve&&"function"==typeof Ve&&Ve.call(this,{rejection:Le[It],promise:Le})}catch{}Le[Hn]=Bt;for(let Ve=0;Ve<Oe.length;Ve++)Le===Oe[Ve].promise&&Oe.splice(Ve,1)}}function hr(Le,Ve,ve,Fe,st){Sr(Le);const Lt=Le[Hn],tt=Lt?"function"==typeof Fe?Fe:ln:"function"==typeof st?st:Bn;Ve.scheduleMicroTask(Zn,()=>{try{const ht=Le[It],jt=!!ve&&nt===ve[nt];jt&&(ve[Tn]=ht,ve[nn]=Lt);const Vt=Ve.run(tt,void 0,jt&&tt!==Bn&&tt!==ln?[]:[ht]);xn(ve,!0,Vt)}catch(ht){xn(ve,!1,ht)}},ve)}const un=function(){},Ke=F.AggregateError;class q{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(Ve){return xn(new this(null),Ye,Ve)}static reject(Ve){return xn(new this(null),Bt,Ve)}static any(Ve){if(!Ve||"function"!=typeof Ve[Symbol.iterator])return Promise.reject(new Ke([],"All promises were rejected"));const ve=[];let Fe=0;try{for(let tt of Ve)Fe++,ve.push(q.resolve(tt))}catch{return Promise.reject(new Ke([],"All promises were rejected"))}if(0===Fe)return Promise.reject(new Ke([],"All promises were rejected"));let st=!1;const Lt=[];return new q((tt,ht)=>{for(let jt=0;jt<ve.length;jt++)ve[jt].then(Vt=>{st||(st=!0,tt(Vt))},Vt=>{Lt.push(Vt),Fe--,0===Fe&&(st=!0,ht(new Ke(Lt,"All promises were rejected")))})})}static race(Ve){let ve,Fe,st=new this((ht,jt)=>{ve=ht,Fe=jt});function Lt(ht){ve(ht)}function tt(ht){Fe(ht)}for(let ht of Ve)en(ht)||(ht=this.resolve(ht)),ht.then(Lt,tt);return st}static all(Ve){return q.allWithCallback(Ve)}static allSettled(Ve){return(this&&this.prototype instanceof q?this:q).allWithCallback(Ve,{thenCallback:Fe=>({status:"fulfilled",value:Fe}),errorCallback:Fe=>({status:"rejected",reason:Fe})})}static allWithCallback(Ve,ve){let Fe,st,Lt=new this((Vt,Cn)=>{Fe=Vt,st=Cn}),tt=2,ht=0;const jt=[];for(let Vt of Ve){en(Vt)||(Vt=this.resolve(Vt));const Cn=ht;try{Vt.then(bn=>{jt[Cn]=ve?ve.thenCallback(bn):bn,tt--,0===tt&&Fe(jt)},bn=>{ve?(jt[Cn]=ve.errorCallback(bn),tt--,0===tt&&Fe(jt)):st(bn)})}catch(bn){st(bn)}tt++,ht++}return tt-=2,0===tt&&Fe(jt),Lt}constructor(Ve){const ve=this;if(!(ve instanceof q))throw new Error("Must be an instanceof Promise.");ve[Hn]=rn,ve[It]=[];try{const Fe=wt();Ve&&Ve(Fe(on(ve,Ye)),Fe(on(ve,Bt)))}catch(Fe){xn(ve,!1,Fe)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return q}then(Ve,ve){let Fe=this.constructor?.[Symbol.species];(!Fe||"function"!=typeof Fe)&&(Fe=this.constructor||q);const st=new Fe(un),Lt=z.current;return this[Hn]==rn?this[It].push(Lt,st,Ve,ve):hr(this,Lt,st,Ve,ve),st}catch(Ve){return this.then(null,Ve)}finally(Ve){let ve=this.constructor?.[Symbol.species];(!ve||"function"!=typeof ve)&&(ve=q);const Fe=new ve(un);Fe[nt]=nt;const st=z.current;return this[Hn]==rn?this[It].push(st,Fe,Ve,Ve):hr(this,st,Fe,Ve,Ve),Fe}}q.resolve=q.resolve,q.reject=q.reject,q.race=q.race,q.all=q.all;const ce=F[Ze]=F.Promise;F.Promise=q;const lt=qe("thenPatched");function Pt(Le){const Ve=Le.prototype,ve=se(Ve,"then");if(ve&&(!1===ve.writable||!ve.configurable))return;const Fe=Ve.then;Ve[Ge]=Fe,Le.prototype.then=function(st,Lt){return new q((ht,jt)=>{Fe.call(this,ht,jt)}).then(st,Lt)},Le[lt]=!0}return le.patchThen=Pt,ce&&(Pt(ce),Mt(F,"fetch",Le=>function Rn(Le){return function(Ve,ve){let Fe=Le.apply(Ve,ve);if(Fe instanceof q)return Fe;let st=Fe.constructor;return st[lt]||Pt(st),Fe}}(Le))),Promise[z.__symbol__("uncaughtPromiseErrors")]=Oe,q}),Zone.__load_patch("toString",F=>{const z=Function.prototype.toString,le=Dt("OriginalDelegate"),se=Dt("Promise"),X=Dt("Error"),ye=function(){if("function"==typeof this){const Ze=this[le];if(Ze)return"function"==typeof Ze?z.call(Ze):Object.prototype.toString.call(Ze);if(this===Promise){const Ge=F[se];if(Ge)return z.call(Ge)}if(this===Error){const Ge=F[X];if(Ge)return z.call(Ge)}}return z.call(this)};ye[le]=z,Function.prototype.toString=ye;const qe=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":qe.call(this)}});let zi=!1;if(typeof window<"u")try{const F=Object.defineProperty({},"passive",{get:function(){zi=!0}});window.addEventListener("test",F,F),window.removeEventListener("test",F,F)}catch{zi=!1}const ur={useG:!0},yr={},Ii={},Do=new RegExp("^"+ot+"(\\w+)(true|false)$"),ko=Dt("propagationStopped");function Es(F,z){const le=(z?z(F):F)+Qn,se=(z?z(F):F)+Tr,X=ot+le,ye=ot+se;yr[F]={},yr[F][Qn]=X,yr[F][Tr]=ye}function Lo(F,z,le,se){const X=se&&se.add||Pr,ye=se&&se.rm||it,qe=se&&se.listeners||"eventListeners",Oe=se&&se.rmAll||"removeAllListeners",vt=Dt(X),Ze="."+X+":",Ge="prependListener",yt="."+Ge+":",pt=function(It,nt,Tn){if(It.isRemoved)return;const nn=It.callback;let Zn;"object"==typeof nn&&nn.handleEvent&&(It.callback=Ye=>nn.handleEvent(Ye),It.originalDelegate=nn);try{It.invoke(It,nt,[Tn])}catch(Ye){Zn=Ye}const rn=It.options;return rn&&"object"==typeof rn&&rn.once&&nt[ye].call(nt,Tn.type,It.originalDelegate?It.originalDelegate:It.callback,rn),Zn};function ct(It,nt,Tn){if(!(nt=nt||F.event))return;const nn=It||nt.target||F,Zn=nn[yr[nt.type][Tn?Tr:Qn]];if(Zn){const rn=[];if(1===Zn.length){const Ye=pt(Zn[0],nn,nt);Ye&&rn.push(Ye)}else{const Ye=Zn.slice();for(let Bt=0;Bt<Ye.length&&(!nt||!0!==nt[ko]);Bt++){const We=pt(Ye[Bt],nn,nt);We&&rn.push(We)}}if(1===rn.length)throw rn[0];for(let Ye=0;Ye<rn.length;Ye++){const Bt=rn[Ye];z.nativeScheduleMicroTask(()=>{throw Bt})}}}const en=function(It){return ct(this,It,!1)},ln=function(It){return ct(this,It,!0)};function Bn(It,nt){if(!It)return!1;let Tn=!0;nt&&void 0!==nt.useG&&(Tn=nt.useG);const nn=nt&&nt.vh;let Zn=!0;nt&&void 0!==nt.chkDup&&(Zn=nt.chkDup);let rn=!1;nt&&void 0!==nt.rt&&(rn=nt.rt);let Ye=It;for(;Ye&&!Ye.hasOwnProperty(X);)Ye=qn(Ye);if(!Ye&&It[X]&&(Ye=It),!Ye||Ye[vt])return!1;const Bt=nt&&nt.eventNameToString,We={},on=Ye[vt]=Ye[X],wt=Ye[Dt(ye)]=Ye[ye],fn=Ye[Dt(qe)]=Ye[qe],dr=Ye[Dt(Oe)]=Ye[Oe];let xn;nt&&nt.prepend&&(xn=Ye[Dt(nt.prepend)]=Ye[nt.prepend]);const q=Tn?function(ve){if(!We.isExisting)return on.call(We.target,We.eventName,We.capture?ln:en,We.options)}:function(ve){return on.call(We.target,We.eventName,ve.invoke,We.options)},ce=Tn?function(ve){if(!ve.isRemoved){const Fe=yr[ve.eventName];let st;Fe&&(st=Fe[ve.capture?Tr:Qn]);const Lt=st&&ve.target[st];if(Lt)for(let tt=0;tt<Lt.length;tt++)if(Lt[tt]===ve){Lt.splice(tt,1),ve.isRemoved=!0,0===Lt.length&&(ve.allRemoved=!0,ve.target[st]=null);break}}if(ve.allRemoved)return wt.call(ve.target,ve.eventName,ve.capture?ln:en,ve.options)}:function(ve){return wt.call(ve.target,ve.eventName,ve.invoke,ve.options)},Pt=nt&&nt.diff?nt.diff:function(ve,Fe){const st=typeof Fe;return"function"===st&&ve.callback===Fe||"object"===st&&ve.originalDelegate===Fe},Rn=Zone[Dt("UNPATCHED_EVENTS")],Le=F[Dt("PASSIVE_EVENTS")],Ve=function(ve,Fe,st,Lt,tt=!1,ht=!1){return function(){const jt=this||F;let Vt=arguments[0];nt&&nt.transferEventName&&(Vt=nt.transferEventName(Vt));let Cn=arguments[1];if(!Cn)return ve.apply(this,arguments);if(xr&&"uncaughtException"===Vt)return ve.apply(this,arguments);let bn=!1;if("function"!=typeof Cn){if(!Cn.handleEvent)return ve.apply(this,arguments);bn=!0}if(nn&&!nn(ve,Cn,jt,arguments))return;const Yr=zi&&!!Le&&-1!==Le.indexOf(Vt),br=function wn(ve,Fe){return!zi&&"object"==typeof ve&&ve?!!ve.capture:zi&&Fe?"boolean"==typeof ve?{capture:ve,passive:!0}:ve?"object"==typeof ve&&!1!==ve.passive?{...ve,passive:!0}:ve:{passive:!0}:ve}(arguments[2],Yr);if(Rn)for(let pi=0;pi<Rn.length;pi++)if(Vt===Rn[pi])return Yr?ve.call(jt,Vt,Cn,br):ve.apply(this,arguments);const ss=!!br&&("boolean"==typeof br||br.capture),Ds=!(!br||"object"!=typeof br)&&br.once,Gs=Zone.current;let as=yr[Vt];as||(Es(Vt,Bt),as=yr[Vt]);const hi=as[ss?Tr:Qn];let ao,Kn=jt[hi],qi=!1;if(Kn){if(qi=!0,Zn)for(let pi=0;pi<Kn.length;pi++)if(Pt(Kn[pi],Cn))return}else Kn=jt[hi]=[];const fa=jt.constructor.name,da=Ii[fa];da&&(ao=da[Vt]),ao||(ao=fa+Fe+(Bt?Bt(Vt):Vt)),We.options=br,Ds&&(We.options.once=!1),We.target=jt,We.capture=ss,We.eventName=Vt,We.isExisting=qi;const _o=Tn?ur:void 0;_o&&(_o.taskData=We);const Mi=Gs.scheduleEventTask(ao,Cn,_o,st,Lt);return We.target=null,_o&&(_o.taskData=null),Ds&&(br.once=!0),!zi&&"boolean"==typeof Mi.options||(Mi.options=br),Mi.target=jt,Mi.capture=ss,Mi.eventName=Vt,bn&&(Mi.originalDelegate=Cn),ht?Kn.unshift(Mi):Kn.push(Mi),tt?jt:void 0}};return Ye[X]=Ve(on,Ze,q,ce,rn),xn&&(Ye[Ge]=Ve(xn,yt,function(ve){return xn.call(We.target,We.eventName,ve.invoke,We.options)},ce,rn,!0)),Ye[ye]=function(){const ve=this||F;let Fe=arguments[0];nt&&nt.transferEventName&&(Fe=nt.transferEventName(Fe));const st=arguments[2],Lt=!!st&&("boolean"==typeof st||st.capture),tt=arguments[1];if(!tt)return wt.apply(this,arguments);if(nn&&!nn(wt,tt,ve,arguments))return;const ht=yr[Fe];let jt;ht&&(jt=ht[Lt?Tr:Qn]);const Vt=jt&&ve[jt];if(Vt)for(let Cn=0;Cn<Vt.length;Cn++){const bn=Vt[Cn];if(Pt(bn,tt))return Vt.splice(Cn,1),bn.isRemoved=!0,0===Vt.length&&(bn.allRemoved=!0,ve[jt]=null,"string"==typeof Fe)&&(ve[ot+"ON_PROPERTY"+Fe]=null),bn.zone.cancelTask(bn),rn?ve:void 0}return wt.apply(this,arguments)},Ye[qe]=function(){const ve=this||F;let Fe=arguments[0];nt&&nt.transferEventName&&(Fe=nt.transferEventName(Fe));const st=[],Lt=wr(ve,Bt?Bt(Fe):Fe);for(let tt=0;tt<Lt.length;tt++){const ht=Lt[tt];st.push(ht.originalDelegate?ht.originalDelegate:ht.callback)}return st},Ye[Oe]=function(){const ve=this||F;let Fe=arguments[0];if(Fe){nt&&nt.transferEventName&&(Fe=nt.transferEventName(Fe));const st=yr[Fe];if(st){const ht=ve[st[Qn]],jt=ve[st[Tr]];if(ht){const Vt=ht.slice();for(let Cn=0;Cn<Vt.length;Cn++){const bn=Vt[Cn];this[ye].call(this,Fe,bn.originalDelegate?bn.originalDelegate:bn.callback,bn.options)}}if(jt){const Vt=jt.slice();for(let Cn=0;Cn<Vt.length;Cn++){const bn=Vt[Cn];this[ye].call(this,Fe,bn.originalDelegate?bn.originalDelegate:bn.callback,bn.options)}}}}else{const st=Object.keys(ve);for(let Lt=0;Lt<st.length;Lt++){const ht=Do.exec(st[Lt]);let jt=ht&&ht[1];jt&&"removeListener"!==jt&&this[Oe].call(this,jt)}this[Oe].call(this,"removeListener")}if(rn)return this},Zr(Ye[X],on),Zr(Ye[ye],wt),dr&&Zr(Ye[Oe],dr),fn&&Zr(Ye[qe],fn),!0}let Hn=[];for(let It=0;It<le.length;It++)Hn[It]=Bn(le[It],se);return Hn}function wr(F,z){if(!z){const ye=[];for(let qe in F){const Oe=Do.exec(qe);let vt=Oe&&Oe[1];if(vt&&(!z||vt===z)){const Ze=F[qe];if(Ze)for(let Ge=0;Ge<Ze.length;Ge++)ye.push(Ze[Ge])}}return ye}let le=yr[z];le||(Es(z),le=yr[z]);const se=F[le[Qn]],X=F[le[Tr]];return se?X?se.concat(X):se.slice():X?X.slice():[]}function si(F,z){const le=F.Event;le&&le.prototype&&z.patchMethod(le.prototype,"stopImmediatePropagation",se=>function(X,ye){X[ko]=!0,se&&se.apply(X,ye)})}function Hr(F,z,le,se,X){const ye=Zone.__symbol__(se);if(z[ye])return;const qe=z[ye]=z[se];z[se]=function(Oe,vt,Ze){return vt&&vt.prototype&&X.forEach(function(Ge){const yt=`${le}.${se}::`+Ge,pt=vt.prototype;try{if(pt.hasOwnProperty(Ge)){const ct=F.ObjectGetOwnPropertyDescriptor(pt,Ge);ct&&ct.value?(ct.value=F.wrapWithCurrentZone(ct.value,yt),F._redefineProperty(vt.prototype,Ge,ct)):pt[Ge]&&(pt[Ge]=F.wrapWithCurrentZone(pt[Ge],yt))}else pt[Ge]&&(pt[Ge]=F.wrapWithCurrentZone(pt[Ge],yt))}catch{}}),qe.call(z,Oe,vt,Ze)},F.attachOriginToPatched(z[se],qe)}function Fo(F,z,le){if(!le||0===le.length)return z;const se=le.filter(ye=>ye.target===F);if(!se||0===se.length)return z;const X=se[0].ignoreProperties;return z.filter(ye=>-1===X.indexOf(ye))}function Ai(F,z,le,se){F&&bo(F,Fo(F,z,le),se)}function ai(F){return Object.getOwnPropertyNames(F).filter(z=>z.startsWith("on")&&z.length>2).map(z=>z.substring(2))}Zone.__load_patch("util",(F,z,le)=>{const se=ai(F);le.patchOnProperties=bo,le.patchMethod=Mt,le.bindArguments=ri,le.patchMacroTask=Wr;const X=z.__symbol__("BLACK_LISTED_EVENTS"),ye=z.__symbol__("UNPATCHED_EVENTS");F[ye]&&(F[X]=F[ye]),F[X]&&(z[X]=z[ye]=F[X]),le.patchEventPrototype=si,le.patchEventTarget=Lo,le.isIEOrEdge=$i,le.ObjectDefineProperty=fr,le.ObjectGetOwnPropertyDescriptor=Gn,le.ObjectCreate=Si,le.ArraySlice=gt,le.patchClass=qr,le.wrapWithCurrentZone=Gr,le.filterProperties=Fo,le.attachOriginToPatched=Zr,le._redefineProperty=Object.defineProperty,le.patchCallbacks=Hr,le.getGlobalObjects=()=>({globalSources:Ii,zoneSymbolEventNames:yr,eventNames:se,isBrowser:Wn,isMix:ii,isNode:xr,TRUE_STR:Tr,FALSE_STR:Qn,ZONE_SYMBOL_PREFIX:ot,ADD_EVENT_LISTENER_STR:Pr,REMOVE_EVENT_LISTENER_STR:it})});const N=Dt("zoneTask");function j(F,z,le,se){let X=null,ye=null;le+=se;const qe={};function Oe(Ze){const Ge=Ze.data;return Ge.args[0]=function(){return Ze.invoke.apply(this,arguments)},Ge.handleId=X.apply(F,Ge.args),Ze}function vt(Ze){return ye.call(F,Ze.data.handleId)}X=Mt(F,z+=se,Ze=>function(Ge,yt){if("function"==typeof yt[0]){const pt={isPeriodic:"Interval"===se,delay:"Timeout"===se||"Interval"===se?yt[1]||0:void 0,args:yt},ct=yt[0];yt[0]=function(){try{return ct.apply(this,arguments)}finally{pt.isPeriodic||("number"==typeof pt.handleId?delete qe[pt.handleId]:pt.handleId&&(pt.handleId[N]=null))}};const en=vr(z,yt[0],pt,Oe,vt);if(!en)return en;const ln=en.data.handleId;return"number"==typeof ln?qe[ln]=en:ln&&(ln[N]=en),ln&&ln.ref&&ln.unref&&"function"==typeof ln.ref&&"function"==typeof ln.unref&&(en.ref=ln.ref.bind(ln),en.unref=ln.unref.bind(ln)),"number"==typeof ln||ln?ln:en}return Ze.apply(F,yt)}),ye=Mt(F,le,Ze=>function(Ge,yt){const pt=yt[0];let ct;"number"==typeof pt?ct=qe[pt]:(ct=pt&&pt[N],ct||(ct=pt)),ct&&"string"==typeof ct.type?"notScheduled"!==ct.state&&(ct.cancelFn&&ct.data.isPeriodic||0===ct.runCount)&&("number"==typeof pt?delete qe[pt]:pt&&(pt[N]=null),ct.zone.cancelTask(ct)):Ze.apply(F,yt)})}Zone.__load_patch("legacy",F=>{const z=F[Zone.__symbol__("legacyPatch")];z&&z()}),Zone.__load_patch("timers",F=>{const z="set",le="clear";j(F,z,le,"Timeout"),j(F,z,le,"Interval"),j(F,z,le,"Immediate")}),Zone.__load_patch("requestAnimationFrame",F=>{j(F,"request","cancel","AnimationFrame"),j(F,"mozRequest","mozCancel","AnimationFrame"),j(F,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(F,z)=>{const le=["alert","prompt","confirm"];for(let se=0;se<le.length;se++)Mt(F,le[se],(ye,qe,Oe)=>function(vt,Ze){return z.current.run(ye,F,Ze,Oe)})}),Zone.__load_patch("EventTarget",(F,z,le)=>{(function Se(F,z){z.patchEventPrototype(F,z)})(F,le),function Te(F,z){if(Zone[z.symbol("patchEventTarget")])return;const{eventNames:le,zoneSymbolEventNames:se,TRUE_STR:X,FALSE_STR:ye,ZONE_SYMBOL_PREFIX:qe}=z.getGlobalObjects();for(let vt=0;vt<le.length;vt++){const Ze=le[vt],pt=qe+(Ze+ye),ct=qe+(Ze+X);se[Ze]={},se[Ze][ye]=pt,se[Ze][X]=ct}const Oe=F.EventTarget;Oe&&Oe.prototype&&z.patchEventTarget(F,z,[Oe&&Oe.prototype])}(F,le);const se=F.XMLHttpRequestEventTarget;se&&se.prototype&&le.patchEventTarget(F,le,[se.prototype])}),Zone.__load_patch("MutationObserver",(F,z,le)=>{qr("MutationObserver"),qr("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(F,z,le)=>{qr("IntersectionObserver")}),Zone.__load_patch("FileReader",(F,z,le)=>{qr("FileReader")}),Zone.__load_patch("on_property",(F,z,le)=>{!function Gi(F,z){if(xr&&!ii||Zone[F.symbol("patchEvents")])return;const le=z.__Zone_ignore_on_properties;let se=[];if(Wn){const X=window;se=se.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const ye=function Eo(){try{const F=Ui.navigator.userAgent;if(-1!==F.indexOf("MSIE ")||-1!==F.indexOf("Trident/"))return!0}catch{}return!1}()?[{target:X,ignoreProperties:["error"]}]:[];Ai(X,ai(X),le&&le.concat(ye),qn(X))}se=se.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let X=0;X<se.length;X++){const ye=z[se[X]];ye&&ye.prototype&&Ai(ye.prototype,ai(ye.prototype),le)}}(le,F)}),Zone.__load_patch("customElements",(F,z,le)=>{!function J(F,z){const{isBrowser:le,isMix:se}=z.getGlobalObjects();(le||se)&&F.customElements&&"customElements"in F&&z.patchCallbacks(z,F.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(F,le)}),Zone.__load_patch("XHR",(F,z)=>{!function vt(Ze){const Ge=Ze.XMLHttpRequest;if(!Ge)return;const yt=Ge.prototype;let ct=yt[Me],en=yt[Xn];if(!ct){const We=Ze.XMLHttpRequestEventTarget;if(We){const on=We.prototype;ct=on[Me],en=on[Xn]}}const ln="readystatechange",Bn="scheduled";function Hn(We){const on=We.data,wt=on.target;wt[ye]=!1,wt[Oe]=!1;const fn=wt[X];ct||(ct=wt[Me],en=wt[Xn]),fn&&en.call(wt,ln,fn);const dr=wt[X]=()=>{if(wt.readyState===wt.DONE)if(!on.aborted&&wt[ye]&&We.state===Bn){const wn=wt[z.__symbol__("loadfalse")];if(0!==wt.status&&wn&&wn.length>0){const Sr=We.invoke;We.invoke=function(){const hr=wt[z.__symbol__("loadfalse")];for(let jn=0;jn<hr.length;jn++)hr[jn]===We&&hr.splice(jn,1);!on.aborted&&We.state===Bn&&Sr.call(We)},wn.push(We)}else We.invoke()}else!on.aborted&&!1===wt[ye]&&(wt[Oe]=!0)};return ct.call(wt,ln,dr),wt[le]||(wt[le]=We),Ye.apply(wt,on.args),wt[ye]=!0,We}function It(){}function nt(We){const on=We.data;return on.aborted=!0,Bt.apply(on.target,on.args)}const Tn=Mt(yt,"open",()=>function(We,on){return We[se]=0==on[2],We[qe]=on[1],Tn.apply(We,on)}),Zn=Dt("fetchTaskAborting"),rn=Dt("fetchTaskScheduling"),Ye=Mt(yt,"send",()=>function(We,on){if(!0===z.current[rn]||We[se])return Ye.apply(We,on);{const wt={target:We,url:We[qe],isPeriodic:!1,args:on,aborted:!1},fn=vr("XMLHttpRequest.send",It,wt,Hn,nt);We&&!0===We[Oe]&&!wt.aborted&&fn.state===Bn&&fn.invoke()}}),Bt=Mt(yt,"abort",()=>function(We,on){const wt=function pt(We){return We[le]}(We);if(wt&&"string"==typeof wt.type){if(null==wt.cancelFn||wt.data&&wt.data.aborted)return;wt.zone.cancelTask(wt)}else if(!0===z.current[Zn])return Bt.apply(We,on)})}(F);const le=Dt("xhrTask"),se=Dt("xhrSync"),X=Dt("xhrListener"),ye=Dt("xhrScheduled"),qe=Dt("xhrURL"),Oe=Dt("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",F=>{F.navigator&&F.navigator.geolocation&&function bt(F,z){const le=F.constructor.name;for(let se=0;se<z.length;se++){const X=z[se],ye=F[X];if(ye){if(!so(Gn(F,X)))continue;F[X]=(Oe=>{const vt=function(){return Oe.apply(this,ri(arguments,le+"."+X))};return Zr(vt,Oe),vt})(ye)}}}(F.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(F,z)=>{function le(se){return function(X){wr(F,se).forEach(qe=>{const Oe=F.PromiseRejectionEvent;if(Oe){const vt=new Oe(se,{promise:X.promise,reason:X.rejection});qe.invoke(vt)}})}}F.PromiseRejectionEvent&&(z[Dt("unhandledPromiseRejectionHandler")]=le("unhandledrejection"),z[Dt("rejectionHandledHandler")]=le("rejectionhandled"))}),Zone.__load_patch("queueMicrotask",(F,z,le)=>{!function T(F,z){z.patchMethod(F,"queueMicrotask",le=>function(se,X){Zone.current.scheduleMicroTask("queueMicrotask",X[0])})}(F,le)})},670:(Gn,fr,qn)=>{"use strict";qn.r(fr),qn.d(fr,{VERSION:()=>gt,after:()=>$a,all:()=>wa,allKeys:()=>ct,any:()=>Ho,assign:()=>wn,before:()=>za,bind:()=>pa,bindAll:()=>Co,chain:()=>Au,chunk:()=>mt,clone:()=>Ke,collect:()=>mi,compact:()=>co,compose:()=>Mu,constant:()=>Gi,contains:()=>vi,countBy:()=>G,create:()=>un,debounce:()=>Ws,default:()=>$o,defaults:()=>Sr,defer:()=>us,delay:()=>Ua,detect:()=>Zs,difference:()=>Ae,drop:()=>Un,each:()=>Ni,escape:()=>Gs,every:()=>wa,extend:()=>xn,extendOwn:()=>wn,filter:()=>To,find:()=>Zs,findIndex:()=>va,findKey:()=>_s,findLastIndex:()=>uo,findWhere:()=>ya,first:()=>ke,flatten:()=>Oi,foldl:()=>Bo,foldr:()=>Cs,forEach:()=>Ni,functions:()=>fn,get:()=>Rn,groupBy:()=>U,has:()=>Le,head:()=>ke,identity:()=>Ve,include:()=>vi,includes:()=>vi,indexBy:()=>H,indexOf:()=>Wa,initial:()=>tn,inject:()=>Bo,intersection:()=>jo,invert:()=>wt,invoke:()=>ba,isArguments:()=>Fo,isArray:()=>wr,isArrayBuffer:()=>Eo,isBoolean:()=>Jt,isDataView:()=>Lo,isDate:()=>Wr,isElement:()=>bo,isEmpty:()=>ye,isEqual:()=>pt,isError:()=>bs,isFinite:()=>Ai,isFunction:()=>ur,isMap:()=>Zn,isMatch:()=>qe,isNaN:()=>ai,isNull:()=>y,isNumber:()=>Mt,isObject:()=>ii,isRegExp:()=>Zr,isSet:()=>Ye,isString:()=>qr,isSymbol:()=>Nr,isTypedArray:()=>F,isUndefined:()=>oi,isWeakMap:()=>rn,isWeakSet:()=>Bt,iteratee:()=>tt,keys:()=>X,last:()=>rr,lastIndexOf:()=>Za,map:()=>mi,mapObject:()=>jt,matcher:()=>ve,matches:()=>ve,max:()=>Xa,memoize:()=>qs,methods:()=>fn,min:()=>l,mixin:()=>wi,negate:()=>gi,noop:()=>Vt,now:()=>br,object:()=>lo,omit:()=>Nt,once:()=>Pu,pairs:()=>on,partial:()=>Vo,partition:()=>me,pick:()=>Re,pluck:()=>Ys,property:()=>Fe,propertyOf:()=>Cn,random:()=>Yr,range:()=>Ri,reduce:()=>Bo,reduceRight:()=>Cs,reject:()=>Ya,rest:()=>Un,restArguments:()=>Wn,result:()=>pi,sample:()=>v,select:()=>To,shuffle:()=>_,size:()=>ge,some:()=>Ho,sortBy:()=>C,sortedIndex:()=>Ga,tail:()=>Un,take:()=>ke,tap:()=>q,template:()=>Mi,templateSettings:()=>Kn,throttle:()=>ga,times:()=>bn,toArray:()=>g,toPath:()=>ce,transpose:()=>Uo,unescape:()=>hi,union:()=>zn,uniq:()=>qt,unique:()=>qt,uniqueId:()=>Iu,unzip:()=>Uo,values:()=>We,where:()=>Ru,without:()=>yi,wrap:()=>ma,zip:()=>Er});var Si={};qn.r(Si),qn.d(Si,{VERSION:()=>gt,after:()=>$a,all:()=>wa,allKeys:()=>ct,any:()=>Ho,assign:()=>wn,before:()=>za,bind:()=>pa,bindAll:()=>Co,chain:()=>Au,chunk:()=>mt,clone:()=>Ke,collect:()=>mi,compact:()=>co,compose:()=>Mu,constant:()=>Gi,contains:()=>vi,countBy:()=>G,create:()=>un,debounce:()=>Ws,default:()=>Qa,defaults:()=>Sr,defer:()=>us,delay:()=>Ua,detect:()=>Zs,difference:()=>Ae,drop:()=>Un,each:()=>Ni,escape:()=>Gs,every:()=>wa,extend:()=>xn,extendOwn:()=>wn,filter:()=>To,find:()=>Zs,findIndex:()=>va,findKey:()=>_s,findLastIndex:()=>uo,findWhere:()=>ya,first:()=>ke,flatten:()=>Oi,foldl:()=>Bo,foldr:()=>Cs,forEach:()=>Ni,functions:()=>fn,get:()=>Rn,groupBy:()=>U,has:()=>Le,head:()=>ke,identity:()=>Ve,include:()=>vi,includes:()=>vi,indexBy:()=>H,indexOf:()=>Wa,initial:()=>tn,inject:()=>Bo,intersection:()=>jo,invert:()=>wt,invoke:()=>ba,isArguments:()=>Fo,isArray:()=>wr,isArrayBuffer:()=>Eo,isBoolean:()=>Jt,isDataView:()=>Lo,isDate:()=>Wr,isElement:()=>bo,isEmpty:()=>ye,isEqual:()=>pt,isError:()=>bs,isFinite:()=>Ai,isFunction:()=>ur,isMap:()=>Zn,isMatch:()=>qe,isNaN:()=>ai,isNull:()=>y,isNumber:()=>Mt,isObject:()=>ii,isRegExp:()=>Zr,isSet:()=>Ye,isString:()=>qr,isSymbol:()=>Nr,isTypedArray:()=>F,isUndefined:()=>oi,isWeakMap:()=>rn,isWeakSet:()=>Bt,iteratee:()=>tt,keys:()=>X,last:()=>rr,lastIndexOf:()=>Za,map:()=>mi,mapObject:()=>jt,matcher:()=>ve,matches:()=>ve,max:()=>Xa,memoize:()=>qs,methods:()=>fn,min:()=>l,mixin:()=>wi,negate:()=>gi,noop:()=>Vt,now:()=>br,object:()=>lo,omit:()=>Nt,once:()=>Pu,pairs:()=>on,partial:()=>Vo,partition:()=>me,pick:()=>Re,pluck:()=>Ys,property:()=>Fe,propertyOf:()=>Cn,random:()=>Yr,range:()=>Ri,reduce:()=>Bo,reduceRight:()=>Cs,reject:()=>Ya,rest:()=>Un,restArguments:()=>Wn,result:()=>pi,sample:()=>v,select:()=>To,shuffle:()=>_,size:()=>ge,some:()=>Ho,sortBy:()=>C,sortedIndex:()=>Ga,tail:()=>Un,take:()=>ke,tap:()=>q,template:()=>Mi,templateSettings:()=>Kn,throttle:()=>ga,times:()=>bn,toArray:()=>g,toPath:()=>ce,transpose:()=>Uo,unescape:()=>hi,union:()=>zn,uniq:()=>qt,unique:()=>qt,uniqueId:()=>Iu,unzip:()=>Uo,values:()=>We,where:()=>Ru,without:()=>yi,wrap:()=>ma,zip:()=>Er});var gt="1.13.6",Pr="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},it=Array.prototype,Me=Object.prototype,Xn=typeof Symbol<"u"?Symbol.prototype:null,Tr=it.push,Qn=it.slice,ot=Me.toString,Gr=Me.hasOwnProperty,vr=typeof ArrayBuffer<"u",Dt=typeof DataView<"u",_n=Array.isArray,Ui=Object.keys,et=Object.create,kt=vr&&ArrayBuffer.isView,ri=isNaN,bt=isFinite,so=!{toString:null}.propertyIsEnumerable("toString"),di=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],xr=Math.pow(2,53)-1;function Wn(E,I){return I=null==I?E.length-1:+I,function(){for(var L=Math.max(arguments.length-I,0),B=Array(L),te=0;te<L;te++)B[te]=arguments[te+I];switch(I){case 0:return E.call(this,B);case 1:return E.call(this,arguments[0],B);case 2:return E.call(this,arguments[0],arguments[1],B)}var K=Array(I+1);for(te=0;te<I;te++)K[te]=arguments[te];return K[I]=B,E.apply(this,K)}}function ii(E){var I=typeof E;return"function"===I||"object"===I&&!!E}function y(E){return null===E}function oi(E){return void 0===E}function Jt(E){return!0===E||!1===E||"[object Boolean]"===ot.call(E)}function bo(E){return!(!E||1!==E.nodeType)}function mn(E){var I="[object "+E+"]";return function(L){return ot.call(L)===I}}const qr=mn("String"),Mt=mn("Number"),Wr=mn("Date"),Zr=mn("RegExp"),bs=mn("Error"),Nr=mn("Symbol"),Eo=mn("ArrayBuffer");var $i=mn("Function");"object"!=typeof Int8Array&&"function"!=typeof(Pr.document&&Pr.document.childNodes)&&($i=function(E){return"function"==typeof E||!1});const ur=$i,yr=mn("Object");var Ii=Dt&&yr(new DataView(new ArrayBuffer(8))),Do=typeof Map<"u"&&yr(new Map),ko=mn("DataView");const Lo=Ii?function Es(E){return null!=E&&ur(E.getInt8)&&Eo(E.buffer)}:ko,wr=_n||mn("Array");function si(E,I){return null!=E&&Gr.call(E,I)}var Hr=mn("Arguments");!function(){Hr(arguments)||(Hr=function(E){return si(E,"callee")})}();const Fo=Hr;function Ai(E){return!Nr(E)&&bt(E)&&!isNaN(parseFloat(E))}function ai(E){return Mt(E)&&ri(E)}function Gi(E){return function(){return E}}function T(E){return function(I){var L=E(I);return"number"==typeof L&&L>=0&&L<=xr}}function N(E){return function(I){return I?.[E]}}const j=N("byteLength"),J=T(j);var Te=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const F=vr?function Se(E){return kt?kt(E)&&!Lo(E):J(E)&&Te.test(ot.call(E))}:Gi(!1),z=N("length");function se(E,I){I=function le(E){for(var I={},L=E.length,B=0;B<L;++B)I[E[B]]=!0;return{contains:function(te){return!0===I[te]},push:function(te){return I[te]=!0,E.push(te)}}}(I);var L=di.length,B=E.constructor,te=ur(B)&&B.prototype||Me,K="constructor";for(si(E,K)&&!I.contains(K)&&I.push(K);L--;)(K=di[L])in E&&E[K]!==te[K]&&!I.contains(K)&&I.push(K)}function X(E){if(!ii(E))return[];if(Ui)return Ui(E);var I=[];for(var L in E)si(E,L)&&I.push(L);return so&&se(E,I),I}function ye(E){if(null==E)return!0;var I=z(E);return"number"==typeof I&&(wr(E)||qr(E)||Fo(E))?0===I:0===z(X(E))}function qe(E,I){var L=X(I),B=L.length;if(null==E)return!B;for(var te=Object(E),K=0;K<B;K++){var we=L[K];if(I[we]!==te[we]||!(we in te))return!1}return!0}function Oe(E){return E instanceof Oe?E:this instanceof Oe?void(this._wrapped=E):new Oe(E)}function vt(E){return new Uint8Array(E.buffer||E,E.byteOffset||0,j(E))}Oe.VERSION=gt,Oe.prototype.valueOf=Oe.prototype.toJSON=Oe.prototype.value=function(){return this._wrapped},Oe.prototype.toString=function(){return String(this._wrapped)};var Ze="[object DataView]";function Ge(E,I,L,B){if(E===I)return 0!==E||1/E==1/I;if(null==E||null==I)return!1;if(E!=E)return I!=I;var te=typeof E;return("function"===te||"object"===te||"object"==typeof I)&&yt(E,I,L,B)}function yt(E,I,L,B){E instanceof Oe&&(E=E._wrapped),I instanceof Oe&&(I=I._wrapped);var te=ot.call(E);if(te!==ot.call(I))return!1;if(Ii&&"[object Object]"==te&&Lo(E)){if(!Lo(I))return!1;te=Ze}switch(te){case"[object RegExp]":case"[object String]":return""+E==""+I;case"[object Number]":return+E!=+E?+I!=+I:0==+E?1/+E==1/I:+E==+I;case"[object Date]":case"[object Boolean]":return+E==+I;case"[object Symbol]":return Xn.valueOf.call(E)===Xn.valueOf.call(I);case"[object ArrayBuffer]":case Ze:return yt(vt(E),vt(I),L,B)}var K="[object Array]"===te;if(!K&&F(E)){if(j(E)!==j(I))return!1;if(E.buffer===I.buffer&&E.byteOffset===I.byteOffset)return!0;K=!0}if(!K){if("object"!=typeof E||"object"!=typeof I)return!1;var $e=E.constructor,$t=I.constructor;if($e!==$t&&!(ur($e)&&$e instanceof $e&&ur($t)&&$t instanceof $t)&&"constructor"in E&&"constructor"in I)return!1}B=B||[];for(var Ft=(L=L||[]).length;Ft--;)if(L[Ft]===E)return B[Ft]===I;if(L.push(E),B.push(I),K){if((Ft=E.length)!==I.length)return!1;for(;Ft--;)if(!Ge(E[Ft],I[Ft],L,B))return!1}else{var Or,Jn=X(E);if(Ft=Jn.length,X(I).length!==Ft)return!1;for(;Ft--;)if(!si(I,Or=Jn[Ft])||!Ge(E[Or],I[Or],L,B))return!1}return L.pop(),B.pop(),!0}function pt(E,I){return Ge(E,I)}function ct(E){if(!ii(E))return[];var I=[];for(var L in E)I.push(L);return so&&se(E,I),I}function en(E){var I=z(E);return function(L){if(null==L)return!1;var B=ct(L);if(z(B))return!1;for(var te=0;te<I;te++)if(!ur(L[E[te]]))return!1;return E!==Tn||!ur(L[ln])}}var ln="forEach",Hn=["clear","delete"],It=["get","has","set"],nt=Hn.concat(ln,It),Tn=Hn.concat(It),nn=["add"].concat(Hn,ln,"has");const Zn=Do?en(nt):mn("Map"),rn=Do?en(Tn):mn("WeakMap"),Ye=Do?en(nn):mn("Set"),Bt=mn("WeakSet");function We(E){for(var I=X(E),L=I.length,B=Array(L),te=0;te<L;te++)B[te]=E[I[te]];return B}function on(E){for(var I=X(E),L=I.length,B=Array(L),te=0;te<L;te++)B[te]=[I[te],E[I[te]]];return B}function wt(E){for(var I={},L=X(E),B=0,te=L.length;B<te;B++)I[E[L[B]]]=L[B];return I}function fn(E){var I=[];for(var L in E)ur(E[L])&&I.push(L);return I.sort()}function dr(E,I){return function(L){var B=arguments.length;if(I&&(L=Object(L)),B<2||null==L)return L;for(var te=1;te<B;te++)for(var K=arguments[te],we=E(K),$e=we.length,$t=0;$t<$e;$t++){var Ft=we[$t];(!I||void 0===L[Ft])&&(L[Ft]=K[Ft])}return L}}const xn=dr(ct),wn=dr(X),Sr=dr(ct,!0);function jn(E){if(!ii(E))return{};if(et)return et(E);var I=function(){};I.prototype=E;var L=new I;return I.prototype=null,L}function un(E,I){var L=jn(E);return I&&wn(L,I),L}function Ke(E){return ii(E)?wr(E)?E.slice():xn({},E):E}function q(E,I){return I(E),E}function ce(E){return wr(E)?E:[E]}function lt(E){return Oe.toPath(E)}function Pt(E,I){for(var L=I.length,B=0;B<L;B++){if(null==E)return;E=E[I[B]]}return L?E:void 0}function Rn(E,I,L){var B=Pt(E,lt(I));return oi(B)?L:B}function Le(E,I){for(var L=(I=lt(I)).length,B=0;B<L;B++){var te=I[B];if(!si(E,te))return!1;E=E[te]}return!!L}function Ve(E){return E}function ve(E){return E=wn({},E),function(I){return qe(I,E)}}function Fe(E){return E=lt(E),function(I){return Pt(I,E)}}function st(E,I,L){if(void 0===I)return E;switch(L??3){case 1:return function(B){return E.call(I,B)};case 3:return function(B,te,K){return E.call(I,B,te,K)};case 4:return function(B,te,K,we){return E.call(I,B,te,K,we)}}return function(){return E.apply(I,arguments)}}function Lt(E,I,L){return null==E?Ve:ur(E)?st(E,I,L):ii(E)&&!wr(E)?ve(E):Fe(E)}function tt(E,I){return Lt(E,I,1/0)}function ht(E,I,L){return Oe.iteratee!==tt?Oe.iteratee(E,I):Lt(E,I,L)}function jt(E,I,L){I=ht(I,L);for(var B=X(E),te=B.length,K={},we=0;we<te;we++){var $e=B[we];K[$e]=I(E[$e],$e,E)}return K}function Vt(){}function Cn(E){return null==E?Vt:function(I){return Rn(E,I)}}function bn(E,I,L){var B=Array(Math.max(0,E));I=st(I,L,1);for(var te=0;te<E;te++)B[te]=I(te);return B}function Yr(E,I){return null==I&&(I=E,E=0),E+Math.floor(Math.random()*(I-E+1))}Oe.toPath=ce,Oe.iteratee=tt;const br=Date.now||function(){return(new Date).getTime()};function ss(E){var I=function(K){return E[K]},L="(?:"+X(E).join("|")+")",B=RegExp(L),te=RegExp(L,"g");return function(K){return B.test(K=null==K?"":""+K)?K.replace(te,I):K}}const Ds={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Gs=ss(Ds),hi=ss(wt(Ds)),Kn=Oe.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var qi=/(.)^/,ao={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},fa=/\\|'|\r|\n|\u2028|\u2029/g;function da(E){return"\\"+ao[E]}var _o=/^\s*(\w|\$)+\s*$/;function Mi(E,I,L){!I&&L&&(I=L),I=Sr({},I,Oe.templateSettings);var B=RegExp([(I.escape||qi).source,(I.interpolate||qi).source,(I.evaluate||qi).source].join("|")+"|$","g"),te=0,K="__p+='";E.replace(B,function(Ft,Jn,Or,zo,Ka){return K+=E.slice(te,Ka).replace(fa,da),te=Ka+Ft.length,Jn?K+="'+\n((__t=("+Jn+"))==null?'':_.escape(__t))+\n'":Or?K+="'+\n((__t=("+Or+"))==null?'':__t)+\n'":zo&&(K+="';\n"+zo+"\n__p+='"),Ft}),K+="';\n";var $e,we=I.variable;if(we){if(!_o.test(we))throw new Error("variable is not a bare identifier: "+we)}else K="with(obj||{}){\n"+K+"}\n",we="obj";K="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+K+"return __p;\n";try{$e=new Function(we,"_",K)}catch(Ft){throw Ft.source=K,Ft}var $t=function(Ft){return $e.call(this,Ft,Oe)};return $t.source="function("+we+"){\n"+K+"}",$t}function pi(E,I,L){var B=(I=lt(I)).length;if(!B)return ur(L)?L.call(E):L;for(var te=0;te<B;te++){var K=E?.[I[te]];void 0===K&&(K=L,te=B),E=ur(K)?K.call(E):K}return E}var Su=0;function Iu(E){var I=++Su+"";return E?E+I:I}function Au(E){var I=Oe(E);return I._chain=!0,I}function Pi(E,I,L,B,te){if(!(B instanceof I))return E.apply(L,te);var K=jn(E.prototype),we=E.apply(K,te);return ii(we)?we:K}var ha=Wn(function(E,I){var L=ha.placeholder,B=function(){for(var te=0,K=I.length,we=Array(K),$e=0;$e<K;$e++)we[$e]=I[$e]===L?arguments[te++]:I[$e];for(;te<arguments.length;)we.push(arguments[te++]);return Pi(E,B,this,this,we)};return B});ha.placeholder=Oe;const Vo=ha,pa=Wn(function(E,I,L){if(!ur(E))throw new TypeError("Bind must be called on a function");var B=Wn(function(te){return Pi(E,B,I,this,L.concat(te))});return B}),ui=T(z);function ci(E,I,L,B){if(B=B||[],I||0===I){if(I<=0)return B.concat(E)}else I=1/0;for(var te=B.length,K=0,we=z(E);K<we;K++){var $e=E[K];if(ui($e)&&(wr($e)||Fo($e)))if(I>1)ci($e,I-1,L,B),te=B.length;else for(var $t=0,Ft=$e.length;$t<Ft;)B[te++]=$e[$t++];else L||(B[te++]=$e)}return B}const Co=Wn(function(E,I){var L=(I=ci(I,!1,!1)).length;if(L<1)throw new Error("bindAll must be passed function names");for(;L--;){var B=I[L];E[B]=pa(E[B],E)}return E});function qs(E,I){var L=function(B){var te=L.cache,K=""+(I?I.apply(this,arguments):B);return si(te,K)||(te[K]=E.apply(this,arguments)),te[K]};return L.cache={},L}const Ua=Wn(function(E,I,L){return setTimeout(function(){return E.apply(null,L)},I)}),us=Vo(Ua,Oe,1);function ga(E,I,L){var B,te,K,we,$e=0;L||(L={});var $t=function(){$e=!1===L.leading?0:br(),B=null,we=E.apply(te,K),B||(te=K=null)},Ft=function(){var Jn=br();!$e&&!1===L.leading&&($e=Jn);var Or=I-(Jn-$e);return te=this,K=arguments,Or<=0||Or>I?(B&&(clearTimeout(B),B=null),$e=Jn,we=E.apply(te,K),B||(te=K=null)):!B&&!1!==L.trailing&&(B=setTimeout($t,Or)),we};return Ft.cancel=function(){clearTimeout(B),$e=0,B=te=K=null},Ft}function Ws(E,I,L){var B,te,K,we,$e,$t=function(){var Jn=br()-te;I>Jn?B=setTimeout($t,I-Jn):(B=null,L||(we=E.apply($e,K)),B||(K=$e=null))},Ft=Wn(function(Jn){return $e=this,K=Jn,te=br(),B||(B=setTimeout($t,I),L&&(we=E.apply($e,K))),we});return Ft.cancel=function(){clearTimeout(B),B=K=$e=null},Ft}function ma(E,I){return Vo(I,E)}function gi(E){return function(){return!E.apply(this,arguments)}}function Mu(){var E=arguments,I=E.length-1;return function(){for(var L=I,B=E[I].apply(this,arguments);L--;)B=E[L].call(this,B);return B}}function $a(E,I){return function(){if(--E<1)return I.apply(this,arguments)}}function za(E,I){var L;return function(){return--E>0&&(L=I.apply(this,arguments)),E<=1&&(I=null),L}}const Pu=Vo(za,2);function _s(E,I,L){I=ht(I,L);for(var te,B=X(E),K=0,we=B.length;K<we;K++)if(I(E[te=B[K]],te,E))return te}function Nu(E){return function(I,L,B){L=ht(L,B);for(var te=z(I),K=E>0?0:te-1;K>=0&&K<te;K+=E)if(L(I[K],K,I))return K;return-1}}const va=Nu(1),uo=Nu(-1);function Ga(E,I,L,B){for(var te=(L=ht(L,B,1))(I),K=0,we=z(E);K<we;){var $e=Math.floor((K+we)/2);L(E[$e])<te?K=$e+1:we=$e}return K}function qa(E,I,L){return function(B,te,K){var we=0,$e=z(B);if("number"==typeof K)E>0?we=K>=0?K:Math.max(K+$e,we):$e=K>=0?Math.min(K+1,$e):K+$e+1;else if(L&&K&&$e)return B[K=L(B,te)]===te?K:-1;if(te!=te)return(K=I(Qn.call(B,we,$e),ai))>=0?K+we:-1;for(K=E>0?we:$e-1;K>=0&&K<$e;K+=E)if(B[K]===te)return K;return-1}}const Wa=qa(1,va,Ga),Za=qa(-1,uo);function Zs(E,I,L){var te=(ui(E)?va:_s)(E,I,L);if(void 0!==te&&-1!==te)return E[te]}function ya(E,I){return Zs(E,ve(I))}function Ni(E,I,L){var B,te;if(I=st(I,L),ui(E))for(B=0,te=E.length;B<te;B++)I(E[B],B,E);else{var K=X(E);for(B=0,te=K.length;B<te;B++)I(E[K[B]],K[B],E)}return E}function mi(E,I,L){I=ht(I,L);for(var B=!ui(E)&&X(E),te=(B||E).length,K=Array(te),we=0;we<te;we++){var $e=B?B[we]:we;K[we]=I(E[$e],$e,E)}return K}function Ou(E){return function(L,B,te,K){var we=arguments.length>=3;return function(L,B,te,K){var we=!ui(L)&&X(L),$e=(we||L).length,$t=E>0?0:$e-1;for(K||(te=L[we?we[$t]:$t],$t+=E);$t>=0&&$t<$e;$t+=E){var Ft=we?we[$t]:$t;te=B(te,L[Ft],Ft,L)}return te}(L,st(B,K,4),te,we)}}const Bo=Ou(1),Cs=Ou(-1);function To(E,I,L){var B=[];return I=ht(I,L),Ni(E,function(te,K,we){I(te,K,we)&&B.push(te)}),B}function Ya(E,I,L){return To(E,gi(ht(I)),L)}function wa(E,I,L){I=ht(I,L);for(var B=!ui(E)&&X(E),te=(B||E).length,K=0;K<te;K++){var we=B?B[K]:K;if(!I(E[we],we,E))return!1}return!0}function Ho(E,I,L){I=ht(I,L);for(var B=!ui(E)&&X(E),te=(B||E).length,K=0;K<te;K++){var we=B?B[K]:K;if(I(E[we],we,E))return!0}return!1}function vi(E,I,L,B){return ui(E)||(E=We(E)),("number"!=typeof L||B)&&(L=0),Wa(E,I,L)>=0}const ba=Wn(function(E,I,L){var B,te;return ur(I)?te=I:(I=lt(I),B=I.slice(0,-1),I=I[I.length-1]),mi(E,function(K){var we=te;if(!we){if(B&&B.length&&(K=Pt(K,B)),null==K)return;we=K[I]}return null==we?we:we.apply(K,L)})});function Ys(E,I){return mi(E,Fe(I))}function Ru(E,I){return To(E,ve(I))}function Xa(E,I,L){var K,we,B=-1/0,te=-1/0;if(null==I||"number"==typeof I&&"object"!=typeof E[0]&&null!=E)for(var $e=0,$t=(E=ui(E)?E:We(E)).length;$e<$t;$e++)null!=(K=E[$e])&&K>B&&(B=K);else I=ht(I,L),Ni(E,function(Ft,Jn,Or){((we=I(Ft,Jn,Or))>te||we===-1/0&&B===-1/0)&&(B=Ft,te=we)});return B}function l(E,I,L){var K,we,B=1/0,te=1/0;if(null==I||"number"==typeof I&&"object"!=typeof E[0]&&null!=E)for(var $e=0,$t=(E=ui(E)?E:We(E)).length;$e<$t;$e++)null!=(K=E[$e])&&K<B&&(B=K);else I=ht(I,L),Ni(E,function(Ft,Jn,Or){((we=I(Ft,Jn,Or))<te||we===1/0&&B===1/0)&&(B=Ft,te=we)});return B}var h=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function g(E){return E?wr(E)?Qn.call(E):qr(E)?E.match(h):ui(E)?mi(E,Ve):We(E):[]}function v(E,I,L){if(null==I||L)return ui(E)||(E=We(E)),E[Yr(E.length-1)];var B=g(E),te=z(B);I=Math.max(Math.min(I,te),0);for(var K=te-1,we=0;we<I;we++){var $e=Yr(we,K),$t=B[we];B[we]=B[$e],B[$e]=$t}return B.slice(0,I)}function _(E){return v(E,1/0)}function C(E,I,L){var B=0;return I=ht(I,L),Ys(mi(E,function(te,K,we){return{value:te,index:B++,criteria:I(te,K,we)}}).sort(function(te,K){var we=te.criteria,$e=K.criteria;if(we!==$e){if(we>$e||void 0===we)return 1;if(we<$e||void 0===$e)return-1}return te.index-K.index}),"value")}function A(E,I){return function(L,B,te){var K=I?[[],[]]:{};return B=ht(B,te),Ni(L,function(we,$e){var $t=B(we,$e,L);E(K,we,$t)}),K}}const U=A(function(E,I,L){si(E,L)?E[L].push(I):E[L]=[I]}),H=A(function(E,I,L){E[L]=I}),G=A(function(E,I,L){si(E,L)?E[L]++:E[L]=1}),me=A(function(E,I,L){E[L?0:1].push(I)},!0);function ge(E){return null==E?0:ui(E)?E.length:X(E).length}function ae(E,I,L){return I in L}const Re=Wn(function(E,I){var L={},B=I[0];if(null==E)return L;ur(B)?(I.length>1&&(B=st(B,I[1])),I=ct(E)):(B=ae,I=ci(I,!1,!1),E=Object(E));for(var te=0,K=I.length;te<K;te++){var we=I[te],$e=E[we];B($e,we,E)&&(L[we]=$e)}return L}),Nt=Wn(function(E,I){var B,L=I[0];return ur(L)?(L=gi(L),I.length>1&&(B=I[1])):(I=mi(ci(I,!1,!1),String),L=function(te,K){return!vi(I,K)}),Re(E,L,B)});function tn(E,I,L){return Qn.call(E,0,Math.max(0,E.length-(null==I||L?1:I)))}function ke(E,I,L){return null==E||E.length<1?null==I||L?void 0:[]:null==I||L?E[0]:tn(E,E.length-I)}function Un(E,I,L){return Qn.call(E,null==I||L?1:I)}function rr(E,I,L){return null==E||E.length<1?null==I||L?void 0:[]:null==I||L?E[E.length-1]:Un(E,Math.max(0,E.length-I))}function co(E){return To(E,Boolean)}function Oi(E,I){return ci(E,I,!1)}const Ae=Wn(function(E,I){return I=ci(I,!0,!0),To(E,function(L){return!vi(I,L)})}),yi=Wn(function(E,I){return Ae(E,I)});function qt(E,I,L,B){Jt(I)||(B=L,L=I,I=!1),null!=L&&(L=ht(L,B));for(var te=[],K=[],we=0,$e=z(E);we<$e;we++){var $t=E[we],Ft=L?L($t,we,E):$t;I&&!L?((!we||K!==Ft)&&te.push($t),K=Ft):L?vi(K,Ft)||(K.push(Ft),te.push($t)):vi(te,$t)||te.push($t)}return te}const zn=Wn(function(E){return qt(ci(E,!0,!0))});function jo(E){for(var I=[],L=arguments.length,B=0,te=z(E);B<te;B++){var K=E[B];if(!vi(I,K)){var we;for(we=1;we<L&&vi(arguments[we],K);we++);we===L&&I.push(K)}}return I}function Uo(E){for(var I=E&&Xa(E,z).length||0,L=Array(I),B=0;B<I;B++)L[B]=Ys(E,B);return L}const Er=Wn(Uo);function lo(E,I){for(var L={},B=0,te=z(E);B<te;B++)I?L[E[B]]=I[B]:L[E[B][0]]=E[B][1];return L}function Ri(E,I,L){null==I&&(I=E||0,E=0),L||(L=I<E?-1:1);for(var B=Math.max(Math.ceil((I-E)/L),0),te=Array(B),K=0;K<B;K++,E+=L)te[K]=E;return te}function mt(E,I){if(null==I||I<1)return[];for(var L=[],B=0,te=E.length;B<te;)L.push(Qn.call(E,B,B+=I));return L}function Yt(E,I){return E._chain?Oe(I).chain():I}function wi(E){return Ni(fn(E),function(I){var L=Oe[I]=E[I];Oe.prototype[I]=function(){var B=[this._wrapped];return Tr.apply(B,arguments),Yt(this,L.apply(Oe,B))}}),Oe}Ni(["pop","push","reverse","shift","sort","splice","unshift"],function(E){var I=it[E];Oe.prototype[E]=function(){var L=this._wrapped;return null!=L&&(I.apply(L,arguments),("shift"===E||"splice"===E)&&0===L.length&&delete L[0]),Yt(this,L)}}),Ni(["concat","join","slice"],function(E){var I=it[E];Oe.prototype[E]=function(){var L=this._wrapped;return null!=L&&(L=I.apply(L,arguments)),Yt(this,L)}});const Qa=Oe;var Wi=wi(Si);Wi._=Wi;const $o=Wi}},D0={};function $n(Gn){var fr=D0[Gn];if(void 0!==fr)return fr.exports;var qn=D0[Gn]={exports:{}};return vA[Gn].call(qn.exports,qn,qn.exports,$n),qn.exports}$n.d=(Gn,fr)=>{for(var qn in fr)$n.o(fr,qn)&&!$n.o(Gn,qn)&&Object.defineProperty(Gn,qn,{enumerable:!0,get:fr[qn]})},$n.o=(Gn,fr)=>Object.prototype.hasOwnProperty.call(Gn,fr),$n.r=Gn=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Gn,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Gn,"__esModule",{value:!0})},(()=>{"use strict";var Gn={};$n.r(Gn),$n.d(Gn,{ellipseWithEllipse:()=>Qx,ellipseWithLine:()=>ly,exists:()=>Xx,lineWithLine:()=>_u,pathWithEllipse:()=>sS,pathWithLine:()=>oS,pathWithPath:()=>uS,pathWithPolygon:()=>$h,pathWithPolyline:()=>py,pathWithRect:()=>aS,polygonWithEllipse:()=>Uh,polygonWithLine:()=>hy,polygonWithPolygon:()=>iS,polygonWithPolyline:()=>rS,polygonWithRect:()=>nS,polylineWithEllipse:()=>dy,polylineWithLine:()=>jh,polylineWithPolyline:()=>tS,polylineWithRect:()=>eS,rectWithEllipse:()=>Jx,rectWithLine:()=>Kx,rectWithRect:()=>fy});var fr={};$n.r(fr),$n.d(fr,{Curve:()=>Pn,Ellipse:()=>to,Line:()=>Xe,Path:()=>ut,Point:()=>W,Polygon:()=>wo,Polyline:()=>tr,Rect:()=>ze,bezier:()=>HH,ellipse:()=>OH,intersection:()=>UH,line:()=>bu,normalizeAngle:()=>gs,point:()=>Fh,random:()=>ey,rect:()=>FH,scale:()=>IH,snapToGrid:()=>wu,toDeg:()=>Rh,toRad:()=>yo,types:()=>an});var qn={};$n.r(qn),$n.d(qn,{absolute:()=>cj,bottom:()=>gj,ellipse:()=>vj,ellipseSpread:()=>mj,fn:()=>lj,left:()=>dj,line:()=>fj,right:()=>hj,top:()=>pj});var Si={};$n.r(Si),$n.d(Si,{bottom:()=>Dj,inside:()=>xj,insideOriented:()=>Tj,left:()=>wj,manual:()=>yj,outside:()=>Cj,outsideOriented:()=>_j,radial:()=>Sj,radialOriented:()=>Ij,right:()=>bj,top:()=>Ej});var gt={};$n.r(gt),$n.d(gt,{manhattan:()=>Ny,metro:()=>h3,normal:()=>Yj,oneSide:()=>Xj,orthogonal:()=>Iy,rightAngle:()=>b3});var Pr={};$n.r(Pr),$n.d(Pr,{curve:()=>Fy,jumpover:()=>O3,normal:()=>R3,rounded:()=>F3,smooth:()=>V3,straight:()=>ky});var it={};$n.r(it),$n.d(it,{addClass:()=>K3,list:()=>J3,mask:()=>X3,opacity:()=>Q3,stroke:()=>Z3});var Me={};$n.r(Me),$n.d(Me,{connectionClosest:()=>DI,connectionLength:()=>tU,connectionPerpendicular:()=>iU,connectionRatio:()=>eU,resolveRef:()=>Of});var Xn={};$n.r(Xn),$n.d(Xn,{anchor:()=>lU,bbox:()=>fU,boundary:()=>hU,rectangle:()=>dU});var Tr={};function Qn(e,t){return Object.is(e,t)}$n.r(Tr),$n.d(Tr,{bottom:()=>wU,bottomLeft:()=>CU,bottomRight:()=>TU,center:()=>vU,left:()=>bU,midSide:()=>SU,modelCenter:()=>IU,perpendicular:()=>xU,right:()=>EU,top:()=>yU,topLeft:()=>DU,topRight:()=>_U});let ot=null,Gr=!1,vr=1;const Dt=Symbol("SIGNAL");function _n(e){const t=ot;return ot=e,t}const ri={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function bt(e){if(Gr)throw new Error("");if(null===ot)return;ot.consumerOnSignalRead(e);const t=ot.nextProducerIndex++;Wr(ot),t<ot.producerNode.length&&ot.producerNode[t]!==e&&Mt(ot)&&qr(ot.producerNode[t],ot.producerIndexOfThis[t]),ot.producerNode[t]!==e&&(ot.producerNode[t]=e,ot.producerIndexOfThis[t]=Mt(ot)?mn(e,ot,t):0),ot.producerLastReadVersion[t]=e.version}function di(e){if((!Mt(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==vr)){if(!e.producerMustRecompute(e)&&!Jt(e))return e.dirty=!1,void(e.lastCleanEpoch=vr);e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=vr}}function xr(e){if(void 0===e.liveConsumerNode)return;const t=Gr;Gr=!0;try{for(const n of e.liveConsumerNode)n.dirty||ii(n)}finally{Gr=t}}function Wn(){return!1!==ot?.consumerAllowSignalWrites}function ii(e){e.dirty=!0,xr(e),e.consumerMarkedDirty?.(e)}function y(e){return e&&(e.nextProducerIndex=0),_n(e)}function oi(e,t){if(_n(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(Mt(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)qr(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Jt(e){Wr(e);for(let t=0;t<e.producerNode.length;t++){const n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(di(n),r!==n.version))return!0}return!1}function bo(e){if(Wr(e),Mt(e))for(let t=0;t<e.producerNode.length;t++)qr(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function mn(e,t,n){if(Zr(e),Wr(e),0===e.liveConsumerNode.length)for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=mn(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function qr(e,t){if(Zr(e),Wr(e),1===e.liveConsumerNode.length)for(let r=0;r<e.producerNode.length;r++)qr(e.producerNode[r],e.producerIndexOfThis[r]);const n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];Wr(i),i.producerIndexOfThis[r]=t}}function Mt(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Wr(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Zr(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}let yr=function ur(){throw new Error};function Ii(){yr()}let ko=null;function si(e,t){Wn()||Ii();const n=e.value;Object.is(n,t)||e.equal(n,t)||(e.value=t,function ai(e){e.version++,function so(){vr++}(),xr(e),ko?.()}(e))}const Ai=(()=>({...ri,equal:Qn,value:void 0}))();const T=()=>{},N=(()=>({...ri,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{null!==e.schedule&&e.schedule(e.ref)},hasRun:!1,cleanupFn:T}))();function J(e){return"function"==typeof e}function Te(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Se=Te(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function F(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class z{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(J(r))try{r()}catch(o){t=o instanceof Se?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{X(o)}catch(s){t=t??[],s instanceof Se?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Se(t)}}add(t){var n;if(t&&t!==this)if(this.closed)X(t);else{if(t instanceof z){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&F(n,t)}remove(t){const{_finalizers:n}=this;n&&F(n,t),t instanceof z&&t._removeParent(this)}}z.EMPTY=(()=>{const e=new z;return e.closed=!0,e})();const le=z.EMPTY;function se(e){return e instanceof z||e&&"closed"in e&&J(e.remove)&&J(e.add)&&J(e.unsubscribe)}function X(e){J(e)?e():e.unsubscribe()}const ye={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},qe={setTimeout(e,t,...n){const{delegate:r}=qe;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=qe;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Oe(e){qe.setTimeout(()=>{const{onUnhandledError:t}=ye;if(!t)throw e;t(e)})}function vt(){}const Ze=pt("C",void 0,void 0);function pt(e,t,n){return{kind:e,value:t,error:n}}let ct=null;function en(e){if(ye.useDeprecatedSynchronousErrorHandling){const t=!ct;if(t&&(ct={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=ct;if(ct=null,n)throw r}}else e()}class Bn extends z{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,se(t)&&t.add(this)):this.destination=Ye}static create(t,n,r){return new Tn(t,n,r)}next(t){this.isStopped?rn(function yt(e){return pt("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?rn(function Ge(e){return pt("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?rn(Ze,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Hn=Function.prototype.bind;function It(e,t){return Hn.call(e,t)}class nt{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){nn(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){nn(r)}else nn(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){nn(n)}}}class Tn extends Bn{constructor(t,n,r){let i;if(super(),J(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&ye.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&It(t.next,o),error:t.error&&It(t.error,o),complete:t.complete&&It(t.complete,o)}):i=t}this.destination=new nt(i)}}function nn(e){ye.useDeprecatedSynchronousErrorHandling?function ln(e){ye.useDeprecatedSynchronousErrorHandling&&ct&&(ct.errorThrown=!0,ct.error=e)}(e):Oe(e)}function rn(e,t){const{onStoppedNotification:n}=ye;n&&qe.setTimeout(()=>n(e,t))}const Ye={closed:!0,next:vt,error:function Zn(e){throw e},complete:vt},Bt="function"==typeof Symbol&&Symbol.observable||"@@observable";function We(e){return e}let fn=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function wn(e){return e&&e instanceof Bn||function xn(e){return e&&J(e.next)&&J(e.error)&&J(e.complete)}(e)&&se(e)}(n)?n:new Tn(n,r,i);return en(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=dr(r))((i,o)=>{const s=new Tn({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Bt](){return this}pipe(...n){return function wt(e){return 0===e.length?We:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=dr(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function dr(e){var t;return null!==(t=e??ye.Promise)&&void 0!==t?t:Promise}const Sr=Te(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let hr=(()=>{class e extends fn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new jn(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Sr}next(n){en(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){en(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){en(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?le:(this.currentObservers=null,o.push(n),new z(()=>{this.currentObservers=null,F(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new fn;return n.source=this,n}}return e.create=(t,n)=>new jn(t,n),e})();class jn extends hr{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:le}}function Ke(e){return t=>{if(function un(e){return J(e?.lift)}(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function q(e,t,n,r,i){return new ce(e,t,n,r,i)}class ce extends Bn{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){t.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function lt(e,t){return Ke((n,r)=>{let i=0;n.subscribe(q(r,o=>{r.next(e.call(t,o,i++))}))})}function hi(e){return this instanceof hi?(this.v=e,this):new hi(e)}function ao(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function br(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,u){!function i(o,s,a,u){Promise.resolve(u).then(function(c){o({value:c,done:a})},s)}(a,u,(s=e[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const pa=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function ui(e){return J(e?.then)}function ci(e){return J(e[Bt])}function Co(e){return Symbol.asyncIterator&&J(e?.[Symbol.asyncIterator])}function qs(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const us=function Ua(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ga(e){return J(e?.[us])}function Ws(e){return function Kn(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(p){r[p]&&(i[p]=function(m){return new Promise(function(b,D){o.push([p,m,b,D])>1||a(p,m)})})}function a(p,m){try{!function u(p){p.value instanceof hi?Promise.resolve(p.value.v).then(c,d):f(o[0][2],p)}(r[p](m))}catch(b){f(o[0][3],b)}}function c(p){a("next",p)}function d(p){a("throw",p)}function f(p,m){p(m),o.shift(),o.length&&a(o[0][0],o[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield hi(n.read());if(i)return yield hi(void 0);yield yield hi(r)}}finally{n.releaseLock()}})}function ma(e){return J(e?.getReader)}function gi(e){if(e instanceof fn)return e;if(null!=e){if(ci(e))return function Mu(e){return new fn(t=>{const n=e[Bt]();if(J(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(pa(e))return function $a(e){return new fn(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(ui(e))return function za(e){return new fn(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Oe)})}(e);if(Co(e))return _s(e);if(ga(e))return function Pu(e){return new fn(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(ma(e))return function Nu(e){return _s(Ws(e))}(e)}throw qs(e)}function _s(e){return new fn(t=>{(function va(e,t){var n,r,i,o;return function Vt(e,t,n,r){return new(n||(n=Promise))(function(o,s){function a(d){try{c(r.next(d))}catch(f){s(f)}}function u(d){try{c(r.throw(d))}catch(f){s(f)}}function c(d){d.done?o(d.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(d.value).then(a,u)}c((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=ao(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function uo(e,t,n,r=0,i=!1){const o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function qa(e,t,n=1/0){return J(t)?qa((r,i)=>lt((o,s)=>t(r,o,i,s))(gi(e(r,i))),n):("number"==typeof t&&(n=t),Ke((r,i)=>function Ga(e,t,n,r,i,o,s,a){const u=[];let c=0,d=0,f=!1;const p=()=>{f&&!u.length&&!c&&t.complete()},m=D=>c<r?b(D):u.push(D),b=D=>{o&&t.next(D),c++;let x=!1;gi(n(D,d++)).subscribe(q(t,P=>{i?.(P),o?m(P):t.next(P)},()=>{x=!0},void 0,()=>{if(x)try{for(c--;u.length&&c<r;){const P=u.shift();s?uo(t,s,()=>b(P)):b(P)}p()}catch(P){t.error(P)}}))};return e.subscribe(q(t,m,()=>{f=!0,p()})),()=>{a?.()}}(r,i,e,n)))}const Za=new fn(e=>e.complete());function mi(e){return e[e.length-1]}function Bo(e){return function Ni(e){return e&&J(e.schedule)}(mi(e))?e.pop():void 0}function To(e,t=0){return Ke((n,r)=>{n.subscribe(q(r,i=>uo(r,e,()=>r.next(i),t),()=>uo(r,e,()=>r.complete(),t),i=>uo(r,e,()=>r.error(i),t)))})}function Ya(e,t=0){return Ke((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Ys(e,t){if(!e)throw new Error("Iterable cannot be null");return new fn(n=>{uo(n,t,()=>{const r=e[Symbol.asyncIterator]();uo(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function l(e,t){return t?function Xa(e,t){if(null!=e){if(ci(e))return function wa(e,t){return gi(e).pipe(Ya(t),To(t))}(e,t);if(pa(e))return function vi(e,t){return new fn(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(ui(e))return function Ho(e,t){return gi(e).pipe(Ya(t),To(t))}(e,t);if(Co(e))return Ys(e,t);if(ga(e))return function ba(e,t){return new fn(n=>{let r;return uo(n,t,()=>{r=e[us](),uo(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>J(r?.return)&&r.return()})}(e,t);if(ma(e))return function Ru(e,t){return Ys(Ws(e),t)}(e,t)}throw qs(e)}(e,t):gi(e)}function h(...e){const t=Bo(e),n=function Cs(e,t){return"number"==typeof mi(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?gi(r[0]):function Wa(e=1/0){return qa(We,e)}(n)(l(r,t)):Za}class g extends hr{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function _(e={}){const{connector:t=(()=>new hr),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let s,a,u,c=0,d=!1,f=!1;const p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),s=u=void 0,d=f=!1},b=()=>{const D=s;m(),D?.unsubscribe()};return Ke((D,x)=>{c++,!f&&!d&&p();const P=u=u??t();x.add(()=>{c--,0===c&&!f&&!d&&(a=C(b,i))}),P.subscribe(x),!s&&c>0&&(s=new Tn({next:O=>P.next(O),error:O=>{f=!0,p(),a=C(m,n,O),P.error(O)},complete:()=>{d=!0,p(),a=C(m,r),P.complete()}}),gi(D).subscribe(s))})(o)}}function C(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new Tn({next:()=>{r.unsubscribe(),e()}});return gi(t(...n)).subscribe(r)}function A(e,t){return Ke((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(q(r,u=>{i?.unsubscribe();let c=0;const d=o++;gi(e(u,d)).subscribe(i=q(r,f=>r.next(t?t(u,f,d,c++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function U(e,t=We){return e=e??H,Ke((n,r)=>{let i,o=!0;n.subscribe(q(r,s=>{const a=t(s);(o||!e(i,a))&&(o=!1,i=a,r.next(s))}))})}function H(e,t){return e===t}function G(e){for(let t in e)if(e[t]===G)return t;throw Error("Could not find renamed property on target object.")}function ge(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ge).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function ae(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const Nt=G({__forward_ref__:G});function tn(e){return e.__forward_ref__=tn,e.toString=function(){return ge(this())},e}function ke(e){return function Un(e){return"function"==typeof e&&e.hasOwnProperty(Nt)&&e.__forward_ref__===tn}(e)?e():e}function rr(e){return e&&!!e.\u0275providers}class Ae extends Error{constructor(t,n){super(function yi(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}const qt=G({\u0275cmp:G}),zn=G({\u0275dir:G}),jo=G({\u0275pipe:G}),Er=G({\u0275fac:G}),lo=G({__NG_ELEMENT_ID__:G}),Ri=G({__NG_ENV_ID__:G});function Yt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function mt(e){return"string"==typeof e?e:null==e?"":String(e)}(e)}function I(e,t){throw new Ae(-201,!1)}function Xr(e,t){null==e&&function Et(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function En(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function eu(e){return Q(e,_e)||Q(e,Qe)}function Q(e,t){return e.hasOwnProperty(t)?e[t]:null}function de(e){return e&&(e.hasOwnProperty(je)||e.hasOwnProperty(at))?e[je]:null}const _e=G({\u0275prov:G}),je=G({\u0275inj:G}),Qe=G({ngInjectableDef:G}),at=G({ngInjectorDef:G});var Pe=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Pe||{});let sn;function Ot(){return sn}function dt(e){const t=sn;return sn=e,t}function cn(e,t,n){const r=eu(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Pe.Optional?null:void 0!==t?t:void I(ge(e))}const Ct=globalThis;class ft{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=En({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const sl={},xp="__NG_DI_FLAG__",$f="ngTempTokenPath",bA=/\n/gm,T0="__source";let Lu;function Ea(e){const t=Lu;return Lu=e,t}function _A(e,t=Pe.Default){if(void 0===Lu)throw new Ae(-203,!1);return null===Lu?cn(e,void 0,t):Lu.get(e,t&Pe.Optional?null:void 0,t)}function Sn(e,t=Pe.Default){return(Ot()||_A)(ke(e),t)}function kn(e,t=Pe.Default){return Sn(e,zf(t))}function zf(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Sp(e){const t=[];for(let n=0;n<e.length;n++){const r=ke(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Ae(900,!1);let i,o=Pe.Default;for(let s=0;s<r.length;s++){const a=r[s],u=CA(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}t.push(Sn(i,o))}else t.push(Sn(r))}return t}function CA(e){return e[xp]}var Gf=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Gf||{}),cs=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(cs||{});const xs={},An=[];function S0(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function Ip(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{const o=i,s=n[++r];A0(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function I0(e){return 3===e||4===e||6===e}function A0(e){return 64===e.charCodeAt(0)}function ul(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||M0(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function M0(e,t,n,r,i){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const a=e[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<e.length;){const a=e[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}const P0="ng-template";function SA(e,t,n){let r=0,i=!0;for(;r<e.length;){let o=e[r++];if("string"==typeof o&&i){const s=e[r++];if(n&&"class"===o&&-1!==S0(s.toLowerCase(),t,0))return!0}else{if(1===o){for(;r<e.length&&"string"==typeof(o=e[r++]);)if(o.toLowerCase()===t)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function N0(e){return 4===e.type&&e.value!==P0}function IA(e,t,n){return t===(4!==e.type||n?e.value:P0)}function AA(e,t,n){let r=4;const i=e.attrs||[],o=function NA(e){for(let t=0;t<e.length;t++)if(I0(e[t]))return t;return e.length}(i);let s=!1;for(let a=0;a<t.length;a++){const u=t[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!IA(e,u,n)||""===u&&1===t.length){if(ls(r))return!1;s=!0}}else{const c=8&r?u:t[++a];if(8&r&&null!==e.attrs){if(!SA(e.attrs,c,n)){if(ls(r))return!1;s=!0}continue}const f=MA(8&r?"class":u,i,N0(e),n);if(-1===f){if(ls(r))return!1;s=!0;continue}if(""!==c){let p;p=f>o?"":i[f+1].toLowerCase();const m=8&r?p:null;if(m&&-1!==S0(m,c,0)||2&r&&c!==p){if(ls(r))return!1;s=!0}}}}else{if(!s&&!ls(r)&&!ls(u))return!1;if(s&&ls(u))continue;s=!1,r=u|1&r}}return ls(r)||s}function ls(e){return 0==(1&e)}function MA(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){const s=t[i];if(s===e)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function OA(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function O0(e,t,n=!1){for(let r=0;r<t.length;r++)if(AA(e,t[r],n))return!0;return!1}function R0(e,t){return e?":not("+t.trim()+")":t}function kA(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!ls(s)&&(t+=R0(o,i),i=""),r=s,o=o||!ls(r);n++}return""!==i&&(t+=R0(o,i)),t}function k0(e){return function Xs(e){return{toString:e}.toString()}(()=>{const t=function V0(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||xs,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||An,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:F0(e.inputs,t),outputs:F0(e.outputs),debugInfo:null}}(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Gf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||cs.Emulated,styles:e.styles||An,_:null,schemas:e.schemas||null,tView:null,id:""};!function B0(e){e.features?.forEach(t=>t(e))}(n);const r=e.dependencies;return n.directiveDefs=qf(r,!1),n.pipeDefs=qf(r,!0),n.id=function jA(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(n),n})}function VA(e){return dn(e)||Qr(e)}function BA(e){return null!==e}function F0(e,t){if(null==e)return xs;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}function dn(e){return e[qt]||null}function Qr(e){return e[zn]||null}function Ei(e){return e[jo]||null}function qf(e,t){if(!e)return null;const n=t?Ei:VA;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(BA)}const Ir=0,Be=1,At=2,pr=3,fs=4,Li=5,Ss=6,Fu=7,er=8,Yi=9,Vu=10,Wt=11,cl=12,H0=13,Bu=14,Dr=15,ll=16,Hu=17,Is=18,fl=19,j0=20,Da=21,Wf=22,nu=23,Zt=25,Ap=1,As=7,ju=9,Rr=10;var Uu=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e[e.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",e}(Uu||{});function Di(e){return Array.isArray(e)&&"object"==typeof e[Ap]}function fi(e){return Array.isArray(e)&&!0===e[Ap]}function Mp(e){return 0!=(4&e.flags)}function ru(e){return e.componentOffset>-1}function ds(e){return!!e.template}function Pp(e){return 0!=(512&e[At])}function iu(e,t){return e.hasOwnProperty(Er)?e[Er]:null}class G0{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function q0(e){return e.type.prototype.ngOnChanges&&(e.setInput=qA),GA}function GA(){const e=Z0(this),t=e?.current;if(t){const n=e.previous;if(n===xs)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function qA(e,t,n,r){const i=this.declaredInputs[n],o=Z0(e)||function WA(e,t){return e[W0]=t}(e,{previous:xs,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new G0(u&&u.currentValue,t,a===xs),e[r]=t}const W0="__ngSimpleChanges__";function Z0(e){return e[W0]||null}const Ms=function(e,t,n){};function ir(e){for(;Array.isArray(e);)e=e[Ir];return e}function Xi(e,t){return ir(t[e.index])}function xo(e,t){const n=t[e];return Di(n)?n:n[Ir]}function Lp(e){return 128==(128&e[At])}function Ps(e,t){return null==t?null:e[t]}function Q0(e){e[Hu]=0}function KA(e){1024&e[At]||(e[At]|=1024,Lp(e)&&Qf(e))}function J0(e){return 9216&e[At]||e[nu]?.dirty}function ew(e){J0(e)&&Qf(e)}function Qf(e){let t=e[pr];for(;null!==t&&!(fi(t)&&t[At]&Uu.HasChildViewsToRefresh||Di(t)&&8192&t[At]);){if(fi(t))t[At]|=Uu.HasChildViewsToRefresh;else if(t[At]|=8192,!Lp(t))break;t=t[pr]}}function Kf(e,t){if(256==(256&e[At]))throw new Ae(911,!1);null===e[Da]&&(e[Da]=[]),e[Da].push(t)}const Ht={lFrame:lw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function nw(){return Ht.bindingsEnabled}function Ce(){return Ht.lFrame.lView}function Dn(){return Ht.lFrame.tView}function Yn(){let e=rw();for(;null!==e&&64===e.type;)e=e.parent;return e}function rw(){return Ht.lFrame.currentTNode}function Ns(e,t){const n=Ht.lFrame;n.currentTNode=e,n.isParent=t}function Vp(){return Ht.lFrame.isParent}function fM(e,t){const n=Ht.lFrame;n.bindingIndex=n.bindingRootIndex=e,Hp(t)}function Hp(e){Ht.lFrame.currentDirectiveIndex=e}function aw(){return Ht.lFrame.currentQueryIndex}function Up(e){Ht.lFrame.currentQueryIndex=e}function hM(e){const t=e[Be];return 2===t.type?t.declTNode:1===t.type?e[Li]:null}function uw(e,t,n){if(n&Pe.SkipSelf){let i=t,o=e;for(;!(i=i.parent,null!==i||n&Pe.Host||(i=hM(o),null===i||(o=o[Bu],10&i.type))););if(null===i)return!1;t=i,e=o}const r=Ht.lFrame=cw();return r.currentTNode=t,r.lView=e,!0}function $p(e){const t=cw(),n=e[Be];Ht.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function cw(){const e=Ht.lFrame,t=null===e?null:e.child;return null===t?lw(e):t}function lw(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function fw(){const e=Ht.lFrame;return Ht.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const dw=fw;function zp(){const e=fw();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function ou(e){Ht.lFrame.selectedIndex=e}let pw=!0;function ed(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:d}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),u&&(e.viewHooks??=[]).push(-n,u),c&&((e.viewHooks??=[]).push(n,c),(e.viewCheckHooks??=[]).push(n,c)),null!=d&&(e.destroyHooks??=[]).push(n,d)}}function td(e,t,n){gw(e,t,3,n)}function nd(e,t,n,r){(3&e[At])===n&&gw(e,t,n,r)}function Gp(e,t){let n=e[At];(3&n)===t&&(n&=16383,n+=1,e[At]=n)}function gw(e,t,n,r){const o=r??-1,s=t.length-1;let a=0;for(let u=void 0!==r?65535&e[Hu]:0;u<s;u++)if("number"==typeof t[u+1]){if(a=t[u],null!=r&&a>=r)break}else t[u]<0&&(e[Hu]+=65536),(a<o||-1==o)&&(bM(e,n,t,u),e[Hu]=(4294901760&e[Hu])+u+2),u++}function mw(e,t){Ms(4,e,t);const n=_n(null);try{t.call(e)}finally{_n(n),Ms(5,e,t)}}function bM(e,t,n,r){const i=n[r]<0,o=n[r+1],a=e[i?-n[r]:n[r]];i?e[At]>>14<e[Hu]>>16&&(3&e[At])===t&&(e[At]+=16384,mw(a,o)):mw(a,o)}const Gu=-1;class ml{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Wp(e){return e!==Gu}function vl(e){return 32767&e}function yl(e,t){let n=function TM(e){return e>>16}(e),r=t;for(;n>0;)r=r[Bu],n--;return r}let Zp=!0;function rd(e){const t=Zp;return Zp=e,t}const vw=255,yw=5;let xM=0;const Rs={};function id(e,t){const n=ww(e,t);if(-1!==n)return n;const r=t[Be];r.firstCreatePass&&(e.injectorIndex=t.length,Yp(r.data,e),Yp(t,null),Yp(r.blueprint,null));const i=od(e,t),o=e.injectorIndex;if(Wp(i)){const s=vl(i),a=yl(i,t),u=a[Be].data;for(let c=0;c<8;c++)t[o+c]=a[s+c]|u[s+c]}return t[o+8]=i,o}function Yp(e,t){e.push(0,0,0,0,0,0,0,0,t)}function ww(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function od(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=xw(i),null===r)return Gu;if(n++,i=i[Bu],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Gu}function Xp(e,t,n){!function SM(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(lo)&&(r=n[lo]),null==r&&(r=n[lo]=xM++);const i=r&vw;t.data[e+(i>>yw)]|=1<<i}(e,t,n)}function bw(e,t,n){if(n&Pe.Optional||void 0!==e)return e;I()}function Ew(e,t,n,r){if(n&Pe.Optional&&void 0===r&&(r=null),!(n&(Pe.Self|Pe.Host))){const i=e[Yi],o=dt(void 0);try{return i?i.get(t,r,n&Pe.Optional):cn(t,r,n&Pe.Optional)}finally{dt(o)}}return bw(r,0,n)}function Dw(e,t,n,r=Pe.Default,i){if(null!==e){if(2048&t[At]&&!(r&Pe.Self)){const s=function OM(e,t,n,r,i){let o=e,s=t;for(;null!==o&&null!==s&&2048&s[At]&&!(512&s[At]);){const a=_w(o,s,n,r|Pe.Self,Rs);if(a!==Rs)return a;let u=o.parent;if(!u){const c=s[j0];if(c){const d=c.get(n,Rs,r);if(d!==Rs)return d}u=xw(s),s=s[Bu]}o=u}return i}(e,t,n,r,Rs);if(s!==Rs)return s}const o=_w(e,t,n,r,Rs);if(o!==Rs)return o}return Ew(t,n,r,i)}function _w(e,t,n,r,i){const o=function MM(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(lo)?e[lo]:void 0;return"number"==typeof t?t>=0?t&vw:PM:t}(n);if("function"==typeof o){if(!uw(t,e,r))return r&Pe.Host?bw(i,0,r):Ew(t,n,r,i);try{let s;if(s=o(r),null!=s||r&Pe.Optional)return s;I()}finally{dw()}}else if("number"==typeof o){let s=null,a=ww(e,t),u=Gu,c=r&Pe.Host?t[Dr][Li]:null;for((-1===a||r&Pe.SkipSelf)&&(u=-1===a?od(e,t):t[a+8],u!==Gu&&Tw(r,!1)?(s=t[Be],a=vl(u),t=yl(u,t)):a=-1);-1!==a;){const d=t[Be];if(Cw(o,a,d.data)){const f=AM(a,t,n,s,r,c);if(f!==Rs)return f}u=t[a+8],u!==Gu&&Tw(r,t[Be].data[a+8]===c)&&Cw(o,a,t)?(s=d,a=vl(u),t=yl(u,t)):a=-1}}return i}function AM(e,t,n,r,i,o){const s=t[Be],a=s.data[e+8],d=sd(a,s,n,null==r?ru(a)&&Zp:r!=s&&0!=(3&a.type),i&Pe.Host&&o===a);return null!==d?su(t,s,d,a):Rs}function sd(e,t,n,r,i){const o=e.providerIndexes,s=t.data,a=1048575&o,u=e.directiveStart,d=o>>20,p=i?a+d:e.directiveEnd;for(let m=r?a:a+d;m<p;m++){const b=s[m];if(m<u&&n===b||m>=u&&b.type===n)return m}if(i){const m=s[u];if(m&&ds(m)&&m.type===n)return u}return null}function su(e,t,n,r){let i=e[n];const o=t.data;if(function EM(e){return e instanceof ml}(i)){const s=i;s.resolving&&function Wi(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new Ae(-200,`Circular dependency in DI detected for ${e}${n}`)}(Yt(o[n]));const a=rd(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?dt(s.injectImpl):null;uw(e,r,Pe.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function wM(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const s=q0(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}(n,o[n],t)}finally{null!==c&&dt(c),rd(a),s.resolving=!1,dw()}}return i}function Cw(e,t,n){return!!(n[t+(e>>yw)]&1<<e)}function Tw(e,t){return!(e&Pe.Self||e&Pe.Host&&t)}class Kr{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Dw(this._tNode,this._lView,t,zf(r),n)}}function PM(){return new Kr(Yn(),Ce())}function xw(e){const t=e[Be],n=t.type;return 2===n?t.declTNode:1===n?e[Li]:null}function Ju(e,t){e.forEach(n=>Array.isArray(n)?Ju(n,t):t(n))}function Iw(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function ad(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const Dl=new ft("ENVIRONMENT_INITIALIZER"),Rw=new ft("INJECTOR",-1),sg=new ft("INJECTOR_DEF_TYPES");class ld{get(t,n=sl){if(n===sl){const r=new Error(`NullInjectorError: No provider for ${ge(t)}!`);throw r.name="NullInjectorError",r}return n}}function t1(...e){return{\u0275providers:Lw(0,e),\u0275fromNgModule:!0}}function Lw(e,...t){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return Ju(t,s=>{const a=s;fd(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&Fw(i,o),n}function Fw(e,t){for(let n=0;n<e.length;n++){const{ngModule:r,providers:i}=e[n];ag(i,o=>{t(o,r)})}}function fd(e,t,n,r){if(!(e=ke(e)))return!1;let i=null,o=de(e);const s=!o&&dn(e);if(o||s){if(s&&!s.standalone)return!1;i=e}else{const u=e.ngModule;if(o=de(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of u)fd(c,t,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;r.add(i);try{Ju(o.imports,d=>{fd(d,t,n,r)&&(c||=[],c.push(d))})}finally{}void 0!==c&&Fw(c,t)}if(!a){const c=iu(i)||(()=>new i);t({provide:i,useFactory:c,deps:An},i),t({provide:sg,useValue:i,multi:!0},i),t({provide:Dl,useValue:()=>Sn(i),multi:!0},i)}const u=o.providers;if(null!=u&&!a){const c=e;ag(u,d=>{t(d,c)})}}}return i!==e&&void 0!==e.providers}function ag(e,t){for(let n of e)rr(n)&&(n=n.\u0275providers),Array.isArray(n)?ag(n,t):t(n)}const n1=G({provide:String,useValue:G});function ug(e){return null!==e&&"object"==typeof e&&n1 in e}function au(e){return"function"==typeof e}const cg=new ft("Set Injector scope."),dd={},i1={};let lg;function hd(){return void 0===lg&&(lg=new ld),lg}class Js{}class nc extends Js{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,dg(t,s=>this.processProvider(s)),this.records.set(Rw,rc(void 0,this)),i.has("environment")&&this.records.set(Js,rc(void 0,this));const o=this.records.get(cg);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(sg,An,Pe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=Ea(this),r=dt(void 0);try{return t()}finally{Ea(n),dt(r)}}get(t,n=sl,r=Pe.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(Ri))return t[Ri](this);r=zf(r);const o=Ea(this),s=dt(void 0);try{if(!(r&Pe.SkipSelf)){let u=this.records.get(t);if(void 0===u){const c=function c1(e){return"function"==typeof e||"object"==typeof e&&e instanceof ft}(t)&&eu(t);u=c&&this.injectableDefInScope(c)?rc(fg(t),dd):null,this.records.set(t,u)}if(null!=u)return this.hydrate(t,u)}return(r&Pe.Self?hd():this.parent).get(t,n=r&Pe.Optional&&n===sl?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[$f]=a[$f]||[]).unshift(ge(t)),o)throw a;return function TA(e,t,n,r){const i=e[$f];throw t[T0]&&i.unshift(t[T0]),e.message=function xA(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=ge(t);if(Array.isArray(t))i=t.map(ge).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):ge(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(bA,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[$f]=null,e}(a,t,"R3InjectorError",this.source)}throw a}finally{dt(s),Ea(o)}}resolveInjectorInitializers(){const t=Ea(this),n=dt(void 0);try{const i=this.get(Dl,An,Pe.Self);for(const o of i)o()}finally{Ea(t),dt(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(ge(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ae(205,!1)}processProvider(t){let n=au(t=ke(t))?t:ke(t&&t.provide);const r=function s1(e){return ug(e)?rc(void 0,e.useValue):rc(function Hw(e,t,n){let r;if(au(e)){const i=ke(e);return iu(i)||fg(i)}if(ug(e))r=()=>ke(e.useValue);else if(function Bw(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Sp(e.deps||[]));else if(function Vw(e){return!(!e||!e.useExisting)}(e))r=()=>Sn(ke(e.useExisting));else{const i=ke(e&&(e.useClass||e.provide));if(!function a1(e){return!!e.deps}(e))return iu(i)||fg(i);r=()=>new i(...Sp(e.deps))}return r}(e),dd)}(t);if(au(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=rc(void 0,dd,!0),i.factory=()=>Sp(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===dd&&(n.value=i1,n.value=n.factory()),"object"==typeof n.value&&n.value&&function u1(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=ke(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function fg(e){const t=eu(e),n=null!==t?t.factory:iu(e);if(null!==n)return n;if(e instanceof ft)throw new Ae(204,!1);if(e instanceof Function)return function o1(e){const t=e.length;if(t>0)throw function bl(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new Ae(204,!1);const n=function ue(e){return e&&(e[_e]||e[Qe])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Ae(204,!1)}function rc(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function dg(e,t){for(const n of e)Array.isArray(n)?dg(n,t):n&&rr(n)?dg(n.\u0275providers,t):t(n)}function pd(e){if(!Ot()&&!function DA(){return Lu}())throw new Ae(-203,!1)}function zw(e,t=null,n=null,r){const i=function Gw(e,t=null,n=null,r,i=new Set){const o=[n||An,t1(e)];return r=r||("object"==typeof e?void 0:ge(e)),new nc(o,t||hd(),r||null,i)}(e,t,n,r);return i.resolveInjectorInitializers(),i}let pg,Io=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=sl;static#t=this.NULL=new ld;static create(n,r){if(Array.isArray(n))return zw({name:""},r,n,"");{const i=n.name??"";return zw({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=En({token:e,providedIn:"any",factory:()=>Sn(Rw)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();const gg=new ft("AppId",{providedIn:"root",factory:()=>y1}),y1="ng",Ww=new ft("Platform Initializer"),ic=new ft("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Zw=new ft("CSP nonce",{providedIn:"root",factory:()=>function Ca(){if(void 0!==pg)return pg;if(typeof document<"u")return document;throw new Ae(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function wd(e){return 128==(128&e.flags)}var Sa=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Sa||{});const bg=new Map;let P1=0;const Dg="__ngContext__";function Vi(e,t){Di(t)?(e[Dg]=t[fl],function O1(e){bg.set(e[fl],e)}(t)):e[Dg]=t}let _g;function Cg(e,t){return _g(e,t)}function Sl(e){const t=e[pr];return fi(t)?t[pr]:t}function db(e){return pb(e[cl])}function hb(e){return pb(e[fs])}function pb(e){for(;null!==e&&!fi(e);)e=e[fs];return e}function sc(e,t,n,r,i){if(null!=r){let o,s=!1;fi(r)?o=r:Di(r)&&(s=!0,r=r[Ir]);const a=ir(r);0===e&&null!==n?null==i?yb(t,n,a):cu(t,n,a,i||null,!0):1===e&&null!==n?cu(t,n,a,i||null,!0):2===e?function xd(e,t,n){const r=Cd(e,t);r&&function K1(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function tP(e,t,n,r,i){const o=n[As];o!==ir(n)&&sc(t,e,r,o,i);for(let a=Rr;a<n.length;a++){const u=n[a];Ml(u[Be],u,e,t,r,o)}}(t,e,o,n,i)}}function Dd(e,t,n){return e.createElement(t,n)}function mb(e,t){const n=e[ju],r=n.indexOf(t);n.splice(r,1)}function Il(e,t){if(e.length<=Rr)return;const n=Rr+t,r=e[n];if(r){const i=r[ll];null!==i&&i!==e&&mb(i,r),t>0&&(e[n-1][fs]=r[fs]);const o=ad(e,Rr+t);!function z1(e,t){Ml(e,t,t[Wt],2,null,null),t[Ir]=null,t[Li]=null}(r[Be],r);const s=o[Is];null!==s&&s.detachView(o[Be]),r[pr]=null,r[fs]=null,r[At]&=-129}return r}function _d(e,t){if(!(256&t[At])){const n=t[Wt];t[nu]&&bo(t[nu]),n.destroyNode&&Ml(e,t,n,3,null,null),function W1(e){let t=e[cl];if(!t)return xg(e[Be],e);for(;t;){let n=null;if(Di(t))n=t[cl];else{const r=t[Rr];r&&(n=r)}if(!n){for(;t&&!t[fs]&&t!==e;)Di(t)&&xg(t[Be],t),t=t[pr];null===t&&(t=e),Di(t)&&xg(t[Be],t),n=t&&t[fs]}t=n}}(t)}}function xg(e,t){if(!(256&t[At])){t[At]&=-129,t[At]|=256,function Q1(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof ml)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];Ms(4,a,u);try{u.call(a)}finally{Ms(5,a,u)}}else{Ms(4,i,o);try{o.call(i)}finally{Ms(5,i,o)}}}}}(e,t),function X1(e,t){const n=e.cleanup,r=t[Fu];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(t[Fu]=null);const i=t[Da];if(null!==i){t[Da]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(e,t),1===t[Be].type&&t[Wt].destroy();const n=t[ll];if(null!==n&&fi(t[pr])){n!==t[pr]&&mb(n,t);const r=t[Is];null!==r&&r.detachView(e)}!function R1(e){bg.delete(e[fl])}(t)}}function Sg(e,t,n){return function vb(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[Ir];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=e.data[r.directiveStart+i];if(o===cs.None||o===cs.Emulated)return null}return Xi(r,n)}}(e,t.parent,n)}function cu(e,t,n,r,i){e.insertBefore(t,n,r,i)}function yb(e,t,n){e.appendChild(t,n)}function wb(e,t,n,r,i){null!==r?cu(e,t,n,r,i):yb(e,t,n)}function Cd(e,t){return e.parentNode(t)}let Ig,Db=function Eb(e,t,n){return 40&e.type?Xi(e,n):null};function Td(e,t,n,r){const i=Sg(e,r,t),o=t[Wt],a=function bb(e,t,n){return Db(e,t,n)}(r.parent||t[Li],r,t);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)wb(o,i,n[u],a,!1);else wb(o,i,n,a,!1);void 0!==Ig&&Ig(o,r,t,n,i)}function Al(e,t){if(null!==t){const n=t.type;if(3&n)return Xi(t,e);if(4&n)return Ag(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return Al(e,r);{const i=e[t.index];return fi(i)?Ag(-1,i):ir(i)}}if(32&n)return Cg(t,e)()||ir(e[t.index]);{const r=Cb(e,t);return null!==r?Array.isArray(r)?r[0]:Al(Sl(e[Dr]),r):Al(e,t.next)}}return null}function Cb(e,t){return null!==t?e[Dr][Li].projection[t.projection]:null}function Ag(e,t){const n=Rr+e+1;if(n<t.length){const r=t[n],i=r[Be].firstChild;if(null!==i)return Al(r,i)}return t[As]}function Mg(e,t,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===t&&(a&&Vi(ir(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)Mg(e,t,n.child,r,i,o,!1),sc(t,e,i,a,o);else if(32&u){const c=Cg(n,r);let d;for(;d=c();)sc(t,e,i,d,o);sc(t,e,i,a,o)}else 16&u?xb(e,t,r,n,i,o):sc(t,e,i,a,o);n=s?n.projectionNext:n.next}}function Ml(e,t,n,r,i,o){Mg(n,r,e.firstChild,t,i,o,!1)}function xb(e,t,n,r,i,o){const s=n[Dr],u=s[Li].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)sc(t,e,i,u[c],o);else{let c=u;const d=s[pr];wd(r)&&(c.flags|=128),Mg(e,t,c,d,i,o,!0)}}function Sb(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Ib(e,t,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&Ip(e,t,r),null!==i&&Sb(e,t,i),null!==o&&function rP(e,t,n){e.setAttribute(t,"style",n)}(e,t,o)}let jb=(e,t,n)=>null;function zg(e,t,n=!1){return jb(e,t,n)}class VP{}class zb{}class HP{resolveComponentFactory(t){throw function BP(e){const t=Error(`No component factory found for ${ge(e)}.`);return t.ngComponent=e,t}(t)}}let fc=(()=>{class e{static#e=this.NULL=new HP}return e})();function jP(){return dc(Yn(),Ce())}function dc(e,t){return new hc(Xi(e,t))}let hc=(()=>{class e{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=jP}return e})();function UP(e){return e instanceof hc?e.nativeElement:e}class qb{}let zP=(()=>{class e{static#e=this.\u0275prov=En({token:e,providedIn:"root",factory:()=>null})}return e})();class kd{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const GP=new kd("17.0.5"),Wg={};function qP(e,t){const n=function Es(e){const t=Object.create(Ai);t.value=e;const n=()=>(bt(t),t.value);return n[Dt]=t,n}(e),r=n[Dt];return t?.equal&&(r.equal=t.equal),n.set=i=>si(r,i),n.update=i=>function Hr(e,t){Wn()||Ii(),si(e,t(e.value))}(r,i),n.asReadonly=WP.bind(n),n}function WP(){const e=this[Dt];if(void 0===e.readonlyFn){const t=()=>this();t[Dt]=e,e.readonlyFn=t}return e.readonlyFn}function Ld(e){const t=_n(null);try{return e()}finally{_n(t)}}function Fl(e,t,n,r,i=!1){for(;null!==n;){const o=t[n.index];null!==o&&r.push(ir(o)),fi(o)&&eE(o,r);const s=n.type;if(8&s)Fl(e,t,n.child,r);else if(32&s){const a=Cg(n,t);let u;for(;u=a();)r.push(u)}else if(16&s){const a=Cb(t,n);if(Array.isArray(a))r.push(...a);else{const u=Sl(t[Dr]);Fl(u[Be],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function eE(e,t){for(let n=Rr;n<e.length;n++){const r=e[n],i=r[Be].firstChild;null!==i&&Fl(r[Be],r,i,t)}e[As]!==e[Ir]&&t.push(e[As])}let tE=[];const sN={...ri,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Qf(e.lView)},consumerOnSignalRead(){this.lView[nu]=this}};function Yg(e){return e.ngOriginalError}class ta{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Yg(t);for(;n&&Yg(n);)n=Yg(n);return n||null}}const iE=new ft("",{providedIn:"root",factory:()=>!1}),Xt={};function hn(e,t=Pe.Default){const n=Ce();return null===n?Sn(e,t):Dw(Yn(),n,ke(e),t)}function Hd(e,t,n,r,i,o,s,a,u,c,d){const f=t.blueprint.slice();return f[Ir]=i,f[At]=140|r,(null!==c||e&&2048&e[At])&&(f[At]|=2048),Q0(f),f[pr]=f[Bu]=e,f[er]=n,f[Vu]=s||e&&e[Vu],f[Wt]=a||e&&e[Wt],f[Yi]=u||e&&e[Yi]||null,f[Li]=o,f[fl]=function N1(){return P1++}(),f[Ss]=d,f[j0]=c,f[Dr]=2==t.type?e[Dr]:f,f}function pc(e,t,n,r,i){let o=e.data[t];if(null===o)o=function Xg(e,t,n,r,i){const o=rw(),s=Vp(),u=e.data[t]=function EN(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return function zu(){return null!==Ht.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(e,t,n,r,i),function lM(){return Ht.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function gl(){const e=Ht.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Ns(o,!0),o}function Vl(e,t,n,r){if(0===n)return-1;const i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function cE(e,t,n,r,i){const o=function Fi(){return Ht.lFrame.selectedIndex}(),s=2&r;try{ou(-1),s&&t.length>Zt&&function uE(e,t,n,r){if(!r)if(3==(3&t[At])){const o=e.preOrderCheckHooks;null!==o&&td(t,o,n)}else{const o=e.preOrderHooks;null!==o&&nd(t,o,0,n)}ou(n)}(e,t,Zt,!1),Ms(s?2:0,i),n(r,i)}finally{ou(o),Ms(s?3:1,i)}}function Qg(e,t,n){if(Mp(t)){const r=_n(null);try{const o=t.directiveEnd;for(let s=t.directiveStart;s<o;s++){const a=e.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{_n(r)}}}function lE(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=em(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function em(e,t,n,r,i,o,s,a,u,c,d){const f=Zt+r,p=f+i,m=function gN(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Xt);return n}(f,p),b="function"==typeof c?c():c;return m[Be]={type:e,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:t,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:d}}let fE=e=>null;function dE(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const o=e[i];null===r?hE(n,t,i,o):r.hasOwnProperty(i)&&hE(n,t,r[i],o)}return n}function hE(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function pE(e,t,n,r,i,o){for(let c=0;c<r.length;c++)Xp(id(n,t),e,r[c].type);!function ON(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let c=0;c<r.length;c++){const d=r[c];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,u=Vl(e,t,r.length,null);for(let c=0;c<r.length;c++){const d=r[c];n.mergedAttrs=ul(n.mergedAttrs,d.hostAttrs),RN(e,n,t,u,d),NN(u,d,i),null!==d.contentQueries&&(n.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=64);const f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function DN(e,t,n){const i=t.directiveEnd,o=e.data,s=t.attrs,a=[];let u=null,c=null;for(let d=t.directiveStart;d<i;d++){const f=o[d],p=n?n.get(f):null,b=p?p.outputs:null;u=dE(f.inputs,d,u,p?p.inputs:null),c=dE(f.outputs,d,c,b);const D=null===u||null===s||N0(t)?null:FN(u,d,s);a.push(D)}null!==u&&(u.hasOwnProperty("class")&&(t.flags|=8),u.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=u,t.outputs=c}(e,n,o)}function gE(e,t,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function dM(){return Ht.lFrame.currentDirectiveIndex}();try{ou(o);for(let a=r;a<i;a++){const u=e.data[a],c=t[a];Hp(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&AN(u,c)}}finally{ou(-1),Hp(s)}}function AN(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function nm(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function NN(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;ds(t)&&(n[""]=e)}}function RN(e,t,n,r,i){e.data[r]=i;const o=i.factory||(i.factory=iu(i.type)),s=new ml(o,ds(i),hn);e.blueprint[r]=s,n[r]=s,function xN(e,t,n,r,i){const o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const a=~t.index;(function SN(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(e,t,r,Vl(e,n,i.hostVars,Xt),i)}function LN(e,t,n,r,i,o){const s=o[t];if(null!==s)for(let a=0;a<s.length;)mE(r,n,s[a++],s[a++],s[a++])}function mE(e,t,n,r,i){const o=_n(null);try{const s=e.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(t,i)),null!==e.setInput?e.setInput(t,i,n,r):t[r]=i}finally{_n(o)}}function FN(e,t,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(e.hasOwnProperty(o)){null===r&&(r=[]);const s=e[o];for(let a=0;a<s.length;a+=2)if(s[a]===t){r.push(o,s[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function yE(e,t){const n=e.contentQueries;if(null!==n){const r=_n(null);try{for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const a=e.data[s];Up(n[i]),a.contentQueries(2,t[s],s)}}}finally{_n(r)}}}function jd(e,t){return e[cl]?e[H0][fs]=t:e[cl]=t,e[H0]=t,t}function im(e,t,n){Up(0);const r=_n(null);try{t(e,n)}finally{_n(r)}}function om(e,t,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];mE(e.data[s],t[s],r,a,i)}}function sm(e,t=!0){const n=e[Vu],r=n.rendererFactory,i=n.afterRenderEventManager;r.begin?.(),i?.begin();try{const s=e[Be];DE(s,e,s.template,e[er]),function BN(e){let t=0;for(;J0(e);){if(100===t)throw new Ae(103,!1);t++,TE(e,1)}}(e)}catch(s){throw t&&function Ud(e,t){const n=e[Yi],r=n?n.get(ta,null):null;r&&r.handleError(t)}(e,s),s}finally{r.end?.(),n.inlineEffectRunner?.flush(),i?.end()}}function DE(e,t,n,r){const i=t[At];if(256==(256&i))return;t[Vu].inlineEffectRunner?.flush(),$p(t);let s=null,a=null;(function HN(e){return 2!==e.type})(e)&&(a=function rN(e){return e[nu]??function iN(e){const t=tE.pop()??Object.create(sN);return t.lView=e,t}(e)}(t),s=y(a));try{Q0(t),function ow(e){return Ht.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&cE(e,t,n,2,r);const u=3==(3&i);if(u){const f=e.preOrderCheckHooks;null!==f&&td(t,f,null)}else{const f=e.preOrderHooks;null!==f&&nd(t,f,0,null),Gp(t,0)}if(function jN(e){for(let t=db(e);null!==t;t=hb(t)){if(!(t[At]&Uu.HasTransplantedViews))continue;const n=t[ju];for(let r=0;r<n.length;r++){KA(n[r])}}}(t),_E(t,0),null!==e.contentQueries&&yE(e,t),u){const f=e.contentCheckHooks;null!==f&&td(t,f)}else{const f=e.contentHooks;null!==f&&nd(t,f,1),Gp(t,1)}!function pN(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)ou(~i);else{const o=i,s=n[++r],a=n[++r];fM(s,o),a(2,t[o])}}}finally{ou(-1)}}(e,t);const c=e.components;null!==c&&xE(t,c,0);const d=e.viewQuery;if(null!==d&&im(2,d,r),u){const f=e.viewCheckHooks;null!==f&&td(t,f)}else{const f=e.viewHooks;null!==f&&nd(t,f,2),Gp(t,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[Wf]){for(const f of t[Wf])f();t[Wf]=null}t[At]&=-73}catch(u){throw Qf(t),u}finally{null!==a&&(oi(a,s),function oN(e){e.lView[nu]!==e&&(e.lView=null,tE.push(e))}(a)),zp()}}function _E(e,t){for(let n=db(e);null!==n;n=hb(n)){n[At]&=~Uu.HasChildViewsToRefresh;for(let r=Rr;r<n.length;r++)CE(n[r],t)}}function UN(e,t,n){CE(xo(t,e),n)}function CE(e,t){Lp(e)&&TE(e,t)}function TE(e,t){const r=e[Be],i=e[At],o=e[nu];let s=!!(0===t&&16&i);if(s||=!!(64&i&&0===t),s||=!!(1024&i),s||=!(!o?.dirty||!Jt(o)),o&&(o.dirty=!1),e[At]&=-9217,s)DE(r,e,r.template,e[er]);else if(8192&i){_E(e,1);const a=r.components;null!==a&&xE(e,a,1)}}function xE(e,t,n){for(let r=0;r<t.length;r++)UN(e,t[r],n)}function Bl(e){for(;e;){e[At]|=64;const t=Sl(e);if(Pp(e)&&!t)return e;e=t}return null}class Hl{get rootNodes(){const t=this._lView,n=t[Be];return Fl(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[er]}set context(t){this._lView[er]=t}get destroyed(){return 256==(256&this._lView[At])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[pr];if(fi(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(Il(t,r),ad(n,r))}this._attachedToViewContainer=!1}_d(this._lView[Be],this._lView)}onDestroy(t){Kf(this._lView,t)}markForCheck(){Bl(this._cdRefInjectingView||this._lView)}detach(){this._lView[At]&=-129}reattach(){ew(this._lView),this._lView[At]|=128}detectChanges(){sm(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function q1(e,t){Ml(e,t,t[Wt],2,null,null)}(this._lView[Be],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Ae(902,!1);this._appRef=t}}let am=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=$N}return e})();function $N(e){return function zN(e,t,n){if(ru(e)&&!n){const r=xo(e.index,t);return new Hl(r,r)}return 47&e.type?new Hl(t[Dr],t):null}(Yn(),Ce(),16==(16&e))}let jl=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=ZN;static#t=this.__NG_ENV_ID__=n=>n}return e})();class WN extends jl{constructor(t){super(),this._lView=t}onDestroy(t){return Kf(this._lView,t),()=>function Fp(e,t){if(null===e[Da])return;const n=e[Da].indexOf(t);-1!==n&&e[Da].splice(n,1)}(this._lView,t)}}function ZN(){return new WN(Ce())}const YN=new ft("",{providedIn:"root",factory:()=>kn(XN)});let XN=(()=>{class e{static#e=this.\u0275prov=En({token:e,providedIn:"root",factory:()=>new KN})}return e})(),QN=(()=>{class e{constructor(){this.queuedEffectCount=0,this.queues=new Map}scheduleEffect(n){const r=n.creationZone;this.queues.has(r)||this.queues.set(r,new Set);const i=this.queues.get(r);i.has(n)||(this.queuedEffectCount++,i.add(n))}flush(){for(;this.queuedEffectCount>0;)for(const[n,r]of this.queues)null===n?this.flushQueue(r):n.run(()=>this.flushQueue(r))}flushQueue(n){for(const r of n)n.delete(r),this.queuedEffectCount--,r.run()}static#e=this.\u0275prov=En({token:e,providedIn:"root",factory:()=>new e})}return e})();class KN{constructor(){this.hasQueuedFlush=!1,this.delegate=new QN,this.flushTask=()=>{this.delegate.flush(),this.hasQueuedFlush=!1}}scheduleEffect(t){this.delegate.scheduleEffect(t),this.hasQueuedFlush||(queueMicrotask(this.flushTask),this.hasQueuedFlush=!0)}}class JN{constructor(t,n,r,i,o,s){this.scheduler=t,this.effectFn=n,this.creationZone=r,this.errorHandler=o,this.watcher=function Gi(e,t,n){const r=Object.create(N);n&&(r.consumerAllowSignalWrites=!0),r.fn=e,r.schedule=t;const i=u=>{r.cleanupFn=u};return r.ref={notify:()=>ii(r),run:()=>{if(null===r.fn)return;if(function et(){return Gr}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Jt(r))return;r.hasRun=!0;const u=y(r);try{r.cleanupFn(),r.cleanupFn=T,r.fn(i)}finally{oi(r,u)}},cleanup:()=>r.cleanupFn(),destroy:()=>function s(u){(function o(u){return null===u.fn&&null===u.schedule})(u)||(bo(u),u.cleanupFn(),u.fn=null,u.schedule=null,u.cleanupFn=T)}(r),[Dt]:r},r.ref}(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(t){try{this.effectFn(t)}catch(n){this.errorHandler?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}const IE=new Set;function um(e){return t=>{setTimeout(e,void 0,t)}}const Ls=class eO extends hr{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&"object"==typeof t){const u=t;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=um(o),i&&(i=um(i)),s&&(s=um(s)));const a=super.subscribe({next:i,error:o,complete:s});return t instanceof z&&t.add(a),a}};function AE(...e){}class lr{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ls(!1),this.onMicrotaskEmpty=new Ls(!1),this.onStable=new Ls(!1),this.onError=new Ls(!1),typeof Zone>"u")throw new Ae(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function tO(){const e="function"==typeof Ct.requestAnimationFrame;let t=Ct[e?"requestAnimationFrame":"setTimeout"],n=Ct[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function iO(e){const t=()=>{!function rO(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ct,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,lm(e),e.isCheckStableRunning=!0,cm(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),lm(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(function sO(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,o,s,a);try{return ME(e),n.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),PE(e)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return ME(e),n.invoke(i,o,s,a,u)}finally{e.shouldCoalesceRunChangeDetection&&t(),PE(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,lm(e),cm(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!lr.isInAngularZone())throw new Ae(909,!1)}static assertNotInAngularZone(){if(lr.isInAngularZone())throw new Ae(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,nO,AE,AE);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const nO={};function cm(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function lm(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function ME(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function PE(e){e._nesting--,cm(e)}const NE=new ft("",{providedIn:"root",factory:OE});function OE(){const e=kn(lr);let t=!0;return h(new fn(i=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{i.next(t),i.complete()})}),new fn(i=>{let o;e.runOutsideAngular(()=>{o=e.onStable.subscribe(()=>{lr.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,i.next(!0))})})});const s=e.onUnstable.subscribe(()=>{lr.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(_()))}let $d=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth){for(const n of this.internalCallbacks)n();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=En({token:e,providedIn:"root",factory:()=>new e})}return e})();function cO(e,t){const n=xo(t,e),r=n[Be];!function lO(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const i=n[Ir];null!==i&&null===n[Ss]&&(n[Ss]=zg(i,n[Yi])),fm(r,n,n[er])}function fm(e,t,n){$p(t);try{const r=e.viewQuery;null!==r&&im(1,r,n);const i=e.template;null!==i&&cE(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&yE(e,t),e.staticViewQueries&&im(2,e.viewQuery,n);const o=e.components;null!==o&&function fO(e,t){for(let n=0;n<t.length;n++)cO(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[At]&=-5,zp()}}function zd(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?i=ae(i,a):2==o&&(r=ae(r,a+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}class VE extends fc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=dn(t);return new Ul(n,this.ngModule)}}function BE(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class hO{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=zf(r);const i=this.injector.get(t,Wg,r);return i!==Wg||n===Wg?i:this.parentInjector.get(t,n,r)}}class Ul extends zb{get inputs(){const t=this.componentDef,n=t.inputTransforms,r=BE(t.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return BE(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function LA(e){return e.map(kA).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let o=(i=i||this.ngModule)instanceof Js?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new hO(t,o):t,a=s.get(qb,null);if(null===a)throw new Ae(407,!1);const d={rendererFactory:a,sanitizer:s.get(zP,null),inlineEffectRunner:null,afterRenderEventManager:s.get($d,null)},f=a.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",m=r?function mN(e,t,n,r){const o=r.get(iE,!1)||n===cs.ShadowDom,s=e.selectRootElement(t,o);return function vN(e){fE(e)}(s),s}(f,r,this.componentDef.encapsulation,s):Dd(f,p,function dO(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(p)),x=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let P=null;null!==m&&(P=zg(m,s,!0));const O=em(0,null,null,1,0,null,null,null,null,null,null),Y=Hd(null,O,null,x,null,null,d,f,s,null,P);let ee,ie;$p(Y);try{const be=this.componentDef;let w,S=null;be.findHostDirectiveDefs?(w=[],S=new Map,be.findHostDirectiveDefs(be,w,S),w.push(be)):w=[be];const M=function gO(e,t){const n=e[Be],r=Zt;return e[r]=t,pc(n,r,2,"#host",null)}(Y,m),R=function mO(e,t,n,r,i,o,s){const a=i[Be];!function vO(e,t,n,r){for(const i of e)t.mergedAttrs=ul(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(zd(t,t.mergedAttrs,!0),null!==n&&Ib(r,n,t))}(r,e,t,s);let u=null;null!==t&&(u=zg(t,i[Yi]));const c=o.rendererFactory.createRenderer(t,n);let d=16;n.signals?d=4096:n.onPush&&(d=64);const f=Hd(i,lE(n),null,d,i[e.index],e,o,c,null,null,u);return a.firstCreatePass&&nm(a,e,r.length-1),jd(i,f),i[e.index]=f}(M,m,be,w,Y,d,f);ie=function pl(e,t){return e.data[t]}(O,Zt),m&&function wO(e,t,n,r){if(r)Ip(e,n,["ng-version",GP.full]);else{const{attrs:i,classes:o}=function FA(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!ls(i))break;i=o}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&Ip(e,n,i),o&&o.length>0&&Sb(e,n,o.join(" "))}}(f,be,m,r),void 0!==n&&function bO(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(ie,this.ngContentSelectors,n),ee=function yO(e,t,n,r,i,o){const s=Yn(),a=i[Be],u=Xi(s,i);pE(a,i,s,n,null,r);for(let d=0;d<n.length;d++)Vi(su(i,a,s.directiveStart+d,s),i);gE(a,i,s),u&&Vi(u,i);const c=su(i,a,s.directiveStart+s.componentOffset,s);if(e[er]=i[er]=c,null!==o)for(const d of o)d(c,t);return Qg(a,s,e),c}(R,be,w,S,Y,[EO]),fm(O,Y,null)}finally{zp()}return new pO(this.componentType,ee,dc(ie,Y),Y,ie)}}class pO extends VP{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Hl(i,void 0,!1),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const o=this._rootLView;om(o[Be],o,i,t,n),this.previousInputValues.set(t,n),Bl(xo(this._tNode.index,o))}}get injector(){return new Kr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function EO(){const e=Yn();ed(Ce()[Be],e)}function gm(e,t,n,r,i){const s=i?"class":"style";om(e,n,t.inputs[s],s,r)}function xc(e,t){return!t||wd(e)}function Yl(e,t,n,r=!0){const i=t[Be];if(function Z1(e,t,n,r){const i=Rr+r,o=n.length;r>0&&(n[i-1][fs]=t),r<o-Rr?(t[fs]=n[i],Iw(n,Rr+r,t)):(n.push(t),t[fs]=null),t[pr]=n;const s=t[ll];null!==s&&n!==s&&function Y1(e,t){const n=e[ju];t[Dr]!==t[pr][pr][Dr]&&(e[At]|=Uu.HasTransplantedViews),null===n?e[ju]=[t]:n.push(t)}(s,t);const a=t[Is];null!==a&&a.insertView(e),ew(t),t[At]|=128}(i,t,e,n),r){const o=Ag(n,e),s=t[Wt],a=Cd(s,e[As]);null!==a&&function G1(e,t,n,r,i,o){r[Ir]=i,r[Li]=t,Ml(e,r,n,1,i,o)}(i,e[Li],s,t,a,o)}}let Hs=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=OR}return e})();function OR(){return AD(Yn(),Ce())}const RR=Hs,SD=class extends RR{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return dc(this._hostTNode,this._hostLView)}get injector(){return new Kr(this._hostTNode,this._hostLView)}get parentInjector(){const t=od(this._hostTNode,this._hostLView);if(Wp(t)){const n=yl(t,this._hostLView),r=vl(t);return new Kr(n[Be].data[r+8],n)}return new Kr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=ID(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-Rr}createEmbeddedView(t,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=t.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,xc(this._hostTNode,null)),a}createComponent(t,n,r,i,o){const s=t&&!function wl(e){return"function"==typeof e}(t);let a;if(s)a=n;else{const b=n||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}const u=s?t:new Ul(dn(t)),c=r||this.parentInjector;if(!o&&null==u.ngModule){const D=(s?c:this.parentInjector).get(Js,null);D&&(o=D)}dn(u.componentType??{});const m=u.create(c,i,null,o);return this.insertImpl(m.hostView,a,xc(this._hostTNode,null)),m}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){const i=t._lView;if(function QA(e){return fi(e[pr])}(i)){const a=this.indexOf(t);if(-1!==a)this.detach(a);else{const u=i[pr],c=new SD(u,u[Li],u[pr]);c.detach(c.indexOf(t))}}const o=this._adjustIndex(n),s=this._lContainer;return Yl(s,i,o,r),t.attachToViewContainerRef(),Iw(Tm(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=ID(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Il(this._lContainer,n);r&&(ad(Tm(this._lContainer),n),_d(r[Be],r))}detach(t){const n=this._adjustIndex(t,-1),r=Il(this._lContainer,n);return r&&null!=ad(Tm(this._lContainer),n)?new Hl(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function ID(e){return e[8]}function Tm(e){return e[8]||(e[8]=[])}function AD(e,t){let n;const r=t[e.index];return fi(r)?n=r:(n=function vE(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}(r,t,null,e),t[e.index]=n,jd(t,n)),MD(n,t,e,r),new SD(n,e,t)}let MD=function ND(e,t,n,r){if(e[As])return;let i;i=8&n.type?ir(r):function kR(e,t){const n=e[Wt],r=n.createComment(""),i=Xi(t,e);return cu(n,Cd(n,i),r,function J1(e,t){return e.nextSibling(t)}(n,i),!1),r}(t,n),e[As]=i};function Fm(e,t,n,r){const i=Ce(),o=Dn(),s=Zt+e,a=i[Wt],u=o.firstCreatePass?function Ik(e,t,n,r,i,o){const s=t.consts,u=pc(t,e,2,r,Ps(s,i));return function tm(e,t,n,r){if(nw()){const i=null===r?null:{"":-1},o=function MN(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(O0(t,s.selectors,!1))if(r||(r=[]),ds(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),nm(e,t,a.length)}else r.unshift(s),nm(e,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(e,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&pE(e,t,n,s,i,a),i&&function PN(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const o=n[t[i+1]];if(null==o)throw new Ae(-301,!1);r.push(t[i],o)}}}(n,r,i)}n.mergedAttrs=ul(n.mergedAttrs,n.attrs)}(t,n,u,Ps(s,o)),null!==u.attrs&&zd(u,u.attrs,!1),null!==u.mergedAttrs&&zd(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(s,o,i,t,n,r):o.data[s],c=r_(o,i,u,a,t,e);i[s]=c;const d=function Yf(e){return 1==(1&e.flags)}(u);return Ns(u,!0),Ib(a,c,u),32!=(32&u.flags)&&function Jf(){return pw}()&&Td(o,i,c,u),0===function JA(){return Ht.lFrame.elementDepthCount}()&&Vi(c,i),function eM(){Ht.lFrame.elementDepthCount++}(),d&&(function Kg(e,t,n){nw()&&(function IN(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;ru(n)&&function kN(e,t,n){const r=Xi(t,e),i=lE(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=jd(e,Hd(e,i,null,s,r,t,null,e[Vu].rendererFactory.createRenderer(r,n),null,null,null));e[t.index]=a}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||id(n,t),Vi(r,t);const s=n.initialInputs;for(let a=i;a<o;a++){const u=e.data[a],c=su(t,e,a,n);Vi(c,t),null!==s&&LN(0,a-i,c,u,0,s),ds(u)&&(xo(n.index,t)[er]=su(t,e,a,n))}}(e,t,n,Xi(n,t)),64==(64&n.flags)&&gE(e,t,n))}(o,i,u),Qg(o,u,i)),null!==r&&function Jg(e,t,n=Xi){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(t,e):e[s];e[i++]=a}}}(i,u),Fm}function Vm(){let e=Yn();Vp()?function Bp(){Ht.lFrame.isParent=!1}():(e=e.parent,Ns(e,!1));const t=e;(function nM(e){return Ht.skipHydrationRootTNode===e})(t)&&function sM(){Ht.skipHydrationRootTNode=null}(),function tM(){Ht.lFrame.elementDepthCount--}();const n=Dn();return n.firstCreatePass&&(ed(n,e),Mp(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function _M(e){return 0!=(8&e.flags)}(t)&&gm(n,t,Ce(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function CM(e){return 0!=(16&e.flags)}(t)&&gm(n,t,Ce(),t.stylesWithoutHost,!1),Vm}function Bm(e,t,n,r){return Fm(e,t,n,r),Vm(),Bm}let r_=(e,t,n,r,i,o)=>(function _a(e){pw=e}(!0),Dd(r,i,function hw(){return Ht.lFrame.currentNamespace}()));const Rc="en-US";let l_=Rc;function zm(e){return!!e&&"function"==typeof e.then}function k_(e){return!!e&&"function"==typeof e.subscribe}class mu{}class mC extends mu{constructor(t){super(),this.componentFactoryResolver=new VE(this),this.instance=null;const n=new nc([...t.providers,{provide:mu,useValue:this},{provide:fc,useValue:this.componentFactoryResolver}],t.parent||hd(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}let oF=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=Lw(0,n.type),i=r.length>0?function iF(e,t,n=null){return new mC({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=En({token:e,providedIn:"environment",factory:()=>new e(Sn(Js))})}return e})();function vC(e){(function lu(e){IE.has(e)||(IE.add(e),performance?.mark?.("mark_use_counter",{detail:{feature:e}}))})("NgStandalone"),e.getStandaloneInjector=t=>t.get(oF).getOrCreateStandaloneInjector(e)}function OF(){return this._results[Symbol.iterator]()}class ev{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Ls)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=ev.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=OF)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;const r=function po(e){return e.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function VM(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ra=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=LF}return e})();const RF=ra,kF=class extends RF{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){const i=function Zl(e,t,n,r){const i=t.tView,a=Hd(e,i,n,4096&e[At]?4096:16,null,t,null,null,null,r?.injector??null,r?.dehydratedView??null);a[ll]=e[t.index];const c=e[Is];return null!==c&&(a[Is]=c.createEmbeddedView(i)),fm(i,a,n),a}(this._declarationLView,this._declarationTContainer,t,{injector:n,dehydratedView:r});return new Hl(i)}};function LF(){return lh(Yn(),Ce())}function lh(e,t){return 4&e.type?new kF(t,e,dc(e,t)):null}class tv{constructor(t){this.queryList=t,this.matches=null}clone(){return new tv(this.queryList)}setDirty(){this.queryList.setDirty()}}class nv{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){const s=n.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new nv(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==RC(t,n).matches&&this.queries[n].setDirty()}}class MC{constructor(t,n,r=null){this.predicate=t,this.flags=n,this.read=r}}class rv{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new rv(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class iv{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new iv(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(t,n,FF(n,o)),this.matchTNodeWithReadOption(t,n,sd(n,t,o,!1,!1))}else r===ra?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,sd(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===hc||i===Hs||i===ra&&4&n.type)this.addMatch(n.index,-2);else{const o=sd(n,t,i,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function FF(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function BF(e,t,n,r){return-1===n?function VF(e,t){return 11&e.type?dc(e,t):4&e.type?lh(e,t):null}(t,e):-2===n?function HF(e,t,n){return n===hc?dc(t,e):n===ra?lh(t,e):n===Hs?AD(t,e):void 0}(e,t,r):su(e,e[Be],n,t)}function PC(e,t,n,r){const i=t[Is].queries[r];if(null===i.matches){const o=e.data,s=n.matches,a=[];for(let u=0;u<s.length;u+=2){const c=s[u];a.push(c<0?null:BF(t,o[c],s[u+1],n.metadata.read))}i.matches=a}return i.matches}function ov(e,t,n,r){const i=e.queries.getByIndex(n),o=i.matches;if(null!==o){const s=PC(e,t,i,n);for(let a=0;a<o.length;a+=2){const u=o[a];if(u>0)r.push(s[a/2]);else{const c=o[a+1],d=t[-u];for(let f=Rr;f<d.length;f++){const p=d[f];p[ll]===p[pr]&&ov(p[Be],p,c,r)}if(null!==d[ju]){const f=d[ju];for(let p=0;p<f.length;p++){const m=f[p];ov(m[Be],m,c,r)}}}}}return r}function sv(e){const t=Ce(),n=Dn(),r=aw();Up(r+1);const i=RC(n,r);if(e.dirty&&function XA(e){return 4==(4&e[At])}(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const o=i.crossesNgTemplate?ov(n,t,r,[]):PC(n,t,i,r);e.reset(o,UP),e.notifyOnChanges()}return!0}return!1}function av(e,t,n){const r=Dn();r.firstCreatePass&&(function OC(e,t,n){null===e.queries&&(e.queries=new rv),e.queries.track(new iv(t,n))}(r,new MC(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),function NC(e,t,n){const r=new ev(4==(4&n));(function bN(e,t,n,r){const i=function wE(e){return e[Fu]||(e[Fu]=[])}(t);i.push(n),e.firstCreatePass&&function bE(e){return e.cleanup||(e.cleanup=[])}(e).push(r,i.length-1)})(e,t,r,r.destroy),null===t[Is]&&(t[Is]=new nv),t[Is].queries.push(new tv(r))}(r,Ce(),t)}function uv(){return function UF(e,t){return e[Is].queries[t].queryList}(Ce(),aw())}function RC(e,t){return e.queries.getByIndex(t)}const d2=new ft("Application Initializer");let hv=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=kn(d2,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(zm(o))n.push(o);else if(k_(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=En({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const ia=new ft("LocaleId",{providedIn:"root",factory:()=>kn(ia,Pe.Optional|Pe.SkipSelf)||function p2(){return typeof $localize<"u"&&$localize.locale||Rc}()});let b2=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new g(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=En({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const tT=new ft("");let Pa=null;const yv=new ft("PlatformDestroyListeners"),rT=new ft("appBootstrapListener");function Q2(e){try{const{rootComponent:t,appProviders:n,platformProviders:r}=e,i=function X2(e=[]){if(Pa)return Pa;const t=function sT(e=[],t){return Io.create({name:t,providers:[{provide:cg,useValue:"platform"},{provide:yv,useValue:new Set([()=>Pa=null])},...e]})}(e);return Pa=t,function iT(){!function Do(e){yr=e}(()=>{throw new Ae(600,!1)})}(),function oT(e){e.get(Ww,null)?.forEach(n=>n())}(t),t}(r),o=[nV(),...n||[]],a=new mC({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(lr);return u.run(()=>{a.resolveInjectorInitializers();const c=a.get(ta,null);let d;u.runOutsideAngular(()=>{d=u.onError.subscribe({next:m=>{c.handleError(m)}})});const f=()=>a.destroy(),p=i.get(yv);return p.add(f),a.onDestroy(()=>{d.unsubscribe(),p.delete(f)}),function cT(e,t,n){try{const r=n();return zm(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(c,u,()=>{const m=a.get(hv);return m.runInitializers(),m.donePromise.then(()=>{!function f_(e){Xr(e,"Expected localeId to be defined"),"string"==typeof e&&(l_=e.toLowerCase().replace(/_/g,"-"))}(a.get(ia,Rc)||Rc);const D=a.get(Fc);return void 0!==t&&D.bootstrap(t),D})})})}catch(t){return Promise.reject(t)}}let Fc=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=kn(dT),this.zoneIsStable=kn(NE),this.componentTypes=[],this.components=[],this.isStable=kn(b2).hasPendingTasks.pipe(A(n=>n?function v(...e){return l(e,Bo(e))}(!1):this.zoneIsStable),U(),_()),this._injector=kn(Js)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof zb;if(!this._injector.get(hv).done)throw!i&&function tu(e){const t=dn(e)||Qr(e)||Ei(e);return null!==t&&t.standalone}(n),new Ae(405,!1);let s;s=i?n:this._injector.get(fc).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function Z2(e){return e.isBoundToModule}(s)?void 0:this._injector.get(mu),c=s.create(Io.NULL,[],r||s.selector,a),d=c.location.nativeElement,f=c.injector.get(tT,null);return f?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),ph(this.components,c),f?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new Ae(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;ph(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(rT,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ph(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Ae(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=En({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ph(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const dT=new ft("",{providedIn:"root",factory:()=>kn(ta).handleError.bind(void 0)});function eV(){const e=kn(lr),t=kn(ta);return n=>e.runOutsideAngular(()=>t.handleError(n))}let tV=(()=>{class e{constructor(){this.zone=kn(lr),this.applicationRef=kn(Fc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=En({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function hT(e){return[{provide:lr,useFactory:e},{provide:Dl,multi:!0,useFactory:()=>{const t=kn(tV,{optional:!0});return()=>t.initialize()}},{provide:dT,useFactory:eV},{provide:NE,useFactory:OE}]}function nV(e){return function kw(e){return{\u0275providers:e}}([[],hT(()=>new lr(function uT(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}(e)))])}var Bi=$n(717);const df="[object Arguments]",Av="[object Array]",Dh="[object Boolean]",Mv="[object Date]",LT="[object Error]",hf="[object Map]",_h="[object Number]",Bc="[object Object]",Pv="[object RegExp]",pf="[object Set]",Ch="[object String]",Th="[object Symbol]",Nv="[object ArrayBuffer]",Ov="[object DataView]",FT="[object Float32Array]",VT="[object Float64Array]",BT="[object Int8Array]",HT="[object Int16Array]",jT="[object Int32Array]",UT="[object Uint8Array]",$T="[object Uint8ClampedArray]",zT="[object Uint16Array]",GT="[object Uint32Array]",FV={[df]:!0,[Av]:!0,[Nv]:!0,[Ov]:!0,[Dh]:!0,[Mv]:!0,[FT]:!0,[VT]:!0,[BT]:!0,[HT]:!0,[jT]:!0,[hf]:!0,[_h]:!0,[Bc]:!0,[Pv]:!0,[pf]:!0,[Ch]:!0,[Th]:!0,[UT]:!0,[$T]:!0,[zT]:!0,[GT]:!0,[LT]:!1,"[object Function]":!1,"[object WeakMap]":!1},Rv="\\ud800-\\udfff",qT="\\u2700-\\u27bf",WT="a-z\\xdf-\\xf6\\xf8-\\xff",ZT="A-Z\\xc0-\\xd6\\xd8-\\xde",YT="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",QT=`[${YT}]`,kv="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]",YV=`[${qT}]`,JT=`[${WT}]`,ex=`[^${Rv}${YT+"\\d"+qT+WT+ZT}]`,Lv="\\ud83c[\\udffb-\\udfff]",tx=`[^${Rv}]`,Fv="(?:\\ud83c[\\udde6-\\uddff]){2}",Vv="[\\ud800-\\udbff][\\udc00-\\udfff]",Hc=`[${ZT}]`,nx=`(?:${JT}|${ex})`,KV=`(?:${Hc}|${ex})`,rx="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",ix="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",ox=`(?:${kv}|${Lv})?`,sx="[\\ufe0e\\ufe0f]?",ax=sx+ox+`(?:\\u200d(?:${[tx,Fv,Vv].join("|")})${sx+ox})*`,nB=`(?:${[YV,Fv,Vv].join("|")})${ax}`,rB=RegExp([`${Hc}?${JT}+${rx}(?=${[QT,Hc,"$"].join("|")})`,`${KV}+${ix}(?=${[QT,Hc+nx,"$"].join("|")})`,`${Hc}?${nx}+${rx}`,`${Hc}+${ix}`,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",nB].join("|"),"g"),Hv="__hash_undefined__",iB=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\]$/,sB=`(?:${[`${tx}${kv}?`,kv,Fv,Vv,`[${Rv}]`].join("|")})`,ux=RegExp(`${Lv}(?=${Lv})|${sB+ax}`,"g"),aB=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,uB=/^\w*$/,cB=".".charCodeAt(0),lB=/\\(\\)?/g,fB=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),dB=/^(?:0|[1-9]\d*)$/,hB=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),gB=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,cx=e=>ux.test(e),lx=e=>cx(e)?(e=>e.match(ux)||[])(e):(e=>e.split(""))(e),yB=e=>null==e?[]:gf(e).map(t=>e[t]),gf=e=>Po(e)?fx(e):Object.keys(Object(e)),fx=(e,t)=>{const n=Array.isArray(e),r=!n&&Zo(e)&&Yo(e)===df,i=!n&&!r&&vf(e),o=n||r||i,s=e.length,a=new Array(o?s:0);let u=o?-1:s;for(;++u<s;)a[u]=`${u}`;for(const c in e)(t||hasOwnProperty.call(e,c))&&(!o||"length"!==c&&!qv(c,s))&&a.push(c);return a},xh=(e,t)=>{let{length:n}=e;for(;n--;)if(jc(e[n][0],t))return n;return-1},jc=(e,t)=>e===t||e!=e&&t!=t,Zo=e=>null!=e&&"object"==typeof e,Sh=(e,t,n)=>{if(!In(n))return!1;const r=typeof t;return!!("number"==r?Po(n)&&t>-1&&t<n.length:"string"==r&&t in n)&&jc(n[t],e)},Ih=e=>{const t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Object.prototype)},yu=(e,t,n)=>{const r=e[t];(!hasOwnProperty.call(e,t)||!jc(r,n)||void 0===n&&!(t in e))&&(e[t]=n)},mf=(e,t,n)=>{let r=-1;const i=t.length;for(;++r<i;){const o=t[r];yu(n,o,e[o])}return n},Po=e=>null!=e&&"function"!=typeof e&&"number"==typeof e.length&&e.length>-1&&e.length%1==0,Uc=e=>"symbol"==typeof e||Zo(e)&&Yo(e)===Th,jv=(e,t)=>{let n=-1;const r=e.length;for(t||(t=new Array(r));++n<r;)t[n]=e[n];return t},Yo=e=>null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e),Uv=e=>{const t=new e.constructor(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t},dx=(e,t)=>{const n=t?Uv(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},hx=e=>"function"!=typeof e.constructor||Ih(e)?{}:Object.create(Object.getPrototypeOf(e)),$v=e=>null==e?[]:(e=Object(e),Object.getOwnPropertySymbols(e).filter(n=>propertyIsEnumerable.call(e,n))),vf=e=>Zo(e)&&iB.test(Yo(e)),zv=e=>{const t=Object.keys(e);return!Array.isArray(e)&&null!=e&&t.push(...$v(Object(e))),t},px=e=>{const t=[];for(;e;)t.push(...$v(e)),e=Object.getPrototypeOf(Object(e));return t},gx=e=>{const t=[];for(const n in e)t.push(n);return Array.isArray(e)||t.push(...px(e)),t},Ah=({__data__:e},t)=>{const n=e;return BB(t)?n["string"==typeof t?"string":"hash"]:n.map},Mh=(e,t,n)=>e===t||(null==e||null==t||!Zo(e)&&!Zo(t)?e!=e&&t!=t:IB(e,t,Mh,n)),IB=(e,t,n,r)=>{let i=Array.isArray(e);const o=Array.isArray(t);let s=i?Av:Yo(e),a=o?Av:Yo(t);s=s==df?Bc:s,a=a==df?Bc:a;let u=s==Bc;const c=a==Bc,d=s==a;if(d&&!u)return r||(r=new zc),i||vf(e)?mx(e,t,!1,n,r):PB(e,t,s,n,r);const f=u&&hasOwnProperty.call(e,"__wrapped__"),p=c&&hasOwnProperty.call(t,"__wrapped__");if(f||p){const m=f?e.value():e,b=p?t.value():t;return r||(r=new zc),n(m,b,r)}return!!d&&(r||(r=new zc),((e,t,n,r)=>{const i=zv(e),o=i.length;if(o!=zv(t).length)return!1;let u,c=o;for(;c--;)if(u=i[c],!hasOwnProperty.call(t,u))return!1;const d=r.get(e),f=r.get(t);if(d&&f)return d==t&&f==e;let b,p=!0;for(r.set(e,t),r.set(t,e);++c<o;){u=i[c];const D=e[u],x=t[u];if(D!==x&&!n(D,x,r)){p=!1;break}b||(b="constructor"==u)}if(p&&!b){const D=e.constructor,x=t.constructor;D!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof D&&D instanceof D&&"function"==typeof x&&x instanceof x)&&(p=!1)}return r.delete(e),r.delete(t),p})(e,t,n,r))},mx=(e,t,n,r,i)=>{const s=e.length;if(s!=t.length)return!1;const u=i.get(e),c=i.get(t);if(u&&c)return u==t&&c==e;let d=-1,f=!0;const p=n?new Gc:void 0;for(i.set(e,t),i.set(t,e);++d<s;){let m;const b=e[d],D=t[d];if(void 0!==m){if(m)continue;f=!1;break}if(p){if(!AB(t,(x,P)=>{if(!MB(p,P)&&(b===x||r(b,x,i)))return p.push(P)})){f=!1;break}}else if(b!==D&&!r(b,D,i)){f=!1;break}}return i.delete(e),i.delete(t),f},AB=(e,t)=>{let n=-1;const r=null==e?0:e.length;for(;++n<r;)if(t(e[n],n,e))return!0;return!1},MB=(e,t)=>e.has(t),vx=(e,t,n,r)=>!(e.byteLength!=t.byteLength||!n(new Uint8Array(e),new Uint8Array(t),r)),PB=(e,t,n,r,i)=>{switch(n){case Ov:return e.byteLength==t.byteLength&&e.byteOffset==t.byteOffset&&vx(e=e.buffer,t=t.buffer,r,i);case Nv:return vx(e,t,r,i);case Dh:case Mv:case _h:return jc(+e,+t);case LT:return e.name==t.name&&e.message==t.message;case Pv:case Ch:return e==`${t}`;case hf:let o=yx;case pf:if(o||(o=Ph),e.size!=t.size)return!1;const s=i.get(e);if(s)return s==t;i.set(e,t);const a=mx(o(e),o(t),!0,r,i);return i.delete(e),a;case Th:return Symbol.prototype.valueOf.call(e)==Symbol.prototype.valueOf.call(t)}return!1},yx=e=>{let t=-1,n=Array(e.size);return e.forEach((r,i)=>{n[++t]=[i,r]}),n},Ph=e=>{let t=-1;const n=new Array(e.size);return e.forEach(r=>{n[++t]=r}),n},Gv=(e,t)=>{if(Array.isArray(e))return!1;const n=typeof e;return!("number"!==n&&"boolean"!==n&&null!=e&&!Uc(e))||uB.test(e)||!aB.test(e)||null!=t&&e in Object(t)},Na=(e,t)=>Array.isArray(e)?e:Gv(e,t)?[e]:(e=>{const t=[];return e.charCodeAt(0)===cB&&t.push(""),e.replace(fB,(n,r,i,o)=>{let s=n;i?s=o.replace(lB,"$1"):r&&(s=r.trim()),t.push(s)}),t})(`${e}`),yf=(e,t)=>{let n=0;const r=(t=Na(t,e)).length;for(;null!=e&&n<r;)e=e[oa(t[n])],n++;return n&&n==r?e:void 0};function OB(e,t){if(e!==t){const n=void 0!==e,r=null===e,i=e==e,o=Uc(e),s=void 0!==t,a=null===t,u=t==t,c=Uc(t);if(!a&&!c&&!o&&e>t||o&&s&&u&&!a&&!c||r&&s&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!u)return-1}return 0}const wx=(e,t)=>{let n=(s,a)=>!(null==s||!s.length)&&s.indexOf(a)>-1,r=!0;const i=[],o=t.length;if(!e.length)return i;t.length>=200&&(n=(s,a)=>s.has(a),r=!1,t=new Gc(t));e:for(let s in e){let a=e[s];const u=a;if(a=0!==a?a:0,r&&u==u){let c=o;for(;c--;)if(t[c]===u)continue e;i.push(a)}else n(t,u)||i.push(a)}return i},oa=e=>{if("string"==typeof e||Uc(e))return e;const t=`${e}`;return"0"==t&&1/e==-1/0?"-0":t},$c=(e,t=!1,n=!1,r=!0,i,o,s,a)=>{let u;if(i&&(u=s?i(e,o,s,a):i(e)),void 0!==u)return u;if(!In(e))return e;const c=Array.isArray(e),d=Yo(e);if(c){if(u=(e=>{const t=e.length;let n=new e.constructor(t);return t&&"string"==typeof e[0]&&hasOwnProperty.call(e,"index")&&(n.index=e.index,n.input=e.input),n})(e),!t)return jv(e,u)}else{const b="function"==typeof e;if(d===Bc||d===df||b&&!s){if(u=n||b?{}:hx(e),!t)return n?LB(e,mf(e,Object.keys(e),u)):((e,t)=>mf(e,$v(e),t))(e,Object.assign(u,e))}else{if(b||!FV[d])return s?e:{};u=((e,t,n)=>{const r=e.constructor;switch(t){case Nv:return Uv(e);case Dh:case Mv:return new r(+e);case Ov:return function TB(e,t){const n=t?Uv(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case FT:case VT:case BT:case HT:case jT:case UT:case $T:case zT:case GT:return dx(e,n);case hf:case _h:case Ch:return new r(e);case Pv:return(e=>{const t=new e.constructor(e.source,/\w*$/.exec(e));return t.lastIndex=e.lastIndex,t})(e);case pf:return new r;case Th:return Symbol.prototype.valueOf?Object(Symbol.prototype.valueOf.call(e)):{}}})(e,d,t)}}a||(a=new zc);const f=a.get(e);if(f)return f;if(a.set(e,u),(e=>Zo(e)&&Yo(e)==hf)(e))return e.forEach((b,D)=>{u.set(D,$c(b,t,n,r,i,D,e,a))}),u;if((e=>Zo(e)&&Yo(e)==pf)(e))return e.forEach(b=>{u.add($c(b,t,n,r,i,b,e,a))}),u;if(vf(e))return u;const m=c?void 0:(r?n?gx:zv:n?Wv:gf)(e);return(m||e).forEach((b,D)=>{m&&(b=e[D=b]),yu(u,D,$c(b,t,n,r,i,D,e,a))}),u},LB=(e,t)=>mf(e,px(e),t),bx=(e,t)=>t.length<2?e:yf(e,t.slice(0,-1)),qv=(e,t)=>{const n=typeof e;return!!(t=t??Number.MAX_SAFE_INTEGER)&&("number"===n||"symbol"!==n&&dB.test(e))&&e>-1&&e%1==0&&e<t},VB=(e,t)=>(t=Na(t,e),null==(e=bx(e,t))||delete e[oa(t[t.length-1])]),BB=e=>{const t=typeof e;return"string"===t||"number"===t||"symbol"===t||"boolean"===t?"__proto__"!==e:null===e},Wv=e=>{const t=[];for(const n in e)t.push(n);return t},Ex=(e,t)=>{if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};function Dx(e,t=!1){return(n,...r)=>{let i=-1,o=r.length,s=o>1?r[o-1]:void 0;const a=o>2?r[2]:void 0;for(s=e.length>3&&"function"==typeof s?(o--,s):t?(u,c)=>{if(Array.isArray(u)&&!Array.isArray(c))return c}:void 0,a&&Sh(r[0],r[1],a)&&(s=o<3?void 0:s,o=1),n=Object(n);++i<o;){const u=r[i];u&&e(n,u,i,s)}return n}}const Zv=(e,t,n,r,i)=>{e!==t&&Ko(t,(o,s)=>{if(In(o))i||(i=new zc),jB(e,t,s,n,Zv,r,i);else{let a=r?r(e[s],o,`${s}`,e,t,i):void 0;void 0===a&&(a=o),Yv(e,s,a)}},Wv)},jB=(e,t,n,r,i,o,s)=>{const a=Ex(e,n),u=Ex(t,n),c=s.get(u);if(c)return void Yv(e,n,c);let d=o?o(a,u,`${n}`,e,t,s):void 0,f=void 0===d;if(f){const p=Array.isArray(u),m=!p&&vf(u);d=u,p||m?Array.isArray(a)?d=a:Zo(a)&&Po(a)?d=jv(a):m?(f=!1,d=dx(u,!0)):d=[]:Lr(u)||wf(u)?(d=a,wf(a)?d=(e=>{e=Object(e);const t={};for(const n in e)t[n]=e[n];return t})(a):("function"==typeof a||!In(a))&&(d=hx(u))):f=!1}f&&(s.set(u,d),i(d,u,r,o,s),s.delete(u)),Yv(e,n,d)},Yv=(e,t,n)=>{(void 0!==n&&!jc(e[t],n)||void 0===n&&!(t in e))&&yu(e,t,n)},Xv=(e,t)=>{if(null==e)return e;if(!Po(e))return((e,t)=>e&&function UB(e,t,n){const r=Object(e),i=n(e);let{length:o}=i,s=-1;for(;o--;){const a=i[++s];if(!1===t(r[a],a,r))break}return e}(e,t,gf))(e,t);const n=e.length,r=Object(e);let i=-1;for(;++i<n&&!1!==t(r[i],i,r););return e},GB=Set&&1/Ph(new Set([void 0,-0]))[1]==1/0?e=>new Set(e):()=>{};function _x(e,t,n,r,i,o){return In(e)&&In(t)&&(o.set(t,e),Zv(e,t,void 0,_x,o),o.delete(t)),e}function Cx(e){return e==e&&!In(e)}function Tx(e,t){return n=>null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}function tH(e){return"function"==typeof e?e:null==e?t=>t:"object"==typeof e?Array.isArray(e)?function ZB(e,t){return Gv(e)&&Cx(t)?Tx(oa(e),t):n=>{const r=yf(n,e);return void 0===r&&r===t?function xx(e,t){return null!=e&&lH(e,t,cH)}(n,e):Mh(t,r)}}(e[0],e[1]):function YB(e){const t=function XB(e){const t=gf(e);let n=t.length;for(;n--;){const r=t[n],i=e[r];t[n]=[r,i,Cx(i)]}return t}(e);return 1===t.length&&t[0][2]?Tx(t[0][0],t[0][1]):n=>n===e||function QB(e,t,n,r){let i=n.length;const o=i,s=!r;if(null==e)return!o;let a,u;for(e=Object(e);i--;)if(a=n[i],s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1;for(;++i<o;){a=n[i];const c=a[0],d=e[c],f=a[1];if(s&&a[2]){if(void 0===d&&!(c in e))return!1}else{const p=new zc;if(r&&(u=r(d,f,c,e,t,p)),!(void 0===u?Mh(f,d,p):u))return!1}}return!0}(n,e,t)}(e):function KB(e){return Gv(e)?function JB(e){return t=>t?.[e]}(oa(e)):function eH(e){return t=>yf(t,e)}(e)}(e)}function Nh(){const e=tH;return arguments.length?e(arguments[0],arguments[1]):e}const nH=(e,t,n,r)=>{let i=-1;const o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n},rH=(e,t,n,r,i)=>(i(e,(o,s,a)=>{n=r?(r=!1,o):t(n,o,s,a)}),n),oH=e=>Array.isArray(e)||wf(e)||!(!e||!e[Symbol.isConcatSpreadable]);function Sx(e,t,n,r,i){let o=-1;const s=e.length;for(n||(n=oH),i||(i=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?Sx(a,t-1,n,r,i):i.push(...a):r||(i[i.length]=a)}return i}const wf=e=>Zo(e)&&"[object Arguments]"==Yo(e),cH=(e,t)=>null!=e&&t in Object(e),lH=(e,t,n)=>{for(var r=-1,i=(t=Na(t,e)).length,o=!1;++r<i;){var s=oa(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&(e=>"number"==typeof e&&e>-1&&e%1==0&&e<=Number.MAX_SAFE_INTEGER)(i)&&qv(s,i)&&(Array.isArray(e)||wf(e))},gH=function mH(e){return t=>{if(!t)return"";const n=cx(t)?lx(t):void 0,r=n?n[0]:t[0],i=n?((e,t,n)=>{const{length:r}=e;return e.slice(1,n=void 0===n?r:n)})(n).join(""):t.slice(1);return r[e]()+i}}("toUpperCase");class zc{constructor(t){const n=this.__data__=new Qv(t);this.size=n.size}clear(){this.__data__=new Qv,this.size=0}delete(t){const n=this.__data__,r=n.delete(t);return this.size=n.size,r}get(t){return this.__data__.get(t)}has(t){return this.__data__.has(t)}set(t,n){let r=this.__data__;if(r instanceof Qv){const i=r.__data__;if(i.length<199)return i.push([t,n]),this.size=++r.size,this;r=this.__data__=new Ix(i)}return r.set(t,n),this.size=r.size,this}}class Qv{constructor(t){let n=-1;const r=null==t?0:t.length;for(this.clear();++n<r;){const i=t[n];this.set(i[0],i[1])}}clear(){this.__data__=[],this.size=0}delete(t){const n=this.__data__,r=xh(n,t);return!(r<0)&&(r==n.length-1?n.pop():n.splice(r,1),--this.size,!0)}get(t){const n=this.__data__,r=xh(n,t);return r<0?void 0:n[r][1]}has(t){return xh(this.__data__,t)>-1}set(t,n){const r=this.__data__,i=xh(r,t);return i<0?(++this.size,r.push([t,n])):r[i][1]=n,this}}class Ix{constructor(t){let n=-1;const r=null==t?0:t.length;for(this.clear();++n<r;){const i=t[n];this.set(i[0],i[1])}}clear(){this.size=0,this.__data__={hash:new Ax,map:new Map,string:new Ax}}delete(t){const n=Ah(this,t).delete(t);return this.size-=n?1:0,n}get(t){return Ah(this,t).get(t)}has(t){return Ah(this,t).has(t)}set(t,n){const r=Ah(this,t),i=r.size;return r.set(t,n),this.size+=r.size==i?0:1,this}}class Ax{constructor(t){let n=-1;const r=null==t?0:t.length;for(this.clear();++n<r;){const i=t[n];this.set(i[0],i[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(t){const n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}get(t){const r=this.__data__[t];return r===Hv?void 0:r}has(t){return void 0!==this.__data__[t]}set(t,n){const r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=void 0===n?Hv:n,this}}class Gc{constructor(t){let n=-1;const r=null==t?0:t.length;for(this.__data__=new Ix;++n<r;)this.add(t[n])}add(t){return this.__data__.set(t,Hv),this}has(t){return this.__data__.has(t)}}Gc.prototype.push=Gc.prototype.add;const In=function(e){return!!e&&("object"==typeof e||"function"==typeof e)},vo=function(e){return"number"==typeof e||!!e&&"object"==typeof e&&Object.prototype.toString.call(e)===_h},Hi=function(e){return"string"==typeof e||!!e&&"object"==typeof e&&Object.prototype.toString.call(e)===Ch},Tt=Dx((e,t)=>{if(Ih(t)||Po(t))mf(t,gf(t),e);else for(var n in t)hasOwnProperty.call(t,n)&&yu(e,n,t[n])}),Xo=(e,...t)=>{let n=-1,r=t.length;const i=r>2?t[2]:void 0;for(i&&Sh(t[0],t[1],i)&&(r=1);++n<r;){const o=t[n];if(null==o)continue;const s=Object.keys(o),a=s.length;let u=-1;for(;++u<a;){const c=s[u],d=e[c];(void 0===d||jc(d,Object.prototype[c])&&!hasOwnProperty.call(e,c))&&(e[c]=o[c])}}return e},Oh=function(...t){return t.push(void 0,_x),ni.apply(void 0,t)},js=(e,t,...n)=>{let r=-1;const i="function"==typeof t,o=Po(e)?new Array(e.length):[];return Xv(e,s=>{o[++r]=i?t.apply(s,n):yH(s,t,...n)}),o},yH=(e,t,...n)=>{t=Na(t,e);const r=null==(e=bx(e,t))?e:e[oa(function zB(e){const t=null==e?0:e.length;return t?e[t-1]:void 0}(t))];return r?.apply(e,n)},Mx=(e,t,n)=>{let r=0,i=null==e?0:e.length;if(0==i)return 0;const o=(t=(n=Nh(n,2))(t))!=t,s=null===t,a=Uc(t),u=void 0===t;for(;r<i;){let c;const d=Math.floor((r+i)/2),f=n(e[d]),p=void 0!==f,m=null===f,b=f==f,D=Uc(f);c=o?b:u?b&&p:s?b&&p&&!m:a?b&&p&&!m&&!D:!m&&!D&&f<t,c?r=d+1:i=d}return Math.min(i,4294967294)},bf=(e,t)=>{let n=-1,r=(u,c)=>!(null==u||!u.length)&&u.indexOf(c)>-1;t=Nh(t,2);let i=!0;const{length:o}=e,s=[];let a=s;if(o>=200){const u=t?null:GB(e);if(u)return Ph(u);i=!1,r=(c,d)=>c.has(d),a=new Gc}else a=t?[]:s;e:for(;++n<o;){let u=e[n];const c=t?t(u):u;if(u=0!==u?u:0,i&&c==c){let d=a.length;for(;d--;)if(a[d]===c)continue e;t&&a.push(c),s.push(u)}else r(a,c)||(a!==s&&a.push(c),s.push(u))}return s},Us=e=>$c(e),Qo=e=>$c(e,!0),sa=e=>{if(null==e)return!0;if(Po(e)&&(Array.isArray(e)||"string"==typeof e||"function"==typeof e.splice||vf(e)||wf(e)))return!e.length;const t=Yo(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Ih(e))return!(e=>{if(!Ih(e))return Object.keys(e);var t=[];for(var n in Object(e))hasOwnProperty.call(e,n)&&"constructor"!=n&&t.push(n);return t})(e).length;for(const n in e)if(hasOwnProperty.call(e,n))return!1;return!0},qc=(e,t)=>Mh(e,t),sr=e=>"function"==typeof e,Lr=e=>{if(!Zo(e)||"[object Object]"!=Yo(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},vn=e=>{if(!e)return[];if(Po(e))return Hi(e)?lx(e):jv(e);if(Symbol.iterator&&Symbol.iterator in Object(e)){const r=e[Symbol.iterator]();let i;const o=[];for(;!(i=r.next()).done;)o.push(i.value);return o}const t=Yo(e);return(t==hf?yx:t==pf?Ph:yB)(e)},Kv=(e,t=[])=>{if(null==e)return[];const n=t.length;return n>1&&Sh(e,t[0],t[1])?t=[]:n>2&&Sh(t[0],t[1],t[2])&&(t=[t[0]]),Array.isArray(t)||(t=[Nh(t,2)]),function qB(e,t,n){t=t.length?t.map(s=>Array.isArray(s)?a=>yf(a,1===s.length?s[0]:s):s):[s=>s];let r=-1,i=-1;const o=Po(e)?new Array(e.length):[];return Xv(e,s=>{const a=t.map(u=>u(s));o[++i]={criteria:a,index:++r,value:s}}),function WB(e,t){let{length:n}=e;for(e.sort(t);n--;)e[n]=e[n].value;return e}(o,(s,a)=>function RB(e,t,n){let r=-1;const i=e.criteria,o=t.criteria,s=i.length,a=n.length;for(;++r<s;){const u=r<a?n[r]:null,d=(u&&"function"==typeof u?u:OB)(i[r],o[r]);if(d)return u&&"function"!=typeof u?d*("desc"==u?-1:1):d}return e.index-t.index}(s,a,n))}(e,t.flat(1),[])},EH=e=>null!=e&&e.length?Sx(e,1/0):[],Px=(e,...t)=>Po(e)?wx(e,t):[],DH=(e,...t)=>Zo(e)&&Po(e)?wx(e,t.flat(1)):[],Jv=(...e)=>{const t=e.flat(1);return bf(t)},Oa=(e,t)=>{if(null==e)return!1;"string"==typeof t&&(t=t.split("."));let n=-1,r=e;for(;++n<t.length;){if(!r||!hasOwnProperty.call(r,t[n]))return!1;r=r[t[n]]}return!0},Fr=(e,t,n)=>{let r=-1,i=(t=Na(t,e)).length;for(i||(i=1,e=void 0);++r<i;){let o=e?.[oa(t[r])];void 0===o&&(r=i,o=n),e="function"==typeof o?o.call(e):o}return e},Ef=(e,...t)=>{let n={};if(null==e)return n;let r=!1;t=t.flat(1).map(o=>(o=Na(o,e),r||(r=o.length>1),o)),mf(e,gx(e),n),r&&(n=$c(n,!0,!0,!0,o=>Lr(o)?void 0:o));let i=t.length;for(;i--;)VB(n,t[i]);return n},Ko=(e,t=(n=>n))=>{let n=-1;const r=Object(e),i=Po(e)?fx(e,!0):Wv(e);let o=i.length;for(;o--;){const s=i[++n];if(!1===t(r[s],s,r))break}};let CH=0;const ni=Dx((e,t,n,r)=>{Zv(e,t,n,r)},!0);var Mn=$n(276);const{round:xH,floor:SH,PI:Nx}=Math,IH={linear:function(e,t,n){return(n-e[0])/(e[1]-e[0])*(t[1]-t[0])+t[0]||0}},gs=function(e){return e%360+(e<0?360:0)},wu=function(e,t){return t*xH(e/t)},Rh=function(e){return 180*e/Nx%360},yo=function(e,t){return(e=(t=t||!1)?e:e%360)*Nx/180},ey=function(e,t){if(void 0===t)t=void 0===e?1:e,e=0;else if(t<e){const n=e;e=t,t=n}return SH(Math.random()*(t-e+1)+e)},{cos:kh,sin:ty,atan2:AH}=Math,Ox=function(e,t){var n=yo(e.y),r=yo(t.y),s=yo(t.x-e.x),a=ty(s)*kh(r),u=kh(n)*ty(r)-ty(n)*kh(r)*kh(s),f=Rh(AH(a,u))-22.5;return f<0&&(f+=360),["NE","E","SE","S","SW","W","NW","N"][f=parseInt(f/45)]},ny=function(e,t){var n=e.x,r=e.y;return(n-=t.x)*n+(r-=t.y)*r},Rx=function(e,t){return Math.sqrt(ny(e,t))},an={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:Lh,cos:ry,sin:iy,sqrt:kx,min:Lx,max:Fx,atan2:MH,round:Vx,pow:PH,PI:Bx}=Math,W=function(e,t){if(!(this instanceof W))return new W(e,t);if("string"==typeof e){var n=e.split(-1===e.indexOf("@")?" ":"@");e=parseFloat(n[0]),t=parseFloat(n[1])}else Object(e)===e&&(t=e.y,e=e.x);this.x=void 0===e?0:e,this.y=void 0===t?0:t};W.fromPolar=function(e,t,n){n=new W(n);var r=Lh(e*ry(t)),i=Lh(e*iy(t)),o=gs(Rh(t));return o<90?i=-i:o<180?(r=-r,i=-i):o<270&&(r=-r),new W(n.x+r,n.y+i)},W.random=function(e,t,n,r){return new W(ey(e,t),ey(n,r))},W.prototype={type:an.Point,chooseClosest:function(e){var t=e.length;if(1===t)return new W(e[0]);for(var n=null,r=1/0,i=0;i<t;i++){var o=new W(e[i]),s=this.squaredDistance(o);s<r&&(n=o,r=s)}return n},adhereToRect:function(e){return e.containsPoint(this)||(this.x=Lx(Fx(this.x,e.x),e.x+e.width),this.y=Lx(Fx(this.y,e.y),e.y+e.height)),this},angleBetween:function(e,t){var n=this.equals(e)||this.equals(t)?NaN:this.theta(t)-this.theta(e);return n<0&&(n+=360),n},bearing:function(e){return Ox(this,e)},changeInAngle:function(e,t,n){return this.clone().offset(-e,-t).theta(n)-this.theta(n)},clone:function(){return new W(this)},cross:function(e,t){return e&&t?(t.x-this.x)*(e.y-this.y)-(t.y-this.y)*(e.x-this.x):NaN},difference:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),new W(this.x-(e||0),this.y-(t||0))},distance:function(e){return Rx(this,e)},dot:function(e){return e?this.x*e.x+this.y*e.y:NaN},equals:function(e){return!!e&&this.x===e.x&&this.y===e.y},lerp:function(e,t){return new W((1-t)*this.x+t*e.x,(1-t)*this.y+t*e.y)},magnitude:function(){return kx(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(e){return Lh(e.x-this.x)+Lh(e.y-this.y)},move:function(e,t){var n=yo(new W(e).theta(this));return this.offset(ry(n)*t,-iy(n)*t)},normalize:function(e){var t=(e||1)/this.magnitude();return this.scale(t,t)},offset:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x+=e||0,this.y+=t||0,this},reflection:function(e){return new W(e).move(this,this.distance(e))},rotate:function(e,t){if(0===t)return this;e=e||new W(0,0),t=yo(gs(-t));var n=ry(t),r=iy(t),o=r*(this.x-e.x)+n*(this.y-e.y)+e.y;return this.x=n*(this.x-e.x)-r*(this.y-e.y)+e.x,this.y=o,this},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=PH(10,e)}return this.x=Vx(this.x*t)/t,this.y=Vx(this.y*t)/t,this},scale:function(e,t,n){return n=n&&new W(n)||new W(0,0),this.x=n.x+e*(this.x-n.x),this.y=n.y+t*(this.y-n.y),this},snapToGrid:function(e,t){return this.x=wu(this.x,e),this.y=wu(this.y,t||e),this},squaredDistance:function(e){return ny(this,e)},theta:function(e){e=new W(e);var r=MH(-(e.y-this.y),e.x-this.x);return r<0&&(r=2*Bx+r),180*r/Bx},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(e){e=e&&new W(e)||new W(0,0);var t=this.x,n=this.y;return this.x=kx((t-e.x)*(t-e.x)+(n-e.y)*(n-e.y)),this.y=yo(e.theta(new W(t,n))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(e,t){return Object(e)===e&&(t=e.y,e=e.x),this.x=e||0,this.y=t||0,this},vectorAngle:function(e){return new W(0,0).angleBetween(this,e)}},W.prototype.translate=W.prototype.offset;const Fh=W,{max:oy,min:sy}=Math,Xe=function(e,t){return this instanceof Xe?e instanceof Xe?new Xe(e.start,e.end):(this.start=new W(e),void(this.end=new W(t))):new Xe(e,t)};Xe.prototype={type:an.Line,angle:function(){var e=new W(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)},bbox:function(){var e=sy(this.start.x,this.end.x),t=sy(this.start.y,this.end.y),n=oy(this.start.x,this.end.x),r=oy(this.start.y,this.end.y);return new ze(e,t,n-e,r-t)},bearing:function(){return Ox(this.start,this.end)},clone:function(){return new Xe(this.start,this.end)},closestPoint:function(e){return this.pointAt(this.closestPointNormalizedLength(e))},closestPointLength:function(e){return this.closestPointNormalizedLength(e)*this.length()},closestPointNormalizedLength:function(e){var t=this.vector().dot(new Xe(this.start,e).vector()),n=sy(1,oy(0,t/this.squaredLength()));return n!=n?0:n},closestPointTangent:function(e){return this.tangentAt(this.closestPointNormalizedLength(e))},containsPoint:function(e){var t=this.start,n=this.end;if(0!==t.cross(e,n))return!1;var r=this.length();return!(new Xe(t,e).length()>r||new Xe(e,n).length()>r)},divideAt:function(e){var t=this.pointAt(e);return[new Xe(this.start,t),new Xe(t,this.end)]},divideAtLength:function(e){var t=this.pointAtLength(e);return[new Xe(this.start,t),new Xe(t,this.end)]},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y},intersect:function(e,t){if(e&&e.intersectionWithLine){var n=e.intersectionWithLine(this,t);return n&&e instanceof Xe&&(n=n[0]),n}return null},intersectionWithLine:function(e){var t=new W(this.end.x-this.start.x,this.end.y-this.start.y),n=new W(e.end.x-e.start.x,e.end.y-e.start.y),r=t.x*n.y-t.y*n.x,i=new W(e.start.x-this.start.x,e.start.y-this.start.y),o=i.x*n.y-i.y*n.x,s=i.x*t.y-i.y*t.x;if(0===r||o*r<0||s*r<0)return null;if(r>0){if(o>r||s>r)return null}else if(o<r||s<r)return null;return[new W(this.start.x+o*t.x/r,this.start.y+o*t.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return Rx(this.start,this.end)},midpoint:function(){return new W((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(e){const t=this.clone();if(!this.isDifferentiable())return t;const{start:n,end:r}=t,i=n.clone().rotate(r,270),o=r.clone().rotate(n,90);return n.move(o,e),r.move(i,e),t},pointAt:function(e){var t=this.start,n=this.end;return e<=0?t.clone():e>=1?n.clone():t.lerp(n,e)},pointAtLength:function(e){var t=this.start,n=this.end,r=!0;e<0&&(r=!1,e=-e);var i=this.length();return e>=i?r?n.clone():t.clone():this.pointAt((r?e:i-e)/i)},pointOffset:function(e){e=new W(e);var t=this.start,n=this.end;return((n.x-t.x)*(e.y-t.y)-(n.y-t.y)*(e.x-t.x))/this.length()},rotate:function(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this},round:function(e){return this.start.round(e),this.end.round(e),this},scale:function(e,t,n){return this.start.scale(e,t,n),this.end.scale(e,t,n),this},setLength:function(e){var t=this.length();if(!t)return this;var n=e/t;return this.scale(n,n,this.start)},squaredLength:function(){return ny(this.start,this.end)},tangentAt:function(e){if(!this.isDifferentiable())return null;var t=this.start,n=this.end,r=this.pointAt(e),i=new Xe(t,n);return i.translate(r.x-t.x,r.y-t.y),i},tangentAtLength:function(e){if(!this.isDifferentiable())return null;var t=this.start,n=this.end,r=this.pointAtLength(e),i=new Xe(t,n);return i.translate(r.x-t.x,r.y-t.y),i},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(e,t){return this.start.translate(e,t),this.end.translate(e,t),this},vector:function(){return new W(this.end.x-this.start.x,this.end.y-this.start.y)}},Xe.prototype.intersection=Xe.prototype.intersect;const bu=Xe,{sqrt:Hx,round:Vh,pow:NH}=Math,to=function(e,t,n){return this instanceof to?e instanceof to?new to(new W(e.x,e.y),e.a,e.b):(e=new W(e),this.x=e.x,this.y=e.y,this.a=t,void(this.b=n)):new to(e,t,n)};to.fromRect=function(e){return e=new ze(e),new to(e.center(),e.width/2,e.height/2)},to.prototype={type:an.Ellipse,bbox:function(){return new ze(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new W(this.x,this.y)},clone:function(){return new to(this)},containsPoint:function(e){return this.normalizedDistance(e)<=1},equals:function(e){return!!e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b},inflate:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.a+=2*e,this.b+=2*t,this},intersectionWithLine:function(e){var t=[],n=e.start,r=e.end,i=this.a,o=this.b,s=e.vector(),a=n.difference(new W(this)),u=new W(s.x/(i*i),s.y/(o*o)),c=new W(a.x/(i*i),a.y/(o*o)),d=s.dot(u),f=s.dot(c),m=f*f-d*(a.dot(c)-1);if(m<0)return null;if(m>0){var b=Hx(m),D=(-f-b)/d,x=(-f+b)/d;if((D<0||1<D)&&(x<0||1<x))return null;0<=D&&D<=1&&t.push(n.lerp(r,D)),0<=x&&x<=1&&t.push(n.lerp(r,x))}else{var P=-f/d;if(!(0<=P&&P<=1))return null;t.push(n.lerp(r,P))}return t},intersectionWithLineFromCenterToPoint:function(e,t){e=new W(e),t&&e.rotate(new W(this.x,this.y),t);var i,n=e.x-this.x,r=e.y-this.y;if(0===n)return i=this.bbox().pointNearestToPoint(e),t?i.rotate(new W(this.x,this.y),-t):i;var o=r/n,c=Hx(1/(1/(this.a*this.a)+o*o/(this.b*this.b)));return i=new W(this.x+(c=n<0?-c:c),this.y+o*c),t?i.rotate(new W(this.x,this.y),-t):i},normalizedDistance:function(e){var t=e.x,n=e.y,r=this.a,i=this.b,o=this.x,s=this.y;return(t-o)*(t-o)/(r*r)+(n-s)*(n-s)/(i*i)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=NH(10,e)}return this.x=Vh(this.x*t)/t,this.y=Vh(this.y*t)/t,this.a=Vh(this.a*t)/t,this.b=Vh(this.b*t)/t,this},tangentTheta:function(e){var f,p,n=e.x,r=e.y,i=this.a,o=this.b,s=this.bbox().center(),a=s.x,u=s.y;return n>s.x+i/2||n<s.x-i/2?p=i*i/(n-a)-i*i*(r-u)*((f=n>s.x?r-30:r+30)-u)/(o*o*(n-a))+a:f=o*o/(r-u)-o*o*(n-a)*((p=r>s.y?n+30:n-30)-a)/(i*i*(r-u))+u,new W(p,f).theta(e)},toString:function(){return new W(this.x,this.y).toString()+" "+this.a+" "+this.b}};const OH=to,{abs:jx,cos:RH,sin:kH,min:Df,max:Ux,round:Bh,pow:LH}=Math,ze=function(e,t,n,r){if(!(this instanceof ze))return new ze(e,t,n,r);Object(e)===e&&(t=e.y,n=e.width,r=e.height,e=e.x),this.x=void 0===e?0:e,this.y=void 0===t?0:t,this.width=void 0===n?0:n,this.height=void 0===r?0:r};ze.fromEllipse=function(e){return e=new to(e),new ze(e.x-e.a,e.y-e.b,2*e.a,2*e.b)},ze.fromPointUnion=function(...e){if(0===e.length)return null;const t=new W;let n,r,i,o;n=r=1/0,i=o=-1/0;for(let s=0;s<e.length;s++){t.update(e[s]);const a=t.x,u=t.y;a<n&&(n=a),a>i&&(i=a),u<r&&(r=u),u>o&&(o=u)}return new ze(n,r,i-n,o-r)},ze.fromRectUnion=function(...e){if(0===e.length)return null;const t=new ze;let n,r,i,o;n=r=1/0,i=o=-1/0;for(let s=0;s<e.length;s++){t.update(e[s]);const a=t.x,u=t.y,c=a+t.width,d=u+t.height;a<n&&(n=a),c>i&&(i=c),u<r&&(r=u),d>o&&(o=d)}return new ze(n,r,i-n,o-r)},ze.prototype={type:an.Rect,bbox:function(e){return this.clone().rotateAroundCenter(e)},rotateAroundCenter:function(e){if(!e)return this;const{width:t,height:n}=this,r=yo(e),i=jx(kH(r)),o=jx(RH(r)),s=t*o+n*i,a=t*i+n*o;return this.x+=(t-s)/2,this.y+=(n-a)/2,this.width=s,this.height=a,this},bottomLeft:function(){return new W(this.x,this.y+this.height)},bottomLine:function(){return new Xe(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new W(this.x+this.width/2,this.y+this.height)},center:function(){return new W(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new ze(this)},containsPoint:function(e){return e instanceof W||(e=new W(e)),e.x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},containsRect:function(e){var t=new ze(this).normalize(),n=new ze(e).normalize(),r=t.width,i=t.height,o=n.width,s=n.height;if(!(r&&i&&o&&s))return!1;var a=t.x,u=t.y,c=n.x,d=n.y;return o+=c,r+=a,s+=d,i+=u,a<=c&&o<=r&&u<=d&&s<=i},corner:function(){return new W(this.x+this.width,this.y+this.height)},equals:function(e){var t=new ze(this).normalize(),n=new ze(e).normalize();return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height},inflate:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this},intersect:function(e){var t=this.origin(),n=this.corner(),r=e.origin(),i=e.corner();if(i.x<=t.x||i.y<=t.y||r.x>=n.x||r.y>=n.y)return null;var o=Ux(t.x,r.x),s=Ux(t.y,r.y);return new ze(o,s,Df(n.x,i.x)-o,Df(n.y,i.y)-s)},intersectionWithLine:function(e){var o,s,t=this,n=[t.topLine(),t.rightLine(),t.bottomLine(),t.leftLine()],r=[],i=[],a=n.length;for(s=0;s<a;s++)null!==(o=e.intersect(n[s]))&&i.indexOf(o.toString())<0&&(r.push(o),i.push(o.toString()));return r.length>0?r:null},intersectionWithLineFromCenterToPoint:function(e,t){e=new W(e);var r,n=new W(this.x+this.width/2,this.y+this.height/2);t&&e.rotate(n,t);for(var i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],o=new Xe(n,e),s=i.length-1;s>=0;--s){var a=i[s].intersection(o);if(null!==a){r=a;break}}return r&&t&&r.rotate(n,-t),r},leftLine:function(){return new Xe(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new W(this.x,this.y+this.height/2)},maxRectScaleToFit:function(e,t){e=new ze(e),t||(t=e.center());var n,r,i,o,s,a,u,c,d=t.x,f=t.y;n=r=i=o=s=a=u=c=1/0;var p=e.topLeft();p.x<d&&(n=(this.x-d)/(p.x-d)),p.y<f&&(s=(this.y-f)/(p.y-f));var m=e.bottomRight();m.x>d&&(r=(this.x+this.width-d)/(m.x-d)),m.y>f&&(a=(this.y+this.height-f)/(m.y-f));var b=e.topRight();b.x>d&&(i=(this.x+this.width-d)/(b.x-d)),b.y<f&&(u=(this.y-f)/(b.y-f));var D=e.bottomLeft();return D.x<d&&(o=(this.x-d)/(D.x-d)),D.y>f&&(c=(this.y+this.height-f)/(D.y-f)),{sx:Df(n,r,i,o),sy:Df(s,a,u,c)}},maxRectUniformScaleToFit:function(e,t){var n=this.maxRectScaleToFit(e,t);return Df(n.sx,n.sy)},moveAndExpand:function(e){return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this},normalize:function(){var e=this.x,t=this.y,n=this.width,r=this.height;return this.width<0&&(e=this.x+this.width,n=-this.width),this.height<0&&(t=this.y+this.height,r=-this.height),this.x=e,this.y=t,this.width=n,this.height=r,this},offset:function(e,t){return W.prototype.offset.call(this,e,t)},origin:function(){return new W(this.x,this.y)},pointNearestToPoint:function(e){if(e=new W(e),this.containsPoint(e))switch(this.sideNearestToPoint(e)){case"right":return new W(this.x+this.width,e.y);case"left":return new W(this.x,e.y);case"bottom":return new W(e.x,this.y+this.height);case"top":return new W(e.x,this.y)}return e.adhereToRect(this)},rightLine:function(){return new Xe(this.topRight(),this.bottomRight())},rightMiddle:function(){return new W(this.x+this.width,this.y+this.height/2)},round:function(e){let t=1;if(e)switch(e){case 1:t=10;break;case 2:t=100;break;case 3:t=1e3;break;default:t=LH(10,e)}return this.x=Bh(this.x*t)/t,this.y=Bh(this.y*t)/t,this.width=Bh(this.width*t)/t,this.height=Bh(this.height*t)/t,this},scale:function(e,t,n){return n=this.origin().scale(e,t,n),this.x=n.x,this.y=n.y,this.width*=e,this.height*=t,this},sideNearestToPoint:function(e){e=new W(e);var n=this.x+this.width-e.x,r=e.y-this.y,o=e.x-this.x,s="left";return n<o&&(o=n,s="right"),r<o&&(o=r,s="top"),this.y+this.height-e.y<o&&(s="bottom"),s},snapToGrid:function(e,t){var n=this.origin().snapToGrid(e,t),r=this.corner().snapToGrid(e,t);return this.x=n.x,this.y=n.y,this.width=r.x-n.x,this.height=r.y-n.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new Xe(this.topLeft(),this.topRight())},topMiddle:function(){return new W(this.x+this.width/2,this.y)},topRight:function(){return new W(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(e){return ze.fromRectUnion(this,e)},update:function(e,t,n,r){return Object(e)===e&&(t=e.y,n=e.width,r=e.height,e=e.x),this.x=e||0,this.y=t||0,this.width=n||0,this.height=r||0,this}},ze.prototype.bottomRight=ze.prototype.corner,ze.prototype.topLeft=ze.prototype.origin,ze.prototype.translate=ze.prototype.offset;const FH=ze;function $x(e){const t=e.trim();if(""===t)return[];const n=[],r=t.split(/\b\s*,\s*|,\s*|\s+/),i=r.length;for(let o=0;o<i;o+=2)n.push({x:+r[o],y:+r[o+1]});return n}function zx(e){const t=e.length;if(0===t)return[];const n=[];for(let r=0;r<t;r++){const i=e[r].clone();n.push(i)}return n}function Gx(e){const{abs:t}=Math;var n,r,o,i=e.length;if(0===i)return[];for(n=0;n<i;n++)(void 0===o||e[n].y<o.y||e[n].y===o.y&&e[n].x>o.x)&&(o=e[n]);var s=[];for(n=0;n<i;n++){var a=o.theta(e[n]);0===a&&(a=360),s.push([e[n],n,a])}s.sort(function(oe,Ie){var He=oe[2]-Ie[2];return 0===He&&(He=Ie[1]-oe[1]),He}),s.length>2&&s.unshift(s[s.length-1]);for(var p,m,b,D,x,P,d={},f=[];0!==s.length;)if(m=(p=s.pop())[0],!d.hasOwnProperty(p[0]+"@@"+p[1]))for(var O=!1;!O;)if(f.length<2)f.push(p),O=!0;else{D=(b=f.pop())[0];var Y=(P=(x=f.pop())[0]).cross(D,m);if(Y<0)f.push(x),f.push(b),f.push(p),O=!0;else if(0===Y){var ie=D.angleBetween(P,m);t(ie-180)<1e-10||D.equals(m)||P.equals(D)?(d[b[0]+"@@"+b[1]]=D,f.push(x)):t((ie+1)%360-1)<1e-10&&(f.push(x),s.push(b))}else d[b[0]+"@@"+b[1]]=D,f.push(x)}f.length>2&&f.pop();var be,w=-1;for(r=f.length,n=0;n<r;n++){var S=f[n][1];(void 0===be||S<be)&&(be=S,w=n)}var M=[];if(w>0){var R=f.slice(w),Z=f.slice(0,w);M=R.concat(Z)}else M=f;var re=[];for(r=M.length,n=0;n<r;n++)re.push(M[n][0]);return re}const tr=function(e){return this instanceof tr?"string"==typeof e?new tr.parse(e):void(this.points=Array.isArray(e)?e.map(W):[]):new tr(e)};tr.parse=function(e){return new tr($x(e))},tr.fromRect=function(e){return new tr([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft(),e.topLeft()])},tr.prototype={type:an.Polyline,bbox:function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=this.points,o=i.length;if(0===o)return null;for(var s=0;s<o;s++){var a=i[s],u=a.x,c=a.y;u<e&&(e=u),u>t&&(t=u),c<n&&(n=c),c>r&&(r=c)}return new ze(e,n,t-e,r-n)},clone:function(){return new tr(zx(this.points))},closestPoint:function(e){var t=this.closestPointLength(e);return this.pointAtLength(t)},closestPointLength:function(e){var t=this.lengthPoints(),n=t.length;if(0===n||1===n)return 0;for(var r,i=1/0,o=0,s=n-1,a=0;a<s;a++){var u=new Xe(t[a],t[a+1]),c=u.length(),d=u.closestPointNormalizedLength(e),p=u.pointAt(d).squaredDistance(e);p<i&&(i=p,r=o+d*c),o+=c}return r},closestPointNormalizedLength:function(e){var t=this.closestPointLength(e);if(0===t)return 0;var n=this.length();return 0===n?0:t/n},closestPointTangent:function(e){var t=this.closestPointLength(e);return this.tangentAtLength(t)},containsPoint:function(e){var t=this.points,n=t.length;if(0===n)return!1;for(var r=e.x,i=e.y,o=n-1,s=0,a=0,u=new Xe,c=new Xe,d=new W;s<n;s++){var f=t[o],p=t[s];if(e.equals(f)||(u.start=f,u.end=p,u.containsPoint(e)))return!0;if(i<=f.y&&i>p.y||i>f.y&&i<=p.y){var m=f.x-r>p.x-r?f.x-r:p.x-r;m>=0&&(d.x=r+m,d.y=i,c.start=e,c.end=d,u.intersect(c)&&a++)}o=s}return a%2==1},close:function(){const{start:e,end:t,points:n}=this;return e&&t&&!e.equals(t)&&n.push(e.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new tr(Gx(this.points))},equals:function(e){if(!e)return!1;var t=this.points,r=t.length;if(e.points.length!==r)return!1;for(var i=0;i<r;i++)if(!t[i].equals(e.points[i]))return!1;return!0},intersectionWithLine:function(e){for(var t=new Xe(e),n=[],r=this.lengthPoints(),i=new Xe,o=0,s=r.length-1;o<s;o++){i.start=r[o],i.end=r[o+1];var a=t.intersectionWithLine(i);a&&n.push(a[0])}return n.length>0?n:null},isDifferentiable:function(){var e=this.points,t=e.length;if(0===t)return!1;for(var n=new Xe,r=t-1,i=0;i<r;i++)if(n.start=e[i],n.end=e[i+1],n.isDifferentiable())return!0;return!1},length:function(){var e=this.lengthPoints(),t=e.length;if(0===t)return 0;for(var n=0,r=t-1,i=0;i<r;i++)n+=e[i].distance(e[i+1]);return n},pointAt:function(e){var t=this.lengthPoints(),n=t.length;if(0===n)return null;if(1===n||e<=0)return t[0].clone();if(e>=1)return t[n-1].clone();var r=this.length();return this.pointAtLength(r*e)},pointAtLength:function(e){var t=this.lengthPoints(),n=t.length;if(0===n)return null;if(1===n)return t[0].clone();var r=!0;e<0&&(r=!1,e=-e);for(var i=0,o=n-1,s=0;s<o;s++){var a=r?s:o-1-s,u=t[a],c=t[a+1],d=new Xe(u,c),f=u.distance(c);if(e<=i+f)return d.pointAtLength((r?1:-1)*(e-i));i+=f}return(r?t[n-1]:t[0]).clone()},round:function(e){for(var t=this.points,n=t.length,r=0;r<n;r++)t[r].round(e);return this},scale:function(e,t,n){for(var r=this.points,i=r.length,o=0;o<i;o++)r[o].scale(e,t,n);return this},simplify:function(e={}){const t=this.points;if(t.length<3)return this;const n=e.threshold||1e-10;let r=0;for(;t[r+2];){const o=r+1,u=t[o];new Xe(t[r],t[r+2]).closestPoint(u).distance(u)<=n?t.splice(o,1):r+=1}return this},tangentAt:function(e){var n=this.lengthPoints().length;if(0===n||1===n)return null;e<0&&(e=0),e>1&&(e=1);var r=this.length();return this.tangentAtLength(r*e)},tangentAtLength:function(e){var t=this.lengthPoints(),n=t.length;if(0===n||1===n)return null;var r=!0;e<0&&(r=!1,e=-e);for(var i,o=0,s=n-1,a=0;a<s;a++){var u=r?a:s-1-a,c=t[u],d=t[u+1],f=new Xe(c,d),p=c.distance(d);if(f.isDifferentiable()){if(e<=o+p)return f.tangentAtLength((r?1:-1)*(e-o));i=f}o+=p}return i?i.tangentAt(r?1:0):null},toString:function(){return this.points+""},translate:function(e,t){for(var n=this.points,r=n.length,i=0;i<r;i++)n[i].translate(e,t);return this},serialize:function(){var e=this.points,t=e.length;if(0===t)return"";for(var n="",r=0;r<t;r++){var i=e[r];n+=i.x+","+i.y+" "}return n.trim()}},Object.defineProperty(tr.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(tr.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.points.length;return 0===t?null:this.points[t-1]}});const{abs:Hh,sqrt:VH,min:qx,max:Wx,pow:ay}=Math,Pn=function(e,t,n,r){return this instanceof Pn?e instanceof Pn?new Pn(e.start,e.controlPoint1,e.controlPoint2,e.end):(this.start=new W(e),this.controlPoint1=new W(t),this.controlPoint2=new W(n),void(this.end=new W(r))):new Pn(e,t,n,r)};function _f(e){var t,n,r=[];for(n=arguments.length,t=1;t<n;t++)r.push(arguments[t]);if(!e)throw new Error("Missing a parent object.");var i=Object.create(e);for(n=r.length,t=0;t<n;t++){var s,a,o=r[t];for(a in o)o.hasOwnProperty(a)&&(delete i[a],s=Object.getOwnPropertyDescriptor(o,a),Object.defineProperty(i,a,s))}return i}Pn.throughPoints=function(){function t(n){var r=n.length,i=[],o=[],s=2;i[0]=n[0]/s;for(var a=1;a<r;a++)o[a]=1/s,i[a]=(n[a]-i[a-1])/(s=(a<r-1?4:3.5)-o[a]);for(a=1;a<r;a++)i[r-a-1]-=o[r-a]*i[r-a];return i}return function(n){if(!n||Array.isArray(n)&&n.length<2)throw new Error("At least 2 points are required");for(var r=function e(n){var s,r=[],i=[],o=n.length-1;if(1==o)return r[0]=new W((2*n[0].x+n[1].x)/3,(2*n[0].y+n[1].y)/3),i[0]=new W(2*r[0].x-n[0].x,2*r[0].y-n[0].y),[r,i];var a=[];for(s=1;s<o-1;s++)a[s]=4*n[s].x+2*n[s+1].x;a[0]=n[0].x+2*n[1].x,a[o-1]=(8*n[o-1].x+n[o].x)/2;var u=t(a);for(s=1;s<o-1;++s)a[s]=4*n[s].y+2*n[s+1].y;a[0]=n[0].y+2*n[1].y,a[o-1]=(8*n[o-1].y+n[o].y)/2;var c=t(a);for(s=0;s<o;s++)r.push(new W(u[s],c[s])),i.push(s<o-1?new W(2*n[s+1].x-u[s+1],2*n[s+1].y-c[s+1]):new W((n[o].x+u[o-1])/2,(n[o].y+c[o-1])/2));return[r,i]}(n),i=[],o=r[0].length,s=0;s<o;s++){var a=new W(r[0][s].x,r[0][s].y),u=new W(r[1][s].x,r[1][s].y);i.push(new Pn(n[s],a,u,n[s+1]))}return i}}(),Pn.prototype={type:an.Curve,bbox:function(){for(var D,x,P,O,Y,ee,ie,be,e=this.start,t=this.controlPoint1,n=this.controlPoint2,r=this.end,i=e.x,o=e.y,s=t.x,a=t.y,u=n.x,c=n.y,d=r.x,f=r.y,p=new Array,m=new Array,b=[new Array,new Array],w=0;w<2;++w)if(0===w?(x=6*i-12*s+6*u,D=-3*i+9*s-9*u+3*d,P=3*s-3*i):(x=6*o-12*a+6*c,D=-3*o+9*a-9*c+3*f,P=3*a-3*o),Hh(D)<1e-12){if(Hh(x)<1e-12)continue;0<(O=-P/x)&&O<1&&m.push(O)}else be=VH(ie=x*x-4*P*D),!(ie<0)&&(0<(Y=(-x+be)/(2*D))&&Y<1&&m.push(Y),0<(ee=(-x-be)/(2*D))&&ee<1&&m.push(ee));for(var R,Z,re,S=m.length,M=S;S--;)b[0][S]=Z=(R=1-(O=m[S]))*R*R*i+3*R*R*O*s+3*R*O*O*u+O*O*O*d,b[1][S]=re=R*R*R*o+3*R*R*O*a+3*R*O*O*c+O*O*O*f,p[S]={X:Z,Y:re};m[M]=0,m[M+1]=1,p[M]={X:i,Y:o},p[M+1]={X:d,Y:f},b[0][M]=i,b[1][M]=o,b[0][M+1]=d,b[1][M+1]=f,m.length=M+2,b[0].length=M+2,b[1].length=M+2,p.length=M+2;var oe=qx.apply(null,b[0]),Ie=qx.apply(null,b[1]),He=Wx.apply(null,b[0]),ne=Wx.apply(null,b[1]);return new ze(oe,Ie,He-oe,ne-Ie)},clone:function(){return new Pn(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(e,t){return this.pointAtT(this.closestPointT(e,t))},closestPointLength:function(e,t){var n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i={precision:n,subdivisions:void 0===t.subdivisions?this.getSubdivisions({precision:n}):t.subdivisions};return this.lengthAtT(this.closestPointT(e,i),i)},closestPointNormalizedLength:function(e,t){var n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i={precision:n,subdivisions:void 0===t.subdivisions?this.getSubdivisions({precision:n}):t.subdivisions},o=this.closestPointLength(e,i);if(!o)return 0;var s=this.length(i);return 0===s?0:o/s},closestPointT:function(e,t){for(var i,o,s,a,u,c,d,n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,r=void 0===t.subdivisions?this.getSubdivisions({precision:n}):t.subdivisions,f=r.length,p=f?1/f:0,m=0;m<f;m++){var b=r[m],D=b.start.distance(e),x=b.end.distance(e),P=D+x;(!d||P<d)&&(i=b,o=m*p,s=(m+1)*p,a=D,u=x,c=b.start.distance(b.end),d=P)}for(var O=ay(10,-n);;){var Y=a?Hh(a-u)/a:0,ee=u?Hh(a-u)/u:0;if(Y<O||ee<O||!a||a<c*O||!u||u<c*O)return a<=u?o:s;var M=i.divide(.5);p/=2;var R=M[0].start.distance(e),Z=M[0].end.distance(e),re=R+Z,oe=M[1].start.distance(e),Ie=M[1].end.distance(e);re<=oe+Ie?(i=M[0],s-=p,a=R,u=Z):(i=M[1],o+=p,a=oe,u=Ie)}},closestPointTangent:function(e,t){return this.tangentAtT(this.closestPointT(e,t))},containsPoint:function(e,t){return this.toPolyline(t).containsPoint(e)},divideAt:function(e,t){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);var n=this.tAt(e,t);return this.divideAtT(n)},divideAtLength:function(e,t){var n=this.tAtLength(e,t);return this.divideAtT(n)},divideAtT:function(e){var t=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(e<=0)return[new Pn(t,t,t,t),new Pn(t,n,r,i)];if(e>=1)return[new Pn(t,n,r,i),new Pn(i,i,i,i)];var o=this.getSkeletonPoints(e),u=o.divider,c=o.dividerControlPoint1,d=o.dividerControlPoint2;return[new Pn(t,o.startControlPoint1,o.startControlPoint2,u),new Pn(u,c,d,i)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(e){return!!e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.controlPoint1.x===e.controlPoint1.x&&this.controlPoint1.y===e.controlPoint1.y&&this.controlPoint2.x===e.controlPoint2.x&&this.controlPoint2.y===e.controlPoint2.y&&this.end.x===e.end.x&&this.end.y===e.end.y},getSkeletonPoints:function(e){var t=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:r.clone()};if(e>=1)return{startControlPoint1:n.clone(),startControlPoint2:r.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};var o=new Xe(t,n).pointAt(e),s=new Xe(n,r).pointAt(e),a=new Xe(r,i).pointAt(e),u=new Xe(o,s).pointAt(e),c=new Xe(s,a).pointAt(e);return{startControlPoint1:o,startControlPoint2:u,divider:new Xe(u,c).pointAt(e),dividerControlPoint1:c,dividerControlPoint2:a}},getSubdivisions:function(e){var t=void 0===(e=e||{}).precision?this.PRECISION:e.precision,n=this.start,r=this.controlPoint1,i=this.controlPoint2,o=this.end,s=[new Pn(n,r,i,o)];if(0===t)return s;if(!this.isDifferentiable())return s;var u=this.endpointDistance(),c=ay(10,-t),d=2;0===r.cross(n,o)&&0===i.cross(n,o)&&(d=2*t);for(var p=0;;){p+=1;for(var m=[],b=s.length,D=0;D<b;D++){var P=s[D].divide(.5);m.push(P[0],P[1])}for(var O=0,Y=m.length,ee=0;ee<Y;ee++)O+=m[ee].endpointDistance();if(p>=d&&(0!==O?(O-u)/O:0)<c)return m;s=m,u=O}},isDifferentiable:function(){var t=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(this.start.equals(t)&&t.equals(n)&&n.equals(r))},length:function(e){for(var n=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,r=0,i=n.length,o=0;o<i;o++)r+=n[o].endpointDistance();return r},lengthAtT:function(e,t){if(e<=0)return 0;var n=void 0===(t=t||{}).precision?this.PRECISION:t.precision;return this.divide(e)[0].length({precision:n})},pointAt:function(e,t){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var n=this.tAt(e,t);return this.pointAtT(n)},pointAtLength:function(e,t){var n=this.tAtLength(e,t);return this.pointAtT(n)},pointAtT:function(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider},PRECISION:3,round:function(e){return this.start.round(e),this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,n){return this.start.scale(e,t,n),this.controlPoint1.scale(e,t,n),this.controlPoint2.scale(e,t,n),this.end.scale(e,t,n),this},tangentAt:function(e,t){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var n=this.tAt(e,t);return this.tangentAtT(n)},tangentAtLength:function(e,t){if(!this.isDifferentiable())return null;var n=this.tAtLength(e,t);return this.tangentAtT(n)},tangentAtT:function(e){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);var t=this.getSkeletonPoints(e),n=t.startControlPoint2,i=t.divider,o=new Xe(n,t.dividerControlPoint1);return o.translate(i.x-n.x,i.y-n.y),o},tAt:function(e,t){if(e<=0)return 0;if(e>=1)return 1;var n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i={precision:n,subdivisions:void 0===t.subdivisions?this.getSubdivisions({precision:n}):t.subdivisions},o=this.length(i);return this.tAtLength(o*e,i)},tAtLength:function(e,t){var n=!0;e<0&&(n=!1,e=-e);for(var s,a,u,c,d,r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=void 0===t.subdivisions?this.getSubdivisions({precision:r}):t.subdivisions,o={precision:r,subdivisions:i},f=0,p=i.length,m=1/p,b=0;b<p;b++){var D=n?b:p-1-b,x=i[b],P=x.endpointDistance();if(e<=f+P){s=x,a=D*m,u=(D+1)*m,c=n?e-f:P+f-e,d=n?P+f-e:e-f;break}f+=P}if(!s)return n?1:0;for(var O=this.length(o),Y=ay(10,-r);;){if((0!==O?c/O:0)<Y)return a;if((0!==O?d/O:0)<Y)return u;var ie,be,w=s.divide(.5);m/=2;var S=w[0].endpointDistance(),M=w[1].endpointDistance();c<=S?(s=w[0],u-=m,be=S-(ie=c)):(s=w[1],a+=m,be=M-(ie=c-S)),c=ie,d=be}},toPoints:function(e){for(var n=void 0===(e=e||{}).subdivisions?this.getSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.subdivisions,r=[n[0].start.clone()],i=n.length,o=0;o<i;o++)r.push(n[o].end.clone());return r},toPolyline:function(e){return new tr(this.toPoints(e))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}},Pn.prototype.divide=Pn.prototype.divideAtT;const ut=function(e){if(!(this instanceof ut))return new ut(e);if("string"==typeof e)return new ut.parse(e);var t,n;if(this.segments=[],e)if(Array.isArray(e)&&0!==e.length)if(n=(e=e.reduce(function(a,u){return a.concat(u)},[])).length,e[0].isSegment)for(t=0;t<n;t++)this.appendSegment(e[t]);else{var i=null;for(t=0;t<n;t++){var o=e[t];if(!(o instanceof Xe||o instanceof Pn))throw new Error("Cannot construct a path segment from the provided object.");0===t&&this.appendSegment(ut.createSegment("M",o.start)),i&&!i.end.equals(o.start)&&this.appendSegment(ut.createSegment("M",o.start)),o instanceof Xe?this.appendSegment(ut.createSegment("L",o.end)):o instanceof Pn&&this.appendSegment(ut.createSegment("C",o.controlPoint1,o.controlPoint2,o.end)),i=o}}else if(e.isSegment)this.appendSegment(e);else if(e instanceof Xe)this.appendSegment(ut.createSegment("M",e.start)),this.appendSegment(ut.createSegment("L",e.end));else if(e instanceof Pn)this.appendSegment(ut.createSegment("M",e.start)),this.appendSegment(ut.createSegment("C",e.controlPoint1,e.controlPoint2,e.end));else{if(!(e instanceof tr))throw new Error("Cannot construct a path from the provided object.");if(!e.points||0===e.points.length)return;for(n=e.points.length,t=0;t<n;t++){this.appendSegment(ut.createSegment(0===t?"M":"L",e.points[t]))}}};function $s(e,t){return t.unshift(null),new(Function.prototype.bind.apply(e,t))}ut.parse=function(e){if(!e)return new ut;for(var t=new ut,r=e.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),i=r.length,o=0;o<i;o++){var u=r[o].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),c=ut.createSegment.apply(this,u);t.appendSegment(c)}return t},ut.createSegment=function(e){if(!e)throw new Error("Type must be provided.");var t=ut.segmentTypes[e];if(!t)throw new Error(e+" is not a recognized path segment type.");for(var n=[],r=arguments.length,i=1;i<r;i++)n.push(arguments[i]);return $s(t,n)},ut.prototype={type:an.Path,appendSegment:function(e){var r,t=this.segments,n=t.length,i=0!==n?t[n-1]:null;if(Array.isArray(e)){if(!(e=e.reduce(function(c,d){return c.concat(d)},[]))[0].isSegment)throw new Error("Segments required.");for(var s=e.length,a=0;a<s;a++)r=this.prepareSegment(e[a],i,null),t.push(r),i=r}else{if(!e||!e.isSegment)throw new Error("Segment required.");r=this.prepareSegment(e,i,null),t.push(r)}},bbox:function(){var e=this.segments,t=e.length;if(0===t)return null;for(var n,r=0;r<t;r++){var i=e[r];if(i.isVisible){var o=i.bbox();n=n?n.union(o):o}}if(n)return n;var s=e[t-1];return new ze(s.end.x,s.end.y,0,0)},clone:function(){for(var e=this.segments,t=e.length,n=new ut,r=0;r<t;r++){var i=e[r].clone();n.appendSegment(i)}return n},closestPoint:function(e,t){var n=this.closestPointT(e,t);return n?this.pointAtT(n):null},closestPointLength:function(e,t){var n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i={precision:n,segmentSubdivisions:void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):t.segmentSubdivisions},o=this.closestPointT(e,i);return o?this.lengthAtT(o,i):0},closestPointNormalizedLength:function(e,t){var n=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i={precision:n,segmentSubdivisions:void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):t.segmentSubdivisions},o=this.closestPointLength(e,i);if(0===o)return 0;var s=this.length(i);return 0===s?0:o/s},closestPointT:function(e,t){var n=this.segments,r=n.length;if(0===r)return null;for(var s,i=void 0===(t=t||{}).precision?this.PRECISION:t.precision,o=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,a=1/0,u=0;u<r;u++){var c=n[u];if(c.isVisible){var f=c.closestPointT(e,{precision:i,subdivisions:o[u]}),p=c.pointAtT(f),m=new Xe(p,e).squaredLength();m<a&&(s={segmentIndex:u,value:f},a=m)}}return s||{segmentIndex:r-1,value:1}},closestPointTangent:function(e,t){var n=this.segments,r=n.length;if(0===r)return null;for(var s,i=void 0===(t=t||{}).precision?this.PRECISION:t.precision,o=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,a=1/0,u=0;u<r;u++){var c=n[u],d=o[u];if(c.isDifferentiable()){var f=c.closestPointT(e,{precision:i,subdivisions:d}),p=c.pointAtT(f),m=new Xe(p,e).squaredLength();m<a&&(s=c.tangentAtT(f),a=m)}}return s||null},containsPoint:function(e,t){var n=this.toPolylines(t);if(!n)return!1;for(var r=n.length,i=0,o=0;o<r;o++)n[o].containsPoint(e)&&i++;return i%2==1},divideAt:function(e,t){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var i=void 0===(t=t||{}).precision?this.PRECISION:t.precision,s={precision:i,segmentSubdivisions:void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions},a=this.length(s);return this.divideAtLength(a*e,s)},divideAtLength:function(e,t){var n=this.segments.length;if(0===n)return null;var r=!0;e<0&&(r=!1,e=-e);var s,a,c,d,f,p,i=void 0===(t=t||{}).precision?this.PRECISION:t.precision,o=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions,u=0;for(s=0;s<n;s++){var b=r?s:n-1-s;a=this.getSegment(b);var D=o[b],x=a.length({precision:i,subdivisions:D});if(a.isDifferentiable()&&(f=a,p=b,e<=u+x)){d=b,c=a.divideAtLength((r?1:-1)*(e-u),{precision:i,subdivisions:D});break}u+=x}if(!f)return null;c||(d=p,c=f.divideAtT(r?1:0));var P=this.clone();P.replaceSegment(d,c);var O=d,Y=d+1,ee=d+2;c[0].isDifferentiable()||(P.removeSegment(O),Y-=1,ee-=1);var ie=P.getSegment(Y).start;P.insertSegment(Y,ut.createSegment("M",ie)),ee+=1,c[1].isDifferentiable()||(P.removeSegment(ee-1),ee-=1);var be=ee-O-1;for(s=ee;s<P.segments.length;s++){var w=this.getSegment(s-be);if("Z"===(a=P.getSegment(s)).type&&!w.subpathStartSegment.end.equals(a.subpathStartSegment.end)){var S=ut.createSegment("L",w.end);P.replaceSegment(s,S)}}return[new ut(P.segments.slice(0,Y)),new ut(P.segments.slice(Y))]},equals:function(e){if(!e)return!1;var t=this.segments,n=e.segments,r=t.length;if(n.length!==r)return!1;for(var i=0;i<r;i++){var o=t[i],s=n[i];if(o.type!==s.type||!o.equals(s))return!1}return!0},getSegment:function(e){var t=this.segments,n=t.length;if(0===n)throw new Error("Path has no segments.");if(e<0&&(e=n+e),e>=n||e<0)throw new Error("Index out of range.");return t[e]},getSegmentSubdivisions:function(e){for(var t=this.segments,n=t.length,r=void 0===(e=e||{}).precision?this.PRECISION:e.precision,i=[],o=0;o<n;o++){var a=t[o].getSubdivisions({precision:r});i.push(a)}return i},getSubpaths:function(){const t=this.clone().validate().segments,n=t.length,r=[];for(let i=0;i<n;i++){const o=t[i];o.isSubpathStart?r.push(new ut(o)):r[r.length-1].appendSegment(o)}return r},insertSegment:function(e,t){var n=this.segments,r=n.length;if(e<0&&(e=r+e+1),e>r||e<0)throw new Error("Index out of range.");var i,o=null,s=null;if(0!==r&&(s=e>=1?(o=n[e-1]).nextSegment:n[0]),Array.isArray(t)){if(!(t=t.reduce(function(d,f){return d.concat(f)},[]))[0].isSegment)throw new Error("Segments required.");for(var a=t.length,u=0;u<a;u++)i=this.prepareSegment(t[u],o,s),n.splice(e+u,0,i),o=i}else{if(!t||!t.isSegment)throw new Error("Segment required.");i=this.prepareSegment(t,o,s),n.splice(e,0,i)}},intersectionWithLine:function(e,t){var n=null,r=this.toPolylines(t);if(!r)return null;for(var i=0,o=r.length;i<o;i++){var a=e.intersect(r[i]);a&&(n||(n=[]),Array.isArray(a)?Array.prototype.push.apply(n,a):n.push(a))}return n},isDifferentiable:function(){for(var e=this.segments,t=e.length,n=0;n<t;n++)if(e[n].isDifferentiable())return!0;return!1},isValid:function(){var e=this.segments;return 0===e.length||"M"===e[0].type},length:function(e){var t=this.segments,n=t.length;if(0===n)return 0;for(var i=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,o=0,s=0;s<n;s++)o+=t[s].length({subdivisions:i[s]});return o},lengthAtT:function(e,t){var n=this.segments,r=n.length;if(0===r)return 0;var i=e.segmentIndex;if(i<0)return 0;var o=e.value;i>=r?(i=r-1,o=1):o<0?o=0:o>1&&(o=1);for(var s=void 0===(t=t||{}).precision?this.PRECISION:t.precision,a=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):t.segmentSubdivisions,c=0,d=0;d<i;d++){var f=n[d];c+=f.length({precisison:s,subdivisions:a[d]})}return c+(f=n[i]).lengthAtT(o,{precisison:s,subdivisions:a[i]})},pointAt:function(e,t){if(0===this.segments.length)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();var i=void 0===(t=t||{}).precision?this.PRECISION:t.precision,s={precision:i,segmentSubdivisions:void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions},a=this.length(s);return this.pointAtLength(a*e,s)},pointAtLength:function(e,t){var n=this.segments,r=n.length;if(0===r)return null;if(0===e)return this.start.clone();var i=!0;e<0&&(i=!1,e=-e);for(var a,o=void 0===(t=t||{}).precision?this.PRECISION:t.precision,s=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions,u=0,c=0;c<r;c++){var d=i?c:r-1-c,f=n[d],p=s[d],m=f.length({precision:o,subdivisions:p});if(f.isVisible){if(e<=u+m)return f.pointAtLength((i?1:-1)*(e-u),{precision:o,subdivisions:p});a=f}u+=m}return a?i?a.end:a.start:n[r-1].end.clone()},pointAtT:function(e){var t=this.segments,n=t.length;if(0===n)return null;var r=e.segmentIndex;if(r<0)return t[0].pointAtT(0);if(r>=n)return t[n-1].pointAtT(1);var i=e.value;return i<0?i=0:i>1&&(i=1),t[r].pointAtT(i)},PRECISION:3,prepareSegment:function(e,t,n){e.previousSegment=t,e.nextSegment=n,t&&(t.nextSegment=e),n&&(n.previousSegment=e);var r=e;return e.isSubpathStart&&(e.subpathStartSegment=e,r=n),r&&this.updateSubpathStartSegment(r),e},removeSegment:function(e){var t=this.segments,n=t.length;if(0===n)throw new Error("Path has no segments.");if(e<0&&(e=n+e),e>=n||e<0)throw new Error("Index out of range.");var r=t.splice(e,1)[0],i=r.previousSegment,o=r.nextSegment;i&&(i.nextSegment=o),o&&(o.previousSegment=i),r.isSubpathStart&&o&&this.updateSubpathStartSegment(o)},replaceSegment:function(e,t){var n=this.segments,r=n.length;if(0===r)throw new Error("Path has no segments.");if(e<0&&(e=r+e),e>=r||e<0)throw new Error("Index out of range.");var i,o=n[e],s=o.previousSegment,a=o.nextSegment,u=o.isSubpathStart;if(Array.isArray(t)){if(!(t=t.reduce(function(p,m){return p.concat(m)},[]))[0].isSegment)throw new Error("Segments required.");n.splice(e,1);for(var c=t.length,d=0;d<c;d++)i=this.prepareSegment(t[d],s,a),n.splice(e+d,0,i),s=i,u&&i.isSubpathStart&&(u=!1)}else{if(!t||!t.isSegment)throw new Error("Segment required.");i=this.prepareSegment(t,s,a),n.splice(e,1,i),u&&i.isSubpathStart&&(u=!1)}u&&a&&this.updateSubpathStartSegment(a)},round:function(e){for(var t=this.segments,n=t.length,r=0;r<n;r++)t[r].round(e);return this},scale:function(e,t,n){for(var r=this.segments,i=r.length,o=0;o<i;o++)r[o].scale(e,t,n);return this},segmentAt:function(e,t){var n=this.segmentIndexAt(e,t);return n?this.getSegment(n):null},segmentAtLength:function(e,t){var n=this.segmentIndexAtLength(e,t);return n?this.getSegment(n):null},segmentIndexAt:function(e,t){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var i=void 0===(t=t||{}).precision?this.PRECISION:t.precision,s={precision:i,segmentSubdivisions:void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions},a=this.length(s);return this.segmentIndexAtLength(a*e,s)},segmentIndexAtLength:function(e,t){var n=this.segments,r=n.length;if(0===r)return null;var i=!0;e<0&&(i=!1,e=-e);for(var o=void 0===(t=t||{}).precision?this.PRECISION:t.precision,s=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions,a=null,u=0,c=0;c<r;c++){var d=i?c:r-1-c,f=n[d],m=f.length({precision:o,subdivisions:s[d]});if(f.isVisible){if(e<=u+m)return d;a=d}u+=m}return a},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(e,t){if(0===this.segments.length)return null;e<0&&(e=0),e>1&&(e=1);var i=void 0===(t=t||{}).precision?this.PRECISION:t.precision,s={precision:i,segmentSubdivisions:void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:i}):t.segmentSubdivisions},a=this.length(s);return this.tangentAtLength(a*e,s)},tangentAtLength:function(e,t){var n=this.segments,r=n.length;if(0===r)return null;var i=!0;e<0&&(i=!1,e=-e);for(var a,o=void 0===(t=t||{}).precision?this.PRECISION:t.precision,s=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):t.segmentSubdivisions,u=0,c=0;c<r;c++){var d=i?c:r-1-c,f=n[d],p=s[d],m=f.length({precision:o,subdivisions:p});if(f.isDifferentiable()){if(e<=u+m)return f.tangentAtLength((i?1:-1)*(e-u),{precision:o,subdivisions:p});a=f}u+=m}return a?a.tangentAtT(i?1:0):null},tangentAtT:function(e){var t=this.segments,n=t.length;if(0===n)return null;var r=e.segmentIndex;if(r<0)return t[0].tangentAtT(0);if(r>=n)return t[n-1].tangentAtT(1);var i=e.value;return i<0?i=0:i>1&&(i=1),t[r].tangentAtT(i)},toPoints:function(e){var t=this.segments,n=t.length;if(0===n)return null;for(var i=void 0===(e=e||{}).segmentSubdivisions?this.getSegmentSubdivisions({precision:void 0===e.precision?this.PRECISION:e.precision}):e.segmentSubdivisions,o=[],s=[],a=0;a<n;a++){var u=t[a];if(u.isVisible){var c=i[a];if(c.length>0){var d=c.map(function(f){return f.start});Array.prototype.push.apply(s,d)}else s.push(u.start)}else s.length>0&&(s.push(t[a-1].end),o.push(s),s=[])}return s.length>0&&(s.push(this.end),o.push(s)),o},toPolylines:function(e){var t=[],n=this.toPoints(e);if(!n)return null;for(var r=0,i=n.length;r<i;r++)t.push(new tr(n[r]));return t},toString:function(){for(var e=this.segments,t=e.length,n="",r=0;r<t;r++)n+=e[r].serialize()+" ";return n.trim()},translate:function(e,t){for(var n=this.segments,r=n.length,i=0;i<r;i++)n[i].translate(e,t);return this},updateSubpathStartSegment:function(e){for(var t=e.previousSegment;e&&!e.isSubpathStart;)e.subpathStartSegment=t?t.subpathStartSegment:null,t=e,e=e.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,ut.createSegment("M",0,0)),this}},Object.defineProperty(ut.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(0===t)return null;for(var n=0;n<t;n++){var r=e[n];if(r.isVisible)return r.start}return e[t-1].end}}),Object.defineProperty(ut.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var e=this.segments,t=e.length;if(0===t)return null;for(var n=t-1;n>=0;n--){var r=e[n];if(r.isVisible)return r.end}return e[t-1].end}});var Eu={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(e){if(e<=0)return 0;var t=this.length();return e>=1?t:t*e},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(Eu,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(Eu,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(Eu,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var _i=function(){for(var e=[],t=arguments.length,n=0;n<t;n++)e.push(arguments[n]);if(!(this instanceof _i))return $s(_i,e);if(0===t)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var r;if(e[0]instanceof Xe){if(1===t)return this.end=e[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+t+" lines provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===t)return this.end=new W(+e[0],+e[1]),this;if(t<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+t+" coordinates provided).");var i;for(r=[],n=0;n<t;n+=2)i=e.slice(n,n+2),r.push($s(_i,i));return r}if(1===t)return this.end=new W(e[0]),this;for(r=[],n=0;n<t;n+=1)r.push(new _i(e[n]));return r},Zx={clone:function(){return new _i(this.end)},divideAt:function(e){var n=new Xe(this.start,this.end).divideAt(e);return[new _i(n[0]),new _i(n[1])]},divideAtLength:function(e){var n=new Xe(this.start,this.end).divideAtLength(e);return[new _i(n[0]),new _i(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(e){return this.end.round(e),this},scale:function(e,t,n){return this.end.scale(e,t,n),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty(Zx,"type",{configurable:!0,enumerable:!0,value:"L"}),_i.prototype=_f(Eu,Xe.prototype,Zx);var No=function(){for(var e=[],t=arguments.length,n=0;n<t;n++)e.push(arguments[n]);if(!(this instanceof No))return $s(No,e);if(0===t)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var r,o;if(e[0]instanceof Pn){if(1===t)return this.controlPoint1=e[0].controlPoint1.clone(),this.controlPoint2=e[0].controlPoint2.clone(),this.end=e[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(6===t)return this.controlPoint1=new W(+e[0],+e[1]),this.controlPoint2=new W(+e[2],+e[3]),this.end=new W(+e[4],+e[5]),this;if(t<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" coordinates provided).");var i;for(r=[],n=0;n<t;n+=6)i=e.slice(n,n+6),r.push($s(No,i));return r}if(3===t)return this.controlPoint1=new W(e[0]),this.controlPoint2=new W(e[1]),this.end=new W(e[2]),this;if(t<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+t+" points provided).");for(r=[],n=0;n<t;n+=3)o=e.slice(n,n+3),r.push($s(No,o));return r},Yx={clone:function(){return new No(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(e,t){var r=new Pn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(e,t);return[new No(r[0]),new No(r[1])]},divideAtLength:function(e,t){var r=new Pn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(e,t);return[new No(r[0]),new No(r[1])]},divideAtT:function(e){var n=new Pn(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(e);return[new No(n[0]),new No(n[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var t=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(this.start.equals(t)&&t.equals(n)&&n.equals(r))},round:function(e){return this.controlPoint1.round(e),this.controlPoint2.round(e),this.end.round(e),this},scale:function(e,t,n){return this.controlPoint1.scale(e,t,n),this.controlPoint2.scale(e,t,n),this.end.scale(e,t,n),this},serialize:function(){var e=this.controlPoint1,t=this.controlPoint2,n=this.end;return this.type+" "+e.x+" "+e.y+" "+t.x+" "+t.y+" "+n.x+" "+n.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(e,t){return this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t),this}};Object.defineProperty(Yx,"type",{configurable:!0,enumerable:!0,value:"C"}),No.prototype=_f(Eu,Pn.prototype,Yx);var Du=function(){for(var e=[],t=arguments.length,n=0;n<t;n++)e.push(arguments[n]);if(!(this instanceof Du))return $s(Du,e);if(0===t)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var r,o;if(e[0]instanceof Xe){if(1===t)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" lines provided).")}if(e[0]instanceof Pn){if(1===t)return this.end=e[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" curves provided).")}if("string"==typeof e[0]||"number"==typeof e[0]){if(2===t)return this.end=new W(+e[0],+e[1]),this;if(t<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+t+" coordinates provided).");var i;for(r=[],n=0;n<t;n+=2)i=e.slice(n,n+2),r.push($s(0===n?Du:_i,i));return r}if(1===t)return this.end=new W(e[0]),this;for(r=[],n=0;n<t;n+=1)o=e[n],r.push(0===n?new Du(o):new _i(o));return r},uy={bbox:function(){return null},clone:function(){return new Du(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(e){return this.end.equals(e.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(e){return this.end.round(e),this},scale:function(e,t,n){return this.end.scale(e,t,n),this},serialize:function(){var e=this.end;return this.type+" "+e.x+" "+e.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(e,t){return this.end.translate(e,t),this}};Object.defineProperty(uy,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(uy,"type",{configurable:!0,enumerable:!0,value:"M"}),Du.prototype=_f(Eu,uy);var Wc=function(){for(var e=[],t=arguments.length,n=0;n<t;n++)e.push(arguments[n]);if(!(this instanceof Wc))return $s(Wc,e);if(t>0)throw new Error("Closepath constructor expects no arguments.");return this},cy={clone:function(){return new Wc},divideAt:function(e){var n=new Xe(this.start,this.end).divideAt(e);return[n[1].isDifferentiable()?new _i(n[0]):this.clone(),new _i(n[1])]},divideAtLength:function(e){var n=new Xe(this.start,this.end).divideAtLength(e);return[n[1].isDifferentiable()?new _i(n[0]):this.clone(),new _i(n[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(cy,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(cy,"type",{configurable:!0,enumerable:!0,value:"Z"}),Wc.prototype=_f(Eu,Xe.prototype,cy);var BH=ut.segmentTypes={L:_i,C:No,M:Du,Z:Wc,z:Wc};ut.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(BH).join("")+",.]*$"),ut.isDataSupported=function(e){return"string"==typeof e&&this.regexSupportedData.test(e)};const HH={curveThroughPoints:function(e){return console.warn("deprecated"),new ut(Pn.throughPoints(e)).serialize()},getCurveControlPoints:function(e){console.warn("deprecated");var i,t=[],n=[],r=e.length-1;if(1==r)return t[0]=new W((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),n[0]=new W(2*t[0].x-e[0].x,2*t[0].y-e[0].y),[t,n];var o=[];for(i=1;i<r-1;i++)o[i]=4*e[i].x+2*e[i+1].x;o[0]=e[0].x+2*e[1].x,o[r-1]=(8*e[r-1].x+e[r].x)/2;var s=this.getFirstControlPoints(o);for(i=1;i<r-1;++i)o[i]=4*e[i].y+2*e[i+1].y;o[0]=e[0].y+2*e[1].y,o[r-1]=(8*e[r-1].y+e[r].y)/2;var a=this.getFirstControlPoints(o);for(i=0;i<r;i++)t.push(new W(s[i],a[i])),n.push(i<r-1?new W(2*e[i+1].x-s[i+1],2*e[i+1].y-a[i+1]):new W((e[r].x+s[r-1])/2,(e[r].y+a[r-1])/2));return[t,n]},getCurveDivider:function(e,t,n,r){console.warn("deprecated");var i=new Pn(e,t,n,r);return function(s){var a=i.divide(s);return[{p0:a[0].start,p1:a[0].controlPoint1,p2:a[0].controlPoint2,p3:a[0].end},{p0:a[1].start,p1:a[1].controlPoint1,p2:a[1].controlPoint2,p3:a[1].end}]}},getFirstControlPoints:function(e){console.warn("deprecated");var t=e.length,n=[],r=[],i=2;n[0]=e[0]/i;for(var o=1;o<t;o++)r[o]=1/i,n[o]=(e[o]-n[o-1])/(i=(o<t-1?4:3.5)-r[o]);for(o=1;o<t;o++)n[t-o-1]-=r[t-o]*n[t-o];return n},getInversionSolver:function(e,t,n,r){console.warn("deprecated");var i=new Pn(e,t,n,r);return function(s){return i.closestPointT(s)}}},wo=function(e){return this instanceof wo?"string"==typeof e?new wo.parse(e):void(this.points=Array.isArray(e)?e.map(W):[]):new wo(e)};function Xx(e,t,n,r){switch(e.type){case an.Line:if(t.type===an.Line)return _u(e,t);break;case an.Ellipse:switch(t.type){case an.Line:return ly(e,t);case an.Ellipse:return Qx(e,t)}break;case an.Rect:switch(t.type){case an.Line:return Kx(e,t);case an.Ellipse:return Jx(e,t);case an.Rect:return fy(e,t)}break;case an.Polyline:switch(t.type){case an.Line:return jh(e,t);case an.Ellipse:return dy(e,t);case an.Rect:return eS(e,t);case an.Polyline:return tS(e,t)}break;case an.Polygon:switch(t.type){case an.Line:return hy(e,t);case an.Ellipse:return Uh(e,t);case an.Rect:return nS(e,t);case an.Polyline:return rS(e,t);case an.Polygon:return iS(e,t)}break;case an.Path:switch(t.type){case an.Line:return oS(e,t,n);case an.Ellipse:return sS(e,t,n);case an.Rect:return aS(e,t,n);case an.Polyline:return py(e,t,n);case an.Polygon:return $h(e,t,n);case an.Path:return uS(e,t,n,r)}}switch(t.type){case an.Ellipse:case an.Rect:case an.Polyline:case an.Polygon:case an.Path:return Xx(t,e,r,n);default:throw Error(`The intersection for ${e} and ${t} could not be found.`)}}function _u(e,t){const n=e.start.x,r=e.start.y,s=t.start.x,a=t.start.y,d=e.end.x-n,f=e.end.y-r,p=t.end.x-s,m=t.end.y-a,b=n-s,D=r-a,x=d*m-p*f,P=(d*D-f*b)/x,O=(p*D-m*b)/x;return P>=0&&P<=1&&O>=0&&O<=1}function ly(e,t){const n=e.a,r=e.b,i=e.x,o=e.y,s=t.start.x-i,u=t.start.y-o,d=n*n,f=r*r,p=t.end.x-i-s,m=t.end.y-o-u,b=p*p/d+m*m/f,D=2*s*p/d+2*u*m/f,P=D*D-4*b*(s*s/d+u*u/f-1);if(0===P){const O=-D/2/b;return O>=0&&O<=1}if(P>0){const O=Math.sqrt(P),Y=(-D+O)/2/b,ee=(-D-O)/2/b;return Y>=0&&Y<=1||ee>=0&&ee<=1}return!1}function Qx(e,t){return function jH(e,t,n,r){const{cos:i,sin:o}=Math,s=o(t),a=i(t),u=o(r),c=i(r),d=s*s,f=a*a,m=u*u,b=c*c,x=e.a*e.a,P=e.b*e.b,O=n.a*n.a,Y=n.b*n.b,ee=x*d+P*f,ie=O*m+Y*b,be=x*f+P*d,w=O*b+Y*m;let S=2*(P-x)*(s*a),M=2*(Y-O)*(u*c),R=-2*ee*e.x-S*e.y,Z=-2*ie*n.x-M*n.y,re=-S*e.x-2*be*e.y,oe=-M*n.x-2*w*n.y;const Ie=ee*e.x*e.x+be*e.y*e.y+S*e.x*e.y-x*P,He=ie*n.x*n.x+w*n.y*n.y+M*n.x*n.y-O*Y;S/=2,M/=2,R/=2,Z/=2,re/=2,oe/=2;const ne=Ra([[ee,S,R],[S,be,re],[R,re,Ie]]),pe=Ra([[ie,M,Z],[M,w,oe],[Z,oe,He]]),fe=.33333333*(Ra([[ie,S,R],[M,be,re],[Z,re,Ie]])+Ra([[ee,M,R],[S,w,re],[R,oe,Ie]])+Ra([[ee,S,Z],[S,be,oe],[R,re,He]])),he=.33333333*(Ra([[ee,M,Z],[S,w,oe],[R,oe,He]])+Ra([[ie,S,Z],[M,be,oe],[Z,re,He]])+Ra([[ie,M,R],[M,w,re],[Z,oe,Ie]])),zt=Gh([[ne,fe],[fe,he]]),Rt=Gh([[ne,he],[fe,pe]]),gr=Gh([[fe,he],[he,pe]]);return!(Gh([[2*zt,Rt],[Rt,2*gr]])>0&&(he>0||fe>0))}(e,0,t,0)}function Kx(e,t){const{start:n,end:r}=t,{x:i,y:o,width:s,height:a}=e;return!(n.x>i+s&&r.x>i+s||n.x<i&&r.x<i||n.y>o+a&&r.y>o+a||n.y<o&&r.y<o)&&(!(!e.containsPoint(t.start)&&!e.containsPoint(t.end))||_u(e.topLine(),t)||_u(e.rightLine(),t)||_u(e.bottomLine(),t)||_u(e.leftLine(),t))}function Jx(e,t){return!!fy(e,ze.fromEllipse(t))&&Uh(wo.fromRect(e),t)}function fy(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function jh(e,t){return cS(e,t,{interior:!1})}function dy(e,t){return lS(e,t,{interior:!1})}function eS(e,t){return fS(e,t,{interior:!1})}function tS(e,t){return zh(e,t,{interior:!1})}function hy(e,t){return cS(e,t,{interior:!0})}function Uh(e,t){return lS(e,t,{interior:!0})}function nS(e,t){return fS(e,t,{interior:!0})}function rS(e,t){return zh(e,t,{interior:!0})}function iS(e,t){return gy(e,t,{interior:!0})}function oS(e,t,n){return e.getSubpaths().some(r=>{const[i]=r.toPolylines(n),{type:o}=r.getSegment(-1);return"Z"===o?hy(i,t):jh(i,t)})}function sS(e,t,n){return e.getSubpaths().some(r=>{const[i]=r.toPolylines(n),{type:o}=r.getSegment(-1);return"Z"===o?Uh(i,t):dy(i,t)})}function aS(e,t,n){return $h(e,wo.fromRect(t),n)}function py(e,t,n){return dS(e,t,n,{interior:!1})}function $h(e,t,n){return dS(e,t,n,{interior:!0})}function uS(e,t,n,r){return e.getSubpaths().some(i=>{const[o]=i.toPolylines(n),{type:s}=i.getSegment(-1);return"Z"===s?$h(t,o,r):py(t,o,r)})}function cS(e,t,n={}){const{interior:r=!1}=n;let i;if(r){if(e.containsPoint(t.start))return!0;const{start:a,end:u,points:c}=e;i=u.equals(a)?c:[...c,a]}else i=e.points;const{length:o}=i,s=new Xe;for(let a=0;a<o-1;a++)if(s.start=i[a],s.end=i[a+1],_u(t,s))return!0;return!1}function lS(e,t,n={}){const{start:r,end:i,points:o}=e;if(t.containsPoint(r))return!0;let s;const{interior:a=!1}=n;if(a){if(e.containsPoint(t.center()))return!0;s=i.equals(r)?o:[...o,r]}else s=o;const{length:u}=s,c=new Xe;for(let d=0;d<u-1;d++)if(c.start=s[d],c.end=s[d+1],ly(t,c))return!0;return!1}function fS(e,t,n){return gy(e,wo.fromRect(t),n)}function dS(e,t,n,r){return e.getSubpaths().some(i=>{const[o]=i.toPolylines(n),{type:s}=i.getSegment(-1);return"Z"===s?gy(t,o,r):zh(t,o,r)})}function zh(e,t,n={}){const{interior:r=!1}=n;let i;if(r){const{start:u}=t;if(e.containsPoint(u))return!0;i=e.clone().close()}else i=e;const o=t.points,{length:s}=o,a=new Xe;for(let u=0;u<s-1;u++)if(a.start=o[u],a.end=o[u+1],jh(i,a))return!0;return!1}function gy(e,t,n){return t.containsPoint(e.start)||zh(e,t.clone().close(),n)}function Gh(e){return e[0][0]*e[1][1]-e[0][1]*e[1][0]}function Ra(e){return e[0][0]*e[1][1]*e[2][2]-e[0][0]*e[1][2]*e[2][1]-e[0][1]*e[1][0]*e[2][2]+e[0][1]*e[1][2]*e[2][0]+e[0][2]*e[1][0]*e[2][1]-e[0][2]*e[1][1]*e[2][0]}wo.parse=function(e){return new wo($x(e))},wo.fromRect=function(e){return new wo([e.topLeft(),e.topRight(),e.bottomRight(),e.bottomLeft()])},wo.prototype=_f(tr.prototype,{type:an.Polygon,clone:function(){return new wo(zx(this.points))},convexHull:function(){return new wo(Gx(this.points))},lengthPoints:function(){const{start:e,end:t,points:n}=this;return n.length<=1||e.equals(t)?n:[...n,e.clone()]}});const UH=Gn,De=function(){if("object"!=typeof window||!window.SVGAngle)return function(){throw new Error("SVG is required to use Vectorizer.")};var t={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},r=Math,i=r.PI,o=r.atan2,s=r.sqrt,a=r.min,u=r.max,c=r.cos,d=r.sin,f=function(w,S,M){if(!(this instanceof f))return f.apply(Object.create(f.prototype),arguments);if(w){if(f.isV(w)&&(w=w.node),S=S||{},f.isString(w)){if("svg"===(w=w.trim()).toLowerCase())w=f.createSvgDocument();else if("<"===w[0]){var R=f.createSvgDocument(w);if(R.childNodes.length>1){var re,oe,Z=[];for(re=0,oe=R.childNodes.length;re<oe;re++)Z.push(new f(document.importNode(R.childNodes[re],!0)));return Z}w=document.importNode(R.firstChild,!0)}else w=document.createElementNS(t.svg,w);f.ensureId(w)}return this.node=w,this.setAttributes(S),M&&this.append(M),this}},p=f.prototype;function b(w,S,M){M||(M={});for(var R=M.includeAnnotationIndices,Z=M.eol,re=M.lineHeight,oe=M.baseSize,Ie=0,He={},ne=S.length-1,pe=0;pe<=ne;pe++){var fe=S[pe],he=null;if(f.isObject(fe)){var zt=fe.attrs,Rt=f("tspan",zt),gr=Rt.node,_r=fe.t;Z&&pe===ne&&(_r+=Z),gr.textContent=_r;var rt=zt.class;rt&&Rt.addClass(rt),R&&Rt.attr("annotations",fe.annotations),he=parseFloat(zt["font-size"]),isFinite(he)||(he=oe),he&&he>Ie&&(Ie=he)}else Z&&pe===ne&&(fe+=Z),gr=document.createTextNode(fe||" "),oe&&oe>Ie&&(Ie=oe);w.appendChild(gr)}return Ie&&(He.maxFontSize=Ie),re?He.lineHeight=re:Ie&&(He.lineHeight=1.2*Ie),He}Object.defineProperty(p,"id",{enumerable:!0,get:function(){return this.node.id},set:function(w){this.node.id=w}}),p.getTransformToElement=function(w){var S=this.node;if(f.isSVGGraphicsElement(w)&&f.isSVGGraphicsElement(S)){var M=f.toNode(w).getScreenCTM(),R=S.getScreenCTM();if(M&&R)return M.inverse().multiply(R)}return f.createSVGMatrix()},p.transform=function(w,S){var M=this.node;if(f.isUndefined(w))return f.transformStringToMatrix(this.attr("transform"));if(S&&S.absolute)return this.attr("transform",f.matrixToTransformString(w));var R=f.createSVGTransform(w);return M.transform.baseVal.appendItem(R),this},p.translate=function(w,S,M){M=M||{},S=S||0;var R=this.attr("transform")||"",Z=f.parseTransformString(R);return R=Z.value,f.isUndefined(w)?Z.translate:(R=R.replace(/translate\([^)]*\)/g,"").trim(),this.attr("transform",("translate("+(M.absolute?w:Z.translate.tx+w)+","+(M.absolute?S:Z.translate.ty+S)+") "+R).trim()),this)},p.rotate=function(w,S,M,R){R=R||{};var Z=this.attr("transform")||"",re=f.parseTransformString(Z);return Z=re.value,f.isUndefined(w)?re.rotate:(Z=Z.replace(/rotate\([^)]*\)/g,"").trim(),w%=360,this.attr("transform",(Z+" rotate("+(R.absolute?w:re.rotate.angle+w)+(void 0!==S&&void 0!==M?","+S+","+M:"")+")").trim()),this)},p.scale=function(w,S){S=f.isUndefined(S)?w:S;var M=this.attr("transform")||"",R=f.parseTransformString(M);return M=R.value,f.isUndefined(w)?R.scale:(M=M.replace(/scale\([^)]*\)/g,"").trim(),this.attr("transform",(M+" scale("+w+","+S+")").trim()),this)},p.bbox=function(w,S){var M,R=this.node,Z=R.ownerSVGElement;if(!Z)return new ze(0,0,0,0);try{M=R.getBBox()}catch{M={x:R.clientLeft,y:R.clientTop,width:R.clientWidth,height:R.clientHeight}}if(w)return new ze(M);var re=this.getTransformToElement(S||Z);return f.transformRect(M,re)},p.getBBox=function(w){var M,S={},R=this.node;if(!R.ownerSVGElement||!f.isSVGGraphicsElement(R))return new ze(0,0,0,0);if(w&&(w.target&&(S.target=f.toNode(w.target)),w.recursive&&(S.recursive=w.recursive)),S.recursive){var oe=this.children(),Ie=oe.length;if(0===Ie)return this.getBBox({target:S.target,recursive:!1});S.target||(S.target=this);for(var He=0;He<Ie;He++){var pe,ne=oe[He];pe=0===ne.children().length?ne.getBBox({target:S.target,recursive:!1}):ne.getBBox({target:S.target,recursive:!0}),M=M?M.union(pe):pe}return M}try{M=R.getBBox()}catch{M={x:R.clientLeft,y:R.clientTop,width:R.clientWidth,height:R.clientHeight}}if(S.target){var re=this.getTransformToElement(S.target);return f.transformRect(M,re)}return new ze(M)};var D=/em$/;function x(w,S){var M=parseFloat(w);return D.test(w)?M*S:M}p.text=function(w,S){if(w&&"string"!=typeof w)throw new Error("Vectorizer: text() expects the first argument to be a string.");w=f.sanitizeText(w),S||(S={});var M=S.displayEmpty,R=S.eol,Z=S.textPath,re=S.textVerticalAnchor,oe="middle"===re||"bottom"===re||"top"===re,Ie=S.x;void 0===Ie&&(Ie=this.attr("x")||0);var He=S.includeAnnotationIndices,ne=S.annotations;ne&&!f.isArray(ne)&&(ne=[ne]);var pe=S.lineHeight,fe="auto"===pe,he=fe?"1.5em":pe||"1em";this.empty(),this.attr({"xml:space":"preserve",display:w||M?null:"none"});var zt=parseFloat(this.attr("font-size"));zt||(zt=16,(oe||ne)&&this.attr("font-size",zt));var gr,Rt=document;Z?("string"==typeof Z&&(Z={d:Z}),gr=function m(w,S){w||(w={});var M=f("textPath"),R=w.d;if(R&&void 0===w["xlink:href"]){var Z=f("path").attr("d",R).appendTo(S.defs());M.attr("xlink:href","#"+Z.id)}return f.isObject(w)&&M.attr(w),M.node}(Z,this)):gr=Rt.createDocumentFragment();for(var xe,_r=0,rt=w.split("\n"),xt=[],Ee=0,Ue=rt.length-1;Ee<=Ue;Ee++){var gn,Nn=he,On="v-line",Gt=Rt.createElementNS(t.svg,"tspan"),mr=rt[Ee];if(mr)if(ne){var Kt=f.annotateString(mr,ne,{offset:-_r,includeAnnotationIndices:He}),Vn=(gn=b(Gt,Kt,{includeAnnotationIndices:He,eol:Ee!==Ue&&R,lineHeight:fe?null:he,baseSize:zt})).lineHeight;Vn&&fe&&0!==Ee&&(Nn=Vn),0===Ee&&(xe=.8*gn.maxFontSize)}else R&&Ee!==Ue&&(mr+=R),Gt.textContent=mr;else{Gt.textContent="-",On+=" v-empty-line";var St=Gt.style;if(St.fillOpacity=0,St.strokeOpacity=0,ne){gn={};let Cr=zt;for(let zr=(Kt=f.findAnnotationsAtIndex(ne,_r)).length;zr>0;zr--){const Ro=Kt[zr-1].attrs;if(!Ro||!("font-size"in Ro))continue;const rl=parseFloat(Ro["font-size"]);if(isFinite(rl)){Cr=rl;break}}fe&&(Ee>0?Nn=1.2*Cr:xe=.8*Cr),Gt.setAttribute("font-size",Cr),gn.maxFontSize=Cr}}gn&&xt.push(gn),Ee>0&&Gt.setAttribute("dy",Nn),(Ee>0||Z)&&Gt.setAttribute("x",Ie),Gt.className.baseVal=On,gr.appendChild(Gt),_r+=mr.length+1}if(oe)if(ne)Nn=function P(w,S,M,R){if(!Array.isArray(S))return 0;var Z=S.length;if(!Z)return 0;for(var re=S[0],oe=x(re.maxFontSize,M)||M,Ie=0,He=x(R,M),ne=1;ne<Z;ne++)Ie+=x((re=S[ne]).lineHeight,M)||He;var he,fe=x(re.maxFontSize,M)||M;switch(w){case"middle":he=oe/2-.15*fe-Ie/2;break;case"bottom":he=-.25*fe-Ie;break;default:he=.8*oe}return he}(re,xt,zt,he);else if("top"===re)Nn="0.8em";else{var Je;switch(Ue>0?(Je=parseFloat(he)||1,Je*=Ue,D.test(he)||(Je/=zt)):Je=0,re){case"middle":Nn=.3-Je/2+"em";break;case"bottom":Nn=-Je-.3+"em"}}else 0===re?Nn="0em":re?Nn=re:(Nn=0,null===this.attr("y")&&this.attr("y",xe||"0.8em"));return gr.firstChild.setAttribute("dy",Nn),this.append(gr),this},p.removeAttr=function(w){const S=ie[w],{ns:M,local:R}=f.qualifyAttr(S),Z=this.node;return M?Z.hasAttributeNS(M,R)&&Z.removeAttributeNS(M,R):Z.hasAttribute(S)&&Z.removeAttribute(S),this},p.attr=function(w,S){if(f.isUndefined(w)){for(var M=this.node.attributes,R={},Z=0;Z<M.length;Z++)R[M[Z].name]=M[Z].value;return R}if(f.isString(w)&&f.isUndefined(S))return this.node.getAttribute(ie[w]);if("object"==typeof w)for(var re in w)w.hasOwnProperty(re)&&this.setAttribute(re,w[re]);else this.setAttribute(w,S);return this},p.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",f.normalizePathData(this.attr("d"))),this},p.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},p.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},p.setAttributes=function(w){for(var S in w)w.hasOwnProperty(S)&&this.setAttribute(S,w[S]);return this},p.append=function(w){f.isArray(w)||(w=[w]);for(var S=0,M=w.length;S<M;S++)this.node.appendChild(f.toNode(w[S]));return this},p.prepend=function(w){var S=this.node.firstChild;return S?f(S).before(w):this.append(w)},p.before=function(w){var S=this.node,M=S.parentNode;if(M){f.isArray(w)||(w=[w]);for(var R=0,Z=w.length;R<Z;R++)M.insertBefore(f.toNode(w[R]),S)}return this},p.appendTo=function(w){return f.toNode(w).appendChild(this.node),this},p.svg=function(){return this.node instanceof window.SVGSVGElement?this:f(this.node.ownerSVGElement)},p.tagName=function(){return this.node.tagName.toUpperCase()},p.defs=function(){var w=this.svg()||this,S=w.node.getElementsByTagName("defs")[0];return S?f(S):f("defs").appendTo(w)},p.clone=function(){var w=f(this.node.cloneNode(!0));return w.node.id=f.uniqueId(),w},p.findOne=function(w){var S=this.node.querySelector(w);return S?f(S):void 0},p.find=function(w){var S=[],M=this.node.querySelectorAll(w);if(M)for(var R=0;R<M.length;R++)S.push(f(M[R]));return S},p.children=function(){for(var w=this.node.childNodes,S=[],M=0;M<w.length;M++)1===w[M].nodeType&&S.push(f(w[M]));return S},p.parent=function(){return f(this.node.parentNode)||null},p.index=function(){for(var w=0,S=this.node.previousSibling;S;)1===S.nodeType&&w++,S=S.previousSibling;return w},p.findParentByClass=function(w,S){for(var M=this.node.ownerSVGElement,R=this.node.parentNode;R&&R!==S&&R!==M;){var Z=f(R);if(Z.hasClass(w))return Z;R=R.parentNode}return null},p.contains=function(w){var S=this.node,M=f.toNode(w),R=M&&M.parentNode;return S===R||!!(R&&1===R.nodeType&&16&S.compareDocumentPosition(R))},p.toLocalPoint=function(w,S){var M=this.svg().node,R=M.createSVGPoint();R.x=w,R.y=S;try{var Z=R.matrixTransform(M.getScreenCTM().inverse()),re=this.getTransformToElement(M).inverse()}catch{return R}return Z.matrixTransform(re)},p.translateCenterToPoint=function(w){var M=this.getBBox({target:this.svg()}).center();return this.translate(w.x-M.x,w.y-M.y),this},p.translateAndAutoOrient=function(w,S,M){w=new W(w),S=new W(S),M||(M=this.svg());var R=this.scale();this.attr("transform","");var Z=this.getBBox({target:M}).scale(R.sx,R.sy),re=f.createSVGTransform();re.setTranslate(-Z.x-Z.width/2,-Z.y-Z.height/2);var oe=f.createSVGTransform(),Ie=w.angleBetween(S,w.clone().offset(1,0));Ie&&oe.setRotate(Ie,0,0);var He=f.createSVGTransform(),ne=w.clone().move(S,Z.width/2);He.setTranslate(2*w.x-ne.x,2*w.y-ne.y);var pe=this.getTransformToElement(M),fe=f.createSVGTransform();return fe.setMatrix(He.matrix.multiply(oe.matrix.multiply(re.matrix.multiply(pe.scale(R.sx,R.sy))))),this.attr("transform",f.matrixToTransformString(fe.matrix)),this},p.animateAlongPath=function(w,S){S=f.toNode(S);var M=f.ensureId(S),R=f("animateMotion",w),Z=f("mpath",{"xlink:href":"#"+M});R.append(Z),this.append(R);try{R.node.beginElement()}catch{if("fake"===document.documentElement.getAttribute("smiling")){var re=R.node;re.animators=[];var oe=re.getAttribute("id");oe&&(id2anim[oe]=re);for(var Ie=getTargets(re),He=0,ne=Ie.length;He<ne;He++){var fe=new Animator(re,Ie[He],He);animators.push(fe),re.animators[He]=fe,fe.register()}}}return this};const O=/[^\x20\t\r\n\f]+/g;function Y(w){return f.isString(w)&&w.trim().match(O)||[]}p.hasClass=function(w){return!!f.isString(w)&&this.node.classList.contains(w.trim())},p.addClass=function(w){return this.node.classList.add(...Y(w)),this},p.removeClass=function(w){return this.node.classList.remove(...Y(w)),this},p.toggleClass=function(w,S){const M=Y(w);for(let R=0;R<M.length;R++)this.node.classList.toggle(M[R],S);return this},p.sample=function(w){w=w||1;for(var re,S=this.node,M=S.getTotalLength(),R=[],Z=0;Z<M;)re=S.getPointAtLength(Z),R.push({x:re.x,y:re.y,distance:Z}),Z+=w;return R},p.convertToPath=function(){var w=f("path");w.attr(this.attr());var S=this.convertToPathData();return S&&w.attr("d",S),w},p.convertToPathData=function(){var w=this.tagName();switch(w){case"PATH":return this.attr("d");case"LINE":return f.convertLineToPathData(this.node);case"POLYGON":return f.convertPolygonToPathData(this.node);case"POLYLINE":return f.convertPolylineToPathData(this.node);case"ELLIPSE":return f.convertEllipseToPathData(this.node);case"CIRCLE":return f.convertCircleToPathData(this.node);case"RECT":return f.convertRectToPathData(this.node)}throw new Error(w+" cannot be converted to PATH.")},f.prototype.toGeometryShape=function(){var w,S,M,R,Z,re,oe,Ie,He,ne,pe,fe,he,zt,Rt;switch(this.tagName()){case"RECT":return w=parseFloat(this.attr("x"))||0,S=parseFloat(this.attr("y"))||0,M=parseFloat(this.attr("width"))||0,R=parseFloat(this.attr("height"))||0,new ze(w,S,M,R);case"CIRCLE":return Z=parseFloat(this.attr("cx"))||0,re=parseFloat(this.attr("cy"))||0,oe=parseFloat(this.attr("r"))||0,new to({x:Z,y:re},oe,oe);case"ELLIPSE":return Z=parseFloat(this.attr("cx"))||0,re=parseFloat(this.attr("cy"))||0,Ie=parseFloat(this.attr("rx"))||0,He=parseFloat(this.attr("ry"))||0,new to({x:Z,y:re},Ie,He);case"POLYLINE":return ne=f.getPointsFromSvgNode(this),new tr(ne);case"POLYGON":return(ne=f.getPointsFromSvgNode(this)).length>1&&ne.push(ne[0]),new tr(ne);case"PATH":return pe=this.attr("d"),ut.isDataSupported(pe)||(pe=f.normalizePathData(pe)),new ut(pe);case"LINE":return fe=parseFloat(this.attr("x1"))||0,zt=parseFloat(this.attr("y1"))||0,he=parseFloat(this.attr("x2"))||0,Rt=parseFloat(this.attr("y2"))||0,new Xe({x:fe,y:zt},{x:he,y:Rt})}return this.getBBox()},p.findIntersection=function(w,S){var M=this.svg().node,R=this.getBBox({target:S=S||M}),Z=R.center();if(R.intersectionWithLineFromCenterToPoint(w)){var re,oe=this.tagName();if("RECT"===oe){var Ie=new ze(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),He=this.getTransformToElement(S),ne=f.decomposeMatrix(He),pe=M.createSVGTransform();pe.setRotate(-ne.rotation,Z.x,Z.y);var fe=f.transformRect(Ie,pe.matrix.multiply(He));re=new ze(fe).intersectionWithLineFromCenterToPoint(w,ne.rotation)}else if("PATH"===oe||"POLYGON"===oe||"POLYLINE"===oe||"CIRCLE"===oe||"ELLIPSE"===oe){var _r,rt,xt,Ee,Ue,zt=("PATH"===oe?this:this.convertToPath()).sample(),Rt=1/0,gr=[];for(_r=0;_r<zt.length;_r++)xt=(xt=f.createSVGPoint((rt=zt[_r]).x,rt.y)).matrixTransform(this.getTransformToElement(S)),(Ue=(rt=new W(xt)).distance(Z)+(Ee=1.1*rt.distance(w)))<Rt?(Rt=Ue,gr=[{sample:rt,refDistance:Ee}]):Ue<Rt+1&&gr.push({sample:rt,refDistance:Ee});gr.sort(function(Nn,On){return Nn.refDistance-On.refDistance}),gr[0]&&(re=gr[0].sample)}return re}},p.setAttribute=function(w,S){const M=this.node;if(null===S)return this.removeAttr(w),this;const R=ie[w],{ns:Z}=f.qualifyAttr(R);return Z?M.setAttributeNS(Z,R,S):"id"===R?M.id=S:M.setAttribute(R,S),this},f.createSvgDocument=function(w){if(w){const M=`<svg xmlns="${t.svg}" xmlns:xlink="${t.xlink}" version="1.1">${w}</svg>`,{documentElement:R}=f.parseXML(M,{async:!1});return R}const S=document.createElementNS(t.svg,"svg");return S.setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),S.setAttribute("version","1.1"),S},f.createSVGStyle=function(w){const{node:S}=f("style",{type:"text/css"},[f.createCDATASection(w)]);return S},f.createCDATASection=function(w=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(w)},f.idCounter=0,f.uniqueId=function(){return"v-"+ ++f.idCounter},f.toNode=function(w){return f.isV(w)?w.node:w.nodeName&&w||w[0]},f.ensureId=function(w){return(w=f.toNode(w)).id||(w.id=f.uniqueId())},f.sanitizeText=function(w){return(w||"").replace(/ /g,"\xa0")},f.isUndefined=function(w){return typeof w>"u"},f.isString=function(w){return"string"==typeof w},f.isObject=function(w){return w&&"object"==typeof w},f.isArray=Array.isArray,f.parseXML=function(w,S){var M;S=S||{};try{var R=new DOMParser;f.isUndefined(S.async)||(R.async=S.async),M=R.parseFromString(w,"text/xml")}catch{M=void 0}if(!M||M.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+w);return M};const ee=Object.create(null);["baseFrequency","baseProfile","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].forEach(w=>ee[w]=w);const ie=new Proxy(ee,{get:(w,S)=>f.supportCamelCaseAttributes?S in w?w[S]:w[S]=S.replace(/[A-Z]/g,"-$&").toLowerCase():S});Object.defineProperty(f,"attributeNames",{value:ie,writable:!1}),Object.defineProperty(f,"supportCamelCaseAttributes",{value:!1,writable:!0}),f.qualifyAttr=function(w){if(-1!==w.indexOf(":")){var S=w.split(":");return{ns:t[S[0]],local:S[1]}}return{ns:null,local:w}},f.transformSeparatorRegex=/[ ,]+/,f.transformRegex=/\b\w+\([^()]+\)/g,f.transformFunctionRegex=/\b(\w+)\(([^()]+)\)/,f.transformTranslateRegex=/\btranslate\(([^()]+)\)/,f.transformRotateRegex=/\brotate\(([^()]+)\)/,f.transformScaleRegex=/\bscale\(([^()]+)\)/,f.transformStringToMatrix=function(w){let S=f.createSVGMatrix();const M=w&&w.match(f.transformRegex);if(!M)return S;const R=M.length;for(let Z=0;Z<R;Z++){const oe=M[Z].match(f.transformFunctionRegex);if(oe){let Ie,He,ne,pe,fe,he=f.createSVGMatrix();const zt=oe[1].toLowerCase(),Rt=oe[2].split(f.transformSeparatorRegex);switch(zt){case"scale":Ie=parseFloat(Rt[0]),He=void 0===Rt[1]?Ie:parseFloat(Rt[1]),he=he.scaleNonUniform(Ie,He);break;case"translate":ne=parseFloat(Rt[0]),pe=parseFloat(Rt[1]),he=he.translate(ne,pe);break;case"rotate":fe=parseFloat(Rt[0]),ne=parseFloat(Rt[1])||0,pe=parseFloat(Rt[2])||0,he=0!==ne||0!==pe?he.translate(ne,pe).rotate(fe).translate(-ne,-pe):he.rotate(fe);break;case"skewx":fe=parseFloat(Rt[0]),he=he.skewX(fe);break;case"skewy":fe=parseFloat(Rt[0]),he=he.skewY(fe);break;case"matrix":he.a=parseFloat(Rt[0]),he.b=parseFloat(Rt[1]),he.c=parseFloat(Rt[2]),he.d=parseFloat(Rt[3]),he.e=parseFloat(Rt[4]),he.f=parseFloat(Rt[5]);break;default:continue}S=S.multiply(he)}}return S},f.matrixToTransformString=function(w){return w||(w=!0),"matrix("+(void 0!==w.a?w.a:1)+","+(void 0!==w.b?w.b:0)+","+(void 0!==w.c?w.c:0)+","+(void 0!==w.d?w.d:1)+","+(void 0!==w.e?w.e:0)+","+(void 0!==w.f?w.f:0)+")"},f.parseTransformString=function(w){var S,M,R;if(w){var Z=f.transformSeparatorRegex;if(w.trim().indexOf("matrix")>=0){var re=f.transformStringToMatrix(w),oe=f.decomposeMatrix(re);R=[oe.scaleX,oe.scaleY],M=[oe.rotation];var Ie=[];(0!==(S=[oe.translateX,oe.translateY])[0]||0!==S[1])&&Ie.push("translate("+S+")"),(1!==R[0]||1!==R[1])&&Ie.push("scale("+R+")"),0!==M[0]&&Ie.push("rotate("+M+")"),w=Ie.join(" ")}else{const ne=w.match(f.transformTranslateRegex);ne&&(S=ne[1].split(Z));const pe=w.match(f.transformRotateRegex);pe&&(M=pe[1].split(Z));const fe=w.match(f.transformScaleRegex);fe&&(R=fe[1].split(Z))}}var He=R&&R[0]?parseFloat(R[0]):1;return{value:w,translate:{tx:S&&S[0]?parseInt(S[0],10):0,ty:S&&S[1]?parseInt(S[1],10):0},rotate:{angle:M&&M[0]?parseInt(M[0],10):0,cx:M&&M[1]?parseInt(M[1],10):void 0,cy:M&&M[2]?parseInt(M[2],10):void 0},scale:{sx:He,sy:R&&R[1]?parseFloat(R[1]):He}}},f.deltaTransformPoint=function(w,S){return{x:S.x*w.a+S.y*w.c+0,y:S.x*w.b+S.y*w.d+0}},f.decomposeMatrix=function(w){var S=f.deltaTransformPoint(w,{x:0,y:1}),M=f.deltaTransformPoint(w,{x:1,y:0}),R=180/i*o(S.y,S.x)-90,Z=180/i*o(M.y,M.x);return{translateX:w.e,translateY:w.f,scaleX:s(w.a*w.a+w.b*w.b),scaleY:s(w.c*w.c+w.d*w.d),skewX:R,skewY:Z,rotation:R}},f.matrixToScale=function(w){var S,M,R,Z;return w?(S=f.isUndefined(w.a)?1:w.a,Z=f.isUndefined(w.d)?1:w.d,M=w.b,R=w.c):S=Z=1,{sx:M?s(S*S+M*M):S,sy:R?s(R*R+Z*Z):Z}},f.matrixToRotate=function(w){var S={x:0,y:1};return w&&(S=f.deltaTransformPoint(w,S)),{angle:gs(Rh(o(S.y,S.x))-90)}},f.matrixToTranslate=function(w){return{tx:w&&w.e||0,ty:w&&w.f||0}},f.isV=function(w){return w instanceof f},f.isVElement=f.isV,f.isSVGGraphicsElement=function(w){return!!w&&(w=f.toNode(w))instanceof SVGElement&&"function"==typeof w.getScreenCTM};var be=f("svg").node;return f.createSVGMatrix=function(w){var S=be.createSVGMatrix();for(var M in w)S[M]=w[M];return S},f.createSVGTransform=function(w){return f.isUndefined(w)?be.createSVGTransform():(w instanceof SVGMatrix||(w=f.createSVGMatrix(w)),be.createSVGTransformFromMatrix(w))},f.createSVGPoint=function(w,S){var M=be.createSVGPoint();return M.x=w,M.y=S,M},f.transformRect=function(w,S){var M=be.createSVGPoint();M.x=w.x,M.y=w.y;var R=M.matrixTransform(S);M.x=w.x+w.width,M.y=w.y;var Z=M.matrixTransform(S);M.x=w.x+w.width,M.y=w.y+w.height;var re=M.matrixTransform(S);M.x=w.x,M.y=w.y+w.height;var oe=M.matrixTransform(S),Ie=a(R.x,Z.x,re.x,oe.x),He=u(R.x,Z.x,re.x,oe.x),ne=a(R.y,Z.y,re.y,oe.y),pe=u(R.y,Z.y,re.y,oe.y);return new ze(Ie,ne,He-Ie,pe-ne)},f.transformPoint=function(w,S){return new W(f.createSVGPoint(w.x,w.y).matrixTransform(S))},f.transformLine=function(w,S){return new Xe(f.transformPoint(w.start,S),f.transformPoint(w.end,S))},f.transformPolyline=function(w,S){var M=w instanceof tr?w.points:w;f.isArray(M)||(M=[]);for(var R=[],Z=0,re=M.length;Z<re;Z++)R[Z]=f.transformPoint(M[Z],S);return new tr(R)},f.styleToObject=function(w){for(var S={},M=w.split(";"),R=0;R<M.length;R++){var re=M[R].split("=");S[re[0].trim()]=re[1].trim()}return S},f.createSlicePathData=function(w,S,M,R){var Z=2*i-1e-6,re=w,oe=S,Ie=M,He=R,ne=(He<Ie&&(ne=Ie,Ie=He,He=ne),He-Ie),pe=ne<i?"0":"1",fe=c(Ie),he=d(Ie),zt=c(He),Rt=d(He);return ne>=Z?re?"M0,"+oe+"A"+oe+","+oe+" 0 1,1 0,"+-oe+"A"+oe+","+oe+" 0 1,1 0,"+oe+"M0,"+re+"A"+re+","+re+" 0 1,0 0,"+-re+"A"+re+","+re+" 0 1,0 0,"+re+"Z":"M0,"+oe+"A"+oe+","+oe+" 0 1,1 0,"+-oe+"A"+oe+","+oe+" 0 1,1 0,"+oe+"Z":re?"M"+oe*fe+","+oe*he+"A"+oe+","+oe+" 0 "+pe+",1 "+oe*zt+","+oe*Rt+"L"+re*zt+","+re*Rt+"A"+re+","+re+" 0 "+pe+",0 "+re*fe+","+re*he+"Z":"M"+oe*fe+","+oe*he+"A"+oe+","+oe+" 0 "+pe+",1 "+oe*zt+","+oe*Rt+"L0,0Z"},f.mergeAttrs=function(w,S){for(var M in S)w[M]="class"===M?w[M]?w[M]+" "+S[M]:S[M]:"style"===M?f.isObject(w[M])&&f.isObject(S[M])?f.mergeAttrs(w[M],S[M]):f.isObject(w[M])?f.mergeAttrs(w[M],f.styleToObject(S[M])):f.isObject(S[M])?f.mergeAttrs(f.styleToObject(w[M]),S[M]):f.mergeAttrs(f.styleToObject(w[M]),f.styleToObject(S[M])):S[M];return w},f.annotateString=function(w,S,M){S=S||[];for(var re,Ie,He,R=(M=M||{}).offset||0,Z=[],oe=[],ne=0;ne<w.length;ne++){Ie=oe[ne]=w[ne];for(var pe=0;pe<S.length;pe++){var fe=S[pe];ne>=fe.start+R&&ne<fe.end+R&&(f.isObject(Ie)?Ie.attrs=f.mergeAttrs(f.mergeAttrs({},Ie.attrs),fe.attrs):Ie=oe[ne]={t:w[ne],attrs:fe.attrs},M.includeAnnotationIndices&&(Ie.annotations||(Ie.annotations=[])).push(pe))}(He=oe[ne-1])?f.isObject(Ie)&&f.isObject(He)?JSON.stringify(Ie.attrs)===JSON.stringify(He.attrs)?re.t+=Ie.t:(Z.push(re),re=Ie):f.isObject(Ie)||f.isObject(He)?(Z.push(re),re=Ie):re=(re||"")+Ie:re=Ie}return re&&Z.push(re),Z},f.findAnnotationsAtIndex=function(w,S){var M=[];return w&&w.forEach(function(R){R.start<S&&S<=R.end&&M.push(R)}),M},f.findAnnotationsBetweenIndexes=function(w,S,M){var R=[];return w&&w.forEach(function(Z){(S>=Z.start&&S<Z.end||M>Z.start&&M<=Z.end||Z.start>=S&&Z.end<M)&&R.push(Z)}),R},f.shiftAnnotations=function(w,S,M){return w&&w.forEach(function(R){R.start<S&&R.end>=S?R.end+=M:R.start>=S&&(R.start+=M,R.end+=M)}),w},f.convertLineToPathData=function(w){return["M",(w=f(w)).attr("x1"),w.attr("y1"),"L",w.attr("x2"),w.attr("y2")].join(" ")},f.convertPolygonToPathData=function(w){var S=f.getPointsFromSvgNode(w);return 0===S.length?null:f.svgPointsToPath(S)+" Z"},f.convertPolylineToPathData=function(w){var S=f.getPointsFromSvgNode(w);return 0===S.length?null:f.svgPointsToPath(S)},f.svgPointsToPath=function(w){for(var S=0,M=w.length;S<M;S++)w[S]=w[S].x+" "+w[S].y;return"M "+w.join(" L")},f.getPointsFromSvgNode=function(w){var S=[],M=(w=f.toNode(w)).points;if(M)for(var R=0,Z=M.numberOfItems;R<Z;R++)S.push(M.getItem(R));return S},f.KAPPA=.551784,f.convertCircleToPathData=function(w){w=f(w);var S=parseFloat(w.attr("cx"))||0,M=parseFloat(w.attr("cy"))||0,R=parseFloat(w.attr("r")),Z=R*f.KAPPA;return["M",S,M-R,"C",S+Z,M-R,S+R,M-Z,S+R,M,"C",S+R,M+Z,S+Z,M+R,S,M+R,"C",S-Z,M+R,S-R,M+Z,S-R,M,"C",S-R,M-Z,S-Z,M-R,S,M-R,"Z"].join(" ")},f.convertEllipseToPathData=function(w){w=f(w);var S=parseFloat(w.attr("cx"))||0,M=parseFloat(w.attr("cy"))||0,R=parseFloat(w.attr("rx")),Z=parseFloat(w.attr("ry"))||R,re=R*f.KAPPA,oe=Z*f.KAPPA;return["M",S,M-Z,"C",S+re,M-Z,S+R,M-oe,S+R,M,"C",S+R,M+oe,S+re,M+Z,S,M+Z,"C",S-re,M+Z,S-R,M+oe,S-R,M,"C",S-R,M-oe,S-re,M-Z,S,M-Z,"Z"].join(" ")},f.convertRectToPathData=function(w){return w=f(w),f.rectToPath({x:parseFloat(w.attr("x"))||0,y:parseFloat(w.attr("y"))||0,width:parseFloat(w.attr("width"))||0,height:parseFloat(w.attr("height"))||0,rx:parseFloat(w.attr("rx"))||0,ry:parseFloat(w.attr("ry"))||0})},f.rectToPath=function(w){var M=w.x,R=w.y,Z=w.width,re=w.height,oe=a(w.rx||w["top-rx"]||0,Z/2),Ie=a(w.rx||w["bottom-rx"]||0,Z/2),He=a(w.ry||w["top-ry"]||0,re/2),ne=a(w.ry||w["bottom-ry"]||0,re/2);return(oe||Ie||He||ne?["M",M,R+He,"v",re-He-ne,"a",Ie,ne,0,0,0,Ie,ne,"h",Z-2*Ie,"a",Ie,ne,0,0,0,Ie,-ne,"v",-(re-ne-He),"a",oe,He,0,0,0,-oe,-He,"h",-(Z-2*oe),"a",oe,He,0,0,0,-oe,He,"Z"]:["M",M,R,"H",M+Z,"V",R+re,"H",M,"V",R,"Z"]).join(" ")},f.normalizePathData=function(){var w="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",S=new RegExp("([a-z])["+w+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+w+"]*,?["+w+"]*)+)","ig"),M=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+w+"]*,?["+w+"]*","ig"),R=Math,Z=R.PI,re=R.sin,oe=R.cos,Ie=R.tan,He=R.asin,ne=R.sqrt,pe=R.abs;function fe(rt,xt,xe,Ee,Ue,Nn){var On=.3333333333333333,Gt=2/3;return[On*rt+Gt*xe,On*xt+Gt*Ee,On*Ue+Gt*xe,On*Nn+Gt*Ee,Ue,Nn]}function he(rt,xt,xe){return{x:rt*oe(xe)-xt*re(xe),y:rt*re(xe)+xt*oe(xe)}}function zt(rt,xt,xe,Ee,Ue,Nn,On,Gt,mr,gn){var Je,Kt=120*Z/180,Vn=Z/180*(+Ue||0),St=[];if(gn)xi=gn[0],Br=gn[1],Bf=gn[2],Hf=gn[3];else{xt=(Je=he(rt,xt,-Vn)).y;var Cr=((rt=Je.x)-(Gt=(Je=he(Gt,mr,-Vn)).x))/2,zr=(xt-(mr=Je.y))/2,Ro=Cr*Cr/(xe*xe)+zr*zr/(Ee*Ee);Ro>1&&(xe*=Ro=ne(Ro),Ee*=Ro);var rl=xe*xe,b0=Ee*Ee,cA=(Nn==On?-1:1)*ne(pe((rl*b0-rl*zr*zr-b0*Cr*Cr)/(rl*zr*zr+b0*Cr*Cr))),Bf=cA*xe*zr/Ee+(rt+Gt)/2,Hf=cA*-Ee*Cr/xe+(xt+mr)/2,xi=He(((xt-Hf)/Ee).toFixed(9)),Br=He(((mr-Hf)/Ee).toFixed(9));(xi=rt<Bf?Z-xi:xi)<0&&(xi=2*Z+xi),(Br=Gt<Bf?Z-Br:Br)<0&&(Br=2*Z+Br),On&&xi>Br&&(xi-=2*Z),!On&&Br>xi&&(Br-=2*Z)}var E0=Br-xi;if(pe(E0)>Kt){var PG=Br,NG=Gt,OG=mr;St=zt(Gt=Bf+xe*oe(Br=xi+Kt*(On&&Br>xi?1:-1)),mr=Hf+Ee*re(Br),xe,Ee,Ue,0,On,NG,OG,[Br,PG,Bf,Hf])}E0=Br-xi;var RG=oe(xi),kG=re(xi),LG=oe(Br),FG=re(Br),lA=Ie(E0/4),fA=4/3*(xe*lA),dA=4/3*(Ee*lA),hA=[rt,xt],il=[rt+fA*kG,xt-dA*RG],pA=[Gt+fA*FG,mr-dA*LG],gA=[Gt,mr];if(il[0]=2*hA[0]-il[0],il[1]=2*hA[1]-il[1],gn)return[il,pA,gA].concat(St);for(var mA=[],VG=(St=[il,pA,gA].concat(St).join().split(",")).length,ja=0;ja<VG;ja++)mA[ja]=ja%2?he(St[ja-1],St[ja],Vn).y:he(St[ja],St[ja+1],Vn).x;return mA}function _r(rt){var xt=function gr(rt){if((!Array.isArray(rt)||!Array.isArray(rt&&rt[0]))&&(rt=function Rt(rt){if(!rt)return null;var xt={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},xe=[];return String(rt).replace(S,function(Ee,Ue,Nn){var On=[],Gt=Ue.toLowerCase();for(Nn.replace(M,function(mr,gn){gn&&On.push(+gn)}),"m"===Gt&&On.length>2&&(xe.push([Ue].concat(On.splice(0,2))),Gt="l",Ue="m"===Ue?"l":"L");On.length>=xt[Gt]&&(xe.push([Ue].concat(On.splice(0,xt[Gt]))),xt[Gt]););}),xe}(rt)),!rt||!rt.length)return[["M",0,0]];for(var Gt,xt=[],xe=0,Ee=0,Ue=0,Nn=0,mr=rt.length,gn=0;gn<mr;gn++){var Kt=[];xt.push(Kt);var St,Je,Vn=rt[gn];if((Gt=Vn[0])!=Gt.toUpperCase())switch(Kt[0]=Gt.toUpperCase(),Kt[0]){case"A":Kt[1]=Vn[1],Kt[2]=Vn[2],Kt[3]=Vn[3],Kt[4]=Vn[4],Kt[5]=Vn[5],Kt[6]=+Vn[6]+xe,Kt[7]=+Vn[7]+Ee;break;case"V":Kt[1]=+Vn[1]+Ee;break;case"H":Kt[1]=+Vn[1]+xe;break;case"M":for(Ue=+Vn[1]+xe,Nn=+Vn[2]+Ee,St=Vn.length,Je=1;Je<St;Je++)Kt[Je]=+Vn[Je]+(Je%2?xe:Ee);break;default:for(St=Vn.length,Je=1;Je<St;Je++)Kt[Je]=+Vn[Je]+(Je%2?xe:Ee)}else for(var Cr=Vn.length,zr=0;zr<Cr;zr++)Kt[zr]=Vn[zr];switch(Kt[0]){case"Z":xe=+Ue,Ee=+Nn;break;case"H":xe=Kt[1];break;case"V":Ee=Kt[1];break;case"M":Ue=Kt[Kt.length-2],Nn=Kt[Kt.length-1],xe=Kt[Kt.length-2],Ee=Kt[Kt.length-1];break;default:xe=Kt[Kt.length-2],Ee=Kt[Kt.length-1]}}return xt}(rt),xe={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function Ee(St,Je,Cr){var zr,Ro;if(!St)return["C",Je.x,Je.y,Je.x,Je.y,Je.x,Je.y];switch(St[0]in{T:1,Q:1}||(Je.qx=null,Je.qy=null),St[0]){case"M":Je.X=St[1],Je.Y=St[2];break;case"A":St=0===parseFloat(St[1])||0===parseFloat(St[2])?["L",St[6],St[7]]:["C"].concat(zt.apply(0,[Je.x,Je.y].concat(St.slice(1))));break;case"S":"C"===Cr||"S"===Cr?(zr=2*Je.x-Je.bx,Ro=2*Je.y-Je.by):(zr=Je.x,Ro=Je.y),St=["C",zr,Ro].concat(St.slice(1));break;case"T":"Q"===Cr||"T"===Cr?(Je.qx=2*Je.x-Je.qx,Je.qy=2*Je.y-Je.qy):(Je.qx=Je.x,Je.qy=Je.y),St=["C"].concat(fe(Je.x,Je.y,Je.qx,Je.qy,St[1],St[2]));break;case"Q":Je.qx=St[1],Je.qy=St[2],St=["C"].concat(fe(Je.x,Je.y,St[1],St[2],St[3],St[4]));break;case"H":St=["L"].concat(St[1],Je.y);break;case"V":St=["L"].concat(Je.x,St[1])}return St}function Ue(St,Je){if(St[Je].length>7){St[Je].shift();for(var Cr=St[Je];Cr.length;)Nn[Je]="A",St.splice(Je++,0,["C"].concat(Cr.splice(0,6)));St.splice(Je,1),mr=xt.length}}for(var Nn=[],On="",Gt="",mr=xt.length,gn=0;gn<mr;gn++){xt[gn]&&(On=xt[gn][0]),"C"!==On&&(Nn[gn]=On,gn>0&&(Gt=Nn[gn-1])),xt[gn]=Ee(xt[gn],xe,Gt),"A"!==Nn[gn]&&"C"===On&&(Nn[gn]="C"),Ue(xt,gn);var Kt=xt[gn],Vn=Kt.length;xe.x=Kt[Vn-2],xe.y=Kt[Vn-1],xe.bx=parseFloat(Kt[Vn-4])||xe.x,xe.by=parseFloat(Kt[Vn-3])||xe.y}return(!xt[0][0]||"M"!==xt[0][0])&&xt.unshift(["M",0,0]),xt}return function(rt){return _r(rt).join(",").split(",").join(" ")}}(),f.namespace=t,f.g=fr,f}(),Jo={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300},ms=function(e){return e&&e.toString().split(" ").map(function(t){return t.substr(0,Jo.classNamePrefix.length)!==Jo.classNamePrefix&&(t=Jo.classNamePrefix+t),t}).join(" ")},$H=function(e){return e&&e.toString().split(" ").map(function(t){return t.substr(0,Jo.classNamePrefix.length)===Jo.classNamePrefix&&(t=t.substr(Jo.classNamePrefix.length)),t}).join(" ")},qh=function(e,t){const n={},r={},i=De.namespace.svg,o=t||i,s=document.createDocumentFragment(),a=function(u,c,d){for(let f=0;f<u.length;f++){const p=u[f];if("string"==typeof p){const ee=document.createTextNode(p);c.appendChild(ee);continue}if(!p.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");const m=p.tagName;let b;p.hasOwnProperty("namespaceURI")&&(d=p.namespaceURI),b=document.createElementNS(d,m);const D=d===i,x=D?De:Mn,P=p.attributes;P&&x(b).attr(P);const O=p.style;if(O&&Mn(b).css(O),p.hasOwnProperty("className")){const ee=p.className;D?b.className.baseVal=ee:b.className=ee}if(p.hasOwnProperty("textContent")&&(b.textContent=p.textContent),p.hasOwnProperty("selector")){const ee=p.selector;if(n[ee])throw new Error("json-dom-parser: selector must be unique");n[ee]=b,x(b).attr("joint-selector",ee)}if(p.hasOwnProperty("groupSelector")){let ee=p.groupSelector;Array.isArray(ee)||(ee=[ee]);for(let ie=0;ie<ee.length;ie++){const be=ee[ie];let w=r[be];w||(w=r[be]=[]),w.push(b)}}c.appendChild(b);const Y=p.children;Array.isArray(Y)&&a(Y,b,d)}};return a(e,s,o),{fragment:s,selectors:n,groupSelectors:r}},Wh=function(e){let t=0;if(0===e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t},Cf=function(e,t,n){for(var i,r=Array.isArray(t)?t:t.split(n||"/"),o=0,s=r.length;o<s;){if(i=r[o++],Object(e)!==e||!(i in e))return;e=e[i]}return e},hS=function(e,t){return"string"!=typeof t&&"number"!=typeof t&&(t=String(t)),!("constructor"===t&&"function"==typeof e[t]||"__proto__"===t)},pS=function(e,t,n,r){const i=Array.isArray(t)?t:t.split(r||"/"),o=i.length-1;let s=e,a=0;for(;a<o;a++){const u=i[a];if(!hS(s,u))return e;s=s[u]||(s[u]={})}return s[i[o]]=n,e},gS=function(e,t,n){const r=Array.isArray(t)?t:t.split(n||"/"),i=r.length-1;let o=e,s=0;for(;s<i;s++){const a=r[s];if(!hS(o,a))return e;const u=o[a];if(!u)return e;o=u}return delete o[r[i]],e},Zc=function(e){return Zc.id=Zc.id||1,void 0===e?"j_"+Zc.id++:(e.id=void 0===e.id?"j_"+Zc.id++:e.id,e.id)},qH=function(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()},Ci=function(e){if(e.normalized)return e;const{originalEvent:t,target:n}=e,r=t&&t.changedTouches&&t.changedTouches[0];if(r)for(let i in r)void 0===e[i]&&(e[i]=r[i]);if(n){const i=n.correspondingUseElement;i&&(e.target=i)}return e.normalized=!0,e},my=function(){var e;if(typeof window<"u"&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!e){var t=0;e=function(n){var r=(new Date).getTime(),i=Math.max(0,16-(r-t)),o=setTimeout(function(){n(r+i)},i);return t=r+i,o}}return function(n,r,...i){return e(void 0!==r?n.bind(r,...i):n)}}(),vy=((t=typeof window<"u")&&(e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),e=e||clearTimeout,t?e.bind(window):e),Ti=function(e){return Hi(e)&&"%"===e.slice(-1)},YH=function(e,t){var r=parseFloat(e);if(Number.isNaN(r))return null;var o,i={};if(i.value=r,null==t)o="[A-Za-z]*";else if(Array.isArray(t)){if(0===t.length)return null;o=t.join("|")}else Hi(t)&&(o=t);var s=function n(a){var u=new RegExp("(?:\\d+(?:\\.\\d+)*)("+a+")$").exec(e);return u?u[1]:null}(o);return null===s?null:(i.unit=s,i)};var e,t;function XH(e,t){const n=e.split(t);let r=1;for(let i=0,o=n.length-1;i<o;i++){const s=[];(i>0||""!==n[0])&&s.push(0),s.push(t),(i<o-1||""!==n[o])&&s.push(0),n.splice(r,0,...s),r+=s.length+1}return n.filter(i=>""!==i)}function mS(e,t){if(null===e)return t.getBBox().height;switch(e.unit){case"em":return t.getBBox().height*e.value;case"px":case"":return e.value}}const QH=function(e,t,n={},r={}){var i=t.width,o=t.height,s=r.svgDocument||De("svg").node,a=De("tspan").node,u=De("text").attr(n).append(a).node,c=document.createTextNode("");u.style.opacity=0,u.style.display="block",a.style.display="block",a.appendChild(c),s.appendChild(u),r.svgDocument||document.body.appendChild(s);const d=r.preserveSpaces,p=r.separator||""===r.separator?r.separator:" ",m="string"==typeof p?p:" ";var b=r.eol||"\n",D=r.hyphen?new RegExp(r.hyphen):/[^\w\d\u00C0-\u1FFF\u2800-\uFFFD]/,x=r.maxLineCount;vo(x)||(x=1/0);var ee,ie,be,P=e.split(p),O=[],Y=[];d&&De(a).attr("xml:space","preserve");for(var w=0,S=0,M=P.length;w<M;w++){var R=P[w];if((R||d)&&"string"==typeof R){var Z=!1;if(b&&R.indexOf(b)>=0){if(R.length>1){const zt=XH(P[w],b);P.splice(w,1,...zt),w--,M=P.length;continue}if(d&&"string"==typeof P[w-1]){P.splice(w,0,"",0),M+=2,w--;continue}Y[++S]=d&&"string"!=typeof P[w+1]?void 0:"",Z=!0}if(!Z){let zt;if(zt=d?void 0!==Y[S]?Y[S]+m+R:R:Y[S]?Y[S]+m+R:R,c.data=zt,a.getComputedTextLength()<=i)Y[S]=zt,(ee||ie)&&(O[S++]=!0,ee=0,ie=0);else{if(!Y[S]||ee){var re=!!ee;if(ee=R.length-1,re||!ee){if(!ee){if(!Y[S]){Y=[];break}P.splice(w,2,R+P[w+1]),M--,O[S++]=!0,w--;continue}P[w]=R.substring(0,ee);const Rt=P[w+1];P[w+1]=R.substring(ee)+(void 0===Rt||0===Rt?"":Rt)}else{if(ie)P.splice(w,2,P[w]+P[w+1]),ie=0;else{var oe=R.search(D);oe>-1&&oe!==R.length-1&&0!==oe&&(ie=oe+1,ee=0),P.splice(w,1,R.substring(0,ie||ee),R.substring(ie||ee)),M++}S&&!O[S-1]&&S--}(!d||""!==Y[S])&&w--;continue}S++,w--}}var Ie=null;if(Y.length>x?Ie=x-1:void 0!==o&&(void 0===be&&""!==c.data&&(be=mS("auto"===n.lineHeight?{value:1.5,unit:"em"}:YH(n.lineHeight,["em","px",""]),u)),be*Y.length>o&&(Ie=Math.floor(o/be)-1)),null!==Ie){Y.splice(Ie+1);var He=r.ellipsis;if(!He||Ie<0)break;"string"!=typeof He&&(He="\u2026");var ne=Y[Ie];if(!ne&&!Z)break;var fe,he,pe=ne.length;do{if(he=ne[pe],fe=ne.substring(0,pe),he?he.match(p)&&(fe+=he):fe+=m,c.data=fe+=He,a.getComputedTextLength()<=i){Y[Ie]=fe;break}pe--}while(pe>=0);break}}}return r.svgDocument?s.removeChild(u):document.body.removeChild(s),Y.join(b)},ka=function(e){if(Object(e)!==e){var t=0;return isFinite(e)&&(t=+e),{top:t,right:t,bottom:t,left:t}}var n,r,i,o;return n=r=i=o=0,isFinite(e.vertical)&&(n=i=+e.vertical),isFinite(e.horizontal)&&(r=o=+e.horizontal),isFinite(e.top)&&(n=+e.top),isFinite(e.right)&&(r=+e.right),isFinite(e.bottom)&&(i=+e.bottom),isFinite(e.left)&&(o=+e.left),{top:n,right:r,bottom:i,left:o}},tj={linear:function(e){return e},quad:function(e){return e*e},cubic:function(e){return e*e*e},inout:function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)},exponential:function(e){return Math.pow(2,10*(e-1))},bounce:function(e){for(var t=0,n=1;;t+=n,n/=2)if(e>=(7-4*t)/11){var r=(11-6*t-11*e)/4;return-r*r+n*n}},reverse:function(e){return function(t){return 1-e(1-t)}},reflect:function(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}},clamp:function(e,t,n){return t=t||0,n=n||1,function(r){var i=e(r);return i<t?t:i>n?n:i}},back:function(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}},elastic:function(e){return e||(e=1.5),function(t){return Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)}}},vS={number:function(e,t){var n=t-e;return function(r){return e+n*r}},object:function(e,t){var n=Object.keys(e);return function(r){var i,o,s={};for(i=n.length-1;-1!=i;i--)s[o=n[i]]=e[o]+(t[o]-e[o])*r;return s}},hexColor:function(e,t){var n=parseInt(e.slice(1),16),r=parseInt(t.slice(1),16),i=255&n,o=(255&r)-i,s=65280&n,a=(65280&r)-s,u=16711680&n,c=(16711680&r)-u;return function(d){return"#"+(1<<24|i+o*d&255|s+a*d&65280|u+c*d&16711680).toString(16).slice(1)}},unit:function(e,t){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=n.exec(e),i=n.exec(t),o=i[1].indexOf("."),s=o>0?i[1].length-o-1:0,a=+i[1]-(e=+r[1]),u=r[2];return function(c){return(e+a*c).toFixed(s)+u}}},nj={outline:function(e){var n=Number.isFinite(e.margin)?e.margin:2,r=Number.isFinite(e.width)?e.width:1;return no('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:e.color||"blue",opacity:Number.isFinite(e.opacity)?e.opacity:1,outerRadius:n+r,innerRadius:n})},highlight:function(e){return no('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:e.color||"red",width:Number.isFinite(e.width)?e.width:1,blur:Number.isFinite(e.blur)?e.blur:0,opacity:Number.isFinite(e.opacity)?e.opacity:1})},blur:function(e){var t=Number.isFinite(e.x)?e.x:2;return no('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(e.y)?[t,e.y]:t})},dropShadow:function(e){var t="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return no(t)({dx:e.dx||0,dy:e.dy||0,opacity:Number.isFinite(e.opacity)?e.opacity:1,color:e.color||"black",blur:Number.isFinite(e.blur)?e.blur:4})},grayscale:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return no('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},sepia:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return no('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},saturate:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return no('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-t})},hueRotate:function(e){return no('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:e.angle||0})},invert:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return no('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:1-t})},brightness:function(e){return no('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(e.amount)?e.amount:1})},contrast:function(e){var t=Number.isFinite(e.amount)?e.amount:1;return no('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:t,amount2:.5-t/2})}},no=function(e){var t=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(n){return n=n||{},e.replace(t,function(r){for(var s=Array.from(arguments).slice(1,4).find(function(u){return!!u}).split("."),a=n[s.shift()];void 0!==a&&s.length;)a=a[s.shift()];return void 0!==a?a:""})}},Ar={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function yS(e,t){const n=new ze(e);switch(t){case void 0:throw new Error("Position required");case Ar.LEFT:case"leftMiddle":return n.leftMiddle();case Ar.RIGHT:case"rightMiddle":return n.rightMiddle();case Ar.TOP:case"topMiddle":return n.topMiddle();case Ar.BOTTOM:case"bottomMiddle":return n.bottomMiddle();case Ar.TOP_LEFT:case"topLeft":case"origin":return n.topLeft();case Ar.TOP_RIGHT:case"topRight":return n.topRight();case Ar.BOTTOM_LEFT:case"bottomLeft":return n.bottomLeft();case Ar.BOTTOM_RIGHT:case"bottomRight":case"corner":return n.bottomRight();case Ar.CENTER:return n.center();default:throw new Error(`Unknown position: ${t}`)}}function wS(e){e=bf(e);const t=vn(e).reduce(function(n,r){return n[r.id]=r.clone(),n},{});return vn(e).forEach(function(n){const r=t[n.id];if(r.isLink()){const s=r.source(),a=r.target();s.id&&t[s.id]&&r.prop("source/id",t[s.id].id),a.id&&t[a.id]&&r.prop("target/id",t[a.id].id)}const i=n.get("parent");i&&t[i]&&r.set("parent",t[i].id);const o=vn(n.get("embeds")).reduce(function(s,a){return t[a]&&s.push(t[a].id),s},[]);sa(o)||r.set("embeds",o)}),t}const aa={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},rj=Object.keys(aa).map(e=>aa[e]).join(""),yy="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",ij=/\s/g,bS=new RegExp(`^(${yy}\\*)?([${rj}])(/${yy})?([-+]{1,2}${yy})?$`,"g");function ES(e){throw new Error(`Invalid calc() expression: ${e}`)}function oj(e,t){const n=bS.exec(e.replace(ij,""));n||ES(e),bS.lastIndex=0;const[,r,i,o,s]=n,{x:a,y:u,width:c,height:d}=t;let f=0;switch(i){case aa.width:f=c;break;case aa.height:f=d;break;case aa.x:f=a;break;case aa.y:f=u;break;case aa.minimum:f=Math.min(d,c);break;case aa.maximum:f=Math.max(d,c);break;case aa.diagonal:f=Math.sqrt(d*d+c*c)}return r&&(f*=parseFloat(r)),o&&(f/=parseFloat(o.slice(1))),s&&(f+=function sj(e){if(!e)return 0;const[t]=e;switch(t){case"+":return parseFloat(e.substr(1));case"-":return-parseFloat(e.substr(1))}return parseFloat(e)}(s)),f}function es(e){return"string"==typeof e&&e.includes("calc")}const DS="calc(",_S=DS.length;function ts(e,t){let n=e,r=0;for(;;){let i=n.indexOf(DS,r);if(-1===i)return n;let o=i+_S,s=1;e:for(;;){switch(n[o]){case"(":s++;break;case")":if(s--,0===s)break e;break;case void 0:ES(n)}o++}let a=n.slice(i+_S,o);es(a)&&(a=ts(a,t));const u=String(oj(a,t));n=n.slice(0,i)+u+n.slice(o+1),r=i+u.length}}const aj=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"].reduce((e,t)=>(e[t]=!0,e),{}),uj={qualify:function(e){return Lr(e)},set:function(e,t,n){Object.keys(e).forEach(function(r){if(aj[r]&&r in n){const i=e[r];"SELECT"===n.tagName&&Array.isArray(i)?Array.from(n.options).forEach(function(o,s){o.selected=i.includes(o.value)}):n[r]=i}})}};function La(e,t){return function(n,r){var i=Ti(n);n=parseFloat(n),i&&(n/=100);var o={};if(isFinite(n)){var s=i||n>=0&&n<=1?n*r[t]:Math.max(n+r[t],0);o[e]=s}return o}}function Zh(e,t,n){return function(r,i){var s,o=Ti(r);if(r=parseFloat(r),o&&(r/=100),isFinite(r)){var a=i[n]();s=o||r>0&&r<1?a[e]+i[t]*r:a[e]+r}var u=W();return u[e]=s||0,u}}function CS(e,t,n){return function(r,i){var o;o="middle"===r?i[t]/2:r===n?i[t]:isFinite(r)?r>-1&&r<1?-i[t]*r:-r:Ti(r)?i[t]*parseFloat(r)/100:0;var s=W();return s[e]=-(i[e]+o),s}}function TS(e,t){var n="joint-shape",r=t&&t.resetOffset;return function(i,o,s){var a=Mn(s),u=a.data(n);if(!u||u.value!==i){var c=e(i);u={value:i,shape:c,shapeBBox:c.bbox()},a.data(n,u)}var d=u.shape.clone(),f=u.shapeBBox.clone(),p=f.origin(),m=o.origin();f.x=m.x,f.y=m.y;var b=o.maxRectScaleToFit(f,m);return d.scale(0===f.width||0===o.width?1:b.sx,0===f.height||0===o.height?1:b.sy,p),r&&d.translate(-p.x,-p.y),d}}function xS(e){var n=TS(function t(r){return new ut(De.normalizePathData(r))},e);return function(r,i,o){return{d:n(r,i,o).serialize()}}}function SS(e){var t=TS(tr,e);return function(n,r,i){return{points:t(n,r,i).serialize()}}}function Yh(e,t){var n=new W(1,0);return function(r){var i,o,s=this[e](r);return s?(o=t.rotate?s.vector().vectorAngle(n):0,i=s.start):(i=this.path.start,o=0),0===o?{transform:"translate("+i.x+","+i.y+")"}:{transform:"translate("+i.x+","+i.y+") rotate("+o+")"}}}function IS(e){return function(n,r,i){const o=De(i);o.attr(e)!==n&&o.attr(e,n)}}function Yc(e,t,n){return void 0!==n.text}function xf(){return this.model.isLink()}function wy(e){var t={},n=e.stroke;"string"==typeof n&&(t.stroke=n,t.fill=n);var r=e.strokeOpacity;return void 0===r&&(r=e["stroke-opacity"]),void 0===r&&(r=e.opacity),void 0!==r&&(t["stroke-opacity"]=r,t["fill-opacity"]=r),t}function AS(e){const{paper:t}=this;return`url(#${"pattern"===e.type?t.definePattern(e):t.defineGradient(e)})`}const Qt={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:IS("href")},xlinkHref:{set:IS("xlink:href")},filter:{qualify:Lr,set:function(e){return"url(#"+this.paper.defineFilter(e)+")"}},fill:{qualify:Lr,set:AS},stroke:{qualify:Lr,set:AS},sourceMarker:{qualify:Lr,set:function(e,t,n,r){return e=Tt(wy(r),e),{"marker-start":"url(#"+this.paper.defineMarker(e)+")"}}},targetMarker:{qualify:Lr,set:function(e,t,n,r){return e=Tt(wy(r),{transform:"rotate(180)"},e),{"marker-end":"url(#"+this.paper.defineMarker(e)+")"}}},vertexMarker:{qualify:Lr,set:function(e,t,n,r){return e=Tt(wy(r),e),{"marker-mid":"url(#"+this.paper.defineMarker(e)+")"}}},text:{qualify:function(e,t,n){return!n.textWrap||!Lr(n.textWrap)},set:function(e,t,n,r){const i=Mn(n),o="joint-text",s=i.data(o),{lineHeight:a,annotations:u,textVerticalAnchor:c,eol:d,displayEmpty:f}=r;let p=r.textPath,m=r.x;es(m)&&(m=ts(m,t));let b=r["font-size"]||r.fontSize;es(b)&&(b=ts(b,t));const D=JSON.stringify([e,a,u,c,d,f,p,m,b]);if(void 0===s||s!==D){if(b&&n.setAttribute("font-size",b),In(p)){const x=p.selector;if("string"==typeof x){const[P]=this.findBySelector(x);P instanceof SVGPathElement&&(p=Tt({"xlink:href":"#"+P.id},p))}}De(n).text(""+e,{lineHeight:a,annotations:u,textPath:p,x:m,textVerticalAnchor:c,eol:d,displayEmpty:f}),i.data(o,D)}}},textWrap:{qualify:Lr,set:function(e,t,n,r){var i={},o=e.width||0;i.width=Ti(o)?t.width*parseFloat(o)/100:es(o)?Number(ts(o,t)):null===e.width?1/0:o<=0?t.width+o:o;var s=e.height||0;Ti(s)?i.height=t.height*parseFloat(s)/100:es(s)?i.height=Number(ts(s,t)):null===e.height||(i.height=s<=0?t.height+s:s);var a,u=e.text;if(void 0===u&&(u=r.text),void 0!==u){const d=r["font-size"]||r.fontSize;a=(e.breakText||QH)(""+u,i,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":es(d)?ts(d,t):d,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight,"letter-spacing":"letter-spacing"in r?r["letter-spacing"]:r.letterSpacing},{svgDocument:this.paper.svg,ellipsis:e.ellipsis,hyphen:e.hyphen,separator:e.separator,maxLineCount:e.maxLineCount,preserveSpaces:e.preserveSpaces})}else a="";Qt.text.set.call(this,a,t,n,r)}},title:{qualify:function(e,t){return t instanceof SVGElement},set:function(e,t,n){var r=Mn(n),i="joint-title",o=r.data(i);if(void 0===o||o!==e){if(r.data(i,e),"title"===n.tagName)return void(n.textContent=e);var s=n.firstElementChild;if(s&&"title"===s.tagName)s.textContent=e;else{var a=document.createElementNS(n.namespaceURI,"title");a.textContent=e,n.insertBefore(a,s)}}}},lineHeight:{qualify:Yc},textVerticalAnchor:{qualify:Yc},textPath:{qualify:Yc},annotations:{qualify:Yc},eol:{qualify:Yc},displayEmpty:{qualify:Yc},port:{set:function(e){return null===e||void 0===e.id?e:e.id}},style:{qualify:Lr,set:function(e,t,n){Mn(n).css(e)}},html:{set:function(e,t,n){Mn(n).html(e+"")}},props:uj,ref:{},refX:{position:Zh("x","width","origin")},refY:{position:Zh("y","height","origin")},refDx:{position:Zh("x","width","corner")},refDy:{position:Zh("y","height","corner")},refWidth:{set:La("width","width")},refHeight:{set:La("height","height")},refRx:{set:La("rx","width")},refRy:{set:La("ry","height")},refRInscribed:{set:function(e){var t=La("r","width"),n=La("r","height");return function(r,i){return(i.height>i.width?t:n)(r,i)}}()},refRCircumscribed:{set:function(e,t){var n=Ti(e);e=parseFloat(e),n&&(e/=100);var i,r=Math.sqrt(t.height*t.height+t.width*t.width);return isFinite(e)&&(i=n||e>=0&&e<=1?e*r:Math.max(e+r,0)),{r:i}}},refCx:{set:La("cx","width")},refCy:{set:La("cy","height")},xAlignment:{offset:CS("x","width","right")},yAlignment:{offset:CS("y","height","bottom")},resetOffset:{offset:function(e,t){return e?{x:-t.x,y:-t.y}:{x:0,y:0}}},refDResetOffset:{set:xS({resetOffset:!0})},refDKeepOffset:{set:xS({resetOffset:!1})},refPointsResetOffset:{set:SS({resetOffset:!0})},refPointsKeepOffset:{set:SS({resetOffset:!1})},connection:{qualify:xf,set:function({stubs:e=0}){let t;if(isFinite(e)&&0!==e){let n;n=e<0?(this.getConnectionLength()+e)/2:e;const r=this.getConnection(),i=this.getConnectionSubdivisions(),o=r.divideAtLength(n,{segmentSubdivisions:i}),s=r.divideAtLength(-n,{segmentSubdivisions:i});o&&s&&(t=`${o[0].serialize()} ${s[1].serialize()}`)}return{d:t||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:xf,set:Yh("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:xf,set:Yh("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:xf,set:Yh("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:xf,set:Yh("getTangentAtRatio",{rotate:!1})}};Qt["xlink:href"]=Qt.xlinkHref,["transform","d","points","cx","cy","x1","x2","y1","y2","x","y","dx","dy"].forEach(e=>{Qt[e]={qualify:es,set:function(n,r){return{[e]:ts(n,r)}}}}),["width","height","r","rx","ry","font-size","stroke-width"].forEach(e=>{Qt[e]={qualify:es,set:function(n,r){return{[e]:Math.max(0,ts(n,r))}}}}),Qt.refR=Qt.refRInscribed,Qt.refD=Qt.refDResetOffset,Qt.refPoints=Qt.refPointsResetOffset,Qt.atConnectionLength=Qt.atConnectionLengthKeepGradient,Qt.atConnectionRatio=Qt.atConnectionRatioKeepGradient,Qt.fontSize=Qt["font-size"],Qt.strokeWidth=Qt["stroke-width"],Qt.refX2=Qt.refX,Qt.refY2=Qt.refY,Qt.refWidth2=Qt.refWidth,Qt.refHeight2=Qt.refHeight,Qt["ref-x"]=Qt.refX,Qt["ref-y"]=Qt.refY,Qt["ref-dy"]=Qt.refDy,Qt["ref-dx"]=Qt.refDx,Qt["ref-width"]=Qt.refWidth,Qt["ref-height"]=Qt.refHeight,Qt["x-alignment"]=Qt.xAlignment,Qt["y-alignment"]=Qt.yAlignment;const MS=Qt,zs=Bi.Model.extend({constructor:function(e,t){var n,r=e||{};"function"==typeof this.preinitialize&&this.preinitialize.apply(this,arguments),this.cid=((e="")=>`${e}`+ ++CH)("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(r=this.parse(r,t)||{}),(n=Fr(this,"defaults"))&&(r=ni({},n,r)),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,t,n){throw new Error("Must define a translate() method.")},toJSON:function(){const t=Fr(this.constructor.prototype,"defaults").attrs||{},r={};Ko(this.attributes.attrs,function(o,s){const a=t[s];Ko(o,function(u,c){In(u)&&!Array.isArray(u)?Ko(u,function(d,f){(!a||!a[c]||!qc(a[c][f],d))&&(r[s]=r[s]||{},(r[s][c]||(r[s][c]={}))[f]=d)}):(!a||!qc(a[c],u))&&(r[s]=r[s]||{},r[s][c]=u)})});const i=Qo(Ef(this.attributes,"attrs"));return i.attrs=r,i},initialize:function(e){const t=this.getIdAttribute();(!e||void 0===e[t])&&this.set(t,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},processPorts:function(){var e=this.ports,t={};Ko(this.get("attrs"),function(o,s){o&&o.port&&(void 0!==o.port.id?t[o.port.id]=o.port:t[o.port]={id:o.port})});var n={};Ko(e,function(o,s){t[s]||(n[s]=!0)}),this.graph&&!sa(n)&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(o){n[o.get("target").port]&&o.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(o){n[o.get("source").port]&&o.remove()})),this.ports=t},remove:function(e={}){const{graph:t,collection:n}=this;if(!t)return n&&n.remove(this,e),this;t.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,e);const i=this.getEmbeddedCells();for(let o=0,s=i.length;o<s;o++){const a=i[o];a&&a.remove(e)}return this.trigger("remove",this,t.attributes.cells,e),t.stopBatch("remove"),this},toFront:function(e){var t=this.graph;if(t){let n;(e=Xo(e||{},{foregroundEmbeds:!0})).deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst,sortSiblings:e.foregroundEmbeds}),n.unshift(this)):n=[this];const r=e.foregroundEmbeds?n:Kv(n,u=>u.z());let o=t.maxZIndex()-n.length+1;const s=t.get("cells");let a=s.indexOf(r[0])!==s.length-n.length;a||(a=r.some(function(u,c){return u.z()!==o+c})),a&&(this.startBatch("to-front"),o+=n.length,r.forEach(function(u,c){u.set("z",o+c,e)}),this.stopBatch("to-front"))}return this},toBack:function(e){var t=this.graph;if(t){let r;(e=Xo(e||{},{foregroundEmbeds:!0})).deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==e.breadthFirst,sortSiblings:e.foregroundEmbeds}),r.unshift(this)):r=[this];const i=e.foregroundEmbeds?r:Kv(r,a=>a.z());let o=t.minZIndex(),s=0!==t.get("cells").indexOf(i[0]);s||(s=i.some(function(a,u){return a.z()!==o+u})),s&&(this.startBatch("to-back"),o-=r.length,i.forEach(function(a,u){a.set("z",o+u,e)}),this.stopBatch("to-back"))}return this},parent:function(e,t){return void 0===e?this.get("parent"):this.set("parent",e,t)},embed:function(e,t){const n=Array.isArray(e)?e:[e];if(!this.canEmbed(n))throw new Error("Recursive embedding not allowed.");if(n.some(r=>r.isEmbedded()&&this.id!==r.parent()))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(n,t),this},unembed:function(e,t){const n=Array.isArray(e)?e:[e];return this._unembedCells(n,t),this},canEmbed:function(e){return(Array.isArray(e)?e:[e]).every(n=>this!==n&&!this.isEmbeddedIn(n))},_embedCells:function(e,t){const n="embed";this.startBatch(n);const r=Tt([],this.get("embeds"));e.forEach(i=>{r[i.isLink()?"unshift":"push"](i.id),i.parent(this.id,t)}),this.set("embeds",bf(r),t),this.stopBatch(n)},_unembedCells:function(e,t){const n="unembed";this.startBatch(n),e.forEach(r=>r.unset("parent",t)),this.set("embeds",Px(this.get("embeds"),...e.map(r=>r.id)),t),this.stopBatch(n)},getParentCell:function(){var e=this.parent(),t=this.graph;return e&&t&&t.getCell(e)||null},getAncestors:function(){var e=[];if(!this.graph)return e;for(var t=this.getParentCell();t;)e.push(t),t=t.getParentCell();return e},getEmbeddedCells:function(e){if(!this.graph)return[];if((e=e||{}).deep)return e.breadthFirst?this._getEmbeddedCellsBfs(e.sortSiblings):this._getEmbeddedCellsDfs(e.sortSiblings);const t=this.get("embeds");if(sa(t))return[];let n=t.map(this.graph.getCell,this.graph);return e.sortSiblings&&(n=Kv(n,r=>r.z())),n},_getEmbeddedCellsBfs:function(e){const t=[],n=[];for(n.push(this);n.length>0;){const r=n.shift();t.push(r);const i=r.getEmbeddedCells({sortSiblings:e});n.push(...i)}return t.shift(),t},_getEmbeddedCellsDfs:function(e){const t=[],n=[];for(n.push(this);n.length>0;){const r=n.pop();t.push(r);const i=r.getEmbeddedCells({sortSiblings:e});for(let o=i.length-1;o>=0;--o)n.push(i[o])}return t.shift(),t},isEmbeddedIn:function(e,t){var n=Hi(e)?e:e.id,r=this.parent();if(t=Tt({deep:!0},t),this.graph&&t.deep){for(;r;){if(r===n)return!0;r=this.graph.getCell(r).parent()}return!1}return r===n},isEmbedded:function(){return!!this.parent()},clone:function(e){if((e=e||{}).deep)return vn(wS([this].concat(this.getEmbeddedCells({deep:!0}))));var t=Bi.Model.prototype.clone.apply(this,arguments);return t.set(this.getIdAttribute(),this.generateId()),t.unset("embeds"),t.unset("parent"),t},prop:function(e,t,n){var i=Hi(e);if(i||Array.isArray(e)){if(arguments.length>1){var o,s;i?s=(o=e).split("/"):(o=e.join("/"),s=e.slice());var a=s[0],u=s.length;const Y=n||{};Y.propertyPath=o,Y.propertyValue=t,Y.propertyPathArray=s,"rewrite"in Y||(Y.rewrite=!1);for(var c={},d=c,f=a,p=1;p<u;p++){var m=s[p],b=Number.isFinite(i?Number(m):m);d=d[f]=b?[]:{},f=m}c=pS(c,s,t,"/");var D=ni({},this.attributes);Y.rewrite&&gS(D,o,"/");var x=ni(D,c);return this.set(a,x[a],Y)}return Cf(this.attributes,e,"/")}const P=t||{};P.propertyPath=null,P.propertyValue=e,P.propertyPathArray=[],"rewrite"in P||(P.rewrite=!1);const O={};for(const Y in e){const{changedValue:ee}=ni({},{changedValue:this.attributes[Y]},{changedValue:e[Y]});O[Y]=ee}return this.set(O,P)},removeProp:function(e,t){t=t||{};var n=Array.isArray(e)?e:e.split("/"),r=n[0];if("attrs"===r&&(t.dirty=!0),1===n.length)return this.unset(e,t);var i=n.slice(1),o=this.get(r);return null==o?this:(o=Qo(o),gS(o,i,"/"),this.set(r,o,t))},attr:function(e,t,n){var r=Array.from(arguments);return 0===r.length?this.get("attrs"):(r[0]=Array.isArray(e)?["attrs"].concat(e):Hi(e)?"attrs/"+e:{attrs:e},this.prop.apply(this,r))},removeAttr:function(e,t){return Array.isArray(e)?this.removeProp(["attrs"].concat(e)):this.removeProp("attrs/"+e,t)},transition:function(e,t,n,r){r=r||"/",n=Tt({duration:100,delay:10,timingFunction:tj.linear,valueFunction:vS.number},n);var s,o=0,a=function(f){var p,m,b;(m=(f-=o=o||f)/n.duration)<1?this._transitionIds[e]=p=my(a):(m=1,delete this._transitionIds[e]),b=s(n.timingFunction(m)),n.transitionId=p,this.prop(e,b,n),p||this.trigger("transition:end",this,e)}.bind(this);const{_scheduledTransitionIds:u}=this;let c;return c=setTimeout(f=>{u[e]&&(u[e]=Px(u[e],c),0===u[e].length&&delete u[e]),this.stopPendingTransitions(e,r),s=n.valueFunction(Cf(this.attributes,e,r),t),this._transitionIds[e]=my(f),this.trigger("transition:start",this,e)},n.delay,a),u[e]||(u[e]=[]),u[e].push(c),c},getTransitions:function(){return Jv(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(e,t="/"){const{_scheduledTransitionIds:n={}}=this;let r=Object.keys(n);if(e){const i=e.split(t);r=r.filter(o=>qc(i,o.split(t).slice(0,i.length)))}return r.forEach(i=>{n[i].forEach(s=>clearTimeout(s)),delete n[i]}),this},stopPendingTransitions(e,t="/"){const{_transitionIds:n={}}=this;let r=Object.keys(n);if(e){const i=e.split(t);r=r.filter(o=>qc(i,o.split(t).slice(0,i.length)))}r.forEach(i=>{vy(n[i]),delete n[i],this.trigger("transition:end",this,i)})},stopTransitions:function(e,t="/"){return this.stopScheduledTransitions(e,t),this.stopPendingTransitions(e,t),this},addTo:function(e,t){return e.addCell(this,t),this},findView:function(e){return e.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(e,t){return this.graph&&this.graph.startBatch(e,Tt({},t,{cell:this})),this},stopBatch:function(e,t){return this.graph&&this.graph.stopBatch(e,Tt({},t,{cell:this})),this},getChangeFlag:function(e){var t=0;if(!e)return t;for(var n in e)!e.hasOwnProperty(n)||!this.hasChanged(n)||(t|=e[n]);return t},angle:function(){return 0},position:function(){return new W(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new W},getBBox:function(){return new ze(0,0,0,0)},getPointRotatedAroundCenter(e,t,n){const r=new W(t,n);return e&&r.rotate(this.getBBox().center(),e),r},getAbsolutePointFromRelative(e,t){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,t))},getRelativePointFromAbsolute(e,t){return this.getPointRotatedAroundCenter(this.angle(),e,t).difference(this.position())}},{getAttributeDefinition:function(e){var t=this.attributes;return t&&t[e]||MS[e]},define:function(e,t,n,r){n=Tt({defaults:Oh({type:e},t,this.prototype.defaults)},n);var i=this.extend(n,r);return typeof joint<"u"&&Oa(joint,"shapes")&&pS(joint.shapes,e,i,"."),i}}),Xc=zs.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(e){return this.set({source:{x:0,y:0},target:{x:0,y:0}},e)},source:function(e,t,n){return void 0===e?Us(this.get("source")):e instanceof zs?((r=Us(t)||{}).id=e.id,this.set("source",r,n)):Lr(e)?this.set("source",r=e,t):((r=Us(t)||{}).x=e.x,r.y=e.y,this.set("source",r,n));var r},target:function(e,t,n){return void 0===e?Us(this.get("target")):e instanceof zs?((r=Us(t)||{}).id=e.id,this.set("target",r,n)):Lr(e)?this.set("target",r=e,t):((r=Us(t)||{}).x=e.x,r.y=e.y,this.set("target",r,n));var r},router:function(e,t,n){if(void 0===e){var r=this.get("router");return r?"object"==typeof r?Us(r):r:this.get("manhattan")?{name:"orthogonal"}:null}var i="object"==typeof e||"function"==typeof e;return this.set("router",i?e:{name:e,args:t},i?t:n)},connector:function(e,t,n){if(void 0===e){var r=this.get("connector");return r?"object"==typeof r?Us(r):r:this.get("smooth")?{name:"smooth"}:null}var i="object"==typeof e||"function"==typeof e;return this.set("connector",i?e:{name:e,args:t},i?t:n)},label:function(e,t,n){var r=this.labels();return(e=isFinite(e)&&null!==e?0|e:0)<0&&(e=r.length+e),arguments.length<=1?this.prop(["labels",e]):this.prop(["labels",e],t,n)},labels:function(e,t){return 0===arguments.length?(e=this.get("labels"),Array.isArray(e)?e.slice():[]):(Array.isArray(e)||(e=[]),this.set("labels",e,t))},hasLabels:function(){const{labels:e}=this.attributes;return Array.isArray(e)&&e.length>0},insertLabel:function(e,t,n){if(!t)throw new Error("dia.Link: no label provided");var r=this.labels(),i=r.length;return(e=isFinite(e)&&null!==e?0|e:i)<0&&(e=i+e+1),r.splice(e,0,t),this.labels(r,n)},appendLabel:function(e,t){return this.insertLabel(-1,e,t)},removeLabel:function(e,t){var n=this.labels();return e=isFinite(e)&&null!==e?0|e:-1,n.splice(e,1),this.labels(n,t)},vertex:function(e,t,n){var r=this.vertices();if((e=isFinite(e)&&null!==e?0|e:0)<0&&(e=r.length+e),arguments.length<=1)return this.prop(["vertices",e]);var i=this._normalizeVertex(t);return this.prop(["vertices",e],i,n)},vertices:function(e,t){if(0===arguments.length)return e=this.get("vertices"),Array.isArray(e)?e.slice():[];Array.isArray(e)||(e=[]);for(var n=[],r=0;r<e.length;r++){var o=this._normalizeVertex(e[r]);n.push(o)}return this.set("vertices",n,t)},insertVertex:function(e,t,n){if(!t)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),i=r.length;(e=isFinite(e)&&null!==e?0|e:i)<0&&(e=i+e+1);var o=this._normalizeVertex(t);return r.splice(e,0,o),this.vertices(r,n)},removeVertex:function(e,t){var n=this.vertices();return e=isFinite(e)&&null!==e?0|e:-1,n.splice(e,1),this.vertices(n,t)},_normalizeVertex:function(e){return Lr(e)?e:{x:e.x,y:e.y}},translate:function(e,t,n){return(n=n||{}).translateBy=n.translateBy||this.id,n.tx=e,n.ty=t,this.applyToPoints(function(r){return{x:(r.x||0)+e,y:(r.y||0)+t}},n)},scale:function(e,t,n,r){return this.applyToPoints(function(i){return W(i).scale(e,t,n).toJSON()},r)},applyToPoints:function(e,t){if(!sr(e))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var n={},{source:r,target:i}=this.attributes;r.id||(n.source=e(r)),i.id||(n.target=e(i));var o=this.vertices();return o.length>0&&(n.vertices=o.map(e)),this.set(n,t)},getSourcePoint:function(){var e=this.getSourceCell();return e?e.getPointFromConnectedLink(this,"source"):new W(this.source())},getTargetPoint:function(){var e=this.getTargetCell();return e?e.getPointFromConnectedLink(this,"target"):new W(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const e=[this.getSourcePoint(),...this.vertices().map(W),this.getTargetPoint()];return new tr(e)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(e){var t;if(this.graph){var n=this.getSourceElement(),r=this.getTargetElement(),i=this.getParentCell();n&&r&&(t=n===r||n.isEmbeddedIn(r)?r:r.isEmbeddedIn(n)?n:this.graph.getCommonAncestor(n,r)),i&&(!t||t.id!==i.id)&&i.unembed(this,e),t&&t.embed(this,e)}return t},hasLoop:function(e){e=e||{};var{source:t,target:n}=this.attributes,r=t.id,i=n.id;if(!r||!i)return!1;var o=r===i;if(!o&&e.deep&&this.graph){var s=this.getSourceCell(),a=this.getTargetCell();o=s.isEmbeddedIn(a)||a.isEmbeddedIn(s)}return o},getSourceCell:function(){const{graph:e,attributes:t}=this;var n=t.source;return n&&n.id&&e&&e.getCell(n.id)||null},getSourceElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getSourceCell()}while(e&&e.isLink());return e},getTargetCell:function(){const{graph:e,attributes:t}=this;var n=t.target;return n&&n.id&&e&&e.getCell(n.id)||null},getTargetElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getTargetCell()}while(e&&e.isLink());return e},getRelationshipAncestor:function(){var e;if(this.graph){var t=[this,this.getSourceElement(),this.getTargetElement()].filter(function(n){return!!n});e=this.graph.getCommonAncestor.apply(this.graph,t)}return e||null},isRelationshipEmbeddedIn:function(e){var t=Hi(e)||vo(e)?e:e.id,n=this.getRelationshipAncestor();return!!n&&(n.id===t||n.isEmbeddedIn(t))},_getDefaultLabel:function(){var e=this.get("defaultLabel")||this.defaultLabel||{},t={};return t.markup=e.markup||this.get("labelMarkup")||this.labelMarkup,t.position=e.position,t.attrs=e.attrs,t.size=e.size,t}},{endsEqual:function(e,t){return e.id===t.id&&(e.port===t.port||!e.port&&!t.port)}});function PS(e,t,n){var r=e.toJSON();return r.angle=t||0,Xo({},n,r)}function Sf(e,t,n,r){return e.map(function(i,o,s){var a=this.pointAt((o+.5)/s.length);return(i.dx||i.dy)&&a.offset(i.dx||0,i.dy||0),PS(a.round(),0,by(r,i))},bu(t,n))}function NS(e,t,n,r){var i=t.center(),o=t.width/t.height,s=t.topMiddle(),a=to.fromRect(t);return e.map(function(u,c,d){var f=n+r(c,d.length),p=s.clone().rotate(i,-f).scale(o,1,i),m=u.compensateRotation?-a.tangentTheta(p):0;return(u.dx||u.dy)&&p.offset(u.dx||0,u.dy||0),u.dr&&p.move(i,u.dr),PS(p.round(),m,by(t,u))})}function by(e,t){let{x:n,y:r,angle:i}=t;return Ti(n)?n=parseFloat(n)/100*e.width:es(n)&&(n=Number(ts(n,e))),Ti(r)?r=parseFloat(r)/100*e.height:es(r)&&(r=Number(ts(r,e))),{x:n,y:r,angle:i}}function Ey(e,t){const{x:n,y:r}=by(e,t);return new W(n||0,r||0)}const cj=function(e,t){return e.map(n=>{const r=Ey(t,n).round().toJSON();return r.angle=n.angle||0,r})},lj=function(e,t,n){return n.fn(e,t,n)},fj=function(e,t,n){return Sf(e,Ey(t,n.start||t.origin()),Ey(t,n.end||t.corner()),t)},dj=function(e,t,n){return Sf(e,t.origin(),t.bottomLeft(),t)},hj=function(e,t,n){return Sf(e,t.topRight(),t.corner(),t)},pj=function(e,t,n){return Sf(e,t.origin(),t.topRight(),t)},gj=function(e,t,n){return Sf(e,t.bottomLeft(),t.corner(),t)},mj=function(e,t,n){var i=n.step||360/e.length;return NS(e,t,n.startAngle||0,function(o){return o*i})},vj=function(e,t,n){var i=n.step||20;return NS(e,t,n.startAngle||0,function(o,s){return(o+.5-s/2)*i})};function Fa(e,t){return Oh({},e,t,{x:0,y:0,angle:0,attrs:{}})}function OS(e){var t=e.center(),n=t.theta(e.origin()),r=t.theta(e.bottomLeft()),i=t.theta(e.corner());return[n,t.theta(e.topRight()),i,r]}function RS(e,t,n,r){r=Xo({},r,{offset:15});var o,s,a,u,i=t.center().theta(e),c=r.offset,d=0;const[f,p,m,b]=OS(t);i<p||i>m?(a=".3em",o=c,s=0,u="start"):i<f?(o=0,s=-c,n?(d=-90,u="start",a=".3em"):(u="middle",a="0")):i<b?(a=".3em",o=-c,s=0,u="end"):(o=0,s=c,n?(d=90,u="start",a=".3em"):(u="middle",a=".6em"));var D=Math.round;return Fa(r,{x:D(o),y:D(s),angle:d,attrs:{labelText:{y:a,textAnchor:u}}})}function kS(e,t,n,r){r=Xo({},r,{offset:15});var o,s,a,u,i=t.center().theta(e),c=r.offset,d=0;const[f,p,m,b]=OS(t);i<p||i>m?(a=".3em",o=-c,s=0,u="end"):i<f?(o=0,s=c,n?(d=90,u="start",a=".3em"):(u="middle",a=".6em")):i<b?(a=".3em",o=c,s=0,u="start"):(o=0,s=-c,n?(d=-90,u="start",a=".3em"):(u="middle",a="0"));var D=Math.round;return Fa(r,{x:D(o),y:D(s),angle:d,attrs:{labelText:{y:a,textAnchor:u}}})}function LS(e,t,n){n=Xo({},n,{offset:20});var u,r=Fh(0,0),i=-e.theta(r),o=i,s=e.clone().move(r,n.offset).difference(e).round(),a=".3em";(i+90)%180==0?(u=t?"end":"middle",!t&&-270===i&&(a="0em")):i>-270&&i<-90?(u="start",o=i-180):u="end";var c=Math.round;return Fa(n,{x:c(s.x),y:c(s.y),angle:t?o:0,attrs:{labelText:{y:a,textAnchor:u}}})}const yj=function(e,t,n){return Fa(n)},wj=function(e,t,n){return Fa(n,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},bj=function(e,t,n){return Fa(n,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},Ej=function(e,t,n){return Fa(n,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})},Dj=function(e,t,n){return Fa(n,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},_j=function(e,t,n){return RS(e,t,!0,n)},Cj=function(e,t,n){return RS(e,t,!1,n)},Tj=function(e,t,n){return kS(e,t,!0,n)},xj=function(e,t,n){return kS(e,t,!1,n)},Sj=function(e,t,n){return LS(e.difference(t.center()),!1,n)},Ij=function(e,t,n){return LS(e.difference(t.center()),!0,n)};var FS=function(e){var t=Qo(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=qn,this.portLabelLayoutNamespace=Si,this._init(t)};FS.prototype={getPorts:function(){return this.ports},getGroup:function(e){return this.groups[e]||{}},getPortsByGroup:function(e){return this.ports.filter(function(t){return t.group===e})},getGroupPortsMetrics:function(e,t){var n=this.getGroup(e),r=this.getPortsByGroup(e),i=n.position||{},o=i.name,s=this.portLayoutNamespace;s[o]||(o="left");var a=i.args||{},u=r.map(function(f){return f&&f.position&&f.position.args}),c=s[o](u,t,a),d={ports:r,result:[]};return vn(c).reduce(function(f,p,m){var b=f.ports[m];return f.result.push({portId:b.id,portTransformation:p,labelTransformation:this._getPortLabelLayout(b,W(p),t),portAttrs:b.attrs,portSize:b.size,labelSize:b.label.size}),f}.bind(this),d),d.result},_getPortLabelLayout:function(e,t,n){var r=this.portLabelLayoutNamespace,i=e.label.position.name||"left";return r[i]?r[i](t,n,e.label.position.args):null},_init:function(e){if(In(e.groups))for(var t=Object.keys(e.groups),n=0,r=t.length;n<r;n++){var i=t[n];this.groups[i]=this._evaluateGroup(e.groups[i])}for(var o=vn(e.items),s=0,a=o.length;s<a;s++)this.ports.push(this._evaluatePort(o[s]))},_evaluateGroup:function(e){return ni(e,{position:this._getPosition(e.position,!0),label:this._getLabel(e,!0)})},_evaluatePort:function(e){var t=Tt({},e),n=this.getGroup(e.group);return t.markup=t.markup||n.markup,t.attrs=ni({},n.attrs,t.attrs),t.position=this._createPositionNode(n,t),t.label=ni({},n.label,this._getLabel(t)),t.z=this._getZIndex(n,t),t.size=Tt({},n.size,t.size),t},_getZIndex:function(e,t){return vo(t.z)?t.z:vo(e.z)||"auto"===e.z?e.z:"auto"},_createPositionNode:function(e,t){return ni({name:"left",args:{}},e.position,{args:t.args})},_getPosition:function(e,t){var r,n={};sr(e)?(r="fn",n.fn=e):Hi(e)?r=e:void 0===e?r=t?"left":null:Array.isArray(e)?(r="absolute",n.x=e[0],n.y=e[1]):In(e)&&(r=e.name,Tt(n,e.args));var i={args:n};return r&&(i.name=r),i},_getLabel:function(e,t){var n=e.label||{},r=n;return r.position=this._getPosition(n.position,t),r}};const Aj={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var e=this.get("ports")||{},t={};vn(e.items).forEach(function(a){t[a.id]=!0});var n=this.previous("ports")||{},r={};vn(n.items).forEach(function(a){t[a.id]||(r[a.id]=!0)});var i=this.graph;i&&!sa(r)&&(i.getConnectedLinks(this,{inbound:!0}).forEach(function(a){r[a.get("target").port]&&a.remove()}),i.getConnectedLinks(this,{outbound:!0}).forEach(function(a){r[a.get("source").port]&&a.remove()}))},hasPorts:function(){var e=this.prop("ports/items");return Array.isArray(e)&&e.length>0},hasPort:function(e){return-1!==this.getPortIndex(e)},getPorts:function(){return Qo(this.prop("ports/items"))||[]},getGroupPorts:function(e){const t=vn(this.prop(["ports","items"])).filter(n=>n.group===e);return Qo(t)},getPort:function(e){return Qo(vn(this.prop("ports/items")).find(function(t){return t.id&&t.id===e}))},getPortsPositions:function(e){return this._portSettingsData.getGroupPortsMetrics(e,ze(this.size())).reduce(function(n,r){var i=r.portTransformation;return n[r.portId]={x:i.x,y:i.y,angle:i.angle},n},{})},getPortIndex:function(e){var t=In(e)?e.id:e;return this._isValidPortId(t)?vn(this.prop("ports/items")).findIndex(function(n){return n.id===t}):-1},addPort:function(e,t){if(!In(e)||Array.isArray(e))throw new Error("Element: addPort requires an object.");var n=Tt([],this.prop("ports/items"));return n.push(e),this.prop("ports/items",n,t),this},insertPort:function(e,t,n){const r="number"==typeof e?e:this.getPortIndex(e);if(!In(t)||Array.isArray(t))throw new Error("dia.Element: insertPort requires an object.");const i=Tt([],this.prop("ports/items"));return i.splice(r,0,t),this.prop("ports/items",i,n),this},portProp:function(e,t,n,r){var i=this.getPortIndex(e);if(-1===i)throw new Error("Element: unable to find port with id "+e);var o=Array.prototype.slice.call(arguments,1);return Array.isArray(t)?o[0]=["ports","items",i].concat(t):Hi(t)?o[0]=["ports/items/",i,"/",t].join(""):(o=["ports/items/"+i],Lr(t)&&(o.push(t),o.push(n))),this.prop.apply(this,o)},_validatePorts:function(){var e=this.get("ports")||{},t=[],n=vn((e=e||{}).items);return n.forEach(function(r){"object"!=typeof r&&t.push("Element: invalid port ",r),this._isValidPortId(r.id)||(r.id=this.generatePortId())},this),bf(n,"id").length!==n.length&&t.push("Element: found id duplicities in ports."),t},generatePortId:function(){return this.generateId()},_isValidPortId:function(e){return null!=e&&!In(e)},addPorts:function(e,t){return e.length&&this.prop("ports/items",Tt([],this.prop("ports/items")).concat(e),t),this},removePort:function(e,t){const n=t||{},r=this.getPortIndex(e);if(-1!==r){const i=Tt([],this.prop(["ports","items"]));i.splice(r,1),n.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],i,n),this.stopBatch("port-remove")}return this},removePorts:function(e,t){let n,r;if(Array.isArray(e)){if(n=t||{},0===e.length)return this.this;r=Tt([],this.prop(["ports","items"])).filter(function(o){return!e.some(function(s){const a=In(s)?s.id:s;return o.id===a})})}else n=e||{},r=[];return this.startBatch("port-remove"),n.rewrite=!0,this.prop(["ports","items"],r,n),this.stopBatch("port-remove"),this},_createPortData:function(){var t,e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));this._portSettingsData&&(t=this._portSettingsData.getPorts()),this._portSettingsData=new FS(this.get("ports"));var n=this._portSettingsData.getPorts();if(t){var r=n.filter(function(o){if(!t.find(function(s){return s.id===o.id}))return o}),i=t.filter(function(o){if(!n.find(function(s){return s.id===o.id}))return o});i.length>0&&this.trigger("ports:remove",this,i),r.length>0&&this.trigger("ports:add",this,r)}}},Mj={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var e=[],t=this._getContainerElement(),n=0,r=t.node.childNodes.length;n<r;n++)e.push(t.node.childNodes[n]);var i=((e,t)=>(t=Nh(t,2),function iH(e,t,n){return(Array.isArray(e)?nH:rH)(e,t,n,arguments.length<3,Xv)}(e,(n,r,i)=>(i=t(r),hasOwnProperty.call(n,i)?n[i].push(r):yu(n,i,[r]),n),{})))(this.model._portSettingsData.getPorts(),"z"),o="auto";vn(i[o]).forEach(function(d){var f=this._getPortElement(d);t.append(f),e.push(f)},this);for(var s=Object.keys(i),a=0;a<s.length;a++){var u=s[a];if(u!==o){var c=parseInt(u,10);this._appendPorts(i[u],c,e)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(e,t,n){var r=this._getContainerElement(),i=vn(e).map(this._getPortElement,this);n[t]||t<0?De(n[Math.max(t,0)]).before(i):r.append(i)},_getPortElement:function(e){return this._portElementsCache[e.id]?this._portElementsCache[e.id].portElement:this._createPortElement(e)},findPortNode:function(e,t){const n=this._portElementsCache[e];if(!n)return null;if(!t)return n.portContentElement.node;const r=n.portElement.node,i=n.portSelectors,[o=null]=this.findBySelector(t,r,i);return o},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){js(this._portElementsCache,"portElement.remove")},_createPortElement:function(e){let t,n,r,i;var o=De(this.portContainerMarkup).addClass("joint-port"),s=this._getPortMarkup(e);if(Array.isArray(s)){var a=this.parseDOMJSON(s,o.node),u=a.fragment;t=u.childNodes.length>1?De("g").append(u):De(u.firstChild),i=a.selectors}else t=De(s),Array.isArray(t)&&(t=De("g").append(t));if(!t)throw new Error("ElementView: Invalid port markup.");t.attr({port:e.id,"port-group":e.group});const c=this._getPortLabelMarkup(e.label);if(Array.isArray(c)){const{fragment:D,selectors:x}=this.parseDOMJSON(c,o.node),P=D.childNodes.length;P>0&&(r=x,n=1===P?De(D.firstChild):De("g").append(D))}else n=De(c),Array.isArray(n)&&(n=De("g").append(n));var d;if(i&&r){for(var f in r)if(i[f]&&f!==this.selector)throw new Error("ElementView: selectors within port must be unique.");d=Tt({},i,r)}else d=i||r||{};const p="portRoot",m="labelRoot",b="labelText";if(p in d||(d[p]=t.node),n){const D=n.node;if(m in d||(d[m]=D),!(b in d)){const x="TEXT"===n.tagName()?D:Array.from(D.querySelectorAll("text"));d[b]=x,r||(r={}),r[b]=x}}return o.append(t.addClass("joint-port-body")),n&&o.append(n.addClass("joint-port-label")),this._portElementsCache[e.id]={portElement:o,portLabelElement:n,portSelectors:d,portLabelSelectors:r,portContentElement:t,portContentSelectors:i},o},_updatePortGroup:function(e){for(var t=ze(this.model.size()),n=this.model._portSettingsData.getGroupPortsMetrics(e,t),r=0,i=n.length;r<i;r++){var o=n[r],a=this._portElementsCache[o.portId]||{},u=o.portTransformation,c=o.labelTransformation;c&&a.portLabelElement&&(this.updateDOMSubtreeAttributes(a.portLabelElement.node,c.attrs,{rootBBox:new ze(o.labelSize),selectors:a.portLabelSelectors}),this.applyPortTransform(a.portLabelElement,c,-u.angle||0)),this.updateDOMSubtreeAttributes(a.portElement.node,o.portAttrs,{rootBBox:new ze(o.portSize),selectors:a.portSelectors}),this.applyPortTransform(a.portElement,u)}},applyPortTransform:function(e,t,n){var r=De.createSVGMatrix().rotate(n||0).translate(t.x||0,t.y||0).rotate(t.angle||0);e.transform(r,{absolute:!0})},_getPortMarkup:function(e){return e.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(e){return e.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},ji=zs.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),zs.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(e,t,n){const r=vo(t);n=(r?n:e)||{};const{parentRelative:i,deep:o,restrictedArea:s}=n;let a;if(i){if(!this.graph)throw new Error("Element must be part of a graph.");const u=this.getParentCell();u&&!u.isLink()&&(a=u.get("position"))}if(r){if(a&&(e+=a.x,t+=a.y),o||s){const{x:u,y:c}=this.get("position");this.translate(e-u,t-c,n)}else this.set("position",{x:e,y:t},n);return this}{const u=W(this.get("position"));return i?u.difference(a):u}},translate:function(e,t,n){if(t=t||0,0===(e=e||0)&&0===t)return this;(n=n||{}).translateBy=n.translateBy||this.id;var r=this.get("position")||{x:0,y:0},i=n.restrictedArea;if(i&&n.translateBy===this.id)if("function"==typeof i){var o=i.call(this,r.x+e,r.y+t,n);e=o.x-r.x,t=o.y-r.y}else{var s=this.getBBox({deep:!0}),a=r.x-s.x,u=r.y-s.y,c=Math.max(i.x+a,Math.min(i.x+i.width+a-s.width,r.x+e)),d=Math.max(i.y+u,Math.min(i.y+i.height+u-s.height,r.y+t));e=c-r.x,t=d-r.y}var f={x:r.x+e,y:r.y+t};return n.tx=e,n.ty=t,n.transition?(In(n.transition)||(n.transition={}),this.transition("position",f,Tt({},n.transition,{valueFunction:vS.object})),js(this.getEmbeddedCells(),"translate",e,t,n)):(this.startBatch("translate",n),this.set("position",f,n),js(this.getEmbeddedCells(),"translate",e,t,n),this.stopBatch("translate",n)),this},size:function(e,t,n){var r=this.get("size");return void 0===e?{width:r.width,height:r.height}:(In(e)&&(n=t,t=vo(e.height)?e.height:r.height,e=vo(e.width)?e.width:r.width),this.resize(e,t,n))},resize:function(e,t,n){if(this.startBatch("resize",n=n||{}),n.direction){var r=this.get("size");switch(n.direction){case"left":case"right":t=r.height;break;case"top":case"bottom":e=r.width}var s,i=gs(this.get("angle")||0),o=this.getBBox();if(i){var a={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[n.direction];n.absolute&&(a+=Math.floor((i+45)/90),a%=4);var u=o[["bottomLeft","corner","topRight","origin"][a]](),c=W(u).rotate(o.center(),-i),d=Math.sqrt(e*e+t*t)/2,f=a*Math.PI/2;f+=Math.atan(a%2==0?t/e:e/t),f-=yo(i);var p=W.fromPolar(d,f,c);s=W(p).offset(e/-2,t/-2)}else switch(s=o.topLeft(),n.direction){case"top":case"top-right":s.offset(0,o.height-t);break;case"left":case"bottom-left":s.offset(o.width-e,0);break;case"top-left":s.offset(o.width-e,o.height-t)}this.set("size",{width:e,height:t},n),this.position(s.x,s.y,n)}else this.set("size",{width:e,height:t},n);return this.stopBatch("resize",n),this},scale:function(e,t,n,r){var i=this.getBBox().scale(e,t,n);return this.startBatch("scale",r),this.position(i.x,i.y,r),this.resize(i.width,i.height,r),this.stopBatch("scale"),this},fitEmbeds:function(e){return this.fitToChildren(e)},fitToChildren:function(e={}){const{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");const n=this.getEmbeddedCells().filter(r=>r.isElement());return 0===n.length||(this.startBatch("fit-embeds",e),e.deep&&js(n,"fitToChildren",e),this._fitToElements(Object.assign({elements:n},e)),this.stopBatch("fit-embeds")),this},fitParent:function(e={}){const{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");if(e.deep&&e.terminator&&(e.terminator===this||e.terminator===this.id))return this;const n=this.getParentCell();if(!n||!n.isElement())return this;const r=n.getEmbeddedCells().filter(i=>i.isElement());return 0===r.length||(this.startBatch("fit-parent",e),n._fitToElements(Object.assign({elements:r},e)),e.deep&&n.fitParent(e),this.stopBatch("fit-parent")),this},_fitToElements:function(e={}){const t=this.graph.getCellsBBox(e.elements);if(!t)return;const{expandOnly:n,shrinkOnly:r}=e;if(n&&r)return;let{x:i,y:o,width:s,height:a}=t;const{left:u,right:c,top:d,bottom:f}=ka(e.padding);i-=u,o-=d,s+=u+c,a+=f+d;let p=new ze(i,o,s,a);if(n)p=this.getBBox().union(p);else if(r){const m=this.getBBox().intersect(p);if(!m)return;p=m}this.set({position:{x:p.x,y:p.y},size:{width:p.width,height:p.height}},e)},rotate:function(e,t,n,r){if(n){var i=this.getBBox().center(),o=this.get("size"),s=this.get("position");i.rotate(n,this.get("angle")-e);var a=i.x-o.width/2-s.x,u=i.y-o.height/2-s.y;this.startBatch("rotate",{angle:e,absolute:t,origin:n}),this.position(s.x+a,s.y+u,r),this.rotate(e,t,null,r),this.stopBatch("rotate")}else this.set("angle",t?e:(this.get("angle")+e)%360,r);return this},angle:function(){return gs(this.get("angle")||0)},getBBox:function(e={}){const{graph:t,attributes:n}=this,{deep:r,rotate:i}=e;if(r&&t){const f=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return f.push(this),t.getCellsBBox(f,e)}const{angle:o=0,position:{x:s,y:a},size:{width:u,height:c}}=n,d=new ze(s,a,u,c);return i&&d.rotateAroundCenter(o),d},getPointFromConnectedLink:function(e,t){var n=this.getBBox(),r=n.center(),i=e.get(t);if(!i)return r;var o=i.port;if(!o||!this.hasPort(o))return r;var s=this.portProp(o,["group"]),a=this.getPortsPositions(s),u=new W(a[o]).offset(n.origin()),c=this.angle();return c&&u.rotate(r,-c),u}});Tt(ji.prototype,Aj);const Dy={cells:function(e){return function(){var t=Array.from(arguments),n=t.length,r=n>0&&t[0]||[],i=n>1&&t[n-1]||{};return Array.isArray(r)||(i instanceof zs?r=t:r instanceof zs&&(t.length>1&&t.pop(),r=t)),i instanceof zs&&(i={}),e.call(this,r,i)}}},Nj=Bi.Collection.extend({initialize:function(e,t){this.cellNamespace=t.cellNamespace?t.cellNamespace:typeof joint<"u"&&Oa(joint,"shapes")?joint.shapes:null,this.graph=t.graph},model:function(e,t){var n=t.collection,o=new("link"===e.type?Xc:Cf(n.cellNamespace,e.type,".")||ji)(e,t);return t.dry||(o.graph=n.graph),o},comparator:function(e){return e.get("z")||0}}),Xh=Bi.Model.extend({initialize:function(e,t){var n=new Nj([],{model:(t=t||{}).cellModel,cellNamespace:t.cellNamespace,graph:this});Bi.Model.prototype.set.call(this,"cells",n),n.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},n.on("add",this._restructureOnAdd,this),n.on("remove",this._restructureOnRemove,this),n.on("reset",this._restructureOnReset,this),n.on("change:source",this._restructureOnChangeSource,this),n.on("change:target",this._restructureOnChangeTarget,this),n.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var{source:t,target:n}=e.attributes;t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var{source:t,target:n}=e.attributes;t.id&&this._out[t.id]&&this._out[t.id][e.id]&&delete this._out[t.id][e.id],n.id&&this._in[n.id]&&this._in[n.id][e.id]&&delete this._in[n.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},e.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var t=e.previous("source");t.id&&this._out[t.id]&&delete this._out[t.id][e.id];var n=e.attributes.source;n.id&&((this._out[n.id]||(this._out[n.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var t=e.previous("target");t.id&&this._in[t.id]&&delete this._in[t.id][e.id];var n=e.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(){var e=Bi.Model.prototype.toJSON.apply(this,arguments);return e.cells=this.get("cells").toJSON(),e},fromJSON:function(e,t){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,t)},set:function(e,t,n){var r;return"object"==typeof e?(r=e,n=t):(r={})[e]=t,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,n),r=Ef(r,"cells")),Bi.Model.prototype.set.call(this,r,n)},clear:function(e){e=Tt({},e,{clear:!0});var t=this.get("cells");if(0===t.length)return this;this.startBatch("clear",e);var n=t.sortBy(function(r){return r.isLink()?1:2});do{n.shift().remove(e)}while(n.length>0);return this.stopBatch("clear"),this},_prepareCell:function(e,t){var n;if(e instanceof Bi.Model?(n=e.attributes,!e.graph&&(!t||!t.dry)&&(e.graph=this)):n=e,!Hi(n.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},minZIndex:function(){var e=this.get("cells").first();return e&&e.get("z")||0},maxZIndex:function(){var e=this.get("cells").last();return e&&e.get("z")||0},addCell:function(e,t){return Array.isArray(e)?this.addCells(e,t):(e instanceof Bi.Model?e.has("z")||e.set("z",this.maxZIndex()+1):void 0===e.z&&(e.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(e,t),t||{}),this)},addCells:function(e,t){return 0===e.length||(e=EH(e),t.maxPosition=t.position=e.length-1,this.startBatch("add",t),e.forEach(function(n){this.addCell(n,t),t.position--},this),this.stopBatch("add",t)),this},resetCells:function(e,t){var n=vn(e).map(function(r){return this._prepareCell(r,t)},this);return this.get("cells").reset(n,t),this},removeCells:function(e,t){return e.length&&(this.startBatch("remove"),js(e,"remove",t),this.stopBatch("remove")),this},_removeCell:function(e,t,n){(n=n||{}).clear||(n.disconnectLinks?this.disconnectLinks(e,n):this.removeLinks(e,n)),this.get("cells").remove(e,{silent:!0}),e.graph===this&&(e.graph=null)},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(e=>e.isElement())},getLinks:function(){return this.get("cells").filter(e=>e.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,t){var n=(t=t||{}).indirect,r=t.inbound,i=t.outbound;void 0===r&&void 0===i&&(r=i=!0);var o=[],s={};function a(f,p){if(Ko(f.getOutboundEdges(p.id),function(b,D){if(!s[D]){var x=f.getCell(D);o.push(x),s[D]=!0,n&&(r&&u(f,x),i&&a(f,x))}}.bind(f)),n&&p.isLink()){var m=p.getTargetCell();m&&m.isLink()&&(s[m.id]||(o.push(m),a(f,m)))}}function u(f,p){if(Ko(f.getInboundEdges(p.id),function(b,D){if(!s[D]){var x=f.getCell(D);o.push(x),s[D]=!0,n&&(r&&u(f,x),i&&a(f,x))}}.bind(f)),n&&p.isLink()){var m=p.getSourceCell();m&&m.isLink()&&(s[m.id]||(o.push(m),u(f,m)))}}if(i&&a(this,e),r&&u(this,e),t.deep){var c=e.getEmbeddedCells({deep:!0}),d={};c.forEach(function(f){f.isElement()&&(d[f.id]=!0)}),c.forEach(function(f){f.isLink()||(i&&Ko(this.getOutboundEdges(f.id),function(p,m){if(!s[m]){var b=this.getCell(m),{source:D,target:x}=b.attributes,P=D.id,O=x.id;if(!t.includeEnclosed&&P&&d[P]&&O&&d[O])return;o.push(this.getCell(m)),s[m]=!0}}.bind(this)),r&&Ko(this.getInboundEdges(f.id),function(p,m){if(!s[m]){var b=this.getCell(m),{source:D,target:x}=b.attributes,P=D.id,O=x.id;if(!t.includeEnclosed&&P&&d[P]&&O&&d[O])return;o.push(this.getCell(m)),s[m]=!0}}.bind(this)))},this)}return o},getNeighbors:function(e,t){t||(t={});var n=t.inbound,r=t.outbound;void 0===n&&void 0===r&&(n=r=!0);var i=this.getConnectedLinks(e,t).reduce(function(a,u){var{source:c,target:d}=u.attributes,f=u.hasLoop(t);if(n&&Oa(c,"id")&&!a[c.id]){var p=this.getCell(c.id);p.isElement()&&(f||p&&p!==e&&(!t.deep||!p.isEmbeddedIn(e)))&&(a[c.id]=p)}if(r&&Oa(d,"id")&&!a[d.id]){var m=this.getCell(d.id);m.isElement()&&(f||m&&m!==e&&(!t.deep||!m.isEmbeddedIn(e)))&&(a[d.id]=m)}return a}.bind(this),{});if(e.isLink()){if(n){var o=e.getSourceCell();o&&o.isElement()&&!i[o.id]&&(i[o.id]=o)}if(r){var s=e.getTargetCell();s&&s.isElement()&&!i[s.id]&&(i[s.id]=s)}}return vn(i)},getCommonAncestor:function(){var e=Array.from(arguments).map(function(n){for(var r=[],i=n.get("parent");i;)r.push(i),i=this.getCell(i).get("parent");return r},this);e=e.sort(function(n,r){return n.length-r.length});var t=vn(e.shift()).find(function(n){return e.every(function(r){return r.includes(n)})});return this.getCell(t)},getSuccessors:function(e,t){var n=[];return this.search(e,function(r){r!==e&&n.push(r)},Tt({},t=t||{},{outbound:!0})),n},cloneCells:wS,cloneSubgraph:function(e,t){var n=this.getSubgraph(e,t);return this.cloneCells(n)},getSubgraph:function(e,t){t=t||{};var n=[],r={},i=[],o=[];return vn(e).forEach(function(s){r[s.id]||(n.push(s),r[s.id]=s,s.isLink()?o.push(s):i.push(s)),t.deep&&s.getEmbeddedCells({deep:!0}).forEach(function(u){r[u.id]||(n.push(u),r[u.id]=u,u.isLink()?o.push(u):i.push(u))})}),o.forEach(function(s){var{source:a,target:u}=s.attributes;if(a.id&&!r[a.id]){var c=this.getCell(a.id);n.push(c),r[c.id]=c,i.push(c)}if(u.id&&!r[u.id]){var d=this.getCell(u.id);n.push(this.getCell(u.id)),r[d.id]=d,i.push(d)}},this),i.forEach(function(s){this.getConnectedLinks(s,t).forEach(function(u){var{source:c,target:d}=u.attributes;!r[u.id]&&c.id&&r[c.id]&&d.id&&r[d.id]&&(n.push(u),r[u.id]=u)})},this),n},getPredecessors:function(e,t){var n=[];return this.search(e,function(r){r!==e&&n.push(r)},Tt({},t=t||{},{inbound:!0})),n},search:function(e,t,n){(n=n||{}).breadthFirst?this.bfs(e,t,n):this.dfs(e,t,n)},bfs:function(e,t,n={}){const r={},i={},o=[];for(o.push(e),i[e.id]=0;o.length>0;){var s=o.shift();if(r[s.id]||(r[s.id]=!0,!1===t.call(this,s,i[s.id])))continue;const a=this.getNeighbors(s,n);for(let u=0,c=a.length;u<c;u++){const d=a[u];i[d.id]=i[s.id]+1,o.push(d)}}},dfs:function(e,t,n={}){const r={},i={},o=[];for(o.push(e),i[e.id]=0;o.length>0;){const s=o.pop();if(r[s.id]||(r[s.id]=!0,!1===t.call(this,s,i[s.id])))continue;const a=this.getNeighbors(s,n),u=o.length;for(let c=0,d=a.length;c<d;c++){const f=a[c];i[f.id]=i[s.id]+1,o.splice(u,0,f)}}},getSources:function(){var e=[];return Ko(this._nodes,function(t,n){(!this._in[n]||sa(this._in[n]))&&e.push(this.getCell(n))}.bind(this)),e},getSinks:function(){var e=[];return Ko(this._nodes,function(t,n){(!this._out[n]||sa(this._out[n]))&&e.push(this.getCell(n))}.bind(this)),e},isSource:function(e){return!this._in[e.id]||sa(this._in[e.id])},isSink:function(e){return!this._out[e.id]||sa(this._out[e.id])},isSuccessor:function(e,t){var n=!1;return this.search(e,function(r){if(r===t&&r!==e)return n=!0,!1},{outbound:!0}),n},isPredecessor:function(e,t){var n=!1;return this.search(e,function(r){if(r===t&&r!==e)return n=!0,!1},{inbound:!0}),n},isNeighbor:function(e,t,n){var r=(n=n||{}).inbound,i=n.outbound;void 0===r&&void 0===i&&(r=i=!0);var o=!1;return this.getConnectedLinks(e,n).forEach(function(s){var{source:a,target:u}=s.attributes;if(r&&Oa(a,"id")&&a.id===t.id||i&&Oa(u,"id")&&u.id===t.id)return o=!0,!1}),o},disconnectLinks:function(e,t){this.getConnectedLinks(e).forEach(function(n){n.set(n.attributes.source.id===e.id?"source":"target",{x:0,y:0},t)})},removeLinks:function(e,t){js(this.getConnectedLinks(e),"remove",t)},findModelsFromPoint:function(e){return this.getElements().filter(t=>t.getBBox({rotate:!0}).containsPoint(e))},findModelsInArea:function(e,t={}){const n=new ze(e),{strict:r=!1}=t,i=r?"containsRect":"intersect";return this.getElements().filter(o=>n[i](o.getBBox({rotate:!0})))},findModelsUnderElement:function(e,t={}){const{searchBy:n="bbox"}=t,r=e.getBBox().rotateAroundCenter(e.angle());return("bbox"===n?this.findModelsInArea(r):this.findModelsFromPoint(yS(r,n))).filter(o=>e.id!==o.id&&!o.isEmbeddedIn(e))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(e,t={}){const{rotate:n=!0}=t;return vn(e).reduce(function(r,i){const o=i.getBBox({rotate:n});return o?r?r.union(o):o:r},null)},translate:function(e,t,n){var r=this.getCells().filter(function(i){return!i.isEmbedded()});return js(r,"translate",e,t,n),this},resize:function(e,t,n){return this.resizeCells(e,t,this.getCells(),n)},resizeCells:function(e,t,n,r){var i=this.getCellsBBox(n);if(i){var o=Math.max(e/i.width,0),s=Math.max(t/i.height,0);js(n,"scale",o,s,i.origin(),r)}return this},startBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)+1,this.trigger("batch:start",Tt({},t,{batchName:e}))},stopBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)-1,this.trigger("batch:stop",Tt({},t,{batchName:e}))},hasActiveBatch:function(e){const t=this._batches;let n;return n=0===arguments.length?Object.keys(t):Array.isArray(e)?e:[e],n.some(r=>t[r]>0)}},{validations:{multiLinks:function(e,t){var{source:n,target:r}=t.attributes;if(n.id&&r.id){var i=t.getSourceCell();if(i&&e.getConnectedLinks(i,{outbound:!0}).filter(function(a){var{source:u,target:c}=a.attributes;return u&&u.id===n.id&&(!u.port||u.port===n.port)&&c&&c.id===r.id&&(!c.port||c.port===r.port)}).length>1)return!1}return!0},linkPinning:function(e,t){var{source:n,target:r}=t.attributes;return n.id&&r.id}}});!function(e,t,n){if(Hi(n)){if(!Dy[n])throw new Error('Unknown wrapper: "'+n+'"');n=Dy[n]}if(!sr(n))throw new Error("Wrapper must be a function.");vn(["resetCells","addCells","removeCells"]).forEach(function(r){e[r]=n(e[r])})}(Xh.prototype,0,Dy.cells);const Cu={},Va=Bi.View.extend({options:{},theme:null,themeClassNamePrefix:ms("theme-"),requireSetThemeOverride:!1,defaultTheme:Jo.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,FLAG_INIT:1<<28,constructor:function(e){this.requireSetThemeOverride=e&&!!e.theme,this.options=Tt({},this.options,e),Bi.View.call(this,e)},initialize:function(){Cu[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},isMounted:function(){return null!==this.el.parentNode},renderChildren:function(e){if(e||(e=Fr(this,"children")),e){var t=this.svgElement,r=qh(e,De.namespace[t?"svg":"xhtml"]);(t?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttribute:function(e,t){for(var n=t;n&&1===n.nodeType;){var r=n.getAttribute(e);if(r)return r;if(n===this.el)return null;n=n.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(Fr(this,"el"));else{var e=Fr(this,"tagName"),t=Tt({},Fr(this,"attributes")),n=Tt({},Fr(this,"style"));this.id&&(t.id=Fr(this,"id")),this.setElement(this._createElement(e)),this._setAttributes(t),this._setStyle(n)}this._ensureElClassName()},_setAttributes:function(e){this.svgElement?this.vel.attr(e):this.$el.attr(e)},_setStyle:function(e){this.$el.css(e)},_createElement:function(e){return this.svgElement?document.createElementNS(De.namespace.svg,e):document.createElement(e)},_setElement:function(e){this.$el=e instanceof Bi.$?e:Bi.$(e),this.el=this.$el[0],this.svgElement&&(this.vel=De(this.el))},_ensureElClassName:function(){var e=Fr(this,"className");if(e){var t=ms(e);this.svgElement?this.vel.removeClass(e).addClass(t):this.$el.removeClass(e).addClass(t)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(e,t){return t=t||{},this.theme&&this.requireSetThemeOverride&&!t.override||(this.removeThemeClassName(),this.addThemeClassName(e),this.onSetTheme(this.theme,e),this.theme=e),this},addThemeClassName:function(e){if(!(e=e||this.theme))return this;var t=this.themeClassNamePrefix+e;return this.svgElement?this.vel.addClass(t):this.$el.addClass(t),this},removeThemeClassName:function(e){var t=this.themeClassNamePrefix+(e=e||this.theme);return this.svgElement?this.vel.removeClass(t):this.$el.removeClass(t),this},onSetTheme:function(e,t){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Cu[this.cid]=null,Bi.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(e,t,n){if(!t)return this;n||(n={});var r=this.getEventNamespace();for(var i in t){var o=t[i];"function"!=typeof o&&(o=this[o]),o&&Mn(e).on(i+r,n,o.bind(this))}return this},undelegateElementEvents:function(e){return Mn(e).off(this.getEventNamespace()),this},delegateDocumentEvents:function(e,t){return e||(e=Fr(this,"documentEvents")),this.delegateElementEvents(document,e,t)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(e,t){if(!e)throw new Error("eventData(): event object required.");var n=e.data,r="__"+this.cid+"__";return void 0===t?n&&n[r]||{}:(n||(n=e.data={}),n[r]||(n[r]={}),Tt(n[r],t),this)},stopPropagation:function(e){return this.eventData(e,{propagationStopped:!0}),this},isPropagationStopped:function(e){return!!this.eventData(e).propagationStopped}},{extend:function(){var e=Array.from(arguments),t=e[0]&&Tt({},e[0])||{},n=e[1]&&Tt({},e[1])||{},r=t.render||this.prototype&&this.prototype.render||null;return t.render=function(){return"function"==typeof r&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},t.render.__render__=r,Bi.View.extend.call(this,t,n)}});if(Mn.event&&!("dbltap"in Mn.event.special)){const e=Jo.doubleTapInterval,t=30;Mn.event.special.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(n,...r){const{handleObj:i,target:o}=n,s=Mn.data(o),a=(new Date).getTime(),u="lastTouch"in s?a-s.lastTouch:0;u<e&&u>t?(s.lastTouch=null,n.type=i.origType,i.handler.call(this,n,...r)):s.lastTouch=a}}}function If(e){return e?Array.isArray(e)?e:[e]:[]}const vs=Va.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(e,t){const{paper:n}=e;this.cellView=e,this.nodeSelector=t,n&&(this.updateRequested=!0,n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:e,nodeSelector:t}=this;return e.isMounted()?(this.update(e,t),this.mount(),this.transform(),0):(this.postponedUpdate=!0,0)},findNode(e,t=null){let n;if("string"==typeof t)[n]=e.findBySelector(t);else if(Lr(t)){const r=e.model.isLink(),{label:i=null,port:o,selector:s}=t;r&&null!==i?n=e.findLabelNode(i,s):!r&&o?n=e.findPortNode(o,s):[n]=e.findBySelector(s)}else t&&(n=De.toNode(t),n instanceof SVGElement||(n=null));return n||null},getNodeMatrix(e,t){const{options:n}=this,{layer:r}=n,{rotatableNode:i}=e,o=e.getNodeMatrix(t);return i?r?i.contains(t)?o:e.getRootRotateMatrix().inverse().multiply(o):e.getNodeRotateMatrix(t).multiply(o):o},mount(){const{MOUNTABLE:e,cellView:t,el:n,options:r,transformGroup:i,detachedTransformGroup:o,postponedUpdate:s,nodeSelector:a}=this;if(!e||i)return;if(s)return this.update(t,a),void this.transform();const{vel:u,paper:c}=t,{layer:d}=r;if(d){let f;o?(f=o,this.detachedTransformGroup=null):f=De("g").addClass("highlight-transform").append(n),this.transformGroup=f,c.getLayerView(d).insertSortedNode(f.node,r.z)}else(!n.parentNode||n.nextSibling)&&u.append(n)},unmount(){const{MOUNTABLE:e,transformGroup:t,vel:n}=this;e&&(t?(this.transformGroup=null,this.detachedTransformGroup=t,t.remove()):n.remove())},transform(){const{transformGroup:e,cellView:t,updateRequested:n}=this;if(!e||t.model.isLink()||n)return;const r=t.getRootTranslateMatrix(),i=t.getRootRotateMatrix(),o=r.multiply(i);e.attr("transform",De.matrixToTransformString(o))},update(){const{node:e,cellView:t,nodeSelector:n,updateRequested:r,id:i}=this;if(r)return;this.postponedUpdate=!1;const o=this.node=this.findNode(t,n);e&&this.unhighlight(t,e),o?(this.highlight(t,o),this.mount()):(this.unmount(),t.notify("cell:highlight:invalid",i,this))},onRemove(){const{node:e,cellView:t,id:n,constructor:r}=this;e&&this.unhighlight(t,e),this.unmount(),r._removeRef(t,n)},highlight(e,t){},unhighlight(e,t){},listenToUpdateAttributes(e){const t=Fr(this,"UPDATE_ATTRIBUTES");!Array.isArray(t)||0===t.length||this.listenTo(e.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){const{cellView:e}=this;if(!e)return;const{model:t,paper:n}=e;Fr(this,"UPDATE_ATTRIBUTES").some(i=>t.hasChanged(i))&&n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(e,t,n){const r=this.uniqueId(t,n);this.add(e,t,r,n)},unhighlight:function(e,t,n){const r=this.uniqueId(t,n);this.remove(e,r)},get(e,t=null){const{cid:n}=e,{_views:r}=this,i=r[n];if(null===t){const o=[];if(!i)return o;for(let s in i){const a=i[s];a instanceof this&&o.push(a)}return o}if(!i)return null;if(t in i){const o=i[t];if(o instanceof this)return o}return null},add(e,t,n,r={}){if(!n)throw new Error("dia.HighlighterView: An ID required.");const i=vs.get(e,n);i&&i.remove();const o=new this(r);return o.id=n,this._addRef(e,n,o),o.requestUpdate(e,t),o.listenToUpdateAttributes(e),o},_addRef(e,t,n){const{cid:r}=e,{_views:i}=this;let o=i[r];o||(o=i[r]={}),o[t]=n},_removeRef(e,t){const{cid:n}=e,{_views:r}=this,i=r[n];if(i){t&&delete i[t];for(let o in i)return;delete r[n]}},remove(e,t=null){If(this.get(e,t)).forEach(n=>{n.remove()})},removeAll(e,t=null){const{_views:n}=this;for(let r in n)for(let i in n[r]){const o=n[r][i];o.cellView.paper===e&&o instanceof this&&(null===t||i===t)&&o.remove()}},update(e,t=null,n=!1){If(this.get(e,t)).forEach(r=>{(n||r.UPDATABLE)&&r.update()})},transform(e,t=null){If(this.get(e,t)).forEach(n=>{n.UPDATABLE&&n.transform()})},unmount(e,t=null){If(this.get(e,t)).forEach(n=>n.unmount())},mount(e,t=null){If(this.get(e,t)).forEach(n=>n.mount())},uniqueId:(e,t="")=>De.ensureId(e)+JSON.stringify(t)}),Qc={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},pn=Va.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var e=["cell"],t=this.model.get("type");return t&&t.toLowerCase().split(".").forEach(function(n,r,i){e.push("type-"+i.slice(0,r+1).join("-"))}),e.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var r,i,o,e={},t={},n=0,s=Fr(this,"presentationAttributes");for(var a in s)if(s.hasOwnProperty(a)){var u=s[a];for(Array.isArray(u)||(u=[u]),r=0,i=u.length;r<i;r++){var c=e[o=u[r]];c||(c=e[o]=1<<n++),t[a]|=c}}var d=Fr(this,"initFlag");for(Array.isArray(d)||(d=[d]),r=0,i=d.length;r<i;r++)e[o=d[r]]||(e[o]=1<<n++);if(n>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=e,this._presentationAttributes=t},hasFlag:function(e,t){return e&this.getFlag(t)},removeFlag:function(e,t){return e^e&this.getFlag(t)},getFlag:function(e){var t=this._flags;if(!t)return 0;var n=0;if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++)n|=t[e[r]];else n|=t[e];return n},attributes:function(){var e=this.model;return{"model-id":e.id,"data-type":e.attributes.type}},constructor:function(e){e.id=e.id||Zc(this),Va.call(this,e)},initialize:function(){this.setFlags(),Va.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(e,t){var n=e.getChangeFlag(this._presentationAttributes);t.updateHandled||!n||(t.dirty&&this.hasFlag(n,"UPDATE")&&(n|=this.getFlag("RENDER")),t.tool&&(t.async=!1),this.requestUpdate(n,t))},requestUpdate:function(e,t){const{paper:n}=this;n&&e>0&&n.requestViewUpdate(this,e,this.UPDATE_PRIORITY,t)},parseDOMJSON:function(e,t){var n=qh(e),r=n.selectors,i=n.groupSelectors;for(var o in i){if(r[o])throw new Error("dia.CellView: ambiguous group selector");r[o]=i[o]}if(t){var s=this.selector;if(r[s])throw new Error("dia.CellView: ambiguous root selector.");r[s]=t}return{fragment:n.fragment,selectors:r}},can:function(e){var t=sr(this.options.interactive)?this.options.interactive(this):this.options.interactive;return In(t)&&!1!==t[e]||function(e){return!0===e||!1===e||!!e&&"object"==typeof e&&Object.prototype.toString.call(e)===Dh}(t)&&!1!==t},findBySelector:function(e,t,n){if(t||(t=this.el),n||(n=this.selectors),!e||"."===e)return[t];if(n){var r=n[e];if(r)return Array.isArray(r)?r:[r]}return Jo.useCSSSelectors?Mn(t).find(e).toArray():[]},notify:function(e){if(this.paper){var t=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(t)),this.paper.trigger.apply(this.paper,[e,this].concat(t))}},getBBox:function(e){var t;if(e&&e.useModelGeometry){var n=this.model;t=n.getBBox().bbox(n.angle())}else t=this.getNodeBBox(this.el);return this.paper.localToPaperRect(t)},getNodeBBox:function(e){const t=this.getNodeBoundingRect(e),n=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(e)),r=this.getNodeMatrix(e);return De.transformRect(t,n.multiply(r))},getNodeRotateMatrix(e){return!this.rotatableNode||this.rotatableNode.contains(e)?this.getRootRotateMatrix():De.createSVGMatrix()},getNodeUnrotatedBBox:function(e){var t=this.getNodeBoundingRect(e),n=this.getNodeMatrix(e),r=this.getRootTranslateMatrix();return De.transformRect(t,r.multiply(n))},getRootTranslateMatrix:function(){var t=this.model.position();return De.createSVGMatrix().translate(t.x,t.y)},getRootRotateMatrix:function(){var e=De.createSVGMatrix(),t=this.model,n=t.angle();if(n){var r=t.getBBox(),i=r.width/2,o=r.height/2;e=e.translate(i,o).rotate(n).translate(-i,-o)}return e},_notifyHighlight:function(e,t,n={}){const{el:r}=this;let i;if([i=r]="string"==typeof t?this.findBySelector(t):this.$(t),n.partial=i!==r,void 0===n.type){let o;switch(!0){case n.embedding:o=Qc.EMBEDDING;break;case n.connecting:o=Qc.CONNECTING;break;case n.magnetAvailability:o=Qc.MAGNET_AVAILABILITY;break;case n.elementAvailability:o=Qc.ELEMENT_AVAILABILITY;break;default:o=Qc.DEFAULT}n.type=o}return this.notify(e,i,n),this},highlight:function(e,t){return this._notifyHighlight("cell:highlight",e,t)},unhighlight:function(e,t={}){return this._notifyHighlight("cell:unhighlight",e,t)},findMagnet:function(e){const t=this.el;let n=this.$(e)[0];n||(n=t);do{const r=n.getAttribute("magnet"),i=n===t;if((r||i)&&"false"!==r)return n;if(i)return;n=n.parentNode}while(n)},findProxyNode:function(e,t){e||(e=this.el);const n=e.getAttribute(`${t}-selector`);if(n){const[r]=this.findBySelector(n);if(r)return r}return e},getSelector:function(e,t){var n;if(e===this.el)return"string"==typeof t&&(n="> "+t),n;if(e){var r=De(e).index()+1;n=e.tagName+":nth-child("+r+")",t&&(n+=" > "+t),n=this.getSelector(e.parentNode,n)}return n},addLinkFromMagnet:function(e,t,n){var r=this.paper,i=r.model,o=r.getDefaultLink(this,e);return o.set({source:this.getLinkEnd(e,t,n,o,"source"),target:{x:t,y:n}}).addTo(i,{async:!1,ui:!0}),o.findView(r)},getLinkEnd:function(e,...t){var n=this.model,r=n.id,i=this.findAttribute("port",e),o=e.getAttribute("joint-selector"),s={id:r};return null!=o&&(s.magnet=o),null!=i?(s.port=i,!n.hasPort(i)&&!o&&(s.selector=this.getSelector(e))):null==o&&this.el!==e&&(s.selector=this.getSelector(e)),this.customizeLinkEnd(s,e,...t)},customizeLinkEnd:function(e,t,n,r,i,o){const{paper:s}=this,{connectionStrategy:a}=s.options;if("function"==typeof a){var u=a.call(s,e,this,t,new W(n,r),i,o,s);if(u)return u}return e},getMagnetFromLinkEnd:function(e){var o,t=this.el,n=e.port,r=e.magnet,i=this.model;return null!=n&&i.isElement()&&i.hasPort(n)?o=this.findPortNode(n,r)||t:(r||(r=e.selector),!r&&null!=n&&(r='[port="'+n+'"]'),o=this.findBySelector(r,t,this.selectors)[0]),this.findProxyNode(o,"magnet")},dragLinkStart:function(e,t,n,r){this.model.startBatch("add-link");const i=this.addLinkFromMagnet(t,n,r);i.notifyPointerdown(e,n,r),i.eventData(e,i.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(e,{linkView:i})},dragLink:function(e,t,n){var r=this.eventData(e),i=r.linkView;if(i)i.pointermove(e,t,n);else{var o=this.paper,s=o.options.magnetThreshold,a=this.getEventTarget(e),u=r.targetMagnet;if("onleave"===s){if(u===a||De(u).contains(a))return}else if(o.eventData(e).mousemoved<=s)return;this.dragLinkStart(e,u,t,n)}},dragLinkEnd:function(e,t,n){var i=this.eventData(e).linkView;i&&(i.pointerup(e,t,n),this.model.stopBatch("add-link"))},getAttributeDefinition:function(e){return this.model.constructor.getAttributeDefinition(e)},setNodeAttributes:function(e,t){sa(t)||(e instanceof SVGElement?De(e).attr(t):Mn(e).attr(t))},processNodeAttributes:function(e,t){var n,r,i,o,s,a,u,c,d,f=[];for(n in t)t.hasOwnProperty(n)&&(r=t[n],!(i=this.getAttributeDefinition(n))||sr(i.qualify)&&!i.qualify.call(this,r,e,t,this)?(a||(a={}),a[qH(n)]=r):(Hi(i.set)&&(a||(a={}),a[i.set]=r),null!==r&&f.push(n,i)));for(o=0,s=f.length;o<s;o+=2)r=t[n=f[o]],sr((i=f[o+1]).set)&&(u||(u={}),u[n]=r),sr(i.position)&&(c||(c={}),c[n]=r),sr(i.offset)&&(d||(d={}),d[n]=r);return{raw:t,normal:a,set:u,position:c,offset:d}},updateRelativeAttributes:function(e,t,n,r){r||(r={});var i,o,a=t.raw||{},u=t.normal||{},c=t.set,d=t.position,f=t.offset;for(i in c){o=c[i];var p=this.getAttributeDefinition(i).set.call(this,o,n.clone(),e,a,this);In(p)?Tt(u,p):void 0!==p&&(u[i]=p)}if(e instanceof HTMLElement)this.setNodeAttributes(e,u);else{var x,P,O,m=u.transform,b=De.transformStringToMatrix(m),D=W(b.e,b.f);if(m&&(u=Ef(u,"transform"),b.e=b.f=0),d||f){var Y=this.getNodeScale(e,r.scalableNode);x=Y.sx,P=Y.sy}var ee=!1;for(i in d)o=d[i],(O=this.getAttributeDefinition(i).position.call(this,o,n.clone(),e,a,this))&&(D.offset(W(O).scale(x,P)),ee||(ee=!0));this.setNodeAttributes(e,u);var ie=!1;if(f){var be=this.getNodeBoundingRect(e);if(be.width>0&&be.height>0){var w=De.transformRect(be,b).scale(1/x,1/P);for(i in f)o=f[i],(O=this.getAttributeDefinition(i).offset.call(this,o,w,e,a,this))&&(D.offset(W(O).scale(x,P)),ie||(ie=!0))}}(void 0!==m||ee||ie)&&(D.round(1),b.e=D.x,b.f=D.y,e.setAttribute("transform",De.matrixToTransformString(b)))}},getNodeScale:function(e,t){var n,r;if(t&&t.contains(e)){var i=t.scale();n=1/i.sx,r=1/i.sy}else n=1,r=1;return{sx:n,sy:r}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(e){var t=this.metrics;if(!t)return{};var n=De.ensureId(e),r=t[n];return r||(r=t[n]={}),r},getNodeData:function(e){var t=this.nodeCache(e);return t.data||(t.data={}),t.data},getNodeBoundingRect:function(e){var t=this.nodeCache(e);return void 0===t.boundingRect&&(t.boundingRect=De(e).getBBox()),new ze(t.boundingRect)},getNodeMatrix:function(e){const t=this.nodeCache(e);if(void 0===t.magnetMatrix){const{rotatableNode:n,el:r}=this;let i;i=n&&n.contains(e)?n:r,t.magnetMatrix=De(e).getTransformToElement(i)}return De.createSVGMatrix(t.magnetMatrix)},getNodeShape:function(e){var t=this.nodeCache(e);return void 0===t.geometryShape&&(t.geometryShape=De(e).toGeometryShape()),t.geometryShape.clone()},isNodeConnection:function(e){return this.model.isLink()&&(!e||e===this.el)},findNodesAttributes:function(e,t,n,r){var i,o,s,a,u={},c=[];for(var d in e)if(e.hasOwnProperty(d)&&Lr(s=e[d])){var f=n[d]=this.findBySelector(d,t,r);for(i=0,o=f.length;i<o;i++){var p=f[i];a=De.ensureId(p);var m=r&&r[d]===p,b=u[a];if(b){b.array||(c.push(a),b.array=!0,b.attributes=[b.attributes],b.selectedLength=[b.selectedLength]);var D=b.attributes,x=b.selectedLength;if(m)D.unshift(s),x.unshift(-1);else{var P=Mx(x,o);D.splice(P,0,s),x.splice(P,0,o)}}else u[a]={attributes:s,selectedLength:m?-1:o,node:p,array:!1}}}for(i=0,o=c.length;i<o;i++)(s=u[a=c[i]]).attributes=ni({},...s.attributes.reverse());return u},getEventTarget:function(e,t={}){const{target:n,type:r,clientX:i=0,clientY:o=0}=e;return t.fromPoint||"touchmove"===r||"touchend"===r||"pointerId"in e&&n.hasPointerCapture(e.pointerId)?document.elementFromPoint(i,o):n},updateDOMSubtreeAttributes:function(e,t,n){n||(n={}),n.rootBBox||(n.rootBBox=ze()),n.selectors||(n.selectors=this.selectors);var a,u,c,d,f,r={},i={},o=[],s=[],p=n.roAttributes,m=this.findNodesAttributes(p||t,e,r,n.selectors),b=p?this.findNodesAttributes(t,e,r,n.selectors):m;for(var D in m)if((f=this.processNodeAttributes(u=(d=m[D]).node,c=d.attributes)).set||f.position||f.offset){var O,x=b[D]&&b[D].attributes,P=x&&void 0===c.ref?x.ref:c.ref;if(P){if(!(O=(r[P]||this.findBySelector(P,e,n.selectors))[0]))throw new Error('dia.CellView: "'+P+'" reference does not exist.')}else O=null;if(a={node:u,refNode:O,processedAttributes:f,allAttributes:x},O){var Y=s.findIndex(function(ee){return ee.refNode===u});Y>-1?s.splice(Y,0,a):s.push(a)}else o.push(a)}else this.setNodeAttributes(u,f.normal);o.push(...s);for(let ee=0,ie=o.length;ee<ie;ee++){u=(a=o[ee]).node;const be=(O=a.refNode)?De.ensureId(O):"";let w=i[be];w||(w=i[be]=O?De(O).getBBox({target:Rj(u,O)}):n.rootBBox),p?(f=this.processNodeAttributes(u,a.allAttributes),this.mergeProcessedAttributes(f,a.processedAttributes)):f=a.processedAttributes,this.updateRelativeAttributes(u,f,w,n)}},mergeProcessedAttributes:function(e,t){e.set||(e.set={}),e.position||(e.position={}),e.offset||(e.offset={}),Tt(e.set,t.set),Tt(e.position,t.position),Tt(e.offset,t.offset);var n=e.normal&&e.normal.transform;void 0!==n&&t.normal&&(t.normal.transform=n),e.normal=t.normal},onMount(e){e||(this.mountTools(),vs.mount(this))},onDetach(){this.unmountTools(),vs.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(e){var t=this._toolsView;return!(!t||e&&t.getName()!==e)},addTools:function(e){return this.removeTools(),e&&(this._toolsView=e,e.configure({relatedView:this}),e.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){const e=this._toolsView;return e&&e.unmount(),this},mountTools(){const e=this._toolsView;return e&&!e.isMounted()&&e.mount(),this},updateTools:function(e){var t=this._toolsView;return t&&t.update(e),this},removeTools:function(){var e=this._toolsView;return e&&(e.remove(),this._toolsView=null),this},hideTools:function(){var e=this._toolsView;return e&&e.hide(),this},showTools:function(){var e=this._toolsView;return e&&e.show(),this},onToolEvent:function(e){switch(e){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){vs.remove(this)},updateHighlighters:function(e=!1){vs.update(this,null,e)},transformHighlighters:function(){vs.transform(this)},preventDefaultInteraction(e){this.eventData(e,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(e){const{defaultInteractionPrevented:t=!1}=this.eventData(e);return t},pointerdblclick:function(e,t,n){this.notify("cell:pointerdblclick",e,t,n)},pointerclick:function(e,t,n){this.notify("cell:pointerclick",e,t,n)},contextmenu:function(e,t,n){this.notify("cell:contextmenu",e,t,n)},pointerdown:function(e,t,n){const{model:r}=this,{graph:i}=r;i&&(r.startBatch("pointer"),this.eventData(e,{graph:i})),this.notify("cell:pointerdown",e,t,n)},pointermove:function(e,t,n){this.notify("cell:pointermove",e,t,n)},pointerup:function(e,t,n){const{graph:r}=this.eventData(e);this.notify("cell:pointerup",e,t,n),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},mouseenter:function(e){this.notify("cell:mouseenter",e)},mouseleave:function(e){this.notify("cell:mouseleave",e)},mousewheel:function(e,t,n,r){this.notify("cell:mousewheel",e,t,n,r)},onevent:function(e,t,n,r){this.notify(t,e,n,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(e){const{paper:t,model:n}=this;if(t.isAsync()){if(n.isLink()){const o=n.getSourceElement();if(o){const a=t.findViewByModel(o);a&&(t.dumpView(a),t.checkViewVisibility(a))}const s=n.getTargetElement();if(s){const a=t.findViewByModel(s);a&&(t.dumpView(a),t.checkViewVisibility(a))}}t.dumpView(this),t.checkViewVisibility(this)}const r=this.getEventTarget(e,{fromPoint:!0}),i=t.findView(r);i!==this&&(this.mouseleave(e),i&&i.mouseenter(e))},setInteractivity:function(e){this.options.interactive=e}},{Flags:{TOOLS:"TOOLS"},Highlighting:Qc,addPresentationAttributes:function(e){return ni({},Fr(this.prototype,"presentationAttributes"),e,function(t,n){if(t&&n&&("string"==typeof t&&(t=[t]),"string"==typeof n&&(n=[n]),Array.isArray(t)&&Array.isArray(n)))return bf(t.concat(n))})}});function Rj(e,t){let n=e;do{if(n.contains(t))return n;n=n.parentNode}while(n);return null}const ns={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},kj=Va.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return ms(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(e,t){this.el.insertBefore(e,this.insertPivot(t))},insertNode:function(e){const{el:t}=this;e.parentNode!==t&&t.appendChild(e)},insertPivot:function(e){const{el:t,pivotNodes:n}=this;(e=+e)||(e=0);let r=n[e];if(r)return r;r=n[e]=document.createComment("z-index:"+(e+1));let i=-1/0;for(let o in n)o=+o,o<e&&o>i&&(i=o);return t.insertBefore(r,i!==-1/0?n[i].nextSibling:t.firstChild),r},removePivots:function(){const{el:e,pivotNodes:t}=this;for(let n in t)e.removeChild(t[n]);this.pivotNodes={}}}),_y=Va.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var e=this.name;e&&this.vel.attr("data-tool-name",e)},configure:function(e,t){return this.relatedView=e,this.paper=e.paper,this.parentView=t,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(e){e&&e.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var e=this.options.focusOpacity;isFinite(e)&&(this.el.style.opacity=e),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(e){const{paper:t,relatedView:n}=this;return!t||!n||t.guard(e,n)}}),Lj=Va.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null},configure:function(e){var t=(e=Tt(this.options,e)).tools;if(!Array.isArray(t))return this;var n=e.relatedView;if(!(n instanceof pn))return this;for(var r=this.tools=[],i=0,o=t.length;i<o;i++){var s=t[i];s instanceof _y&&(s.configure(n,this),this.vel.append(s.el),r.push(s))}return this.isRendered=!1,n.requestUpdate(n.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(e){e||(e={});var t=this.tools;if(!t)return this;for(var n=this.isRendered,r=0,i=t.length;r<i;r++){var o=t[r];n?e.tool!==o.cid&&o.isVisible()&&o.update():o.render()}return this.isMounted()||this.mount(),n||(this.blurTool(),this.isRendered=!0),this},focusTool:function(e){var t=this.tools;if(!t)return this;for(var n=0,r=t.length;n<r;n++){var i=t[n];e===i?i.show():i.hide()}return this},blurTool:function(e){var t=this.tools;if(!t)return this;for(var n=0,r=t.length;n<r;n++){var i=t[n];i!==e&&!i.isVisible()&&(i.show(),i.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var e=this.tools;if(!e)return this;for(var t=0,n=e.length;t<n;t++)e[t].remove();this.tools=null},mount:function(){const{options:e,el:t}=this,{relatedView:n,layer:r=ns.TOOLS,z:i}=e;return n&&(r?n.paper.getLayerView(r).insertSortedNode(t,i):n.el.appendChild(t)),this}});function BS(e,t){const{model:n}=e;return t?n.getBBox():n.isLink()?e.getConnection().bbox():e.getNodeUnrotatedBBox(e.el)}const Fj=_y.extend({name:"boundary",tagName:"rect",options:{padding:10,useModelGeometry:!1},attributes:{fill:"none",stroke:"#33334F","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"},onRender:function(){this.update()},update:function(){const{relatedView:e,options:t,vel:n}=this,{useModelGeometry:r,rotate:i}=t,o=ka(t.padding);let s=BS(e,r).moveAndExpand({x:-o.left,y:-o.top,width:o.left+o.right,height:o.top+o.bottom});var a=e.model;if(a.isElement()){var u=a.angle();if(u)if(i){var c=a.getBBox().center();n.rotate(u,c.x,c.y,{absolute:!0})}else s=s.bbox(u)}return n.attr(s.toJSON()),this}}),Vj=_y.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,scale:null,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){const{vel:e}=this;e.transform(this.getCellMatrix(),{absolute:!0})},getCellMatrix(){return this.relatedView.model.isLink()?this.getLinkMatrix():this.getElementMatrix()},getElementMatrix(){const{relatedView:e,options:t}=this;let{x:n=0,y:r=0,offset:i={},useModelGeometry:o,rotate:s,scale:a}=t,u=BS(e,o);const c=e.model.angle();s||(u=u.bbox(c));const{x:d=0,y:f=0}=i;Ti(n)?n=parseFloat(n)/100*u.width:es(n)&&(n=Number(ts(n,u))),Ti(r)?r=parseFloat(r)/100*u.height:es(r)&&(r=Number(ts(r,u)));let p=De.createSVGMatrix().translate(u.x+u.width/2,u.y+u.height/2);return s&&(p=p.rotate(c)),p=p.translate(n+d-u.width/2,r+f-u.height/2),a&&(p=p.scale(a)),p},getLinkMatrix(){const{relatedView:e,options:t}=this,{offset:n=0,distance:r=0,rotate:i,scale:o}=t;let s,a,u;s=Ti(r)?e.getTangentAtRatio(parseFloat(r)/100):e.getTangentAtLength(r),s?(a=s.start,u=s.vector().vectorAngle(new W(1,0))||0):(a=e.getConnection().start,u=0);let c=De.createSVGMatrix().translate(a.x,a.y).rotate(u).translate(0,n);return i||(c=c.rotate(-u)),o&&(c=c.scale(o)),c},onPointerDown:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=this.options.action;"function"==typeof t&&t.call(this.relatedView,e,this.relatedView,this)}}}).extend({children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(e,t,n){t.model.remove({ui:!0,tool:n.cid})}}});function Bj(e,...t){const n=[];return e.forEach((i,o)=>{n.push(i),o in t&&n.push(t[o])}),function Hj(e){const t=new DOMParser,n=`<svg>${e.trim()}</svg>`;if(t.parseFromString(n.replace(/@/g,""),"application/xml").getElementsByTagName("parsererror")[0])throw new Error("Invalid SVG markup");return function jj(e){const t=[];return Array.from(e.children).forEach(n=>{t.push(HS(n))}),t}(t.parseFromString(n,"text/html").querySelector("svg"))}(n.join(""))}function HS(e){const t={},{tagName:n,attributes:r,namespaceURI:i,style:o,childNodes:s}=e;t.namespaceURI=i,t.tagName=i===De.namespace.xhtml?n.toLowerCase():n;const a={};for(var u=o.length;u--;){var c=o[u];a[c]=o.getPropertyValue(c)}t.style=a;const d=r.getNamedItem("@selector");d&&(t.selector=d.value,r.removeNamedItem("@selector"));const f=r.getNamedItem("@group-selector");if(f){const D=f.value.split(",");t.groupSelector=D.map(x=>x.trim()),r.removeNamedItem("@group-selector")}const p=r.getNamedItem("class");p&&(t.className=p.value);const m=[];s.forEach(D=>{switch(D.nodeType){case Node.TEXT_NODE:{const x=D.data.replace(/\s\s+/g," ");x.trim()&&m.push(x);break}case Node.ELEMENT_NODE:m.push(HS(D))}}),m.length&&(t.children=m);const b={};return Array.from(r).forEach(D=>{const{name:x,value:P}=D;b[x]=P}),Object.keys(b).length>0&&(t.attributes=b),t}const Cy=["#3f84e5","#49306B","#fe7f2d","#ad343e","#899e8b","#ede9e9","#b2a29f","#392F2D"];class $j extends ji{defaults(){return{...super.defaults,type:"Actor",size:{width:40,height:80},attrs:{background:{width:"calc(w)",height:"calc(h)",fill:"transparent"},body:{d:"M 0 calc(0.4 * h) h calc(w) M 0 calc(h) calc(0.5 * w) calc(0.7 * h) calc(w) calc(h) M calc(0.5 * w) calc(0.7 * h) V calc(0.3 * h)",fill:"none",stroke:Cy[7],strokeWidth:2},head:{cx:"calc(0.5 * w)",cy:"calc(0.15 * h)",r:"calc(0.15 * h)",stroke:Cy[7],strokeWidth:2,fill:"#ffffff"},label:{y:"calc(h + 10)",x:"calc(0.5 * w)",textAnchor:"middle",textVerticalAnchor:"top",fontSize:14,fontFamily:"sans-serif",fill:Cy[7],textWrap:{width:"calc(3 * w)",height:null}}}}}preinitialize(...t){super.preinitialize(...t),this.markup=Bj`
            <rect @selector="background" />
            <path @selector="body" />
            <circle @selector="head" />
            <text @selector="label" />
        `}}const zj={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(e,t){return this._tests[e]=t},test:function(e){var t=this._tests[e];if(!t)throw new Error('Test not defined ("'+e+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var n=this._results[e];if(typeof n<"u")return n;try{n=t()}catch{n=!1}return this._results[e]=n,n}},$S=ji.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]});ji.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),ji.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),ji.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),ji.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),ji.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),ji.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),ji.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),ji.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),ji.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),ji.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),ji.define("standard.Cylinder",{attrs:{body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:10,refRx:"50%",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(e,t){if(void 0===e)return this.attr("body/lateralArea");var n=Ti(e);return this.attr({body:{lateralArea:e},top:n?{refCy:e,refRy:e,cy:null,ry:null}:{refCy:null,refRy:null,cy:e,ry:e}},t)}},{attributes:{lateralArea:{set:function(e,t){var n=Ti(e);n&&(e=parseFloat(e)/100);var r=t.x,i=t.y,o=t.width,s=t.height,u=n?s*e:e,c=De.KAPPA,d=c*(o/2),f=c*(n?s*e:e),m=r+o/2,b=r+o,D=i+u,x=D-u,P=i+s-u,O=i+s;return{d:["M",r,D,"L",r,P,"C",r,P+f,m-d,O,m,O,"C",m+d,O,b,P+f,b,P,"L",b,D,"C",b,D-f,m+d,x,m,x,"C",m-d,x,r,D-f,r,D,"Z"].join(" ")}}}}});var Wj=zj.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}};const Zj=ji.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Wj]},{attributes:{text:{set:function(e,t,n,r){if(!(n instanceof HTMLElement)){var i=r.style||{},o={text:e,width:-5,height:"100%"},s=Tt({textVerticalAnchor:"middle"},i);return MS.textWrap.set.call(this,o,t,n,s),{fill:i.color||null}}n.textContent=e},position:function(e,t,n){if(n instanceof SVGElement)return t.center()}}}});Xc.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),Xc.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none",cursor:"pointer"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),Xc.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none","pointer-events":"none"}},{tagName:"path",selector:"line",attributes:{fill:"none",cursor:"pointer"}}]});class zS extends $S{constructor(){super({markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"headerText"},{tagName:"rect",selector:"variablesRect"},{tagName:"rect",selector:"functionsRect"}]}),this.variablesCounter=0,this.funcCounter=0,this.functionComponents=[],this.rectWidth=150,this.rectHeight=100,this.headerHeight=20,this.rectVariablesHeight=(this.rectHeight-this.headerHeight)/2,this.rectFunctionsHeight=(this.rectHeight-this.headerHeight)/2}defaults(){return this.rectWidth=150,this.rectHeight=100,this.headerHeight=20,this.rectVariablesHeight=(this.rectHeight-this.headerHeight)/2,this.rectFunctionsHeight=(this.rectHeight-this.headerHeight)/2,Oh({type:"UmlClassModel.Class",size:{width:this.rectWidth,height:this.rectHeight},attrs:{body:{rx:0,ry:0,strokeWidth:2,stroke:"black"},headerText:{width:this.rectWidth,height:this.headerHeight,fontSize:12,fontWeight:"bold",fontFamily:"Arial, helvetica, sans-serif","ref-y":0,"ref-x":0,ref:"body","text-anchor":"middle"},variablesRect:{width:this.rectWidth,height:this.rectVariablesHeight,fill:"#3498db",stroke:"black","ref-y":this.headerHeight,"ref-x":0,ref:"body"},functionsRect:{width:this.rectWidth,height:this.rectFunctionsHeight,fill:"#9b59b6",stroke:"black","ref-dy":-this.rectFunctionsHeight,"ref-x":0,ref:"body"}}},$S.prototype.defaults)}updateView(){const t=this.attributes;t.attrs.variablesRect.height=parseInt(t.attrs?.variablesRect?.height?.toString()||"0")+20,this.attr(t.attrs),this.resize(this.attributes.size?.width||0,(this.attributes.size?.height||0)+20)}createVariableComponent(t,n){let r=new Zj({position:{x:this.position().x,y:n},size:{width:this.rectWidth,height:20},"ref-y":this.headerHeight,"ref-x":0,ref:t,placeholder:"",attrs:{label:{text:"sample text",style:{fontFamily:"Arial, helvetica, sans-serif"}}}});return this.attr().body2=r,this.embed(r),r}userInput(t){let s,a;switch(t.target.attributes[0].value){case"headerText":console.log("Header section double-clicked");break;case"variablesRect":return this.updateView(),a=this.position().y+this.headerHeight+this.variablesCounter,s=this.createVariableComponent("variablesRect",a),this.variablesCounter+=20,this.rectVariablesHeight+=20,this.rectHeight+=20,this.functionComponents.forEach(u=>{let c=u.position();u.position(c.x,c.y+20)}),s;case"functionsRect":return this.updateView(),a=this.position().y+this.rectHeight-this.rectFunctionsHeight+this.funcCounter+20,s=this.createVariableComponent("functionsRect",a),this.functionComponents.push(s),this.funcCounter+=20,this.adjustSize(this.rectFunctionsHeight),s;default:console.log("Clicked outside the sections")}return null}adjustSize(t){this.rectHeight+=20,this.rectFunctionsHeight+=20,this.attr("size/height",this.rectHeight)}}const yn={TOOLS:pn.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Qh=pn.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var e=pn.prototype.className.apply(this).split(" ");return e.push("element"),e.join(" ")},initialize:function(){pn.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[yn.UPDATE],position:[yn.TRANSLATE,yn.TOOLS],size:[yn.RESIZE,yn.PORTS,yn.TOOLS],angle:[yn.ROTATE,yn.TOOLS],markup:[yn.RENDER],ports:[yn.PORTS]},initFlag:[yn.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(e,t){const{useCSSSelectors:n}=Jo;this.hasFlag(e,yn.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(e,yn.RENDER))this.render(),this.updateTools(t),this.updateHighlighters(!0),r=!0,e=this.removeFlag(e,[yn.RENDER,yn.UPDATE,yn.RESIZE,yn.TRANSLATE,yn.ROTATE,yn.PORTS,yn.TOOLS]);else{let i=!1;this.hasFlag(e,yn.RESIZE)&&(this.resize(t),i=!0,e=this.removeFlag(e,[yn.RESIZE,yn.UPDATE]),n&&(e=this.removeFlag(e,yn.PORTS))),this.hasFlag(e,yn.UPDATE)&&(this.update(this.model,null,t),e=this.removeFlag(e,yn.UPDATE),i=!0,n&&(e=this.removeFlag(e,yn.PORTS))),this.hasFlag(e,yn.TRANSLATE)&&(this.translate(),e=this.removeFlag(e,yn.TRANSLATE),r=!0),this.hasFlag(e,yn.ROTATE)&&(this.rotate(),e=this.removeFlag(e,yn.ROTATE),r=!0),this.hasFlag(e,yn.PORTS)&&(this._renderPorts(),i=!0,e=this.removeFlag(e,yn.PORTS)),i&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(e,yn.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,yn.TOOLS)),e},_initializePorts:function(){},update:function(e,t){this.cleanNodesCache();const{useCSSSelectors:n}=Jo;n&&this._removePorts();var r=this.model,i=r.attr();this.updateDOMSubtreeAttributes(this.el,i,{rootBBox:new ze(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:t===i?null:t}),n&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.ElementView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if("string"==typeof t)return this.renderStringMarkup(t);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el),n=this.selectors=t.selectors;this.rotatableNode=De(n[this.rotatableSelector])||null,this.scalableNode=De(n[this.scalableSelector])||null,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=this.vel;t.append(De(e)),this.rotatableNode=t.findOne(".rotatable"),this.scalableNode=t.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),Jo.useCSSSelectors||this._renderPorts(),this},resize:function(e){if(this.scalableNode)return this.sgResize(e);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var e=this.getTranslateString(),t=this.getRotateString();t&&(e+=" "+t),this.vel.attr("transform",e)},getTranslateString:function(){var e=this.model.attributes.position;return"translate("+e.x+","+e.y+")"},getRotateString:function(){var e=this.model.attributes,t=e.angle;if(!t)return null;var n=e.size;return"rotate("+t+","+n.width/2+","+n.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(e){var t=this.model,n=t.angle(),r=t.size(),i=this.scalableNode,o=!1;i.node.getElementsByTagName("path").length>0&&(o=!0);var s=i.getBBox({recursive:o});i.attr("transform","scale("+r.width/(s.width||1)+","+r.height/(s.height||1)+")");var c=this.rotatableNode,d=c&&c.attr("transform");if(d){c.attr("transform",d+" rotate("+-n+","+r.width/2+","+r.height/2+")");var f=i.getBBox({target:this.paper.cells});t.set("position",{x:f.x,y:f.y},Tt({updateHandled:!0},e)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(e={}){const t=e.model||this.model,r=(e.paper||this.paper).model,i=e.initialZIndices={},o=t.getEmbeddedCells({deep:!0}),s=r.getConnectedLinks(t,{deep:!0,includeEnclosed:!0});[t,...o,...s].forEach(c=>i[c.id]=c.attributes.z),t.startBatch("to-front"),t.toFront({deep:!0,ui:!0});const a=r.getElements().reduce((c,d)=>Math.max(c,d.attributes.z||0),0);s.forEach(c=>{c.attributes.z<=a&&c.set("z",a+1,{ui:!0})}),t.stopBatch("to-front");const u=t.parent();u?(r.getCell(u).unembed(t,{ui:!0}),e.initialParentId=u):e.initialParentId=null},processEmbedding:function(e={},t,n,r){const i=e.model||this.model,o=e.paper||this.paper,s=o.model,{findParentBy:a,frontParentOnly:u,validateEmbedding:c}=o.options;let d;d=sr(a)?vn(a.call(s,this,t,n,r)):"pointer"===a?vn(s.findModelsFromPoint({x:n,y:r})):s.findModelsUnderElement(i,{searchBy:a}),d=d.filter(m=>m instanceof zs&&i.id!==m.id&&!m.isEmbeddedIn(i)),u&&(d=d.slice(-1));let f=null;const p=e.candidateEmbedView;for(let m=d.length-1;m>=0;m--){const b=d[m];if(p&&p.model.id==b.id){f=p;break}{const D=b.findView(o);if(!sr(c)||c.call(o,this,D)){f=D;break}}}f&&f!=p&&(this.clearEmbedding(e),e.candidateEmbedView=f.highlight(f.findProxyNode(null,"container"),{embedding:!0})),!f&&p&&this.clearEmbedding(e)},clearEmbedding:function(e){e||(e={});var t=e.candidateEmbedView;t&&(t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null)},finalizeEmbedding:function(e={}){const t=e.candidateEmbedView,n=e.model||this.model,r=e.paper||this.paper;if(t)t.model.embed(n,{ui:!0}),t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null;else{const{validateUnembedding:i}=r.options,{initialParentId:o}=e;if(o&&"function"==typeof i&&!i.call(r,this))return void this._disallowUnembed(e)}r.model.getConnectedLinks(n,{deep:!0}).forEach(i=>{i.reparent({ui:!0})})},_disallowUnembed:function(e){const{model:t,whenNotAllowed:n="revert"}=e,r=t||this.model,o=(e.paper||this.paper).model;switch(n){case"remove":r.remove({ui:!0});break;case"revert":{const{initialParentId:s,initialPosition:a,initialZIndices:u}=e;if(a){const{x:d,y:f}=a;r.position(d,f,{deep:!0,ui:!0})}u&&Object.keys(u).forEach(d=>{const f=o.getCell(d);f&&f.set("z",u[d],{ui:!0})});const c=o.getCell(s);c&&c.embed(r,{ui:!0});break}}},getDelegatedView:function(){for(var e=this,t=e.model,n=e.paper;e&&!t.isLink();){if(!t.isEmbedded()||e.can("stopDelegation"))return e;t=t.getParentCell(),e=n.findViewByModel(t)}return null},findProxyNode:function(e,t){e||(e=this.el);const n=e.getAttribute(`${t}-selector`);if(n){const r=this.findAttribute("port",e);if(r){const i=this.findPortNode(r,n);if(i)return i}else{const[i]=this.findBySelector(n);if(i)return i}}return e},notifyPointerdown(e,t,n){pn.prototype.pointerdown.call(this,e,t,n),this.notify("element:pointerdown",e,t,n)},notifyPointermove(e,t,n){pn.prototype.pointermove.call(this,e,t,n),this.notify("element:pointermove",e,t,n)},notifyPointerup(e,t,n){this.notify("element:pointerup",e,t,n),pn.prototype.pointerup.call(this,e,t,n)},pointerdblclick:function(e,t,n){pn.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",e,t,n)},pointerclick:function(e,t,n){pn.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",e,t,n)},contextmenu:function(e,t,n){pn.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",e,t,n)},pointerdown:function(e,t,n){this.notifyPointerdown(e,t,n),this.dragStart(e,t,n)},pointermove:function(e,t,n){const r=this.eventData(e),{targetMagnet:i,action:o,delegatedView:s}=r;switch(i&&this.magnetpointermove(e,i,t,n),o){case"magnet":this.dragMagnet(e,t,n);break;case"move":(s||this).drag(e,t,n);default:if(r.preventPointerEvents)break;this.notifyPointermove(e,t,n)}this.eventData(e,r)},pointerup:function(e,t,n){const r=this.eventData(e),{targetMagnet:i,action:o,delegatedView:s}=r;switch(i&&this.magnetpointerup(e,i,t,n),o){case"magnet":this.dragMagnetEnd(e,t,n);break;case"move":(s||this).dragEnd(e,t,n);default:if(r.preventPointerEvents)break;this.notifyPointerup(e,t,n)}i&&this.magnetpointerclick(e,i,t,n),this.checkMouseleave(e)},mouseover:function(e){pn.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",e)},mouseout:function(e){pn.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",e)},mouseenter:function(e){pn.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",e)},mouseleave:function(e){pn.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",e)},mousewheel:function(e,t,n,r){pn.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",e,t,n,r)},onmagnet:function(e,t,n){const{currentTarget:r}=e;this.magnetpointerdown(e,r,t,n),this.eventData(e,{targetMagnet:r}),this.dragMagnetStart(e,t,n)},magnetpointerdown:function(e,t,n,r){this.notify("element:magnet:pointerdown",e,t,n,r)},magnetpointermove:function(e,t,n,r){this.notify("element:magnet:pointermove",e,t,n,r)},magnetpointerup:function(e,t,n,r){this.notify("element:magnet:pointerup",e,t,n,r)},magnetpointerdblclick:function(e,t,n,r){this.notify("element:magnet:pointerdblclick",e,t,n,r)},magnetcontextmenu:function(e,t,n,r){this.notify("element:magnet:contextmenu",e,t,n,r)},dragStart:function(e,t,n){if(this.isDefaultInteractionPrevented(e))return;var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(e,{action:"move",delegatedView:r});const i=r.model.position();r.eventData(e,{initialPosition:i,pointerOffset:i.difference(t,n),restrictedArea:this.paper.getRestrictedArea(r,t,n)})},dragMagnetStart:function(e,t,n){const{paper:r}=this,i=e.isPropagationStopped();if(i&&this.eventData(e,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(e)||!this.can("addLinkFromMagnet"))return;const{targetMagnet:o=e.currentTarget}=this.eventData(e);e.stopPropagation(),r.options.validateMagnet.call(r,this,o,e)?(r.options.magnetThreshold<=0&&this.dragLinkStart(e,o,t,n),this.eventData(e,{action:"magnet"})):i?this.dragStart(e,t,n):this.pointerdown(e,t,n)},drag:function(e,t,n){var r=this.paper,i=r.options.gridSize,o=this.model,s=this.eventData(e),{pointerOffset:a,restrictedArea:u,embedding:c}=s,d=wu(t+a.x,i),f=wu(n+a.y,i);o.position(d,f,{restrictedArea:u,deep:!0,ui:!0}),r.options.embeddingMode&&(c||(this.prepareEmbedding(s),c=!0),this.processEmbedding(s,e,t,n)),this.eventData(e,{embedding:c})},dragMagnet:function(e,t,n){this.dragLink(e,t,n)},dragEnd:function(e,t,n){var r=this.eventData(e);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(e,t,n){this.dragLinkEnd(e,t,n)},magnetpointerclick:function(e,t,n,r){var i=this.paper;i.eventData(e).mousemoved>i.options.clickThreshold||this.notify("element:magnet:pointerclick",e,t,n,r)}},{Flags:yn});Tt(Qh.prototype,Mj);const Yj=function(e,t,n){return e},Xj=function(e,t,n){var c,d,f,r=t.side||"bottom",i=ka(t.padding||40),o=n.sourceBBox,s=n.targetBBox,a=o.center(),u=s.center();switch(r){case"bottom":f=1,c="y",d="height";break;case"top":f=-1,c="y",d="height";break;case"left":f=-1,c="x",d="width";break;case"right":f=1,c="x",d="width";break;default:throw new Error("Router: invalid side")}return a[c]+=f*(o[d]/2+i[r]),u[c]+=f*(s[d]/2+i[r]),f*(a[c]-u[c])>0?u[c]=a[c]:a[c]=u[c],[a].concat(e,u)};var Qj={N:"S",S:"N",E:"W",W:"E"},Kj={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function Kh(e,t,n){var r=new W(e.x,t.y);return n.containsPoint(r)&&(r=new W(t.x,e.y)),r}function xy(e,t){return e["W"===t||"E"===t?"width":"height"]}function ro(e,t){return e.x===t.x?e.y>t.y?"N":"S":e.y===t.y?e.x>t.x?"W":"E":null}function Jh(e){return new ze(e.x,e.y,0,0)}function ep(e){var t=ka(e.padding||e.elementPadding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function GS(e,t){return e.sourceBBox.clone().moveAndExpand(ep(t))}function qS(e,t){return e.targetBBox.clone().moveAndExpand(ep(t))}function WS(e,t,n){var r=new W(e.x,t.y),i=new W(t.x,e.y),o=ro(e,r),s=ro(e,i),a=Qj[n],u=o===n||o!==a&&(s===a||s!==n)?r:i;return{points:[u],direction:ro(u,t)}}function tp(e,t,n){var r=Kh(e,t,n);return{points:[r],direction:ro(r,t)}}function t3(e,t,n,r){var u,i={},o=[new W(e.x,t.y),new W(t.x,e.y)],s=o.filter(function(f){return!n.containsPoint(f)}),a=s.filter(function(f){return ro(f,e)!==r});if(a.length>0)u=a.filter(function(f){return ro(e,f)===r}).pop(),i.points=[u=u||a[0]],i.direction=ro(u,t);else{u=DH(o,s)[0];var c=new W(t).move(u,-xy(n,r)/2),d=Kh(c,e,n);i.points=[d,c],i.direction=ro(c,t)}return i}function n3(e,t,n,r){var i=tp(t,e,r),o=i.points[0];if(n.containsPoint(o)){var s=(i=tp(e,t,n)).points[0];if(r.containsPoint(s)){var a=new W(e).move(s,-xy(n,ro(e,s))/2),u=new W(t).move(o,-xy(r,ro(t,o))/2),c=new Xe(a,u).midpoint(),d=tp(e,c,n),f=WS(c,t,d.direction);i.points=[d.points[0],f.points[0]],i.direction=f.direction}}return i}function Sy(e,t,n,r,i){var d,f,p,o={},s=n.union(r).inflate(1),a=s.center().distance(t)>s.center().distance(e),u=a?t:e,c=a?e:t;return i?(d=W.fromPolar(s.width+s.height,Kj[i],u),d=s.pointNearestToPoint(d).move(d,-1)):d=s.pointNearestToPoint(u).move(u,1),f=Kh(d,c,s),d.round().equals(f.round())?(f=W.fromPolar(s.width+s.height,yo(d.theta(u))+Math.PI/2,c),p=Kh(d,f=s.pointNearestToPoint(f).move(c,1).round(),s),o.points=a?[f,p,d]:[d,p,f]):o.points=a?[f,d]:[d,f],o.direction=ro(a?d:f,t),o}function Iy(e,t,n){var r=GS(n,t),i=qS(n,t),o=function Jj(e,t){return e.sourceAnchor?e.sourceAnchor:GS(e,t).center()}(n,t),s=function e3(e,t){return e.targetAnchor?e.targetAnchor:qS(e,t).center()}(n,t);r=r.union(Jh(o)),i=i.union(Jh(s)),(e=vn(e).map(W)).unshift(o),e.push(s);for(var a,u=[],c=0,d=e.length-1;c<d;c++){var f=null,p=e[c],m=e[c+1],b=!!ro(p,m);if(0===c)c+1===d?r.intersect(i.clone().inflate(1))?f=Sy(p,m,r,i):b||(f=n3(p,m,r,i)):r.containsPoint(m)?f=Sy(p,m,r,Jh(m).moveAndExpand(ep(t))):b||(f=tp(p,m,r));else if(c+1===d){var D=b&&ro(m,p)===a;i.containsPoint(p)||D?f=Sy(p,m,Jh(p).moveAndExpand(ep(t)),i,a):b||(f=t3(p,m,i,a))}else b||(f=WS(p,m,a));f?(Array.prototype.push.apply(u,f.points),a=f.direction):a=ro(p,m),c+1<d&&u.push(m)}return u}var ZS={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var e=this.step,t=this.cost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:-e,offsetY:0,cost:t},{offsetX:0,offsetY:e,cost:t},{offsetX:0,offsetY:-e,cost:t}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},isPointObstacle:null,fallbackRouter:function(e,t,n){if(!sr(Iy))throw new Error("Manhattan requires the orthogonal router as default fallback.");return Iy(e,Tt({},ZS,t),n)},fallbackRoute:function(e,t,n){return null},draggingRoute:null};function Ay(e){this.map={},this.options=e,this.mapGridSize=100}function Tu(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function YS(e,t){return t&&t.paddingBox?e.sourceBBox.clone().moveAndExpand(t.paddingBox):e.sourceBBox.clone()}function XS(e,t){return t&&t.paddingBox?e.targetBBox.clone().moveAndExpand(t.paddingBox):e.targetBBox.clone()}function QS(e,t){return e.sourceAnchor?e.sourceAnchor:YS(e,t).center()}function My(e,t,n,r,i){var o=360/n,s=e.theta(function i3(e,t,n,r){var i=r.step;return new W(e.x+(t.x-e.x)/n.x*i,e.y+(t.y-e.y)/n.y*i)}(e,t,r,i)),a=gs(s+o/2);return o*Math.floor(a/o)}function KS(e,t){var n=Math.abs(e-t);return n>180?360-n:n}function JS(e,t){if(!e)return t;var n=Math.abs(e),r=Math.round(n/t);return r?t+(n-r*t)/r:n}function Af(e,t){return e.round(t)}function np(e,t,n){return Af(function a3(e,t){var n=t.source,r=wu(e.x-n.x,t.x)+n.x,i=wu(e.y-n.y,t.y)+n.y;return new W(r,i)}(e.clone(),t),n)}function Mf(e){return e.clone().toString()}function Py(e){return new W(0===e.x?0:Math.abs(e.x)/e.x,0===e.y?0:Math.abs(e.y)/e.y)}function u3(e,t,n,r,i,o,s){for(var f,a=[],u=Py(i.difference(n)),c=Mf(n),d=e[c];d;){var p=Py((f=t[c]).difference(d));p.equals(u)||(a.unshift(f),u=p),d=e[c=Mf(d)]}var m=t[c];return Py(m.difference(r)).equals(u)||a.unshift(m),a}function eI(e,t){for(var n=1/0,r=0,i=t.length;r<i;r++){var o=e.manhattanDistance(t[r]);o<n&&(n=o)}return n}function tI(e,t,n,r,i){var o=i.precision,s=i.directionMap,a=e.difference(t.center()),u=In(s)?Object.keys(s):[],c=vn(n),d=u.reduce(function(f,p){if(c.includes(p)){for(var O,m=s[p],b=new W(e.x+m.x*(Math.abs(a.x)+t.width),e.y+m.y*(Math.abs(a.y)+t.height)),x=new Xe(e,b).intersect(t)||[],P=x.length,Y=null,ee=0;ee<P;ee++){var ie=x[ee],be=e.squaredDistance(ie);(void 0===O||be>O)&&(O=be,Y=ie)}if(Y){var w=np(Y,r,o);t.containsPoint(w)&&(w=np(w.offset(m.x*r.x,m.y*r.y),r,o)),f.push(w)}}return f},[]);return t.containsPoint(e)||d.push(np(e,r,o)),d}function c3(e,t,n,r){var o,s,i=r.precision;o=Af(e instanceof ze?QS(this,r).clone():e.clone(),i),s=Af(t instanceof ze?function r3(e,t){return e.targetAnchor?e.targetAnchor:XS(e,t).center()}(this,r).clone():t.clone(),i);var u,c,d,f,a=function s3(e,t,n){return{source:t.clone(),x:JS(n.x-t.x,e),y:JS(n.y-t.y,e)}}(r.step,o,s);if(d=e instanceof ze?tI(u=o,e,r.startDirections,a,r):[u=o],t instanceof ze?(c=s,f=tI(s,t,r.endDirections,a,r)):f=[c=s],d=d.filter(Gt=>!n(Gt)),f=f.filter(Gt=>!n(Gt)),d.length>0&&f.length>0){for(var p=new Tu,m={},b={},D={},x=0,P=d.length;x<P;x++){var O=d[x],Y=Mf(O);p.add(Y,eI(O,f)),m[Y]=O,D[Y]=0}var be,w,ee=r.previousDirectionAngle,ie=void 0===ee,S=r.directions;!function o3(e,t,n){var r=n.step;vn(n.directions).forEach(function(i){i.gridOffsetX=i.offsetX/r*t.x,i.gridOffsetY=i.offsetY/r*t.y})}(0,a,r);for(var M=S.length,R=vn(f).reduce(function(Gt,mr){var gn=Mf(mr);return Gt.push(gn),Gt},[]),Z=r.maximumLoops;!p.isEmpty()&&Z>0;){var fe,re=p.pop(),oe=m[re],Ie=b[re],He=D[re],ne=void 0===Ie,pe=oe.equals(u);fe=ne?ie?pe?null:My(u,oe,M,a,r):ee:My(Ie,oe,M,a,r);var he=d.length===f.length;if(he)for(var zt=0;zt<d.length;zt++)if(!d[zt].equals(f[zt])){he=!1;break}if((!ne||!he)&&R.indexOf(re)>=0)return r.previousDirectionAngle=fe,u3(b,m,oe,u,c);for(x=0;x<M;x++){var gr=(be=S[x]).angle;if(w=KS(fe,gr),ie&&pe||!(w>r.maxAllowedDirectionChange)){var _r=np(oe.clone().offset(be.gridOffsetX,be.gridOffsetY),a,i),rt=Mf(_r);if(!p.isClose(rt)&&!n(_r)){if(R.indexOf(rt)>=0&&!_r.equals(c)&&KS(gr,My(_r,c,M,a,r))>r.maxAllowedDirectionChange)continue;var On=He+be.cost+(pe?0:r.penalties[w]);(!p.isOpen(rt)||On<D[rt])&&(m[rt]=_r,b[rt]=oe,D[rt]=On,p.add(rt,On+eI(_r,f)))}}}Z--}}return r.fallbackRoute.call(this,u,c,r)}Ay.prototype.build=function(e,t){var n=this.options,r=vn(n.excludeEnds).reduce(function(u,c){var d=t.get(c);if(d){var f=e.getCell(d.id);f&&u.push(f)}return u},[]),i=[],o=e.getCell(t.get("source").id);o&&(i=Jv(i,o.getAncestors().map(function(u){return u.id})));var s=e.getCell(t.get("target").id);s&&(i=Jv(i,s.getAncestors().map(function(u){return u.id})));var a=this.mapGridSize;return e.getElements().reduce(function(u,c){var d=vn(n.excludeTypes).includes(c.get("type")),f=r.find(function(ee){return ee.id===c.id}),p=i.includes(c.id);if(!(d||f||p))for(var b=c.getBBox().moveAndExpand(n.paddingBox),D=b.origin().snapToGrid(a),x=b.corner().snapToGrid(a),P=D.x;P<=x.x;P+=a)for(var O=D.y;O<=x.y;O+=a){var Y=P+"@"+O;u[Y]=u[Y]||[],u[Y].push(b)}return u},this.map),this},Ay.prototype.isPointAccessible=function(e){var t=e.clone().snapToGrid(this.mapGridSize).toString();return vn(this.map[t]).every(function(n){return!n.containsPoint(e)})},Tu.prototype.add=function(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=t;var n=Mx(this.items,e,function(r){return this.values[r]}.bind(this));this.items.splice(n,0,e)},Tu.prototype.remove=function(e){this.hash[e]=this.CLOSE},Tu.prototype.isOpen=function(e){return this.hash[e]===this.OPEN},Tu.prototype.isClose=function(e){return this.hash[e]===this.CLOSE},Tu.prototype.isEmpty=function(){return 0===this.items.length},Tu.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e};const Ny=function(e,t,n){return function f3(e,t,n){(function l3(e){if(e.directions=Fr(e,"directions"),e.penalties=Fr(e,"penalties"),e.paddingBox=Fr(e,"paddingBox"),e.padding=Fr(e,"padding"),e.padding){var t=ka(e.padding);e.paddingBox={x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}vn(e.directions).forEach(function(n){var r=new W(0,0),i=new W(n.offsetX,n.offsetY);n.angle=gs(r.theta(i))})})(t),n.options.perpendicular=!!t.perpendicular;var r=YS(n,t),i=XS(n,t),o=QS(n,t);let s;if("function"==typeof t.isPointObstacle)s=t.isPointObstacle;else{const Y=new Ay(t);Y.build(n.paper.model,n.model),s=ee=>!Y.isPointAccessible(ee)}for(var d,f,a=vn(e).map(W),u=[],c=o,p=0,m=a.length;p<=m;p++){var b=null;if(f=d||r,!(d=a[p])&&(d=i,(!n.model.get("source").id||!n.model.get("target").id)&&sr(t.draggingRoute))){var x=f===r?o:f,P=d.origin();b=t.draggingRoute.call(n,x,P,t)}if(null===(b=b||c3.call(n,f,d,s,t)))return t.fallbackRouter(e,t,n);var O=b[0];O&&O.equals(c)&&b.shift(),c=b[b.length-1]||c,Array.prototype.push.apply(u,b)}return u}(e,Tt({},ZS,t),n)};var d3={maxAllowedDirectionChange:45,diagonalCost:function(){var e=this.step;return Math.ceil(Math.sqrt(e*e<<1))},directions:function(){var e=this.step,t=this.cost(),n=this.diagonalCost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:e,offsetY:e,cost:n},{offsetX:0,offsetY:e,cost:t},{offsetX:-e,offsetY:e,cost:n},{offsetX:-e,offsetY:0,cost:t},{offsetX:-e,offsetY:-e,cost:n},{offsetX:0,offsetY:-e,cost:t},{offsetX:e,offsetY:-e,cost:n}]},fallbackRoute:function(e,t,n){var r=e.theta(t),i=[],o={x:t.x,y:e.y},s={x:e.x,y:t.y};if(r%180>90){var a=o;o=s,s=a}var u=r%90<45?o:s,c=new Xe(e,u),d=90*Math.ceil(r/90),f=W.fromPolar(c.squaredLength(),yo(d+135),u),p=new Xe(t,f),m=c.intersection(p),b=m||t,x=360/n.directions.length,P=(m?b:e).theta(t),O=gs(P+x/2),Y=x*Math.floor(O/x);return n.previousDirectionAngle=Y,b&&i.push(b.round()),i.push(t),i}};const h3=function(e,t,n){if(!sr(Ny))throw new Error("Metro requires the manhattan router.");return Ny(e,Tt({},d3,t),n)},Ne={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},nI=[Ne.LEFT,Ne.RIGHT,Ne.TOP,Ne.BOTTOM],Jc={[Ne.LEFT]:Ne.RIGHT,[Ne.RIGHT]:Ne.LEFT,[Ne.TOP]:Ne.BOTTOM,[Ne.BOTTOM]:Ne.TOP},p3=[Ne.TOP,Ne.BOTTOM],rp={0:Ne.RIGHT,180:Ne.LEFT,270:Ne.TOP,90:Ne.BOTTOM};function Pf(e){return e.angle()}function ip(e){return new tr(e).simplify({threshold:1}).points}function op(e,t){const{point:n,x0:r,y0:i,view:o,bbox:s,direction:a}=e,{point:u,x0:c,y0:d,view:f,bbox:p,direction:m}=t;let b,D;if(o)b=o.model.isLink()?rI(u,n,o):a===Ne.ANCHOR_SIDE?s.sideNearestToPoint(n):a===Ne.MAGNET_SIDE?o.model.getBBox().sideNearestToPoint(n):a;else{const x=new ze(r,i,0,0);b=nI.includes(a)?a:x.sideNearestToPoint(u)}if(f)D=f.model.isLink()?rI(n,u,f):m===Ne.ANCHOR_SIDE?p.sideNearestToPoint(u):m===Ne.MAGNET_SIDE?f.model.getBBox().sideNearestToPoint(u):m;else{const x=new ze(c,d,0,0);D=nI.includes(m)?m:x.sideNearestToPoint(n)}return[b,D]}function rI(e,t,n){const r=n.getTangentAtLength(n.getClosestPointLength(t)),i=90*Math.round(Pf(r)/90);if(i%180==0&&e.y===t.y)return e.x<t.x?Ne.LEFT:Ne.RIGHT;if(e.x===t.x)return e.y<t.y?Ne.TOP:Ne.BOTTOM;switch(i){case 0:case 180:case 360:return e.y<t.y?Ne.TOP:Ne.BOTTOM;case 90:case 270:return e.x<t.x?Ne.LEFT:Ne.RIGHT}}function iI(e,t,n,r,i,o,s){r===Ne.AUTO&&(r=i?Ne.MAGNET_SIDE:Ne.ANCHOR_SIDE);const a=e&&e.model.isElement(),{x:u,y:c,width:d=0,height:f=0}=a?ze.fromRectUnion(n,e.model.getBBox()):o;return{point:t,x0:u,y0:c,view:e,bbox:n,width:d,height:f,direction:r,margin:a?s:0}}function Oy({x:e,y:t}){const n=new W(e,t);return{point:n,x0:n.x,y0:n.y,view:null,bbox:new ze(e,t,0,0),width:0,height:0,direction:null,margin:0}}function oI(e,t,n){const r=t.point.clone(),{x0:i,y0:o,width:s,height:a}=t;switch(e){case"left":r.x=i-n;break;case"right":r.x=i+s+n;break;case"top":r.y=o-n;break;case"bottom":r.y=o+a+n}return r}function Ba(e,t){const{point:n,x0:r,y0:i,view:o,width:s,height:a,margin:u}=e,{point:c,x0:d,y0:f,width:p,height:m,margin:b}=t,D=d+p,x=f+m,P=r+s,O=i+a,Y=o&&o.model.isElement(),ee=r-u,ie=P+u,be=i-u,w=O+u,S=d-b,M=D+b,R=f-b,Z=x+b,[re,oe]=op(e,t),Ie=oI(re,{point:n,x0:r,y0:i,width:s,height:a},u),He=oI(oe,{point:c,x0:d,y0:f,width:p,height:m},b),{x:ne,y:pe}=Ie,{x:fe,y:he}=He,Rt=(f+x)/2,rt=((r+P)/2<(d+D)/2?P+d:D+r)/2,xt=((i+O)/2<Rt?O+f:x+i)/2;if("left"===re&&"right"===oe){if(ee<=M){let Ee=xt;return P<=d&&(x>=be&&he<pe?Ee=Math.min(R,be):f<=w&&he>=pe&&(Ee=Math.max(Z,w))),[{x:ne,y:pe},{x:ne,y:Ee},{x:fe,y:Ee},{x:fe,y:he}]}const xe=(ne+fe)/2;return[{x:xe,y:pe},{x:xe,y:he}]}if("right"===re&&"left"===oe){if(ie>=S){let Ee=xt;return ne>D&&(x>=be&&he<pe?Ee=Math.min(R,be):f<=w&&he>=pe&&(Ee=Math.max(Z,w))),[{x:ne,y:pe},{x:ne,y:Ee},{x:fe,y:Ee},{x:fe,y:he}]}const xe=(ne+fe)/2;return[{x:xe,y:pe},{x:xe,y:he}]}if("top"===re&&"bottom"===oe){if(pe<he){let Ee=rt,Ue=pe;return pe<f&&(D>=ee&&fe<ne?Ee=Math.min(S,ee):d<=ie&&fe>=ne&&(Ee=Math.max(M,ie))),[{x:ne,y:Ue},{x:Ee,y:Ue},{x:Ee,y:he},{x:fe,y:he}]}const xe=(pe+he)/2;return[{x:ne,y:xe},{x:fe,y:xe}]}if("bottom"===re&&"top"===oe){if(pe-u>he){let Ee=rt,Ue=pe;return pe>x&&(D>=ee&&fe<ne?Ee=Math.min(S,ee):d<=ie&&fe>=ne&&(Ee=Math.max(M,ie))),[{x:ne,y:Ue},{x:Ee,y:Ue},{x:Ee,y:he},{x:fe,y:he}]}const xe=(pe+he)/2;return[{x:ne,y:xe},{x:fe,y:xe}]}if("top"===re&&"top"===oe){let xe,Ee=Math.min((O+f)/2,he),Ue=Math.min((i+x)/2,pe);if(he<pe){if(ne>=M||ne<=S)return[{x:ne,y:Math.min(pe,he)},{x:fe,y:Math.min(pe,he)}];xe=fe>ne?Math.min(ne,S):Math.max(ne,M)}else{if(fe>=ie||fe<=ee)return[{x:ne,y:Math.min(pe,he)},{x:fe,y:Math.min(pe,he)}];xe=fe>=ne?Math.max(fe,ie):Math.min(fe,ee)}return[{x:ne,y:Ue},{x:xe,y:Ue},{x:xe,y:Ee},{x:fe,y:Ee}]}if("bottom"===re&&"bottom"===oe){let xe,Ee=Math.max((i+x)/2,he),Ue=Math.max((O+f)/2,pe);if(he>pe){if(ne>=M||ne<=S)return[{x:ne,y:Math.max(pe,he)},{x:fe,y:Math.max(pe,he)}];xe=fe>ne?Math.min(ne,S):Math.max(ne,M)}else{if(fe>=ie||fe<=ee)return[{x:ne,y:Math.max(pe,he)},{x:fe,y:Math.max(pe,he)}];xe=fe>=ne?Math.max(fe,ie):Math.min(fe,ee)}return[{x:ne,y:Ue},{x:xe,y:Ue},{x:xe,y:Ee},{x:fe,y:Ee}]}if("left"===re&&"left"===oe){let xe,Ee=Math.min((P+d)/2,fe),Ue=Math.min((r+D)/2,ne);return xe=fe>ne?he<=pe?Math.min(be,he):Math.max(w,he):he>=pe?Math.min(R,pe):Math.max(Z,pe),[{x:Ue,y:pe},{x:Ue,y:xe},{x:Ee,y:xe},{x:Ee,y:he}]}if("right"===re&&"right"===oe){let xe,Ee=Math.max((r+D)/2,fe),Ue=Math.max((P+d)/2,ne);return xe=fe<ne?he<=pe?Math.min(be,he):Math.max(w,he):he>=pe?Math.min(R,pe):Math.max(Z,pe),[{x:Ue,y:pe},{x:Ue,y:xe},{x:Ee,y:xe},{x:Ee,y:he}]}if("top"===re&&"right"===oe){if(pe>he){if(ne<fe){let Ee=xt;return(Ee>Rt||!Y)&&Ee<Z&&ne<d&&(Ee=R),[{x:ne,y:Ee},{x:fe,y:Ee},{x:fe,y:he}]}return[{x:ne,y:he}]}const xe=Math.max(rt,M);if(fe<ne&&he>i&&he<O)return[{x:ne,y:pe},{x:xe,y:pe},{x:xe,y:he}];if(xe>ee&&he>i||d>P){const Ee=Math.min(i-u,f-b),Ue=Math.max(P+u,D+b);return[{x:ne,y:Ee},{x:Ue,y:Ee},{x:Ue,y:he}]}return[{x:ne,y:pe},{x:Math.max(xe,fe),y:pe},{x:Math.max(xe,fe),y:he}]}if("top"===re&&"left"===oe){if(pe>he){if(ne>fe){let Ee=xt;return(Ee>Rt||!Y)&&Ee<Z&&ne>D&&(Ee=R),[{x:ne,y:Ee},{x:fe,y:Ee},{x:fe,y:he}]}return[{x:ne,y:he}]}const xe=Math.min(S,rt);if(ne<fe&&O>=he)return[{x:ne,y:pe},{x:xe,y:pe},{x:xe,y:he}];if(xe<ie&&pe<x){const Ee=Math.min(be,R),Ue=Math.min(ee,S);return[{x:ne,y:Ee},{x:Ue,y:Ee},{x:Ue,y:he}]}return[{x:ne,y:pe},{x:xe,y:pe},{x:xe,y:he}]}if("bottom"===re&&"right"===oe){if(pe<he){if(ne<fe){let Ee=xt;return(Ee<Rt||!Y)&&Ee>R&&ne<d&&(Ee=Z),[{x:ne,y:Ee},{x:fe,y:Ee},{x:fe,y:he}]}return[{x:ne,y:he}]}if(r<fe){const Ee=Math.max(w,Z),Ue=Math.max(ie,M);return[{x:ne,y:Ee},{x:Ue,y:Ee},{x:Ue,y:he}]}return[{x:ne,y:pe},{x:rt,y:pe},{x:rt,y:he}]}if("bottom"===re&&"left"===oe){if(pe<he){if(ne>fe){let Ee=xt;return(Ee<Rt||!Y)&&Ee>R&&ne>D&&(Ee=Z),[{x:ne,y:Ee},{x:fe,y:Ee},{x:fe,y:he}]}return[{x:ne,y:he}]}if(P>fe){const Ee=Math.max(w,Z),Ue=Math.min(ee,S);return[{x:ne,y:Ee},{x:Ue,y:Ee},{x:Ue,y:he}]}return[{x:ne,y:pe},{x:rt,y:pe},{x:rt,y:he}]}if("left"===re&&"bottom"===oe){if(ne>=fe&&pe>=Z)return[{x:fe,y:pe}];if(ne>=D&&pe<he)return[{x:rt,y:pe},{x:rt,y:he},{x:fe,y:he}];if(fe<P&&x<=i)return[{x:ne,y:pe},{x:ne,y:xt},{x:fe,y:xt}];const xe=Math.min(S,ne),Ee=Math.max(w,Z);return[{x:xe,y:pe},{x:xe,y:Ee},{x:fe,y:Ee}]}if("left"===re&&"top"===oe){if(ne>fe&&pe<R)return[{x:fe,y:pe}];if(ne>=D&&pe>he)return[{x:rt,y:pe},{x:rt,y:he},{x:fe,y:he}];if(fe<=P&&he>pe)return[{x:ne,y:pe},{x:ne,y:xt},{x:fe,y:xt}];const xe=he<pe?Math.min(ee,S):ee,Ee=Math.min(be,R);return[{x:xe,y:pe},{x:xe,y:Ee},{x:fe,y:Ee}]}if("right"===re&&"top"===oe){if(ne<=fe&&pe<R)return[{x:fe,y:pe}];if(P<d&&pe>he)return[{x:rt,y:pe},{x:rt,y:he},{x:fe,y:he}];if(fe<ne&&f>O)return[{x:ne,y:pe},{x:ne,y:xt},{x:fe,y:xt}];const xe=Math.max(ie,M),Ee=Math.min(be,R);return[{x:xe,y:pe},{x:xe,y:Ee},{x:fe,y:Ee}]}if("right"===re&&"bottom"===oe){if(ne<=fe&&pe>=Z)return[{x:fe,y:pe}];if(ne<=S&&pe<he)return[{x:rt,y:pe},{x:rt,y:he},{x:fe,y:he}];if(fe>r&&x<i)return[{x:ne,y:pe},{x:ne,y:xt},{x:fe,y:xt}];const xe=Math.max(M,ne),Ee=Math.max(w,Z);return[{x:xe,y:pe},{x:xe,y:Ee},{x:fe,y:Ee}]}}function sI(e,t,n){const{sourceDirection:r=Ne.AUTO,targetDirection:i=Ne.AUTO}=t,o=t.margin||20,s=t.useVertices||!1,a=!!n.model.source().port,u=iI(n.sourceView,n.sourceAnchor,n.sourceBBox,r,a,n.sourceAnchor,o),c=!!n.model.target().port,d=iI(n.targetView,n.targetAnchor,n.targetBBox,i,c,n.targetAnchor,o);let f=[];if(!s||0===e.length)return ip(Ba(u,d));const p=e.map(D=>Oy(D)),[m]=p;if(u.view&&u.view.model.isElement()&&u.view.model.getBBox().inflate(o).containsPoint(m.point)){const[D]=op(u,m),x=D,P=Oy(u.point);P.margin=o,P.direction=D,m.direction=x,f.push(...Ba(P,m),m.point)}else{const x=function w3(e,t,n){const[r]=op(e,t);switch(r){case Ne.TOP:return function g3(e,t,n){const{x0:r,y0:i,width:o,height:s,point:a,margin:u}=e,d=i+s,f=r-u,p=r+o+u,m=i-u,{x:b}=a,{x0:D,y0:x}=t;return D===b&&x<i?Ne.BOTTOM:D<b&&x<m?Ne.RIGHT:D>b&&x<m?Ne.LEFT:D<f&&x>=i||D>p&&x>=i?Ne.TOP:D>=f&&D<=b&&x>d||D<=p&&D>=b&&x>d?n.point.x<D?Ne.RIGHT:Ne.LEFT:Ne.TOP}(e,t,n);case Ne.RIGHT:return function y3(e,t,n){const{y0:r,x0:i,width:o,height:s,point:a,margin:u}=e,c=i+o,f=c+u,p=r-u,m=r+s+u,{x:b,y:D}=a,{x0:x,y0:P}=t;return x>b&&P===D?Ne.LEFT:x>=f&&P<D?Ne.BOTTOM:x>=f&&P>D?Ne.TOP:x<=c&&P<=p||x<=c&&P>=m?Ne.RIGHT:x<i&&P>=p&&P<=D||x<i&&P<=m&&P>=D?n.point.y<P?Ne.BOTTOM:Ne.TOP:Ne.RIGHT}(e,t,n);case Ne.BOTTOM:return function m3(e,t,n){const{x0:r,y0:i,width:o,height:s,point:a,margin:u}=e,d=i+s,f=r-u,p=r+o+u,m=d+u,{x:b}=a,{x0:D,y0:x}=t;return D===b&&x>d?Ne.TOP:D<b&&x>m?Ne.RIGHT:D>b&&x>m?Ne.LEFT:D<f&&x<=d||D>p&&x<=d?Ne.BOTTOM:D>=f&&D<=b&&x<i||D<=p&&D>=b&&x<i?n.point.x<D?Ne.RIGHT:Ne.LEFT:Ne.BOTTOM}(e,t,n);case Ne.LEFT:return function v3(e,t,n){const{y0:r,x0:i,width:o,height:s,point:a,margin:u}=e,c=i+o,f=i-u,p=r-u,m=r+s+u,{x:b,y:D}=a,{x0:x,y0:P}=t;return x<b&&P===D?Ne.RIGHT:x<=f&&P<D?Ne.BOTTOM:x<=f&&P>D?Ne.TOP:x>=i&&P<=p||x>=i&&P>=m?Ne.LEFT:x>c&&P>=p&&P<=D||x>c&&P<=m&&P>=D?n.point.y<P?Ne.BOTTOM:Ne.TOP:Ne.LEFT}(e,t,n)}}(u,m,p[1]||d);m.direction=x,f.push(...Ba(u,m),m.point)}for(let D=0;D<p.length-1;D++){const x=p[D],P=p[D+1],Y=Pf(new Xe(x.point,P.point));if(Y%90==0){const be=rp[Y],w=Jc[be];if(be!==x.direction)f.push(x.point,P.point),P.direction=w;else{const S=gs(Y-90);let M=0,R=0;90===S?R=-o:180===S?M=-o:270===S?R=o:0===S&&(M=o);const Z={x:x.point.x+M,y:x.point.y+R},re={x:P.point.x+M,y:P.point.y+R},oe=new Xe(P.point,re);P.direction=rp[Pf(oe)],f.push(x.point,Z,re,P.point)}continue}const[ee,ie]=Ry(x,P);x.direction=ee,P.direction=ie,f.push(...Ba(x,P),P.point)}const b=p[p.length-1];if(d.view&&d.view.model.isElement())if(d.view.model.getBBox().inflate(o).containsPoint(b.point)){const[D]=Ry(b,d),x=Oy(d.point),[,P]=op(b,d);x.margin=o,x.direction=P,b.direction=D,f.push(...Ba(b,x))}else{const D=ip(f),x=new Xe(D[D.length-2],b.point),P=rp[Math.round(Pf(x))];b.direction=P;let O=Ba(b,d);const[Y,ee]=ip([...O,d.point]),ie=new Xe(Y,ee),be=Math.round(Pf(ie)),w=rp[be];w!==P&&P===Jc[w]&&(b.margin=o,O=Ba(b,d)),f.push(...O)}else{const[D]=Ry(b,d);b.direction=D,f.push(...Ba(b,d))}return ip(f)}function Ry(e,t){const n=e.direction,r=p3.includes(n);let i=e.direction,o=t.direction;if(r){const s=e.point.y>t.point.y,a=t.point.x-e.point.x;n===Ne.BOTTOM?(i=s?Jc[n]:a>=0?Ne.RIGHT:Ne.LEFT,a>0?o=s?Ne.LEFT:Ne.TOP:a<0&&(o=s?Ne.RIGHT:Ne.TOP)):(i=s?a>=0?Ne.RIGHT:Ne.LEFT:Jc[n],a>0?o=s?Ne.BOTTOM:Ne.LEFT:a<0&&(o=s?Ne.BOTTOM:Ne.RIGHT))}else{const s=e.point.x>t.point.x,a=t.point.y-e.point.y;n===Ne.RIGHT?(i=s?Jc[n]:a>=0?Ne.BOTTOM:Ne.TOP,a>0?o=s?Ne.TOP:Ne.LEFT:a<0&&(o=s?Ne.BOTTOM:Ne.LEFT)):(i=s?a>=0?Ne.BOTTOM:Ne.TOP:Jc[n],a>0?o=s?Ne.RIGHT:Ne.TOP:a<0&&(o=s?Ne.RIGHT:Ne.BOTTOM))}return[i,o]}sI.Directions=Ne;const b3=sI,el={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},E3=Object.values(el),D3=10,_3=1,ky=function(e,t,n=[],r={}){const{cornerType:i=el.POINT,cornerRadius:o=D3,cornerPreserveAspectRatio:s=!1,precision:a=_3,raw:u=!1}=r;if(-1===E3.indexOf(i))throw new Error("Invalid `cornerType` provided to `straight` connector.");let c;if(i!==el.POINT&&o){let d;c=new ut,c.appendSegment(ut.createSegment("M",e));const f=n.length;for(let p=0;p<f;p++){const m=new W(n[p]),b=n[p-1]||e,D=n[p+1]||t,x=d||m.distance(b)/2;let P,O;d=m.distance(D)/2,s?P=O=-Math.min(o,x,d):(P=-Math.min(o,x),O=-Math.min(o,d));const Y=m.clone().move(b,P).round(a),ee=m.clone().move(D,O).round(a);switch(c.appendSegment(ut.createSegment("L",Y)),i){case el.CUBIC:{const ie=.3333333333333333,be=2/3,w=new W(ie*Y.x+be*m.x,be*m.y+ie*Y.y),S=new W(ie*ee.x+be*m.x,be*m.y+ie*ee.y);c.appendSegment(ut.createSegment("C",w,S,ee));break}case el.LINE:c.appendSegment(ut.createSegment("L",ee));break;case el.GAP:c.appendSegment(ut.createSegment("M",ee))}}c.appendSegment(ut.createSegment("L",t))}else{const d=[e].concat(n).concat([t]),f=new tr(d);c=new ut(f)}return u?c:c.serialize()};var aI=["arc","gap","cubic"],x3=["smooth"],sp=1/3,ap=2/3;function cI(e,t){let{x:n,y:r}=e,{x:i,y:o}=t;if(n>i){let s=n;n=i,i=s,s=r,r=o,o=s}if(r>o){let s=n;n=i,i=s,s=r,r=o,o=s}return[new W(n,r),new W(i,o)]}function Ly(e,t,n){var r=[].concat(e,n,t);return r.reduce(function(i,o,s){var a=r[s+1];return null!=a&&(i[s]=bu(o,a)),i},[])}function lI(e,t){return bu(e,t).squaredLength()}function fI(e,t,n,r){var o,i=new ut;return o=ut.createSegment("M",e[0].start),i.appendSegment(o),vn(e).forEach(function(s,a){if(s.isJump){var u,c,d,f;if("arc"===n){u=-90;var p=+((c=s.start.difference(s.end)).x<0||0===c.x&&c.y<0);p&&(u+=180);var D,m=s.midpoint(),b=new Xe(m,s.end).rotate(m,u);d=(D=new Xe(s.start,m)).pointAt(2/3).rotate(s.start,u),f=b.pointAt(1/3).rotate(b.end,-u),o=ut.createSegment("C",d,f,b.end),i.appendSegment(o),D=new Xe(m,s.end),d=b.pointAt(1/3).rotate(b.end,u),f=D.pointAt(1/3).rotate(s.end,-u),o=ut.createSegment("C",d,f,s.end),i.appendSegment(o)}else if("gap"===n)o=ut.createSegment("M",s.end),i.appendSegment(o);else if("cubic"===n){u=s.start.theta(s.end);var x=.6*t,P=1.35*t;(p=+((c=s.start.difference(s.end)).x<0||0===c.x&&c.y<0))&&(P*=-1),d=W(s.start.x+x,s.start.y+P).rotate(s.start,u),f=W(s.end.x-x,s.end.y+P).rotate(s.end,u),o=ut.createSegment("C",d,f,s.end),i.appendSegment(o)}}else{var O=e[a+1];0==r||!O||O.isJump?(o=ut.createSegment("L",s.end),i.appendSegment(o)):function N3(e,t,n,r,i){var m,o=n.distance(r)/2,s=n.distance(i)/2,a=-Math.min(e,o),u=-Math.min(e,s),c=n.clone().move(r,a).round(),d=n.clone().move(i,u).round(),f=new W(sp*c.x+ap*n.x,ap*n.y+sp*c.y),p=new W(sp*d.x+ap*n.x,ap*n.y+sp*d.y);m=ut.createSegment("L",c),t.appendSegment(m),m=ut.createSegment("C",f,p,d),t.appendSegment(m)}(r,i,s.end,s.start,O.end)}}),i}const O3=function(e,t,n,r){!function I3(e){var t=e.paper,n=t._jumpOverUpdateList;if(null==n){n=t._jumpOverUpdateList=[];var r=t.model;r.on("batch:stop",function(){this.hasActiveBatch()||function A3(e){for(var t=e._jumpOverUpdateList,n=0;n<t.length;n++){const r=t[n],i=r.getFlag(r.constructor.Flags.CONNECTOR);r.requestUpdate(i)}}(t)}),r.on("reset",function(){n=t._jumpOverUpdateList=[]})}n.indexOf(e)<0&&(n.push(e),e.listenToOnce(e.model,"change:connector remove",function(){n.splice(n.indexOf(e),1)}))}(this);var i=r.raw,o=r.size||5,s=r.jump&&(""+r.jump).toLowerCase(),a=r.radius||0,u=r.ignoreConnectors||x3;-1===aI.indexOf(s)&&(s=aI[0]);var c=this.paper,f=c.model.getLinks();if(1===f.length)return fI(Ly(e,t,n),o,s,a);var p=this.model,m=f.indexOf(p),b=c.options.defaultConnector||{},D=f.filter(function(ie,be){var w=ie.get("connector")||b;return!(vn(u).includes(w.name)||be>m&&"jumpover"===w.name)}),x=D.map(function(ie){return c.findViewByModel(ie)}),P=Ly(e,t,n),O=x.map(function(ie){return null==ie?[]:ie===this?P:Ly(ie.sourcePoint,ie.targetPoint,ie.route)},this),Y=P.reduce(function(ie,be){var w=D.reduce(function(S,M,R){if(M!==p){const Z=O[R].slice(),re=Z.findIndex(Ie=>function S3(e,t){const[{x:n,y:r},{x:i,y:o}]=cI(e.start,e.end),[{x:s,y:a},{x:u,y:c}]=cI(t.start,t.end);return n<=u&&s<=i&&r<=c&&a<=o}(be,Ie));re>-1&&be.containsPoint(Z[re].end)&&Z.splice(re+1,1);const oe=function M3(e,t){return vn(t).reduce(function(n,r){var i=e.intersection(r);return i&&n.push(i),n},[])}(be,Z);S.push.apply(S,oe)}return S},[]).sort(function(S,M){return lI(be.start,S)-lI(be.start,M)});return w.length>0?ie.push.apply(ie,function P3(e,t,n){return t.reduce(function(r,i,o){if(!0===i.skip)return r;var s=r.pop()||e,a=Fh(i).move(s.start,-n),u=Fh(i).move(s.start,+n),c=t[o+1];if(null!=c){var d=u.distance(c);d<=n&&(u=c.move(s.start,d),c.skip=!0)}else if(a.distance(s.end)<2*n+1)return r.push(s),r;if(u.distance(s.start)<2*n+1)return r.push(s),r;var m=bu(a,u);return m.isJump=!0,r.push(bu(s.start,a),m,bu(u,s.end)),r},[])}(be,w,o)):ie.push(be),ie},[]),ee=fI(Y,o,s,a);return i?ee:ee.serialize()},R3=function(e,t,n=[],r={}){const{raw:i}=r;return ky(e,t,n,{cornerType:"point",raw:i})},k3=10,F3=function(e,t,n=[],r={}){const{radius:i=k3,raw:o}=r;return ky(e,t,n,{cornerType:"cubic",cornerRadius:i,precision:0,raw:o})},V3=function(e,t,n,r){var o,i=r&&r.raw;if(n&&0!==n.length){var s=[e].concat(n).concat([t]),a=Pn.throughPoints(s);o=new ut(a)}else{var u;if(o=new ut,u=ut.createSegment("M",e),o.appendSegment(u),Math.abs(e.x-t.x)>=Math.abs(e.y-t.y)){var c=(e.x+t.x)/2;u=ut.createSegment("C",c,e.y,c,t.y,t.x,t.y),o.appendSegment(u)}else{var d=(e.y+t.y)/2;u=ut.createSegment("C",e.x,d,t.x,d,t.x,t.y),o.appendSegment(u)}}return i?o:o.serialize()},rs={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},io={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Fy=function(e,t,n=[],r={},i){const o=!!r.raw,{direction:s=rs.AUTO,precision:a=3}=r,u={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new W(r.sourceTangent):null,targetTangent:r.targetTangent?new W(r.targetTangent):null,rotate:!!r.rotate};u.sourceDirection="string"==typeof r.sourceDirection?r.sourceDirection:"number"==typeof r.sourceDirection?new W(1,0).rotate(null,r.sourceDirection):r.sourceDirection?new W(r.sourceDirection).normalize():null,u.targetDirection="string"==typeof r.targetDirection?r.targetDirection:"number"==typeof r.targetDirection?new W(1,0).rotate(null,r.targetDirection):r.targetDirection?new W(r.targetDirection).normalize():null;const c=[e,...n,t].map(D=>new W(D));let d,f;if(u.sourceTangent)d=u.sourceTangent;else{const D=function $3(e,t,n,r){if(r.sourceDirection)switch(r.sourceDirection){case io.UP:return new W(0,-1);case io.DOWN:return new W(0,1);case io.LEFT:return new W(-1,0);case io.RIGHT:return new W(1,0);case io.AUTO:return dI(e,t,r);case io.CLOSEST_POINT:return pI(0,t);case io.OUTWARDS:return mI(e,t);default:return r.sourceDirection}switch(n){case rs.HORIZONTAL:return function B3(e,t,n){const{sourceBBox:r}=e;let i,o,s;if(e.sourceView)if(o=e.sourceView.model.angle(),n.rotate&&o){const a=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),u=t[0].clone();u.rotate(r.center(),o),i=a.sideNearestToPoint(u)}else i=r.sideNearestToPoint(t[0]);else i=r.x>t[1].x?"right":"left";return s=new W("left"===i?-1:1,0),n.rotate&&o&&s.rotate(null,-o),s}(e,t,r);case rs.VERTICAL:return function j3(e,t,n){const{sourceBBox:r}=e;let i,o,s;if(e.sourceView)if(o=e.sourceView.model.angle(),n.rotate&&o){const a=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),u=t[0].clone();u.rotate(r.center(),o),i=a.sideNearestToPoint(u)}else i=r.sideNearestToPoint(t[0]);else i=r.y>t[1].y?"bottom":"top";return s=new W(0,"top"===i?-1:1),n.rotate&&o&&s.rotate(null,-o),s}(e,t,r);case rs.CLOSEST_POINT:return pI(0,t);case rs.OUTWARDS:return mI(e,t);default:return dI(e,t,r)}}(i,c,s,u),x=c[0].distance(c[1])*u.coeff,O=Vy(D,c[1].difference(c[0]).normalize());if(O>Math.PI/4){const Y=x+(O-Math.PI/4)*u.angleTangentCoefficient;d=D.clone().scale(Y,Y)}else d=D.clone().scale(x,x)}if(u.targetTangent)f=u.targetTangent;else{const D=function z3(e,t,n,r){if(r.targetDirection)switch(r.targetDirection){case io.UP:return new W(0,-1);case io.DOWN:return new W(0,1);case io.LEFT:return new W(-1,0);case io.RIGHT:return new W(1,0);case io.AUTO:return hI(e,t,r);case io.CLOSEST_POINT:return gI(0,t);case io.OUTWARDS:return vI(e,t);default:return r.targetDirection}switch(n){case rs.HORIZONTAL:return function H3(e,t,n){const{targetBBox:r}=e;let i,o,s;if(e.targetView)if(o=e.targetView.model.angle(),n.rotate&&o){const a=e.targetView.getNodeUnrotatedBBox(e.targetView.el),u=t[t.length-1].clone();u.rotate(r.center(),o),i=a.sideNearestToPoint(u)}else i=r.sideNearestToPoint(t[t.length-1]);else i=r.x>t[t.length-2].x?"left":"right";return s=new W("left"===i?-1:1,0),n.rotate&&o&&s.rotate(null,-o),s}(e,t,r);case rs.VERTICAL:return function U3(e,t,n){const{targetBBox:r}=e;let i,o,s;if(e.targetView)if(o=e.targetView.model.angle(),n.rotate&&o){const a=e.targetView.getNodeUnrotatedBBox(e.targetView.el),u=t[t.length-1].clone();u.rotate(r.center(),o),i=a.sideNearestToPoint(u)}else i=r.sideNearestToPoint(t[t.length-1]);else i=r.y>t[t.length-2].y?"top":"bottom";return s=new W(0,"top"===i?-1:1),n.rotate&&o&&s.rotate(null,-o),s}(e,t,r);case rs.CLOSEST_POINT:return gI(0,t);case rs.OUTWARDS:return vI(e,t);default:return hI(e,t,r)}}(i,c,s,u),x=c.length-1,P=c[x-1].distance(c[x])*u.coeff,Y=Vy(D,c[x-1].difference(c[x]).normalize());if(Y>Math.PI/4){const ee=P+(Y-Math.PI/4)*u.angleTangentCoefficient;f=D.clone().scale(ee,ee)}else f=D.clone().scale(P,P)}const m=function q3(e,t,n,r){const{tau:i,coeff:o}=r,s=[],a=[],u=[],c=e.length-1;for(let d=0;d<c;d++)s[d]=e[d].distance(e[d+1]);a[0]=t,a[c]=n;for(let d=1;d<c;d++){let f,p;f=1===d?e[d-1].clone().offset(a[d-1].x,a[d-1].y):e[d-1].clone(),p=d===c-1?e[d+1].clone().offset(a[d+1].x,a[d+1].y):e[d+1].clone();const m=f.difference(e[d]).normalize(),b=p.difference(e[d]).normalize(),D=Vy(m,b);let P,x=(Math.PI-D)/2;const O=yI(m,b);let Y;Y=yI(e[d].difference(e[d+1]),e[d].difference(e[d-1])),O<0&&(x=-x),D<Math.PI/2&&(x<0&&Y<0||x>0&&Y>0)&&(x-=Math.PI),P=b.clone(),G3(P,x);const ee=P.clone(),ie=P.clone(),be=s[d-1]*o,w=s[d]*o;ee.scale(be,be),ie.scale(w,w),a[d]=[ee,ie]}for(let d=0;d<c;d++){let f,p;f=0===d?e[d+1].difference(a[d].x/i,a[d].y/i):e[d+1].difference(a[d][1].x/i,a[d][1].y/i),p=d===c-1?e[d].clone().offset(a[d+1].x/i,a[d+1].y/i):e[d].difference(a[d+1][0].x/i,a[d+1][0].y/i),u[d]=[f,e[d],e[d+1],p]}return u}(c,d,f,u).map(D=>function W3(e,t){const{tau:n}=t,r=new W;r.x=e[1].x+(e[2].x-e[0].x)/(6*n),r.y=e[1].y+(e[2].y-e[0].y)/(6*n);const i=new W;return i.x=e[2].x+(e[3].x-e[1].x)/(6*n),i.y=e[2].y+(e[3].y-e[1].y)/(6*n),new Pn(e[1],r,i,e[2])}(D,u)),b=new ut(m).round(a);return o?b:b.serialize()};function dI(e,t,n){const{sourceBBox:r}=e;let i,o,s;if(e.sourceView)if(o=e.sourceView.model.angle(),n.rotate&&o){const a=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),u=t[0].clone();u.rotate(r.center(),o),i=a.sideNearestToPoint(u)}else i=r.sideNearestToPoint(t[0]);else i=r.sideNearestToPoint(t[1]);switch(i){case"top":s=new W(0,-1);break;case"bottom":s=new W(0,1);break;case"right":s=new W(1,0);break;case"left":s=new W(-1,0)}return n.rotate&&o&&s.rotate(null,-o),s}function hI(e,t,n){const{targetBBox:r}=e;let i,o,s;if(e.targetView)if(o=e.targetView.model.angle(),n.rotate&&o){const a=e.targetView.getNodeUnrotatedBBox(e.targetView.el),u=t[t.length-1].clone();u.rotate(r.center(),o),i=a.sideNearestToPoint(u)}else i=r.sideNearestToPoint(t[t.length-1]);else i=r.sideNearestToPoint(t[t.length-2]);switch(i){case"top":s=new W(0,-1);break;case"bottom":s=new W(0,1);break;case"right":s=new W(1,0);break;case"left":s=new W(-1,0)}return n.rotate&&o&&s.rotate(null,-o),s}function pI(e,t,n){return t[1].difference(t[0]).normalize()}function gI(e,t,n){const r=t.length-1;return t[r-1].difference(t[r]).normalize()}function mI(e,t,n){const{sourceBBox:r}=e,i=r.center();return t[0].difference(i).normalize()}function vI(e,t,n){const{targetBBox:r}=e,i=r.center();return t[t.length-1].difference(i).normalize()}function G3(e,t){const n=Math.cos(t),r=Math.sin(t),o=r*e.x+n*e.y;e.x=n*e.x-r*e.y,e.y=o}function Vy(e,t){let n=e.dot(t)/(e.magnitude()*t.magnitude());return n<-1&&(n=-1),n>1&&(n=1),Math.acos(n)}function yI(e,t){return e.x*t.y-e.y*t.x}Fy.Directions=rs,Fy.TangentDirections=io;const Ut={TOOLS:pn.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},Nf=pn.extend({className:function(){var e=pn.prototype.className.apply(this).split(" ");return e.push("link"),e.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){pn.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[Ut.RENDER],attrs:[Ut.UPDATE],router:[Ut.UPDATE],connector:[Ut.CONNECTOR],smooth:[Ut.UPDATE],manhattan:[Ut.UPDATE],toolMarkup:[Ut.LEGACY_TOOLS],labels:[Ut.LABELS],labelMarkup:[Ut.LABELS],vertices:[Ut.VERTICES,Ut.UPDATE],vertexMarkup:[Ut.VERTICES],source:[Ut.SOURCE,Ut.UPDATE],target:[Ut.TARGET,Ut.UPDATE]},initFlag:[Ut.RENDER,Ut.SOURCE,Ut.TARGET,Ut.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(e,t){if(t||(t={}),this.hasFlag(e,Ut.SOURCE)){if(!this.updateEndProperties("source"))return e;e=this.removeFlag(e,Ut.SOURCE)}if(this.hasFlag(e,Ut.TARGET)){if(!this.updateEndProperties("target"))return e;e=this.removeFlag(e,Ut.TARGET)}const{paper:n,sourceView:r,targetView:i}=this;if(n&&(r&&!n.isViewMounted(r)||i&&!n.isViewMounted(i)))return e;if(this.hasFlag(e,Ut.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(t),this.removeFlag(e,[Ut.RENDER,Ut.UPDATE,Ut.VERTICES,Ut.LABELS,Ut.TOOLS,Ut.LEGACY_TOOLS,Ut.CONNECTOR]);let o=!1;this.hasFlag(e,Ut.VERTICES)&&(this.renderVertexMarkers(),e=this.removeFlag(e,Ut.VERTICES));const{model:s}=this,{attributes:a}=s;let u=this.hasFlag(e,Ut.LABELS),c=this.hasFlag(e,Ut.LEGACY_TOOLS);u&&(this.onLabelsChange(s,a.labels,t),e=this.removeFlag(e,Ut.LABELS),o=!0),c&&(this.renderTools(),e=this.removeFlag(e,Ut.LEGACY_TOOLS));const d=this.hasFlag(e,Ut.UPDATE),f=this.hasFlag(e,Ut.CONNECTOR);return(d||f)&&(d?t.translateBy&&s.isRelationshipEmbeddedIn(t.translateBy)?this.translate(t.tx,t.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(t),e=this.removeFlag(e,[Ut.UPDATE,Ut.TOOLS,Ut.CONNECTOR]),u=!1,c=!1,o=!0),u&&this.updateLabelPositions(),c&&this.updateToolsPosition(),o&&this.updateHighlighters(),this.hasFlag(e,Ut.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,Ut.TOOLS)),e},requestConnectionUpdate:function(e){this.requestUpdate(this.getFlag(Ut.UPDATE),e)},isLabelsRenderRequired:function(e={}){const t=this.model.previous("labels");if(!t)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var n=e.propertyPathArray||[],r=n.length;if(r>1&&t[n[1]]){if(2===r)return"markup"in Object(e.propertyValue);if("markup"!==n[2])return!1}}return!0},onLabelsChange:function(e,t,n){this.isLabelsRenderRequired(n)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.LinkView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if("string"==typeof t)return this.renderStringMarkup(t);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el);this.selectors=t.selectors,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=De(e);Array.isArray(t)||(t=[t]);for(var n=this._V,r=0,i=t.length;r<i;r++){var o=t[r],s=o.attr("class");s&&(s=$H(s),n[Mn.camelCase(s)]=o)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(t)},_getLabelMarkup:function(e){if(e){if(Array.isArray(e))return this.parseDOMJSON(e,null);if("string"==typeof e)return this._getLabelStringMarkup(e);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(e){var t=De(e),n=document.createDocumentFragment();if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)n.appendChild(t[r].node);else n.appendChild(t.node);return{fragment:n,selectors:{}}},_normalizeLabelMarkup:function(e){if(e){var t=e.fragment;if(!(e.fragment instanceof DocumentFragment&&e.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var n,r=t.childNodes;return(n=r.length>1||"G"!==r[0].nodeName.toUpperCase()?De("g").append(t):De(r[0])).addClass("label"),{node:n.node,selectors:e.selectors}}},renderLabels:function(){var e=this._V,t=e.labels,n=this._labelCache={},r=this._labelSelectors={},i=this.model,o=i.attributes.labels||[],s=o.length;if(0===s)return t&&t.remove(),this;t?t.empty():(t=e.labels=De("g").addClass("labels"),this.options.labelsLayer&&(t.addClass(ms(Fr(this,"className"))),t.attr("model-id",i.id)));for(var a=0;a<s;a++){var d,f,c=this._normalizeLabelMarkup(this._getLabelMarkup(o[a].markup));if(c)d=c.node,f=c.selectors;else{var m=this._normalizeLabelMarkup(this._getLabelMarkup(i._builtins.defaultLabel.markup)),b=i._getDefaultLabel(),x=this._normalizeLabelMarkup(this._getLabelMarkup(b.markup))||m;d=x.node,f=x.selectors}d.setAttribute("label-idx",a),t.append(d),n[a]=d;var P=this.selector;if(f[P])throw new Error("dia.LinkView: ambiguous label root selector.");f[P]=d,r[a]=f}return t.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:e,paper:t,model:n,_V:r,options:i}=this,{labels:o}=r;if(!o||!n.hasLabels())return;const{node:s}=o;i.labelsLayer?t.getLayerView(i.labelsLayer).insertSortedNode(s,n.get("z")):s.parentNode!==e&&e.appendChild(s)},unmountLabels:function(){const{options:e,_V:t}=this;if(!t)return;const{labels:n}=t;n&&e.labelsLayer&&n.remove()},findLabelNode:function(e,t){const n=this._labelCache[e];if(!n)return null;const r=this._labelSelectors[e],[i=null]=this.findBySelector(t,n,r);return i},_mergeLabelAttrs:function(e,t,n,r){return null===t?null:void 0===t?null===n?null:void 0===n?e?void 0:r:e?n:ni({},r,n):e?ni({},n,t):ni({},r,n,t)},_mergeLabelSize:function(e,t){return null===e?null:void 0===e?null===t?null:void 0===t?void 0:t:ni({},t,e)},updateLabels:function(){if(!this._V.labels)return this;for(var e=this.model,t=e.get("labels")||[],n=this.can("labelMove"),i=e._builtins.defaultLabel.attrs,o=e._getDefaultLabel(),s=o.markup,a=o.attrs,u=o.size,c=0,d=t.length;c<d;c++){var f=this._labelCache[c];f.setAttribute("cursor",n?"move":"default");var p=this._labelSelectors[c],m=t[c],x=m.size,P=this._mergeLabelAttrs(m.markup||s,m.attrs,a,i),O=this._mergeLabelSize(x,u);this.updateDOMSubtreeAttributes(f,P,{rootBBox:new ze(O),selectors:p})}return this},renderTools:function(){if(!this._V.linkTools)return this;var r,e=Mn(this._V.linkTools.node).empty(),t=no(this.model.get("toolMarkup")||this.model.toolMarkup),n=De(t());return e.append(n.node),this._toolCache=n,this.options.doubleLinkTools&&(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(t=no(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),r=De(t())):r=n.clone(),e.append(r.node),this._tool2Cache=r),this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var e=Mn(this._V.markerVertices.node).empty(),t=no(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(n,r){e.append(De(t(Tt({idx:r},n))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var e=Mn(this._V.markerArrowheads.node);e.empty();var t=no(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=De(t({end:"source"})),this._V.targetArrowhead=De(t({end:"target"})),e.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(e){const n=this.model,r=n.vertices(),i=[this.sourceAnchor,...r,this.targetAnchor],o=i.length,s=new tr(i);s.simplify({threshold:.001});const a=s.points.map(c=>c.toJSON()),u=a.length;return o===u?0:(n.vertices(a.slice(1,u-1),e),o-u)},updateDefaultConnectionPath:function(){var e=this._V;e.connection&&e.connection.attr("d",this.getSerializedConnection()),e.connectionWrap&&e.connectionWrap.attr("d",this.getSerializedConnection()),e.markerSource&&e.markerTarget&&this._translateAndAutoOrientArrows(e.markerSource,e.markerTarget)},getEndView:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(e){switch(e){case"source":return new W(this.sourceAnchor);case"target":return new W(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(e){switch(e){case"source":return new W(this.sourcePoint);case"target":return new W(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(e){switch(e){case"source":var t=this.sourceView;if(!t)break;return this.sourceMagnet||t.el;case"target":var n=this.targetView;if(!n)break;return this.targetMagnet||n.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(e=0,t=0){const{route:n,path:r}=this;if(!n||!r)return;const i=new tr(n);i.translate(e,t),this.route=i.points,this._translateConnectionPoints(e,t),r.translate(e,t),this.updateDOM()},updateDOM(){const{el:e,model:t,selectors:n}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(e,t.attr(),{selectors:n}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:e}=this,t=e.vertices(),n=this.findAnchors(t),r=this.sourceAnchor=n.source,i=this.targetAnchor=n.target,o=this.findRoute(t);this.route=o;var s=this.findConnectionPoints(o,r,i);this.sourcePoint=s.source,this.targetPoint=s.target},updatePath:function(){const{route:e,sourcePoint:t,targetPoint:n}=this,r=this.findMarkerPoints(e,t,n),i=this.findPath(e,r.source||t,r.target||n);this.path=i},findMarkerPoints:function(e,t,n){var s,a,r=e[0],i=e[e.length-1],o=this._markerCache;return this._V.markerSource&&(o.sourceBBox=o.sourceBBox||this._V.markerSource.getBBox(),s=W(t).move(r||n,o.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(o.targetBBox=o.targetBBox||this._V.markerTarget.getBBox(),a=W(n).move(i||t,o.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),o.sourcePoint=s||t.clone(),o.targetPoint=a||n.clone(),{source:s,target:a}},findAnchorsOrdered:function(e,t,n,r){var i,o,s,a,u=this.model,c=u.get(e),d=u.get(n),f=this.getEndView(e),p=this.getEndView(n),m=this.getEndMagnet(e),b=this.getEndMagnet(n);f?(s=t?new W(t):p?b:new W(d),i=this.getAnchor(c.anchor,f,m,s,e)):i=new W(c),p?(a=new W(r||i),o=this.getAnchor(d.anchor,p,b,a,n)):o=new W(d);var D={};return D[e]=i,D[n]=o,D},findAnchors:function(e){var t=this.model,n=e[0],r=e[e.length-1];return t.target().priority&&!t.source().priority?this.findAnchorsOrdered("target",r,"source",n):this.findAnchorsOrdered("source",n,"target",r)},findConnectionPoints:function(e,t,n){var f,p,m,P,r=e[0],i=e[e.length-1],o=this.model,s=o.get("source"),a=o.get("target"),u=this.sourceView,c=this.targetView,d=this.paper.options;if(u&&!u.isNodeConnection(this.sourceMagnet)){f=this.sourceMagnet||u.el;var b=s.connectionPoint||d.defaultConnectionPoint,x=new Xe(r||n,t);m=this.getConnectionPoint(b,u,f,x,"source")}else m=t;if(c&&!c.isNodeConnection(this.targetMagnet)){p=this.targetMagnet||c.el;var O=a.connectionPoint||d.defaultConnectionPoint,ee=new Xe(i||t,n);P=this.getConnectionPoint(O,c,p,ee,"target")}else P=n;return{source:m,target:P}},getAnchor:function(e,t,n,r,i){var a,o=t.isNodeConnection(n),s=this.paper.options;if(e||(e=o?s.defaultLinkAnchor:s.perpendicularLinks||this.options.perpendicular?{name:"perpendicular"}:s.defaultAnchor),!e)throw new Error("Anchor required.");if("function"==typeof e)a=e;else{var u=e.name;if("function"!=typeof(a=s[o?"linkAnchorNamespace":"anchorNamespace"][u]))throw new Error("Unknown anchor: "+u)}var d=a.call(this,t,n,r,e.args||{},i,this);return d?d.round(this.decimalsRounding):new W},getConnectionPoint:function(e,t,n,r,i){var o,c,s=r.end,a=this.paper.options;if("function"==typeof a.linkConnectionPoint&&(o=a.linkConnectionPoint(this,t,n===t.el?void 0:n,r.start,i)))return o;if(!e)return s;if("function"==typeof e)c=e;else{var d=e.name;if("function"!=typeof(c=a.connectionPointNamespace[d]))throw new Error("Unknown connection point: "+d)}return(o=c.call(this,r,t,n,e.args||{},i,this))?o.round(this.decimalsRounding):s},_translateConnectionPoints:function(e,t){var n=this._markerCache;n.sourcePoint.offset(e,t),n.targetPoint.offset(e,t),this.sourcePoint.offset(e,t),this.targetPoint.offset(e,t),this.sourceAnchor.offset(e,t),this.targetAnchor.offset(e,t)},_getDefaultLabelPositionProperty:function(){var e=this.model,n=e._builtins.defaultLabel.position,r=e._getDefaultLabel(),i=this._normalizeLabelPosition(r.position);return ni({},n,i)},_normalizeLabelPosition:function(e){return"number"==typeof e?{distance:e,offset:null,angle:0,args:null}:e},_mergeLabelPositionProperty:function(e,t){return null===e?null:void 0===e?null===t?null:t:ni({},t,e)},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var n=this.model.get("labels")||[];if(!n.length)return this;for(var r=this._getDefaultLabelPositionProperty(),i=0,o=n.length;i<o;i++){var s=this._labelCache[i];if(s){var u=this._normalizeLabelPosition(n[i].position),c=this._mergeLabelPositionProperty(u,r),d=this._getLabelTransformationMatrix(c);s.setAttribute("transform",De.matrixToTransformString(d)),this._cleanLabelMatrices(i)}}return this},_cleanLabelMatrices:function(e){const{metrics:t,_labelSelectors:n}=this,r=n[e];if(r)for(let i in r){const{id:o}=r[i];o&&o in t&&delete t[o].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var e="",t=this.options.linkToolsOffset,n=this.getConnectionLength();if(!Number.isNaN(n)){n<this.options.shortLinkLength&&(e="scale(.5)",t/=2);var r=this.getPointAtLength(t);this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+e),this.options.doubleLinkTools&&n>=this.options.longLinkLength?(r=this.getPointAtLength(n-(this.options.doubleLinkToolsOffset||t)),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+e),this._tool2Cache.attr("display","inline")):this.options.doubleLinkTools&&this._tool2Cache.attr("display","none")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===Mn.css(this._V.markerArrowheads.node,"display"))return this;var e=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(e),this._V.targetArrowhead.scale(e),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(e){const{model:t,paper:n}=this,r=`${e}View`,i=t.get(e),o=i&&i.id;if(!o)return this[r]=null,this.updateEndMagnet(e),!0;const s=n.getModelById(o);if(!s)throw new Error("LinkView: invalid "+e+" cell.");const a=s.findView(n);return!!a&&(this[r]=a,this.updateEndMagnet(e),!0)},updateEndMagnet:function(e){const t=`${e}Magnet`,n=this.getEndView(e);if(n){let r=n.getMagnetFromLinkEnd(this.model.get(e));r===n.el&&(r=null),this[t]=r}else this[t]=null},_translateAndAutoOrientArrows:function(e,t){var n=vn(this.route);e&&e.translateAndAutoOrient(this.sourcePoint,n[0]||this.targetPoint,this.paper.cells),t&&t.translateAndAutoOrient(this.targetPoint,n[n.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionProperty:function(e){return this.model.label(e).position||{}},_getLabelPositionAngle:function(e){return this._getLabelPositionProperty(e).angle||0},_getLabelPositionArgs:function(e){return this._getLabelPositionProperty(e).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(e,t){return null===e?null:void 0===e?null===t?null:t:ni({},t,e)},addLabel:function(e,t,n,r){var i,o,a,s=0;"number"!=typeof e?(i=e.x,o=e.y,"number"==typeof t?(s=t,a=n):a=t):(i=e,o=t,"number"==typeof n?(s=n,a=r):a=n);var u=this._getDefaultLabelPositionArgs(),d=this._mergeLabelPositionArgs(a,u),f={position:this.getLabelPosition(i,o,s,d)};return this.model.insertLabel(-1,f,a),-1},addVertex:function(e,t,n){var r="number"!=typeof e,i=r?e.x:e,o=r?e.y:t,s=r?t:n,a={x:i,y:o},u=this.getVertexIndex(i,o);return this.model.insertVertex(u,a,s),u},sendToken:function(e,t,n){var i,o,s;In(t)?(i=t.duration,o="reverse"===t.direction,s=t.connection):(i=t,o=!1,s=null);var a={dur:(i=i||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};o&&(a.keyPoints="1;0",a.keyTimes="0;1");var c,u=De(e);if("string"==typeof s)c=this.findBySelector(s,this.el,this.selectors)[0];else{var d=this._V;c=d.connection?d.connection.node:this.el.querySelector("path")}if(!(c instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");u.appendTo(this.paper.cells).animateAlongPath(a,c),setTimeout(function r(f,p){return function(){f.remove(),"function"==typeof p&&p()}}(u,n),i)},findRoute:function(e){e||(e=[]);var t=this.paper.options.routerNamespace||gt,n=this.model.router(),r=this.paper.options.defaultRouter;if(!n){if(!r)return e.map(W);n=r}var i=sr(n)?n:t[n.name];if(!sr(i))throw new Error('dia.LinkView: unknown router: "'+n.name+'".');return i.call(this,e,n.args||{},this)||e.map(W)},findPath:function(e,t,n){var r=this.paper.options.connectorNamespace||Pr,i=this.model.connector();i||(i=this.paper.options.defaultConnector||{});var s=sr(i)?i:r[i.name];if(!sr(s))throw new Error('dia.LinkView: unknown connector: "'+i.name+'".');var a=Us(i.args||{});a.raw=!0;var u=s.call(this,t,n,e,a,this);return"string"==typeof u&&(u=new ut(De.normalizePathData(u))),u},getConnection:function(){var e=this.path;return e?e.clone():null},getSerializedConnection:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("data"))return t.data;var n=e.serialize();return t.data=n,n},getConnectionSubdivisions:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("segmentSubdivisions"))return t.segmentSubdivisions;var n=e.getSegmentSubdivisions();return t.segmentSubdivisions=n,n},getConnectionLength:function(){var e=this.path;if(!e)return 0;var t=this.metrics;if(t.hasOwnProperty("length"))return t.length;var n=e.length({segmentSubdivisions:this.getConnectionSubdivisions()});return t.length=n,n},getPointAtLength:function(e){var t=this.path;return t?t.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(e){var t=this.path;return t?(Ti(e)&&(e=parseFloat(e)/100),t.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(e){var t=this.path;return t?t.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(e){var t=this.path;return t?t.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(e){var t=this.path;return t?t.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(e){var t=this.path;return t?t.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(e){var t=this.path;return t?t.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(e,t,n,r){var s,i={},o=0;"number"==typeof n?(o=n,s=r):s=n,s&&(i.args=s);var D,x,a=!(s&&s.absoluteDistance),u=s&&s.absoluteDistance&&s.reverseDistance,c=s&&s.absoluteOffset,d=this.path,f={segmentSubdivisions:this.getConnectionSubdivisions()},p=new W(e,t),m=d.closestPointT(p,f),b=d.lengthAtT(m,f);if(a&&(b=b/this.getConnectionLength()||0),u&&(b=-1*(this.getConnectionLength()-b)||1),i.distance=b,c||(D=d.tangentAtT(m)),D)x=D.pointOffset(p);else{var P=d.pointAtT(m),O=p.difference(P);x={x:O.x,y:O.y}}return i.offset=x,i.angle=o,i},_getLabelTransformationMatrix:function(e){var t,n=0,r={};if("number"==typeof e)t=e;else{if("number"!=typeof e.distance)throw new Error("dia.LinkView: invalid label position distance.");r=e.args||{},t=e.distance,n=e.angle||0}var i=t>0&&t<=1,o=0,s={x:0,y:0};if(e.offset){var a=e.offset;"number"==typeof a&&(o=a),a.x&&(s.x=a.x),a.y&&(s.y=a.y)}var D,u=0!==s.x||0!==s.y||0===o,c=r.keepGradient,d=r.ensureLegibility,f=this.path,p={segmentSubdivisions:this.getConnectionSubdivisions()},m=i?t*this.getConnectionLength():t,b=f.tangentAtLength(m,p),x=n;if(b){if(u)(D=b.start.clone()).offset(s);else{var P=b.clone();P.rotate(b.start,-90),P.setLength(o),D=P.end}c&&(x=b.angle()+n,d&&(x=gs((x+90)%180-90)))}else D=f.start.clone(),u&&D.offset(s);return De.createSVGMatrix().translate(D.x,D.y).rotate(x)},getLabelCoordinates:function(e){var t=this._getLabelTransformationMatrix(e);return new W(t.e,t.f)},getVertexIndex:function(e,t){for(var r=this.model.vertices(),i=this.getClosestPointLength(new W(e,t)),o=0,s=r.length;o<s&&!(i<this.getClosestPointLength(r[o]));o++);return o},notifyPointerdown(e,t,n){pn.prototype.pointerdown.call(this,e,t,n),this.notify("link:pointerdown",e,t,n)},notifyPointermove(e,t,n){pn.prototype.pointermove.call(this,e,t,n),this.notify("link:pointermove",e,t,n)},notifyPointerup(e,t,n){this.notify("link:pointerup",e,t,n),pn.prototype.pointerup.call(this,e,t,n)},pointerdblclick:function(e,t,n){pn.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",e,t,n)},pointerclick:function(e,t,n){pn.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",e,t,n)},contextmenu:function(e,t,n){pn.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",e,t,n)},pointerdown:function(e,t,n){switch(this.notifyPointerdown(e,t,n),e.target.getAttribute("class")){case"marker-vertex":return void this.dragVertexStart(e,t,n);case"marker-vertex-remove":case"marker-vertex-remove-area":return void this.dragVertexRemoveStart(e,t,n);case"marker-arrowhead":return void this.dragArrowheadStart(e,t,n);case"connection":case"connection-wrap":return void this.dragConnectionStart(e,t,n);case"marker-source":case"marker-target":return}this.dragStart(e,t,n)},pointermove:function(e,t,n){var r=this._dragData;switch(r&&this.eventData(e,r),this.eventData(e).action){case"vertex-move":this.dragVertex(e,t,n);break;case"label-move":this.dragLabel(e,t,n);break;case"arrowhead-move":this.dragArrowhead(e,t,n);break;case"move":this.drag(e,t,n)}r&&Tt(r,this.eventData(e)),this.notifyPointermove(e,t,n)},pointerup:function(e,t,n){var r=this._dragData;switch(r&&(this.eventData(e,r),this._dragData=null),this.eventData(e).action){case"vertex-move":this.dragVertexEnd(e,t,n);break;case"label-move":this.dragLabelEnd(e,t,n);break;case"arrowhead-move":this.dragArrowheadEnd(e,t,n);break;case"move":this.dragEnd(e,t,n)}this.notifyPointerup(e,t,n),this.checkMouseleave(e)},mouseover:function(e){pn.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",e)},mouseout:function(e){pn.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",e)},mouseenter:function(e){pn.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",e)},mouseleave:function(e){pn.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",e)},mousewheel:function(e,t,n,r){pn.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",e,t,n,r)},onevent:function(e,t,n,r){if(De(e.target).findParentByClass("link-tool",this.el)){if(e.stopPropagation(),this.can("useLinkTools")){if("remove"===t)return void this.model.remove({ui:!0});this.notify(t,e,n,r)}this.notifyPointerdown(e,n,r),this.paper.delegateDragEvents(this,e.data)}else pn.prototype.onevent.apply(this,arguments)},onlabel:function(e,t,n){this.notifyPointerdown(e,t,n),this.dragLabelStart(e,t,n),this.eventData(e).stopPropagation&&e.stopPropagation()},dragConnectionStart:function(e,t,n){if(this.can("vertexAdd")){var r=this.addVertex({x:t,y:n},{ui:!0});this.eventData(e,{action:"vertex-move",vertexIdx:r})}},dragLabelStart:function(e,t,n){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(e))return;var i=parseInt(e.currentTarget.getAttribute("label-idx"),10),o=this._getDefaultLabelPositionProperty(),s=this._normalizeLabelPosition(this._getLabelPositionProperty(i)),a=this._mergeLabelPositionProperty(s,o),u=this.getLabelCoordinates(a),c=u.x-t,d=u.y-n,f=this._getLabelPositionAngle(i),p=this._getLabelPositionArgs(i),m=this._getDefaultLabelPositionArgs(),b=this._mergeLabelPositionArgs(p,m);this.eventData(e,{action:"label-move",labelIdx:i,dx:c,dy:d,positionAngle:f,positionArgs:b,stopPropagation:!0})}else this.eventData(e,{stopPropagation:!0});this.paper.delegateDragEvents(this,e.data)},dragVertexStart:function(e,t,n){if(this.can("vertexMove")){var i=parseInt(e.target.getAttribute("idx"),10);this.eventData(e,{action:"vertex-move",vertexIdx:i})}},dragVertexRemoveStart:function(e,t,n){if(this.can("vertexRemove")){var i=parseInt(e.target.getAttribute("idx"),10);this.model.removeVertex(i)}},dragArrowheadStart:function(e,t,n){if(this.can("arrowheadMove")){var i=e.target.getAttribute("end"),o=this.startArrowheadMove(i,{ignoreBackwardsCompatibility:!0});this.eventData(e,o)}},dragStart:function(e,t,n){this.isDefaultInteractionPrevented(e)||this.can("linkMove")&&this.eventData(e,{action:"move",dx:t,dy:n})},dragLabel:function(e,t,n){var r=this.eventData(e),i={position:this.getLabelPosition(t+r.dx,n+r.dy,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete i.position.offset;const o={ui:!0};this.paper.isAsync()&&"touchmove"===e.type&&(o.async=!1),this.model.label(r.labelIdx,i,o)},dragVertex:function(e,t,n){var r=this.eventData(e);this.model.vertex(r.vertexIdx,{x:t,y:n},{ui:!0})},dragArrowhead:function(e,t,n){this.paper.options.snapLinks?!this._snapArrowhead(e,t,n)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(e,t,n):this.paper.options.snapLinksSelf?this._snapArrowheadSelf(e,t,n):this._connectArrowhead(this.getEventTarget(e),t,n,this.eventData(e))},drag:function(e,t,n){var r=this.eventData(e);this.model.translate(t-r.dx,n-r.dy,{ui:!0}),this.eventData(e,{dx:t,dy:n})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(e,t,n){var r=this.eventData(e),i=this.paper;i.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,t,n),i.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,e)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(e){"remove"===e.whenNotAllowed?this.model.remove({ui:!0}):this.model.set(e.arrowhead,e.initialEnd,{ui:!0})},_finishEmbedding:function(e){this.paper.options.embeddingMode&&this.model.reparent()&&(e.z=null)},_notifyConnectEvent:function(e,t){var n=e.arrowhead,r=e.initialEnd,i=this.model.prop(n);if(i&&!Xc.endsEqual(r,i)){var s=this.paper;r.id&&this.notify("link:disconnect",t,s.findViewByModel(r.id),e.initialMagnet,n),i.id&&this.notify("link:connect",t,s.findViewByModel(i.id),e.magnetUnderPointer,n)}},_snapToPoints:function(e,t,n){let r=null,i=1/0,o=null,s=1/0,a=e.x,u=e.y;for(let c=0;c<t.length;c++){const d=Math.abs(t[c].x-e.x);d<i&&(i=d,r=t[c]);const f=Math.abs(t[c].y-e.y);f<s&&(s=f,o=t[c])}return i<n&&(a=r.x),s<n&&(u=o.y),{x:a,y:u}},_snapArrowheadSelf:function(e,t,n){const{paper:r,model:i}=this,{snapLinksSelf:o}=r.options,s=this.eventData(e),a=o.radius||20,d=[this.getEndAnchor("source"===s.arrowhead?"target":"source"),...i.vertices()],f=this._snapToPoints({x:t,y:n},d,a),p=r.localToClientPoint(f);this._connectArrowhead(document.elementFromPoint(p.x,p.y),f.x,f.y,this.eventData(e))},_snapArrowhead:function(e,t,n){const{paper:r}=this,{snapLinks:i,connectionStrategy:o}=r.options,s=this.eventData(e);let a=!1;var u=i.radius||50,c=r.findViewsInArea({x:t-u,y:n-u,width:2*u,height:2*u}),d=s.closestView||null,f=s.closestMagnet||null,p=s.magnetProxy||null;s.closestView=s.closestMagnet=s.magnetProxy=null;var m=Number.MAX_VALUE,b=new W(t,n);c.forEach(function(ie){const be=[];"false"!==ie.el.getAttribute("magnet")&&be.push({bbox:ie.model.getBBox(),magnet:ie.el}),ie.$("[magnet]").toArray().forEach(w=>{be.push({bbox:ie.getNodeBBox(w),magnet:w})}),be.forEach(w=>{const{magnet:S,bbox:M}=w,R=M.center().squaredDistance(b);R<m&&(f===S||r.options.validateConnection.apply(r,s.validateConnectionArgs(ie,ie.el===S?null:S)))&&(m=R,s.closestView=ie,s.closestMagnet=S)})},this);var D,x=null,P=s.closestView,O=s.closestMagnet;O&&(x=s.magnetProxy=P.findProxyNode(O,"highlighter"));var Y=s.arrowhead,ee=f!==O;if(d&&ee&&d.unhighlight(p,{connecting:!0,snapping:!0}),P){const{prevEnd:ie,prevX:be,prevY:w}=s;if(s.prevX=t,s.prevY=n,a=!0,!ee&&("function"!=typeof o||be===t&&w===n)||(D=P.getLinkEnd(O,t,n,this.model,Y),!ee&&qc(ie,D)))return a;s.prevEnd=D,ee&&P.highlight(x,{connecting:!0,snapping:!0})}else D={x:t,y:n};return this.model.set(Y,D||{x:t,y:n},{ui:!0}),d&&this.notify("link:snap:disconnect",e,d,f,Y),P&&this.notify("link:snap:connect",e,P,O,Y),a},_snapArrowheadEnd:function(e){var t=e.closestView,n=e.closestMagnet;t&&n&&(t.unhighlight(e.magnetProxy,{connecting:!0,snapping:!0}),e.magnetUnderPointer=t.findMagnet(n)),e.closestView=e.closestMagnet=null},_connectArrowhead:function(e,t,n,r){const{paper:i,model:o}=this;if(r.eventTarget!==e){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const s=r.viewUnderPointer=i.findView(e);if(s){const a=r.magnetUnderPointer=s.findMagnet(e),u=r.magnetProxy=s.findProxyNode(a,"highlighter");a&&this.paper.options.validateConnection.apply(i,r.validateConnectionArgs(s,a))?u&&s.highlight(u,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=e,o.set(r.arrowhead,{x:t,y:n},{ui:!0})},_connectArrowheadEnd:function(e={},t,n){const{model:r}=this,{viewUnderPointer:i,magnetUnderPointer:o,magnetProxy:s,arrowhead:a}=e;if(!o||!s||!i)return;i.unhighlight(s,{connecting:!0});const u=i.getLinkEnd(o,t,n,r,a);r.set(a,u,{ui:!0})},_beforeArrowheadMove:function(e){e.z=this.model.get("z"),this.model.toFront();var t=this.el.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(e)},_afterArrowheadMove:function(e){null!==e.z&&(this.model.set("z",e.z,{ui:!0}),e.z=null),this.el.style.pointerEvents=e.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(e)},_createValidateConnectionArgs:function(e){var t=[];t[4]=e,t[5]=this;var n,r=0,i=0;"source"===e?(r=2,n="target"):(i=2,n="source");var o=this.model.get(n);if(o.id){var s=t[r]=this.paper.findViewByModel(o.id),a=s.getMagnetFromLinkEnd(o);a===s.el&&(a=void 0),t[r+1]=a}return function u(c,d){return t[i]=c,t[i+1]=c.el===d?void 0:d,t}},_markAvailableMagnets:function(e){function t(f,p){var m=f.paper;return m.options.validateConnection.apply(m,this.validateConnectionArgs(f,p))}var n=this.paper,r=n.model.getCells();e.marked={};for(var i=0,o=r.length;i<o;i++){var s=r[i].findView(n);if(s){var a=Array.prototype.slice.call(s.el.querySelectorAll("[magnet]"));"false"!==s.el.getAttribute("magnet")&&a.push(s.el);var u=a.filter(t.bind(e,s));if(u.length>0){for(var c=0,d=u.length;c<d;c++)s.highlight(u[c],{magnetAvailability:!0});s.highlight(null,{elementAvailability:!0}),e.marked[s.model.id]=u}}}},_unmarkAvailableMagnets:function(e){for(var n,r,t=Object.keys(e.marked),i=0,o=t.length;i<o;i++){r=e.marked[n=t[i]];var s=this.paper.findViewByModel(n);if(s){for(var a=0,u=r.length;a<u;a++)s.unhighlight(r[a],{magnetAvailability:!0});s.unhighlight(null,{elementAvailability:!0})}}e.marked=null},startArrowheadMove:function(e,t){t||(t={});var n={action:"arrowhead-move",arrowhead:e,whenNotAllowed:t.whenNotAllowed||"revert",initialMagnet:this[e+"Magnet"]||(this[e+"View"]?this[e+"View"].el:null),initialEnd:Us(this.model.get(e)),validateConnectionArgs:this._createValidateConnectionArgs(e)};return this._beforeArrowheadMove(n),!0!==t.ignoreBackwardsCompatibility&&(this._dragData=n),n},onMount:function(){pn.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){pn.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){pn.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:Ut});Object.defineProperty(Nf.prototype,"sourceBBox",{enumerable:!0,get:function(){var e=this.sourceView;if(!e){var t=this.model.source();return new ze(t.x,t.y)}var n=this.sourceMagnet;return e.isNodeConnection(n)?new ze(this.sourceAnchor):e.getNodeBBox(n||e.el)}}),Object.defineProperty(Nf.prototype,"targetBBox",{enumerable:!0,get:function(){var e=this.targetView;if(!e){var t=this.model.target();return new ze(t.x,t.y)}var n=this.targetMagnet;return e.isNodeConnection(n)?new ze(this.targetAnchor):e.getNodeBBox(n||e.el)}});const Z3=vs.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(e,t){const{options:n}=this,{useFirstSubpath:r}=n;let i;try{const o=De(t);if(i=o.convertToPathData().trim(),"PATH"===o.tagName()&&r){const s=i.search(/.M/i)+1;s>0&&(i=i.substr(0,s))}}catch{const s=e.getNodeBoundingRect(t);i=De.rectToPath(Tt({},n,s.toJSON()))}return i},highlightConnection(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode(e,t){const{vel:n,options:r}=this,{padding:i,layer:o}=r;let s=this.getNodeMatrix(e,t);if(i){!o&&t===e.el&&n.remove();let a=e.getNodeBoundingRect(t);const u=a.x+a.width/2,c=a.y+a.height/2;a=De.transformRect(a,s);const d=Math.max(a.width,1),f=Math.max(a.height,1),p=(d+i)/d,m=(f+i)/f,b=De.createSVGMatrix({a:p,b:0,c:0,d:m,e:u-p*u,f:c-m*c});s=s.multiply(b)}n.attr({d:this.getPathData(e,t),transform:De.matrixToTransformString(s)})},highlight(e,t){const{vel:n,options:r}=this;n.attr(r.attrs),e.isNodeConnection(t)?this.highlightConnection(e):this.highlightNode(e,t)}}),wI=20,X3=vs.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:wI,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(e,t){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:n,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:i}=this,o=t.tagName();if(!De.isSVGGraphicsElement(t)||i.includes(o))return t.remove(),!1;if(r.includes(o)){const s=e.vel.findOne(`#${t.id}`);if(s){const{node:a}=s;let u=e.getNodeBoundingRect(a);e.model.isElement()&&(u=De.transformRect(u,e.getNodeMatrix(a)));const c=De("rect",u.toJSON()),{x:d,y:f}=u.center(),{angle:p,cx:m=d,cy:b=f}=s.rotate();p&&c.rotate(p,m,b),t.parent().append(c)}return t.remove(),!1}return n.forEach(s=>{"fill"===s&&"none"===t.attr("fill")||t.removeAttr(s)}),!0},transformMaskRoot(e,t){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:n}=this;n.forEach(r=>{t.removeAttr(r)})},getMaskShape(e,t){const{options:n,MASK_REPLACE_TAGS:r}=this,{deep:i}=n,o=t.tagName();let s;if("G"===o){if(!i)return null;s=t.clone(),function Y3(e,t){const n=e.children();for(;n.length>0;){const r=n.shift();t(r)&&n.push(...r.children())}}(s,a=>this.transformMaskChild(e,a))}else{if(r.includes(o))return null;s=t.clone()}return this.transformMaskRoot(e,s),s},getMaskId(){return`highlight-mask-${this.cid}`},getMask(e,t){const{VISIBLE:n,INVISIBLE:r,options:i}=this,{padding:o,attrs:s}=i,a="stroke-width"in s?s["stroke-width"]:1,u="none"!==t.attr("fill");let c=parseFloat(t.attr("stroke-width"));isNaN(c)&&(c=1);const d=c+2*o,f=d+2*a;let p=this.getMaskShape(e,t);if(!p){const m=e.getNodeBoundingRect(t.node);m.inflate(m.width?0:.5,m.height?0:.5),p=De("rect",m.toJSON())}return p.attr(s),De("mask",{id:this.getMaskId()}).append([p.clone().attr({fill:u?n:"none",stroke:n,"stroke-width":f}),p.clone().attr({fill:u?r:"none",stroke:r,"stroke-width":d})])},removeMask(e){const t=e.svg.getElementById(this.getMaskId());t&&e.defs.removeChild(t)},addMask(e,t){e.defs.appendChild(t.node)},highlight(e,t){const{options:n,vel:r}=this,{padding:i,attrs:o,maskClip:s=wI,layer:a}=n,u="stroke"in o?o.stroke:"#000000";!a&&t===e.el&&r.remove();const c=e.getNodeBoundingRect(t).inflate(i+s),d=this.getNodeMatrix(e,t),f=this.getMask(e,De(t));this.addMask(e.paper,f),r.attr(c.toJSON()),r.attr({transform:De.matrixToTransformString(d),mask:`url(#${f.id})`,fill:u})},unhighlight(e){this.removeMask(e.paper)}}),Q3=vs.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:ms("highlight-opacity"),highlight:function(e,t){De(t).addClass(this.opacityClassName)},unhighlight:function(e,t){De(t).removeClass(this.opacityClassName)}}),bI=ms("highlighted"),K3=vs.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:bI},highlight:function(e,t){De(t).addClass(this.options.className)},unhighlight:function(e,t){De(t).removeClass(this.options.className)}},{className:bI}),By={ROW:"row",COLUMN:"column"},J3=vs.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(e,t){const n=e.model,{attribute:r,size:i=20,gap:o=5,direction:s=By.ROW}=this.options;if(!r)throw new Error("List: attribute is required");const a="number"==typeof i?{width:i,height:i}:i,u=s===By.ROW,c=u?a.width:a.height;let d=n.get(r);Array.isArray(d)||(d=[]);const f=this._prevItems||[],p=d.map((x,P)=>qc(f[P],d[P]));if(f.length!==d.length||p.some(x=>!x)){const x=this.vel.children(),P=d.map((O,Y)=>{const ee=Y in x?x[Y].node:null;if(p[Y])return ee;const ie=this.createListItem(O,a,ee);if(!ie)return null;if(!(ie instanceof SVGElement))throw new Error("List: item must be an SVGElement");ie.dataset.index=Y,ie.dataset.attribute=r;const be=Y*(c+o);return ie.setAttribute("transform",u?`translate(${be}, 0)`:`translate(0, ${be})`),ie});this.vel.empty().append(P),this._prevItems=d}const m=d.length,b=0===m?0:m*c+(m-1)*o;this.position(n,u?{width:b,height:a.height}:{width:a.width,height:b})},position(e,t){const{vel:n,options:r}=this,{margin:i=5,position:o="top-left"}=r,{width:s,height:a}=e.size(),{left:u,right:c,top:d,bottom:f}=ka(i),p=new ze(u,d,s-(u+c),a-(d+f));let{x:m,y:b}=yS(p,o);switch(o){case Ar.CENTER:case Ar.TOP:case Ar.BOTTOM:m-=t.width/2;break;case Ar.RIGHT:case Ar.BOTTOM_RIGHT:case Ar.TOP_RIGHT:m-=t.width}switch(o){case Ar.CENTER:case Ar.RIGHT:case Ar.LEFT:b-=t.height/2;break;case Ar.BOTTOM:case Ar.BOTTOM_RIGHT:case Ar.BOTTOM_LEFT:b-=t.height}n.attr("transform",`translate(${m}, ${b})`)}},{Directions:By,Positions:Ar});function eU(e,t,n,r){return e.getPointAtRatio("ratio"in r?r.ratio:.5)}function tU(e,t,n,r){return e.getPointAtLength("length"in r?r.length:20)}function Of(e){return function(t,n,r,i){if(r instanceof Element){var s,o=this.paper.findView(r);return s=o?o.isNodeConnection(r)?EI(o,"fixedAt"in i?i.fixedAt:"50%"):o.getNodeBBox(r).center():new W,e.call(this,t,n,s,i)}return e.apply(this,arguments)}}function EI(e,t){var n=parseFloat(t);return Ti(t)?e.getPointAtRatio(n/100):e.getPointAtLength(n)}const iU=Of(function nU(e,t,n,r){var i=1e6,o=e.getConnection(),s=e.getConnectionSubdivisions(),a=new Xe(n.clone().offset(0,i),n.clone().offset(0,-i)),u=new Xe(n.clone().offset(i,0),n.clone().offset(-i,0)),c=a.intersect(o,{segmentSubdivisions:s}),d=u.intersect(o,{segmentSubdivisions:s}),f=[];return c&&Array.prototype.push.apply(f,c),d&&Array.prototype.push.apply(f,d),f.length>0?n.chooseClosest(f):"fallbackAt"in r?EI(e,r.fallbackAt):DI(e,t,n,r)}),DI=Of(function rU(e,t,n,r){return e.getClosestPoint(n)||new W});function up(e,t,n){if(Lr(n)){const{x:i,y:o}=n;if(isFinite(o)){const s=new Xe(t,e),{start:a,end:u}=s.parallel(o);t=a,e=u}n=i}if(!isFinite(n))return e;var r=e.distance(t);return 0===n&&r>0?e:e.move(t,-Math.min(n,r-1))}function Hy(e){var t=e.getAttribute("stroke-width");return null===t?0:parseFloat(t)||0}function _I(e,t,n,r){var i=t.getNodeBBox(n);r.stroke&&i.inflate(Hy(n)/2);var o=e.intersect(i);return up(o?e.start.chooseClosest(o):e.end,e.start,r.offset)}var jy="segmentSubdivisons",Uy="shapeBBox";const lU=function sU(e,t,n,r){let{offset:i,alignOffset:o,align:s}=r;return s&&function oU(e,t,n=0){let r,i,o,s;const{start:a,end:u}=e;switch(t){case"left":r="x",i=u,o=a,s=-1;break;case"right":r="x",i=a,o=u,s=1;break;case"top":r="y",i=u,o=a,s=-1;break;case"bottom":r="y",i=a,o=u,s=1;break;default:return}a[r]<u[r]?i[r]=o[r]:o[r]=i[r],isFinite(n)&&(i[r]+=s*n,o[r]+=s*n)}(e,s,o),up(e.end,e.start,i)},fU=_I,dU=function aU(e,t,n,r){var i=t.model.angle();if(0===i)return _I(e,t,n,r);var o=t.getNodeUnrotatedBBox(n);r.stroke&&o.inflate(Hy(n)/2);var s=o.center(),a=e.clone().rotate(s,i),u=a.setLength(1e6).intersect(o);return up(u?a.start.chooseClosest(u).rotate(s,-i):e.end,e.start,r.offset)},hU=function cU(e,t,n,r){var i,o,s=r.selector,a=e.end;if(i="string"==typeof s?t.findBySelector(s)[0]:!1===s?n:Array.isArray(s)?Cf(n,s):function uU(e){if(!e)return null;var t=e;do{var n=t.tagName;if("string"!=typeof n)return null;if("G"===(n=n.toUpperCase()))t=t.firstElementChild;else{if("TITLE"!==n)break;t=t.nextElementSibling}}while(t);return t}(n),!De.isSVGGraphicsElement(i)){if(i===n||!De.isSVGGraphicsElement(n))return a;i=n}var O,u=t.getNodeShape(i),c=t.getNodeMatrix(i),d=t.getRootTranslateMatrix(),f=t.getRootRotateMatrix(),p=d.multiply(f).multiply(c),m=p.inverse(),b=De.transformLine(e,m),D=b.start.clone(),x=t.getNodeData(i);if(!1===r.insideout&&(x[Uy]||(x[Uy]=u.bbox()),x[Uy].containsPoint(D)))return a;if(u instanceof ut){var Y=r.precision||2;x[jy]||(x[jy]=u.getSegmentSubdivisions({precision:Y})),O={precision:Y,segmentSubdivisions:x[jy]}}!0===r.extrapolate&&b.setLength(1e6),(o=b.intersect(u,O))?De.isArray(o)&&(o=D.chooseClosest(o)):!0===r.sticky&&(o=u instanceof ze?u.pointNearestToPoint(D):u instanceof to?u.intersectionWithLineFromCenterToPoint(D):u.closestPoint(D,O));var ee=o?De.transformPoint(o,p):a,ie=r.offset||0;return r.stroke&&(ie+=Hy(i)/2),up(ee,e.start,ie)};function ua(e){return function(t,n,r,i){var o=!!i.rotate,s=o?t.getNodeUnrotatedBBox(n):t.getNodeBBox(n),a=s[e](),u=i.dx;if(u){var c=Ti(u);u=parseFloat(u),isFinite(u)&&(c&&(u/=100,u*=s.width),a.x+=u)}var d=i.dy;if(d){var f=Ti(d);d=parseFloat(d),isFinite(d)&&(f&&(d/=100,d*=s.height),a.y+=d)}return o?a.rotate(t.model.getBBox().center(),-t.model.angle()):a}}const vU=ua("center"),yU=ua("topMiddle"),wU=ua("bottomMiddle"),bU=ua("leftMiddle"),EU=ua("rightMiddle"),DU=ua("origin"),_U=ua("topRight"),CU=ua("bottomLeft"),TU=ua("corner"),xU=Of(function pU(e,t,n,r){var i=e.model.angle(),o=e.getNodeBBox(t),s=o.center(),a=o.origin(),u=o.corner(),c=r.padding;if(isFinite(c)||(c=0),a.y+c<=n.y&&n.y<=u.y-c){var d=n.y-s.y;s.x+=0===i||180===i?0:1*d/Math.tan(yo(i)),s.y+=d}else if(a.x+c<=n.x&&n.x<=u.x-c){var f=n.x-s.x;s.y+=90===i||270===i?0:f*Math.tan(yo(i)),s.x+=f}return s}),SU=Of(function gU(e,t,n,r){var o,s,a,i=!!r.rotate;i?(o=e.getNodeUnrotatedBBox(t),a=e.model.getBBox().center(),s=e.model.angle()):o=e.getNodeBBox(t);var d,u=r.padding;switch(isFinite(u)&&o.inflate(u),i&&n.rotate(a,s),o.sideNearestToPoint(n)){case"left":d=o.leftMiddle();break;case"right":d=o.rightMiddle();break;case"top":d=o.topMiddle();break;case"bottom":d=o.bottomMiddle()}return i?d.rotate(a,-s):d}),IU=function mU(e,t,n,r,i){return e.model.getPointFromConnectedLink(this.model,i).offset(r.dx,r.dy)},tl={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},cp=9007199254740991,$y=pn.Highlighting,xI={[$y.DEFAULT]:{name:"stroke",options:{padding:3}},[$y.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[$y.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},PU=[{name:ns.BACK},{name:ns.CELLS},{name:ns.LABELS},{name:ns.FRONT},{name:ns.TOOLS}],NU=Va.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,perpendicularLinks:!1,elementView:Qh,linkView:Nf,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(e,t){return!1},highlighting:xI,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new Xc,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(e,t,n){return"passive"!==t.getAttribute("magnet")},validateConnection:function(e,t,n,r,i,o){return("target"===i?n:e)instanceof Qh},embeddingMode:!1,validateEmbedding:function(e,t){return!0},validateUnembedding:function(e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:tl.EXACT,frozen:!1,autoFreeze:!1,onViewUpdate:function(e,t,n,r,i){t&(e.FLAG_INSERT|e.FLAG_REMOVE)||r.mounting||r.isolate||i.requestConnectedLinksUpdate(e,n,r)},onViewPostponed:function(e,t,n){return n.forcePostponedViewUpdate(e,t)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:it,anchorNamespace:Tr,linkAnchorNamespace:Me,connectionPointNamespace:Xn,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,init:function(){const{options:e,el:t}=this;e.cellViewNamespace||(e.cellViewNamespace=typeof joint<"u"&&Oa(joint,"shapes")?joint.shapes:null);const n=this.model=e.model||new Xh;this._layers={},this.setGrid(e.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.$document=Mn(t.ownerDocument),this.resetViews(n.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var e=this.model;this.listenTo(e,"add",this.onCellAdded).listenTo(e,"remove",this.onCellRemoved).listenTo(e,"change",this.onCellChange).listenTo(e,"reset",this.onGraphReset).listenTo(e,"sort",this.onGraphSort).listenTo(e,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(e,t,n){var r=n.position;this.isAsync()||!vo(r)?this.renderView(e,n):(n.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(e,n),0===r&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(e,t,n){const r=this.findViewByModel(e);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,n)},onCellChange:function(e,t){if(e!==this.model.attributes.cells&&e.hasChanged("z")&&this.options.sorting===tl.APPROX){const n=this.findViewByModel(e);n&&this.requestViewUpdate(n,n.FLAG_INSERT,n.UPDATE_PRIORITY,t)}},onGraphReset:function(e,t){this.resetLayers(),this.resetViews(e.models,t)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(e){if(!this.isFrozen()){var t=e&&e.batchName,n=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(t)&&!n.hasActiveBatch(r)&&this.updateViews(e)}var i=this.SORT_DELAYING_BATCHES;i.includes(t)&&!n.hasActiveBatch(i)&&this.sortViews()}},cloneOptions:function(){const{options:e}=this,{defaultConnector:t,defaultRouter:n,defaultConnectionPoint:r,defaultAnchor:i,defaultLinkAnchor:o,origin:s,highlighting:a,cellViewNamespace:u,interactive:c}=e;!u&&typeof joint<"u"&&Oa(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),sr(t)||(e.defaultConnector=Qo(t)),sr(n)||(e.defaultRouter=Qo(n)),sr(r)||(e.defaultConnectionPoint=Qo(r)),sr(i)||(e.defaultAnchor=Qo(i)),sr(o)||(e.defaultLinkAnchor=Qo(o)),Lr(c)&&(e.interactive=Tt({},c)),Lr(a)&&(e.highlighting=Oh({},a,xI)),e.origin=Tt({},s)},children:function(){var e=De.namespace;return[{namespaceURI:e.xhtml,tagName:"div",className:ms("paper-background"),selector:"background"},{namespaceURI:e.xhtml,tagName:"div",className:ms("paper-grid"),selector:"grid"},{namespaceURI:e.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":e.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:ms("layers"),selector:"layers"}]}]},hasLayerView(e){return e in this._layers},getLayerView(e){const{_layers:t}=this;if(e in t)return t[e];throw new Error(`dia.Paper: Unknown layer "${e}"`)},getLayerNode(e){return this.getLayerView(e).el},render:function(){this.renderChildren();const{childNodes:e,options:t}=this,{svg:n,defs:r,layers:i,background:o,grid:s}=e;return n.style.overflow=t.overflow?"visible":"hidden",this.svg=n,this.defs=r,this.layers=i,this.$background=Mn(o),this.$grid=Mn(s),this.renderLayers(),De.ensureId(n),t.background&&this.drawBackground(t.background),t.drawGrid&&this.drawGrid(),this},renderLayers:function(e=PU){this.removeLayers(),e.forEach(({name:i})=>{const s=new kj({name:i});this.layers.appendChild(s.el),this._layers[i]=s});const t=this.getLayerView(ns.CELLS),n=this.getLayerView(ns.TOOLS),r=this.getLayerView(ns.LABELS);this.tools=n.el,this.cells=this.viewport=t.el,t.vel.addClass(ms("viewport")),r.vel.addClass(ms("viewport"))},removeLayers:function(){const{_layers:e}=this;Object.keys(e).forEach(t=>{e[t].remove(),delete e[t]})},resetLayers:function(){const{_layers:e}=this;Object.keys(e).forEach(t=>{e[t].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(e){var t=this.layers;if(void 0===e){var n=t.getAttribute("transform");return(this._viewportTransformString||null)===n?e=this._viewportMatrix:(e=t.getCTM(),this._viewportMatrix=e,this._viewportTransformString=n),De.createSVGMatrix(e)}e=De.createSVGMatrix(e);var r=De.matrixToTransformString(e);return t.setAttribute("transform",r),this._viewportMatrix=e,this._viewportTransformString=t.getAttribute("transform"),this},clientMatrix:function(){return De.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(e,t,n){if(e instanceof pn)for(var r=e.model,i=this.model.getConnectedLinks(r),o=0,s=i.length;o<s;o++){var a=i[o],u=this.findViewByModel(a);if(u){var c=["UPDATE"];a.getTargetCell()===r&&c.push("TARGET"),a.getSourceCell()===r&&c.push("SOURCE");var d=Math.max(t+1,u.UPDATE_PRIORITY);this.scheduleViewUpdate(u,u.getFlag(c),d,n)}}},forcePostponedViewUpdate:function(e,t){if(!(e&&e instanceof pn))return!1;var n=e.model;if(n.isElement())return!1;if(!(t&e.getFlag(["SOURCE","TARGET"]))){var r={silent:!0},i=0,o=this.findViewByModel(n.getSourceCell());o&&!this.isViewMounted(o)&&(i=this.dumpView(o,r),e.updateEndMagnet("source"));var s=0,a=this.findViewByModel(n.getTargetCell());if(a&&!this.isViewMounted(a)&&(s=this.dumpView(a,r),e.updateEndMagnet("target")),0===i&&0===s)return!this.dumpView(e,r)}return!1},requestViewUpdate:function(e,t,n,r){r||(r={}),this.scheduleViewUpdate(e,t,n,r);var i=this.isAsync();if(!(this.isFrozen()||i&&!1!==r.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var o=this.updateViews(r);i&&this.notifyAfterRender(o,r)}},scheduleViewUpdate:function(e,t,n,r){const{_updates:i,options:o}=this;i.idle&&o.autoFreeze&&(i.idle=!1,this.unfreeze());const{FLAG_REMOVE:s,FLAG_INSERT:a,UPDATE_PRIORITY:u,cid:c}=e;let d=i.priorities[n];if(d||(d=i.priorities[n]={}),n>u)for(let m=n-1;m>=u;m--){const b=i.priorities[m];!b||!(c in b)||(d[c]|=b[c],delete b[c])}let f=d[c]||0;if((f&t)===t)return;f||i.count++,t&s&&f&a?d[c]^=a:t&a&&f&s&&(d[c]^=s),d[c]|=t;const p=o.onViewUpdate;"function"==typeof p&&p.call(this,e,t,n,r||{},this)},dumpViewUpdate:function(e){if(!e)return 0;var n=e.cid,r=this._updates.priorities[e.UPDATE_PRIORITY],i=this.registerMountedView(e)|r[n];return delete r[n],i},dumpView:function(e,t={}){const n=this.dumpViewUpdate(e);if(!n)return 0;const r=!t.silent;r&&this.notifyBeforeRender(t);const i=this.updateView(e,n,t);return r&&this.notifyAfterRender({updated:1,priority:e.UPDATE_PRIORITY},t),i},updateView:function(e,t,n){if(!e)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:i,FLAG_INIT:o,model:s}=e;if(e instanceof pn){if(t&r)return this.removeView(s),0;if(t&i){const a=!!(t&o);a&&(t^=o),this.insertView(e,a),t^=i}}return t?e.confirmUpdate(t,n||{}):0},requireView:function(e,t){var n=this.findViewByModel(e);return n?(this.dumpView(n,t),n):null},registerUnmountedView:function(e){var t=e.cid,n=this._updates;if(t in n.unmounted)return 0;var r=n.unmounted[t]|=e.FLAG_INSERT;return n.unmountedCids.push(t),delete n.mounted[t],r},registerMountedView:function(e){var t=e.cid,n=this._updates;if(t in n.mounted)return 0;n.mounted[t]=!0,n.mountedCids.push(t);var r=n.unmounted[t]||0;return delete n.unmounted[t],r},isViewMounted:function(e){return!!e&&e.cid in this._updates.mounted},dumpViews:function(e){var t=Xo({},e,{viewport:null});this.checkViewport(t),this.updateViews(t)},updateViews:function(e){this.notifyBeforeRender(e);let t,n=0,r=0,i=cp;do{r++,t=this.updateViewsBatch(e),n+=t.updated,i=Math.min(t.priority,i)}while(!t.empty);const o={updated:n,batches:r,priority:i};return this.notifyAfterRender(o,e),o},hasScheduledUpdates:function(){const e=this._updates.priorities,t=Object.keys(e);let n=t.length;for(;n>0&&n--;)for(let r in e[t[n]])return!0;return!1},updateViewsAsync:function(e,t){e||(e={}),t||(t={processed:0,priority:cp});const{_updates:n,options:r}=this,i=n.id;if(i){vy(i),0===t.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(e);const o=this.updateViewsBatch(e),s=Xo({},e,{mountBatchSize:1e3-o.mounted,unmountBatchSize:1e3-o.unmounted}),a=this.checkViewport(s),u=a.unmounted,c=a.mounted;let d=t.processed;const f=n.count;o.updated>0?(d+=o.updated+o.unmounted,o.processed=d,t.priority=Math.min(o.priority,t.priority),o.empty&&0===c?(o.unmounted+=u,o.mounted+=c,o.priority=t.priority,this.notifyAfterRender(o,e),t.processed=0,t.priority=cp,n.count=0):t.processed=d):n.idle||r.autoFreeze&&(this.freeze(),n.idle=!0,this.trigger("render:idle",e));const p=e.progress;if(f&&"function"==typeof p&&p.call(this,o.empty,d,f,o,this),n.id!==i)return}if(n.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");n.id=my(this.updateViewsAsync,this,e,t)},notifyBeforeRender:function(e={}){let t=e.beforeRender;"function"!=typeof t&&(t=this.options.beforeRender,"function"!=typeof t)||t.call(this,e,this)},notifyAfterRender:function(e,t={}){let n=t.afterRender;"function"!=typeof n&&(n=this.options.afterRender),"function"==typeof n&&n.call(this,e,t,this),this.trigger("render:done",e,t)},updateViewsBatch:function(e){e||(e={});var t=e.batchSize||1/0,n=this._updates,r=0,i=0,o=0,s=0,a=cp,u=!0,c=this.options,d=n.priorities,f="viewport"in e?e.viewport:c.viewport;"function"!=typeof f&&(f=null);var p=c.onViewPostponed;"function"!=typeof p&&(p=null);var m=Object.keys(d);e:for(var b=0,D=m.length;b<D;b++){var x=+m[b],P=d[x];for(var O in P){if(r>=t){u=!1;break e}var Y=Cu[O];if(Y){var ee=P[O];if(!(ee&Y.FLAG_REMOVE)){var ie=O in n.unmounted;if(Y.DETACHABLE&&f&&!f.call(this,Y,!ie,this)){ie||(this.registerUnmountedView(Y),this.detachView(Y)),n.unmounted[O]|=ee,delete P[O],o++;continue}ie&&(ee|=Y.FLAG_INSERT,s++),ee|=this.registerMountedView(Y)}var be=this.updateView(Y,ee,e);be>0&&(P[O]=be,!p||!p.call(this,Y,be,this)||P[O])?(i++,u=!1):(a>x&&(a=x),r++,delete P[O])}else delete P[O]}}return{priority:a,updated:r,postponed:i,unmounted:o,mounted:s,empty:u}},getUnmountedViews:function(){const t=Object.keys(this._updates.unmounted),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=Cu[t[i]];return r},getMountedViews:function(){const t=Object.keys(this._updates.mounted),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=Cu[t[i]];return r},checkUnmountedViews:function(e,t){t||(t={});var n=0;"function"!=typeof e&&(e=null);for(var i=this._updates,o=i.unmountedCids,s=i.unmounted,a=0,u=(Math.min(o.length,"mountBatchSize"in t?t.mountBatchSize:1/0));a<u;a++){var c=o[a];if(c in s){var d=Cu[c];if(d){if(d.DETACHABLE&&e&&!e.call(this,d,!1,this)){o.push(c);continue}n++;var f=this.registerMountedView(d);f&&this.scheduleViewUpdate(d,f,d.UPDATE_PRIORITY,{mounting:!0})}}}return o.splice(0,a),n},checkMountedViews:function(e,t){t||(t={});var n=0;if("function"!=typeof e)return n;for(var i=this._updates,o=i.mountedCids,s=i.mounted,a=0,u=(Math.min(o.length,"unmountBatchSize"in t?t.unmountBatchSize:1/0));a<u;a++){var c=o[a];if(c in s){var d=Cu[c];if(d){if(!d.DETACHABLE||e.call(this,d,!0,this)){o.push(c);continue}n++,this.registerUnmountedView(d)&&this.detachView(d)}}}return o.splice(0,a),n},checkViewVisibility:function(e,t={}){let n="viewport"in t?t.viewport:this.options.viewport;"function"!=typeof n&&(n=null);const r=this._updates,{mounted:i,unmounted:o}=r,s=!e.DETACHABLE||!n||n.call(this,e,!1,this);let a=!1,u=!1;if(e.cid in i&&!s){this.registerUnmountedView(e)&&this.detachView(e);const f=r.mountedCids.indexOf(e.cid);r.mountedCids.splice(f,1),a=!0}if(!a&&e.cid in o&&s){const d=r.unmountedCids.indexOf(e.cid);r.unmountedCids.splice(d,1);var c=this.registerMountedView(e);c&&this.scheduleViewUpdate(e,c,e.UPDATE_PRIORITY,{mounting:!0}),u=!0}return{mounted:u?1:0,unmounted:a?1:0}},checkViewport:function(e){var t=Xo({},e,{mountBatchSize:1/0,unmountBatchSize:1/0}),n="viewport"in t?t.viewport:this.options.viewport,r=this.checkMountedViews(n,t);return r>0&&(t.mountBatchSize=Math.min(this._updates.unmountedCids.length-r,t.mountBatchSize)),{mounted:this.checkUnmountedViews(n,t),unmounted:r}},freeze:function(e){e||(e={});var t=this._updates,n=e.key,r=this.options.frozen,i=t.freezeKey;if(n&&n!==i){if(r&&i)return;t.freezeKey=n,t.keyFrozen=r}this.options.frozen=!0;var o=t.id;t.id=null,this.isAsync()&&o&&vy(o)},unfreeze:function(e){e||(e={});var t=this._updates,n=e.key,r=t.freezeKey;n&&r&&n!==r||(t.freezeKey=null,(!n||n!==r||!t.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(e)):this.updateViews(e),this.options.frozen=t.keyFrozen=!1,t.sort&&(this.sortViews(),t.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===tl.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var e=this.options,t=e.width,n=e.height;return vo(t)||(t=this.el.clientWidth),vo(n)||(n=this.el.clientHeight),{width:t,height:n}},setDimensions:function(e,t){const{options:n}=this,{width:r,height:i}=n;let o=void 0===e?r:e,s=void 0===t?i:t;if(r===o&&i===s)return;n.width=o,n.height=s,this._setDimensions();const a=this.getComputedSize();this.trigger("resize",a.width,a.height)},_setDimensions:function(){const{options:e}=this;let t=e.width,n=e.height;vo(t)&&(t=Math.round(t)),vo(n)&&(n=Math.round(n)),this.$el.css({width:null===t?"":t,height:null===n?"":n})},setOrigin:function(e,t){return this.translate(e||0,t||0)},fitToContent:function(e,t,n,r){r=In(e)?e:Tt({gridWidth:e,gridHeight:t,padding:n},r);const{x:i,y:o,width:s,height:a}=this.getFitToContentArea(r),{sx:u,sy:c}=this.scale();return this.setOrigin(-i*u,-o*c),this.setDimensions(s*u,a*c),new ze(i,o,s,a)},getFitToContentArea:function(e={}){const t=e.gridWidth||1,n=e.gridHeight||1,r=ka(e.padding||0),i=Math.max(e.minWidth||0,t),o=Math.max(e.minHeight||0,n),s=e.maxWidth||Number.MAX_VALUE,a=e.maxHeight||Number.MAX_VALUE,u=e.allowNewOrigin,c="contentArea"in e?new ze(e.contentArea):this.getContentArea(e),{sx:d,sy:f}=this.scale();c.x*=d,c.y*=f,c.width*=d,c.height*=f;let p=Math.ceil((c.width+c.x)/t),m=Math.ceil((c.height+c.y)/n);e.allowNegativeBottomRight||(p=Math.max(p,1),m=Math.max(m,1)),p*=t,m*=n;let b=0;("negative"===u&&c.x<0||"positive"===u&&c.x>=0||"any"===u)&&(b=Math.ceil(-c.x/t)*t,b+=r.left,p+=b);let D=0;return("negative"===u&&c.y<0||"positive"===u&&c.y>=0||"any"===u)&&(D=Math.ceil(-c.y/n)*n,D+=r.top,m+=D),p+=r.right,m+=r.bottom,p=Math.max(p,i),m=Math.max(m,o),p=Math.min(p,s),m=Math.min(m,a),new ze(-b/d,-D/f,p/d,m/f)},transformToFitContent:function(e){let t,n;if(e||(e={}),"contentArea"in e){const x=e.contentArea;t=this.localToPaperRect(x),n=new W(x)}else t=this.getContentBBox(e),n=this.paperToLocalPoint(t);if(!t.width||!t.height)return;Xo(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});const r=ka(e.padding),i=e.minScaleX||e.minScale,o=e.maxScaleX||e.maxScale,s=e.minScaleY||e.minScale,a=e.maxScaleY||e.maxScale;let u;if(e.fittingBBox)u=e.fittingBBox;else{const x=this.translate(),P=this.getComputedSize();u={x:x.tx,y:x.ty,width:P.width,height:P.height}}u=new ze(u).moveAndExpand({x:r.left,y:r.top,width:-r.left-r.right,height:-r.top-r.bottom});const c=this.scale();let d=u.width/t.width*c.sx,f=u.height/t.height*c.sy;if(e.preserveAspectRatio&&(d=f=Math.min(d,f)),e.scaleGrid){const x=e.scaleGrid;d=x*Math.floor(d/x),f=x*Math.floor(f/x)}d=Math.min(o,Math.max(i,d)),f=Math.min(a,Math.max(s,f));const p_x=d/c.sx,p_y=f/c.sy,m=this.options.origin;let b=u.x-n.x*d-m.x,D=u.y-n.y*f-m.y;switch(e.verticalAlign){case"middle":D+=(u.height-t.height*p_y)/2;break;case"bottom":D+=u.height-t.height*p_y}switch(e.horizontalAlign){case"middle":b+=(u.width-t.width*p_x)/2;break;case"right":b+=u.width-t.width*p_x}this.scale(d,f),this.translate(b,D)},scaleContentToFit:function(e){this.transformToFitContent(e)},getContentArea:function(e){return e&&e.useModelGeometry?this.model.getBBox()||new ze:De(this.cells).getBBox()},getContentBBox:function(e){return this.localToPaperRect(this.getContentArea(e))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...e){const{restrictTranslate:t}=this.options;let n;return n=sr(t)?t.apply(this,e):!0===t?this.getArea():t?new ze(t):null,n},createViewForModel:function(e){const{options:t}=this;var n,r,i=t.cellViewNamespace,o=e.get("type")+"View",s=Cf(i,o,".");return e.isLink()?(n=t.linkView,r=Nf):(n=t.elementView,r=Qh),new(n.prototype instanceof Bi.View?s||n:n.call(this,e)||s||r)({model:e,interactive:t.interactive,labelsLayer:!0===t.labelsLayer?ns.LABELS:t.labelsLayer})},removeView:function(e){const{id:t}=e,{_views:n,_updates:r}=this,i=n[t];if(i){var{cid:o}=i;const{mounted:s,unmounted:a}=r;i.remove(),delete n[t],delete s[o],delete a[o]}return i},renderView:function(e,t){const{id:n}=e,r=this._views;let i,o,s=!0;return n in r&&(i=r[n],i.model===e?(o=i.FLAG_INSERT,s=!1):this.removeView(e)),s&&(i=r[n]=this.createViewForModel(e),i.paper=this,o=this.registerUnmountedView(i)|this.FLAG_INIT|i.getFlag(Fr(i,"initFlag"))),this.requestViewUpdate(i,o,i.UPDATE_PRIORITY,t),i},onImageDragStart:function(){return!1},resetViews:function(e,t){t||(t={}),e||(e=[]),this._resetUpdates(),this.removeViews();const n=this.options.autoFreeze?null:"reset";this.freeze({key:n});for(var r=0,i=e.length;r<i;r++)this.renderView(e[r],t);this.unfreeze({key:n}),this.sortViews()},removeViews:function(){js(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen())return void(this._updates.sort=!0);this.sortViewsExact()}},sortViewsExact:function(){var e=Mn(this.cells).children("[model-id]"),t=this.model.get("cells");!function(e,t){var n=Mn(e),r=n.map(function(){var o=this.parentNode,s=o.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(o===this)throw new Error("You can't sort elements if any one is a descendant of another.");o.insertBefore(this,s),o.removeChild(s)}});Array.prototype.sort.call(n,t).each(function(i){r[i].call(this)})}(e,function(n,r){var i=t.get(n.getAttribute("model-id")),o=t.get(r.getAttribute("model-id")),s=i.attributes.z||0,a=o.attributes.z||0;return s===a?0:s<a?-1:1})},insertView:function(e,t){const n=this.getLayerView(ns.CELLS),{el:r,model:i}=e;this.options.sorting===tl.APPROX?n.insertSortedNode(r,i.get("z")):n.insertNode(r),e.onMount(t)},detachView(e){e.unmount(),e.onDetach()},scale:function(e,t,n,r){if(void 0===e)return De.matrixToScale(this.matrix());void 0===t&&(t=e),void 0===n&&(n=0,r=0);var i=this.translate();(n||r||i.tx||i.ty)&&this.translate(i.tx-n*(e-1),i.ty-r*(t-1)),e=Math.max(e||0,this.MIN_SCALE),t=Math.max(t||0,this.MIN_SCALE);var a=this.matrix();return a.a=e,a.d=t,this.matrix(a),this.trigger("scale",e,t,n,r),this},rotate:function(e,t,n){if(void 0===e)return De.matrixToRotate(this.matrix());if(void 0===t){var r=this.cells.getBBox();t=r.width/2,n=r.height/2}var i=this.matrix().translate(t,n).rotate(e).translate(-t,-n);return this.matrix(i),this},translate:function(e,t){if(void 0===e)return De.matrixToTranslate(this.matrix());const{options:n}=this,{origin:r,drawGrid:i}=n;e||(e=0),t||(t=0);const o=this.matrix();if(o.e===e&&o.f===t)return this;o.e=e,o.f=t,this.matrix(o);const{tx:s,ty:a}=this.translate();return r.x=s,r.y=a,this.trigger("translate",s,a),i&&this.drawGrid(),this},findView:function(e){var t=Hi(e)?this.cells.querySelector(e):e instanceof Mn?e[0]:e,n=this.findAttribute("model-id",t);if(n)return this._views[n]},findViewByModel:function(e){var t=Hi(e)||vo(e)?e:e&&e.id;return this._views[t]},findViewsFromPoint:function(e){return e=new W(e),this.model.getElements().map(this.findViewByModel,this).filter(function(n){return n&&n.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,t){t=Xo(t||{},{strict:!1}),e=new ze(e);var n=this.model.getElements().map(this.findViewByModel,this),r=t.strict?"containsRect":"intersect";return n.filter(function(i){return i&&e[r](i.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(e,...t){"string"==typeof e&&this.trigger("tools:event",e,...t)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e,t){return this.clientToLocalPoint(e,t).snapToGrid(this.options.gridSize)},localToPaperPoint:function(e,t){var n=new W(e,t);return De.transformPoint(n,this.matrix())},localToPaperRect:function(e,t,n,r){var i=new ze(e,t,n,r);return De.transformRect(i,this.matrix())},paperToLocalPoint:function(e,t){var n=new W(e,t);return De.transformPoint(n,this.matrix().inverse())},paperToLocalRect:function(e,t,n,r){var i=new ze(e,t,n,r);return De.transformRect(i,this.matrix().inverse())},localToClientPoint:function(e,t){var n=new W(e,t);return De.transformPoint(n,this.clientMatrix())},localToClientRect:function(e,t,n,r){var i=new ze(e,t,n,r);return De.transformRect(i,this.clientMatrix())},clientToLocalPoint:function(e,t){var n=new W(e,t);return De.transformPoint(n,this.clientMatrix().inverse())},clientToLocalRect:function(e,t,n,r){var i=new ze(e,t,n,r);return De.transformRect(i,this.clientMatrix().inverse())},localToPagePoint:function(e,t){return this.localToPaperPoint(e,t).offset(this.pageOffset())},localToPageRect:function(e,t,n,r){return this.localToPaperRect(e,t,n,r).offset(this.pageOffset())},pageToLocalPoint:function(e,t){var r=new W(e,t).difference(this.pageOffset());return this.paperToLocalPoint(r)},pageToLocalRect:function(e,t,n,r){var i=this.pageOffset(),o=new ze(e,t,n,r);return o.x-=i.x,o.y-=i.y,this.paperToLocalRect(o)},clientOffset:function(){var e=this.svg.getBoundingClientRect();return new W(e.left,e.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(e){if(!(e instanceof Nf))throw new Error("Must provide a linkView.");var t=e.model,n=this.options,r=this.model,i=r.constructor.validations;return!(!n.multiLinks&&!i.multiLinks.call(this,r,t)||!n.linkPinning&&!i.linkPinning.call(this,r,t)||"function"==typeof n.allowLink&&!n.allowLink.call(this,e,this))},getDefaultLink:function(e,t){return sr(this.options.defaultLink)?this.options.defaultLink.call(this,e,t):this.options.defaultLink.clone()},resolveHighlighter:function(e={}){let{highlighter:t,type:n}=e;const{highlighting:r,highlighterNamespace:i}=this.options;if(void 0===t){if(!r||n&&(t=r[n],!1===t))return!1;t||(t=r.default)}if(!t)return!1;Hi(t)&&(t={name:t});const o=t.name,s=i[o];if(!s)throw new Error('Unknown highlighter ("'+o+'")');if("function"!=typeof s.highlight)throw new Error('Highlighter ("'+o+'") is missing required highlight() method');if("function"!=typeof s.unhighlight)throw new Error('Highlighter ("'+o+'") is missing required unhighlight() method');return{highlighter:s,options:t.options||{},name:o}},onCellHighlight:function(e,t,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:i,options:o}=r;i.highlight(e,t,o)},onCellUnhighlight:function(e,t,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:i,options:o}=r;i.unhighlight(e,t,o)},pointerdblclick:function(e){e.preventDefault(),e=Ci(e);var t=this.findView(e.target);if(!this.guard(e,t)){var n=this.snapToGrid(e.clientX,e.clientY);t?t.pointerdblclick(e,n.x,n.y):this.trigger("blank:pointerdblclick",e,n.x,n.y)}},pointerclick:function(e){if(this.eventData(e).mousemoved<=this.options.clickThreshold){e=Ci(e);var n=this.findView(e.target);if(this.guard(e,n))return;var r=this.snapToGrid(e.clientX,e.clientY);n?n.pointerclick(e,r.x,r.y):this.trigger("blank:pointerclick",e,r.x,r.y)}},contextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),this.contextMenuFired?this.contextMenuFired=!1:(e=Ci(e),this.contextMenuTrigger(e))},contextMenuTrigger:function(e){var t=this.findView(e.target);if(!this.guard(e,t)){var n=this.snapToGrid(e.clientX,e.clientY);t?t.contextmenu(e,n.x,n.y):this.trigger("blank:contextmenu",e,n.x,n.y)}},pointerdown:function(e){e=Ci(e);const{target:t,button:n}=e,r=this.findView(t),i=2===n;if(r){if(!i&&this.guard(e,r))return;const o=this.FORM_CONTROL_TAG_NAMES.includes(t.tagName);this.options.preventDefaultViewAction&&!o&&e.preventDefault(),o&&r.preventDefaultInteraction(e);const s=this.customEventTrigger(e,r);if(s){if(s.isPropagationStopped())return;e.data=s.data}const a=t.closest("[magnet]");if(a&&r.el!==a&&r.el.contains(a)){const u=Ci(Mn.Event(e.originalEvent,{data:e.data,currentTarget:a}));if(this.onmagnet(u),u.isDefaultPrevented()&&e.preventDefault(),u.isPropagationStopped()){if(i)return;return void this.delegateDragEvents(r,u.data)}e.data=u.data}}if(i){this.contextMenuFired=!0;const o=Mn.Event(e.originalEvent,{type:"contextmenu",data:e.data});this.contextMenuTrigger(o)}else{const o=this.snapToGrid(e.clientX,e.clientY);r?r.pointerdown(e,o.x,o.y):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.trigger("blank:pointerdown",e,o.x,o.y)),this.delegateDragEvents(r,e.data)}},pointermove:function(e){var t=this.eventData(e);if(t.mousemoved||(t.mousemoved=0,this.undelegateEvents()),!(++t.mousemoved<=this.options.moveThreshold)){e=Ci(e);var r=this.snapToGrid(e.clientX,e.clientY),i=t.sourceView;i?i.pointermove(e,r.x,r.y):this.trigger("blank:pointermove",e,r.x,r.y),this.eventData(e,t)}},pointerup:function(e){this.undelegateDocumentEvents();var t=Ci(e),n=this.snapToGrid(t.clientX,t.clientY),r=this.eventData(e).sourceView;r?r.pointerup(t,n.x,n.y):this.trigger("blank:pointerup",t,n.x,n.y),t.isPropagationStopped()||this.pointerclick(Mn.Event(e.originalEvent,{type:"click",data:e.data})),this.delegateEvents()},mouseover:function(e){e=Ci(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseover(e);else{if(this.el===e.target)return;this.trigger("blank:mouseover",e)}},mouseout:function(e){e=Ci(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseout(e);else{if(this.el===e.target)return;this.trigger("blank:mouseout",e)}},mouseenter:function(e){e=Ci(e);const{target:t,relatedTarget:n,currentTarget:r}=e,i=this.findView(t);if(this.guard(e,i))return;const o=this.findView(n);i&&(o===i||(i.mouseenter(e),this.el.contains(n)))||o||r===this.el&&this.trigger("paper:mouseenter",e)},mouseleave:function(e){e=Ci(e);const{target:t,relatedTarget:n,currentTarget:r}=e,i=this.findView(t);if(this.guard(e,i))return;const o=this.findView(n);i&&(o===i||(i.mouseleave(e),this.el.contains(n)))||o||r===this.el&&this.trigger("paper:mouseleave",e)},_processMouseWheelEvtBuf:function wH(e,t,n){if("function"!=typeof e)throw new TypeError("Expected a function");let r,i,o,s,a,u,c=0,d=!1,f=!1,p=!0;const m=!t&&0!==t&&window&&"function"==typeof window.requestAnimationFrame;function b(w){const S=r,M=i;return r=i=void 0,c=w,s=e.apply(M,S),s}function D(w,S){return m?(window.cancelAnimationFrame(a),window.requestAnimationFrame(w)):setTimeout(w,S)}function Y(w){const S=w-u;return void 0===u||S>=t||S<0||f&&w-c>=o}function ee(){const w=Date.now();if(Y(w))return ie(w);a=D(ee,function O(w){const R=t-(w-u);return f?Math.min(R,o-(w-c)):R}(w))}function ie(w){return a=void 0,p&&r?b(w):(r=i=void 0,s)}function be(...w){const S=Date.now(),M=Y(S);if(r=w,i=this,u=S,M){if(void 0===a)return function P(w){return c=w,a=D(ee,t),d?b(w):s}(u);if(f)return a=D(ee,t),b(u)}return void 0===a&&(a=D(ee,t)),s}return t=+t||0,In(n)&&(d=!!n.leading,f="maxWait"in n,o=f?Math.max(+n.maxWait||0,t):o,p="trailing"in n?!!n.trailing:p),be.cancel=()=>{void 0!==a&&function x(w){if(m)return window.cancelAnimationFrame(w);clearTimeout(w)}(a),c=0,r=u=i=a=void 0},be.flush=()=>void 0===a?s:ie(Date.now()),be.pending=()=>void 0!==a,be}(function(){const{event:e,deltas:t}=this._mw_evt_buffer,n=t.reduce((s,a)=>s+function(e,t){return e>50?50:e<-50?-50:e}(a),0),r=Math.pow(.995,n),{x:i,y:o}=this.clientToLocalPoint(e.clientX,e.clientY);this.trigger("paper:pinch",e,i,o,r),this._mw_evt_buffer={event:null,deltas:[]}},20,{maxWait:20}),mousewheel:function(e){e=Ci(e);const t=this.findView(e.target);if(this.guard(e,t))return;const n=e.originalEvent,r=this.snapToGrid(n.clientX,n.clientY),{deltaX:i,deltaY:o}=function(e){let i=0,o=0,s=0,a=0;return"detail"in e&&(o=e.detail),"wheelDelta"in e&&(o=-e.wheelDelta/120),"wheelDeltaY"in e&&(o=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(i=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(i=o,o=0),s="deltaX"in e?e.deltaX:10*i,a="deltaY"in e?e.deltaY:10*o,(s||a)&&e.deltaMode&&(1==e.deltaMode?(s*=40,a*=40):(s*=800,a*=800)),0===e.deltaX&&0!==e.deltaY&&e.shiftKey&&(s=a,a=0,i=o,o=0),s&&!i&&(i=s<1?-1:1),a&&!o&&(o=a<1?-1:1),{spinX:i,spinY:o,deltaX:s,deltaY:a}}(n),s=this._events["paper:pinch"];if(e.ctrlKey&&s&&s.length>0)n.preventDefault(),this._mw_evt_buffer.event=n,this._mw_evt_buffer.deltas.push(o),this._processMouseWheelEvtBuf();else{const a=Math.max(-1,Math.min(1,n.wheelDelta));t?t.mousewheel(e,r.x,r.y,a):this.trigger("blank:mousewheel",e,r.x,r.y,a),this.trigger("paper:pan",e,i,o)}},onevent:function(e){var t=e.currentTarget,n=t.getAttribute("event");if(n){var r=this.findView(t);if(r){if(e=Ci(e),this.guard(e,r))return;var i=this.snapToGrid(e.clientX,e.clientY);r.onevent(e,n,i.x,i.y)}}},magnetEvent:function(e,t){var n=e.currentTarget;if(n.getAttribute("magnet")){var i=this.findView(n);if(i){if(e=Ci(e),this.guard(e,i))return;var o=this.snapToGrid(e.clientX,e.clientY);t.call(this,i,e,n,o.x,o.y)}}},onmagnet:function(e){if(2===e.button){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;const t=Mn.Event(e.originalEvent,{type:"contextmenu",data:e.data,currentTarget:e.currentTarget});this.magnetContextMenuTrigger(t),t.isPropagationStopped()&&e.stopPropagation()}else this.magnetEvent(e,function(t,n,r,i,o){t.onmagnet(n,i,o)})},magnetpointerdblclick:function(e){this.magnetEvent(e,function(t,n,r,i,o){t.magnetpointerdblclick(n,r,i,o)})},magnetcontextmenu:function(e){this.options.preventContextMenu&&e.preventDefault(),this.magnetContextMenuFired?this.magnetContextMenuFired=!1:this.magnetContextMenuTrigger(e)},magnetContextMenuTrigger:function(e){this.magnetEvent(e,function(t,n,r,i,o){t.magnetcontextmenu(n,r,i,o)})},onlabel:function(e){var t=e.currentTarget,n=this.findView(t);if(!n||(e=Ci(e),this.guard(e,n)))return;const r=this.customEventTrigger(e,n,t);if(r){if(r.isPropagationStopped())return;e.data=r.data}var i=this.snapToGrid(e.clientX,e.clientY);n.onlabel(e,i.x,i.y)},getPointerArgs(e){const t=Ci(e),{x:n,y:r}=this.snapToGrid(t.clientX,t.clientY);return[t,n,r]},delegateDragEvents:function(e,t){t||(t={}),this.eventData({data:t},{sourceView:e||null,mousemoved:0}),this.delegateDocumentEvents(null,t)},guard:function(e,t){if("mousedown"===e.type&&2===e.button||this.options.guard&&this.options.guard(e,t))return!0;if(e.data&&void 0!==e.data.guarded)return e.data.guarded;const{target:n}=e;return!!this.GUARDED_TAG_NAMES.includes(n.tagName)||!(t&&t.model&&t.model instanceof zs||this.svg===n||this.el===n||Mn.contains(this.svg,n))},setGridSize:function(e){const{options:t}=this;return t.gridSize=e,t.drawGrid&&!t.drawGridSize&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:De("svg",{width:"100%",height:"100%"},De("defs")),patterns:{},add:function(e,t){De(this.root.node.childNodes[0]).append(t),this.patterns[e]=t,this.root.append(De("rect",{width:"100%",height:"100%",fill:"url(#"+e+")"}))},get:function(e){return this.patterns[e]},exist:function(e){return void 0!==this.patterns[e]}}),this._gridCache},setGrid:function(e){return this.clearGrid(),this._gridCache=null,this._gridSettings=[],(Array.isArray(e)?e:[e||{}]).forEach(function(n){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(n))},this),this},_resolveDrawGridOption:function(e){var t=this.constructor.gridPatterns;if(Hi(e)&&Array.isArray(t[e]))return t[e].map(function(u){return Tt({},u)});var n=e||{args:[{}]},r=Array.isArray(n),i=n.name;if(!r&&!i&&!n.markup&&(i="dot"),i&&Array.isArray(t[i])){var o=t[i].map(function(u){return Tt({},u)}),s=Array.isArray(n.args)?n.args:[n.args||{}];Xo(s[0],Ef(e,"args"));for(var a=0;a<s.length;a++)o[a]&&Tt(o[a],s[a]);return o}return r?n:[n]},drawGrid:function(e){const t=this.options.drawGridSize||this.options.gridSize;if(t<=1)return this.clearGrid();var n=Array.isArray(e)?e:[e],r=this.matrix(),i=this._getGridRefs();this._gridSettings.forEach(function(s,a){var u="pattern_"+a,c=ni(s,n[a],{sx:r.a||1,sy:r.d||1,ox:r.e||0,oy:r.f||0});c.width=t*(r.a||1)*(c.scaleFactor||1),c.height=t*(r.d||1)*(c.scaleFactor||1),i.exist(u)||i.add(u,De("pattern",{id:u,patternUnits:"userSpaceOnUse"},De(c.markup)));var d=i.get(u);sr(c.update)&&c.update(d.node.childNodes[0],c);var f=c.ox%c.width;f<0&&(f+=c.width);var p=c.oy%c.height;p<0&&(p+=c.height),d.attr({x:f,y:p,width:c.width,height:c.height})});var o=(new XMLSerializer).serializeToString(i.root.node);return o="url(data:image/svg+xml;base64,"+btoa(o)+")",this.$grid.css("backgroundImage",o),this},updateBackgroundImage:function(e){var t=(e=e||{}).position||"center",n=e.size||"auto auto",r=this.scale(),i=this.translate();In(t)&&(t=i.tx+r.sx*(t.x||0)+"px "+(i.ty+r.sy*(t.y||0))+"px"),In(n)&&(n=(n=new ze(n).scale(r.sx,r.sy)).width+"px "+n.height+"px"),this.$background.css({backgroundSize:n,backgroundPosition:t})},drawBackgroundImage:function(e,t){if(e instanceof HTMLImageElement){if(this._background&&this._background.id===t.id){var n,r=(t=t||{}).size,i=t.repeat||"no-repeat",o=t.opacity||1,s=Math.abs(t.quality)||1,a=this.constructor.backgroundPatterns[((e="")=>((e,t)=>void 0===t?(hB(e)?(e=>e.match(rB))(e):(e=>e.match(gB))(e))||[]:e.match(t)||[])(`${e}`.replace(/['\u2019]/g,"")).reduce((t,n,r)=>(n=n.toLowerCase(),t+(r?gH(n):n)),""))(i)];if(sr(a)){e.width*=s,e.height*=s;var u=a(e,t);if(!(u instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");n=u.toDataURL("image/png"),i="repeat",In(r)?(r.width*=u.width/e.width,r.height*=u.height/e.height):void 0===r&&(t.size={width:u.width/s,height:u.height/s})}else n=e.src,void 0===r&&(t.size={width:e.width,height:e.height});this.$background.css({opacity:o,backgroundRepeat:i,backgroundImage:"url("+n+")"}),this.updateBackgroundImage(t)}}else this.$background.css("backgroundImage","")},updateBackgroundColor:function(e){this.$el.css("backgroundColor",e||"")},drawBackground:function(e){if(this.updateBackgroundColor((e=e||{}).color),e.image){e=this._background=Qo(e),Zc(e);var t=document.createElement("img");t.onload=this.drawBackgroundImage.bind(this,t,e),t.src=e.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(e){this.options.interactive=e,js(this._views,"setInteractivity",e)},isDefined:function(e){return!!this.svg.getElementById(e)},defineFilter:function(e){if(!In(e))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var t=e.id,n=e.name;if(t||(t=n+this.svg.id+Wh(JSON.stringify(e))),!this.isDefined(t)){var i=nj[n]&&nj[n](e.args||{});if(!i)throw new Error("Non-existing filter "+n);var o=Tt({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},e.attrs,{id:t});De(i,o).appendTo(this.defs)}return t},defineGradient:function(e){if(!In(e))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:t,defs:n}=this,{type:r,id:i=r+t.id+Wh(JSON.stringify(e)),stops:o,attrs:s={}}=e;if(this.isDefined(i))return i;const a=vn(o).map(({offset:c,color:d,opacity:f})=>De("stop").attr({offset:c,"stop-color":d,"stop-opacity":Number.isFinite(f)?f:1})),u=De(r,s,a);return u.id=i,u.appendTo(n),i},definePattern:function(e){if(!In(e))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:t,defs:n}=this,{id:r=t.id+Wh(JSON.stringify(e)),markup:i,attrs:o={}}=e;if(!i)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const s=De("pattern",{patternUnits:"userSpaceOnUse"});if(s.id=r,s.attr(o),"string"==typeof i)s.append(De(i));else{const{fragment:a}=qh(i);s.append(a)}return s.appendTo(n),r},defineMarker:function(e){if(!In(e))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");const{svg:t,defs:n}=this,{id:r=t.id+Wh(JSON.stringify(e)),markup:i,attrs:o={},markerUnits:s="userSpaceOnUse"}=e;if(this.isDefined(r))return r;const a=De("marker",{orient:"auto",overflow:"visible",markerUnits:s});let u;if(a.id=r,a.attr(o),i){let f;if("string"==typeof i)f=De(i),f=Array.isArray(f)?f:[f];else{const{fragment:p}=qh(i);f=De(p).children()}u=f.length>1?De("g").append(f):f[0]}else{const{type:f="path"}=e;u=De(f)}const c=Ef(e,"type","id","markup","attrs","markerUnits");return Object.keys(c).forEach(f=>{const p=c[f],m=u.attr(f);null==m?u.attr(f,p):"transform"===f&&u.attr(f,p+" "+m)}),u.appendTo(a),a.appendTo(n),r},customEventTrigger:function(e,t,n=t.el){const r=e.target.closest("[event]");if(r&&n!==r&&t.el.contains(r)){const i=Ci(Mn.Event(e.originalEvent,{data:e.data,currentTarget:r}));return this.onevent(i),i.isDefaultPrevented()&&e.preventDefault(),i}return null}},{sorting:tl,Layers:ns,backgroundPatterns:{flipXy:function(e){var t=document.createElement("canvas"),n=e.width,r=e.height;t.width=2*n,t.height=2*r;var i=t.getContext("2d");return i.drawImage(e,0,0,n,r),i.setTransform(-1,0,0,-1,t.width,t.height),i.drawImage(e,0,0,n,r),i.setTransform(-1,0,0,1,t.width,0),i.drawImage(e,0,0,n,r),i.setTransform(1,0,0,-1,0,t.height),i.drawImage(e,0,0,n,r),t},flipX:function(e){var t=document.createElement("canvas"),n=e.width,r=e.height;t.width=2*n,t.height=r;var i=t.getContext("2d");return i.drawImage(e,0,0,n,r),i.translate(2*n,0),i.scale(-1,1),i.drawImage(e,0,0,n,r),t},flipY:function(e){var t=document.createElement("canvas"),n=e.width,r=e.height;t.width=n,t.height=2*r;var i=t.getContext("2d");return i.drawImage(e,0,0,n,r),i.translate(0,2*r),i.scale(1,-1),i.drawImage(e,0,0,n,r),t},watermark:function(e,t){t=t||{};var n=e.width,r=e.height,i=document.createElement("canvas");i.width=3*n,i.height=3*r;for(var o=i.getContext("2d"),s=vo(t.watermarkAngle)?-t.watermarkAngle:-20,a=yo(s),u=i.width/4,c=i.height/4,d=0;d<4;d++)for(var f=0;f<4;f++)(d+f)%2>0&&(o.setTransform(1,0,0,1,(2*d-1)*u,(2*f-1)*c),o.rotate(a),o.drawImage(e,-n/2,-r/2,n,r));return i}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,t){De(e).attr({width:t.thickness*t.sx,height:t.thickness*t.sy,fill:t.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,t){var n=t.sx<=1?t.thickness*t.sx:t.thickness;De(e).attr({width:n,height:n,fill:t.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,t){var n,r=t.width,i=t.height,o=t.thickness;n=r-o>=0&&i-o>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",De(e).attr({d:n,stroke:t.color,"stroke-width":t.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,t){var n,r=t.width,i=t.height,o=t.thickness;n=r-o>=0&&i-o>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",De(e).attr({d:n,stroke:t.color,"stroke-width":t.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(e,t){var n,r=t.width,i=t.height,o=t.thickness;n=r-o>=0&&i-o>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",De(e).attr({d:n,stroke:t.color,"stroke-width":t.thickness})}}]}});function SI(e,t,n){return new NU({el:e,model:t,width:"100%",height:"100%",gridSize:10,drawGrid:!0,interactive:n})}const zy={now:()=>(zy.delegate||Date).now(),delegate:void 0};class II extends hr{constructor(t=1/0,n=1/0,r=zy){super(),this._bufferSize=t,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,n)}next(t){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(t),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!t.closed;s+=r?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),n}_trimBuffer(){const{_bufferSize:t,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*t;if(t<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}}function AI(e,t){!t?.injector&&pd();const n=t?.injector??kn(Io),r=new II(1),i=function SE(e,t){!t?.injector&&pd();const n=t?.injector??kn(Io),r=n.get(ta,null,{optional:!0}),i=!0!==t?.manualCleanup?n.get(jl):null,o=new JN(n.get(YN),e,typeof Zone>"u"?null:Zone.current,i,r,t?.allowSignalWrites??!1),s=n.get(am,null,{optional:!0});return s&&8&s._lView[At]?(s._lView[Wf]??=[]).push(o.watcher.notify):o.watcher.notify(),o}(()=>{let o;try{o=e()}catch(s){return void Ld(()=>r.error(s))}Ld(()=>r.next(o))},{injector:n,manualCleanup:!0});return n.get(jl).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}class VU extends z{constructor(t,n){super()}schedule(t,n=0){return this}}const lp={setInterval(e,t,...n){const{delegate:r}=lp;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){const{delegate:t}=lp;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};class Rf{constructor(t,n=Rf.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}}Rf.now=zy.now;const jU=new class HU extends Rf{constructor(t,n=Rf.now){super(t,n),this.actions=[],this._active=!1}flush(t){const{actions:n}=this;if(this._active)return void n.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}}(class BU extends VU{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return lp.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&lp.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let i,r=!1;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,F(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}}),$U=["editor"],zU=["toolbox"];let GU=(()=>{class e{set allowEdit(n){this._allowEdit=function RU(e){return null!=e&&"false"!=`${e}`}(n)}get allowEdit(){return this._allowEdit}constructor(){this.inputId=null,this.diagram=null,this.diagramChanged=new Ls,this.currentDiagram=qP(null),this.graphEditor=new Xh,this.graphToolBox=new Xh,this.paperEditor=null,this.paperToolbox=null,this._allowEdit=!1,AI(this.currentDiagram).pipe(U(),function UU(e,t=jU){return Ke((n,r)=>{let i=null,o=null,s=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=o;o=null,r.next(c)}};function u(){const c=s+e,d=t.now();if(d<c)return i=this.schedule(void 0,c-d),void r.add(i);a()}n.subscribe(q(r,c=>{o=c,s=t.now(),i||(i=t.schedule(u,e),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}(200),U()).subscribe(this.emitDiagramChanged.bind(this))}ngAfterViewInit(){this.paperEditor=SI(this.editorRef.nativeElement,this.graphEditor,!0),this.allowEdit?this.paperToolbox=SI(this.toolBoxRef.nativeElement,this.graphToolBox,!1):this.toolBoxRef.nativeElement.style.display="none",function OU(e){const t=new $j,n=new zS;t.position(20,150),n.position(20,20),e.addCell(t),e.addCell(n)}(this.graphToolBox),this.subscribeToEvents(this.paperEditor,this.paperToolbox,this.graphEditor)}ngAfterViewChecked(){if(this.diagram){const n=function PV(e){const n=function MV(e){return decodeURIComponent(e).replace(/ /g,"%20").replace(/!/g,"%21").replace(/#/g,"%23").replace(/\$/g,"%24").replace(/%/g,"%25")}(decodeURIComponent(e));return JSON.parse(n)}(this.diagram);this.graphEditor.fromJSON(n)}}subscribeToEvents(n,r,i){i.on("change",()=>this.currentDiagram.set(i.toJSON())),r?.on("element:pointerup",(o,s,a,u)=>{const c=o.model.clone();let d=Math.floor(481*Math.random())+20,f=Math.floor(481*Math.random())+20;c.position(d,f),i.addCell(c)}),n.on("cell:mouseenter",function(o){const s=new Lj({tools:[new Fj({padding:3,rotate:!0,useModelGeometry:!0}),new Vj({scale:1.2,distance:15})]});o.addTools(s)}),n.on("element:pointerdblclick",function(o,s){if(!(o.model instanceof zS))throw new Error("elementView.model is not instanceof UmlClass");const u=o.model.userInput(s);null!=u&&i.addCell(u)}),n.on("cell:mouseleave",function(o){o.removeTools()})}emitDiagramChanged(){if(!this.inputId)return void console.warn("inputid is not set");const r=function NV(e){const t=JSON.stringify(e);return function AV(e){return encodeURIComponent(e).replace(/%20/g," ").replace(/%21/g,"!").replace(/%23/g,"#").replace(/%24/g,"$").replace(/%25/g,"%")}(encodeURIComponent(t))}(this.graphEditor.toJSON());r!==this.diagram?this.diagramChanged.emit({inputid:this.inputId,diagram:r}):console.warn("diagram not changed")}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=k0({type:e,selectors:[["uml-editor"]],viewQuery:function(r,i){if(1&r&&(av($U,7),av(zU,7)),2&r){let o;sv(o=uv())&&(i.editorRef=o.first),sv(o=uv())&&(i.toolBoxRef=o.first)}},inputs:{inputId:"inputId",diagram:"diagram",allowEdit:"allowEdit"},outputs:{diagramChanged:"diagramChanged"},standalone:!0,features:[vC],decls:4,vars:0,consts:[[1,"left"],["toolbox",""],[1,"right"],["editor",""]],template:function(r,i){1&r&&Bm(0,"div",0,1)(2,"div",2,3)},styles:[":host{display:flex;flex-direction:row;height:100%;width:100%;gap:2px}:host .left{width:30%!important;border-radius:4px;box-shadow:#0000003d 0 3px 8px}:host .right{width:70%!important}\n"],encapsulation:3})}return e})();function MI(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(r,i)}let Gy=null;function qy(){return Gy}class ZU{}const xu=new ft("DocumentToken");function qI(e){return"server"===e}class Bz extends ZU{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class l0 extends Bz{static makeCurrent(){!function WU(e){Gy||(Gy=e)}(new l0)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function Hz(){return Vf=Vf||document.querySelector("base"),Vf?Vf.getAttribute("href"):null}();return null==n?null:function jz(e){return new URL(e,"http://a").pathname}(n)}resetBaseElement(){Vf=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function R$(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}(document.cookie,t)}}let Vf=null,$z=(()=>{class e{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=En({token:e,factory:e.\u0275fac})}return e})();const f0=new ft("EventManagerPlugins");let XI=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new Ae(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||e)(Sn(f0),Sn(lr))};static#t=this.\u0275prov=En({token:e,factory:e.\u0275fac})}return e})();class QI{constructor(t){this._doc=t}}const d0="ng-app-id";let KI=(()=>{class e{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=qI(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${d0}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(d0),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(d0,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||e)(Sn(xu),Sn(gg),Sn(Zw,8),Sn(ic))};static#t=this.\u0275prov=En({token:e,factory:e.\u0275fac})}return e})();const h0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},p0=/%COMP%/g,Wz=new ft("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!0});function eA(e,t){return t.map(n=>n.replace(p0,e))}let tA=(()=>{class e{constructor(n,r,i,o,s,a,u,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=qI(a),this.defaultRenderer=new g0(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===cs.ShadowDom&&(r={...r,encapsulation:cs.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof rA?i.applyToHost(n):i instanceof m0&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case cs.Emulated:o=new rA(u,c,r,this.appId,d,s,a,f);break;case cs.ShadowDom:return new Qz(u,c,n,r,s,a,this.nonce,f);default:o=new m0(u,c,r,d,s,a,f)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||e)(Sn(XI),Sn(KI),Sn(gg),Sn(Wz),Sn(xu),Sn(ic),Sn(lr),Sn(Zw))};static#t=this.\u0275prov=En({token:e,factory:e.\u0275fac})}return e})();class g0{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(h0[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(nA(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(nA(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new Ae(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const o=h0[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=h0[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Sa.DashCase|Sa.Important)?t.style.setProperty(n,r,i&Sa.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Sa.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){null!=t&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if("string"==typeof t&&!(t=qy().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function nA(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class Qz extends g0{constructor(t,n,r,i,o,s,a,u){super(t,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=eA(i.id,i.styles);for(const d of c){const f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class m0 extends g0{constructor(t,n,r,i,o,s,a,u){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?eA(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class rA extends m0{constructor(t,n,r,i,o,s,a,u){const c=i+"-"+r.id;super(t,n,r,o,s,a,u,c),this.contentAttr=function Zz(e){return"_ngcontent-%COMP%".replace(p0,e)}(c),this.hostAttr=function Yz(e){return"_nghost-%COMP%".replace(p0,e)}(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let Kz=(()=>{class e extends QI{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||e)(Sn(xu))};static#t=this.\u0275prov=En({token:e,factory:e.\u0275fac})}return e})();const iA=["alt","control","meta","shift"],Jz={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},eG={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let tG=(()=>{class e extends QI{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qy().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),iA.forEach(c=>{const d=r.indexOf(c);d>-1&&(r.splice(d,1),s+=c+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=Jz[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),iA.forEach(s=>{s!==i&&(0,eG[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||e)(Sn(xu))};static#t=this.\u0275prov=En({token:e,factory:e.\u0275fac})}return e})();function oA(e){return{appProviders:[...uG,...e?.providers??[]],platformProviders:sG}}const sG=[{provide:ic,useValue:"browser"},{provide:Ww,useValue:function rG(){l0.makeCurrent()},multi:!0},{provide:xu,useFactory:function oG(){return function v1(e){pg=e}(document),document},deps:[]}],uG=[{provide:cg,useValue:"root"},{provide:ta,useFactory:function iG(){return new ta},deps:[]},{provide:f0,useClass:Kz,multi:!0,deps:[xu,lr,ic]},{provide:f0,useClass:tG,multi:!0,deps:[xu]},tA,KI,XI,{provide:qb,useExisting:tA},{provide:class mz{},useClass:$z,deps:[]},[]];typeof window<"u"&&window;const _p={schedule(e,t){const n=setTimeout(e,t);return()=>clearTimeout(n)},scheduleBeforeRender(e){if(typeof window>"u")return _p.schedule(e,0);if(typeof window.requestAnimationFrame>"u")return _p.schedule(e,16);const t=window.requestAnimationFrame(e);return()=>window.cancelAnimationFrame(t)}};let y0;function _G(e,t,n){let r=n;return function mG(e){return!!e&&e.nodeType===Node.ELEMENT_NODE}(e)&&t.some((i,o)=>!("*"===i||!function yG(e,t){if(!y0){const n=Element.prototype;y0=n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}return e.nodeType===Node.ELEMENT_NODE&&y0.call(e,t)}(e,i)||(r=o,0))),r}class TG{constructor(t,n){this.componentFactory=n.get(fc).resolveComponentFactory(t)}create(t){return new xG(this.componentFactory,t)}}class xG{constructor(t,n){this.componentFactory=t,this.injector=n,this.eventEmitters=new II(1),this.events=this.eventEmitters.pipe(A(r=>h(...r))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:r})=>r)),this.ngZone=this.injector.get(lr),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(t){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(t)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=_p.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(t){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(t):this.componentRef.instance[t])}setInputValue(t,n,r){this.runInZone(()=>{r&&(n=r.call(this.componentRef?.instance,n)),null!==this.componentRef?function wG(e,t){return e===t||e!=e&&t!=t}(n,this.getInputValue(t))&&(void 0!==n||!this.unchangedInputs.has(t))||(this.recordInputChange(t,n),this.unchangedInputs.delete(t),this.hasInputChanges=!0,this.componentRef.instance[t]=n,this.scheduleDetectChanges()):this.initialInputValues.set(t,n)})}initializeComponent(t){const n=Io.create({providers:[],parent:this.injector}),r=function DG(e,t){const n=e.childNodes,r=t.map(()=>[]);let i=-1;t.some((o,s)=>"*"===o&&(i=s,!0));for(let o=0,s=n.length;o<s;++o){const a=n[o],u=_G(a,t,i);-1!==u&&r[u].push(a)}return r}(t,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(n,r,t),this.viewChangeDetectorRef=this.componentRef.injector.get(am),this.implementsOnChanges=function vG(e){return"function"==typeof e}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Fc).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:t,transform:n})=>{this.initialInputValues.has(t)&&this.setInputValue(t,this.initialInputValues.get(t),n)}),this.initialInputValues.clear()}initializeOutputs(t){const n=this.componentFactory.outputs.map(({propName:r,templateName:i})=>t.instance[r].pipe(lt(s=>({name:i,value:s}))));this.eventEmitters.next(n)}callNgOnChanges(t){if(!this.implementsOnChanges||null===this.inputChanges)return;const n=this.inputChanges;this.inputChanges=null,t.instance.ngOnChanges(n)}markViewForCheck(t){this.hasInputChanges&&(this.hasInputChanges=!1,t.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=_p.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(t,n){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const r=this.inputChanges[t];if(r)return void(r.currentValue=n);const i=this.unchangedInputs.has(t),o=i?void 0:this.getInputValue(t);this.inputChanges[t]=new G0(o,n,i)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(t){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(t):t()}}class SG extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}function w0(){return w0=function qU(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(u){MI(o,r,i,s,a,"next",u)}function a(u){MI(o,r,i,s,a,"throw",u)}s(void 0)})}}(function*(e,t){try{const n=yield function nG(e,t){return Q2({rootComponent:e,...oA(t)})}(t);!function AG(e,t,n){try{const r=function IG(e,t){const n=function EG(e,t){return t.get(fc).resolveComponentFactory(e).inputs}(e,t.injector),r=t.strategyFactory||new TG(e,t.injector),i=function bG(e){const t={};return e.forEach(({propName:n,templateName:r,transform:i})=>{t[function gG(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}(r)]=[n,i]}),t}(n);class o extends SG{static#e=this.observedAttributes=Object.keys(i);get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=r.create(this.injector||t.injector);n.forEach(({propName:u,transform:c})=>{if(!this.hasOwnProperty(u))return;const d=this[u];delete this[u],a.setInputValue(u,d,c)})}return this._ngElementStrategy}constructor(a){super(),this.injector=a}attributeChangedCallback(a,u,c,d){const[f,p]=i[a];this.ngElementStrategy.setInputValue(f,c,p)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const u=new CustomEvent(a.name,{detail:a.value});this.dispatchEvent(u)})}}return n.forEach(({propName:s,transform:a})=>{Object.defineProperty(o.prototype,s,{get(){return this.ngElementStrategy.getInputValue(s)},set(u){this.ngElementStrategy.setInputValue(s,u,a)},configurable:!0,enumerable:!0})}),o}(t,{injector:n});customElements.define(e,r)}catch(r){console.error(r)}}(e,t,n.injector)}catch(n){console.error(n)}}),w0.apply(this,arguments)}$n(332),function MG(e,t){return w0.apply(this,arguments)}("uml-editor",GU).then(()=>console.debug("UmlEditorComponent loaded"))})()})();