var PI=Object.create;var Qo=Object.defineProperty,DI=Object.defineProperties,LI=Object.getOwnPropertyDescriptor,kI=Object.getOwnPropertyDescriptors,EI=Object.getOwnPropertyNames,Jd=Object.getOwnPropertySymbols,zI=Object.getPrototypeOf,Kd=Object.prototype.hasOwnProperty,OI=Object.prototype.propertyIsEnumerable;var Qd=(t,e,r)=>e in t?Qo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qd=(t,e)=>{for(var r in e||(e={}))Kd.call(e,r)&&Qd(t,r,e[r]);if(Jd)for(var r of Jd(e))OI.call(e,r)&&Qd(t,r,e[r]);return t},$d=(t,e)=>DI(t,kI(e));var H=(t,e)=>()=>(t&&(e=t(t=0)),e);var tg=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ae=(t,e)=>{for(var r in e)Qo(t,r,{get:e[r],enumerable:!0})},eg=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of EI(e))!Kd.call(t,i)&&i!==r&&Qo(t,i,{get:()=>e[i],enumerable:!(n=LI(e,i))||n.enumerable});return t};var Qr=(t,e,r)=>(r=t!=null?PI(zI(t)):{},eg(e||!t||!t.__esModule?Qo(r,"default",{value:t,enumerable:!0}):r,t)),BI=t=>eg(Qo({},"__esModule",{value:!0}),t);var qo,dc,$o,Da,gc,Bg,cn,In,Rg,pc,Gg,Zg,mc,vc,Ic,jg,Wg,La,Ac,Yg,Me=H(()=>{qo="1.13.6",dc=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},$o=Array.prototype,Da=Object.prototype,gc=typeof Symbol!="undefined"?Symbol.prototype:null,Bg=$o.push,cn=$o.slice,In=Da.toString,Rg=Da.hasOwnProperty,pc=typeof ArrayBuffer!="undefined",Gg=typeof DataView!="undefined",Zg=Array.isArray,mc=Object.keys,vc=Object.create,Ic=pc&&ArrayBuffer.isView,jg=isNaN,Wg=isFinite,La=!{toString:null}.propertyIsEnumerable("toString"),Ac=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Yg=Math.pow(2,53)-1});function de(t,e){return e=e==null?t.length-1:+e,function(){for(var r=Math.max(arguments.length-e,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+e];switch(e){case 0:return t.call(this,n);case 1:return t.call(this,arguments[0],n);case 2:return t.call(this,arguments[0],arguments[1],n)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=n,t.apply(this,o)}}var Tr=H(()=>{});function ar(t){var e=typeof t;return e==="function"||e==="object"&&!!t}var kn=H(()=>{});function ka(t){return t===null}var Fg=H(()=>{});function Yi(t){return t===void 0}var yc=H(()=>{});function Fi(t){return t===!0||t===!1||In.call(t)==="[object Boolean]"}var Cc=H(()=>{Me()});function Ea(t){return!!(t&&t.nodeType===1)}var Vg=H(()=>{});function ie(t){var e="[object "+t+"]";return function(r){return In.call(r)===e}}var qe=H(()=>{Me()});var li,za=H(()=>{qe();li=ie("String")});var ts,xc=H(()=>{qe();ts=ie("Number")});var wc,Ug=H(()=>{qe();wc=ie("Date")});var bc,_g=H(()=>{qe();bc=ie("RegExp")});var Nc,Xg=H(()=>{qe();Nc=ie("Error")});var es,Mc=H(()=>{qe();es=ie("Symbol")});var rs,Tc=H(()=>{qe();rs=ie("ArrayBuffer")});var Hg,iA,ve,Or=H(()=>{qe();Me();Hg=ie("Function"),iA=dc.document&&dc.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof iA!="function"&&(Hg=function(t){return typeof t=="function"||!1});ve=Hg});var Sc,Jg=H(()=>{qe();Sc=ie("Object")});var Oa,Vi,Ui=H(()=>{Me();Jg();Oa=Gg&&Sc(new DataView(new ArrayBuffer(8))),Vi=typeof Map!="undefined"&&Sc(new Map)});function sA(t){return t!=null&&ve(t.getInt8)&&rs(t.buffer)}var oA,En,Ba=H(()=>{qe();Or();Tc();Ui();oA=ie("DataView");En=Oa?sA:oA});var mr,zn=H(()=>{Me();qe();mr=Zg||ie("Array")});function $e(t,e){return t!=null&&Rg.call(t,e)}var An=H(()=>{Me()});var Pc,ui,Ra=H(()=>{qe();An();Pc=ie("Arguments");(function(){Pc(arguments)||(Pc=function(t){return $e(t,"callee")})})();ui=Pc});function Ga(t){return!es(t)&&Wg(t)&&!isNaN(parseFloat(t))}var Qg=H(()=>{Me();Mc()});function _i(t){return ts(t)&&jg(t)}var Dc=H(()=>{Me();xc()});function Xi(t){return function(){return t}}var Lc=H(()=>{});function ns(t){return function(e){var r=t(e);return typeof r=="number"&&r>=0&&r<=Yg}}var kc=H(()=>{Me()});function is(t){return function(e){return e==null?void 0:e[t]}}var Ec=H(()=>{});var ci,Za=H(()=>{Ec();ci=is("byteLength")});var Kg,qg=H(()=>{kc();Za();Kg=ns(ci)});function lA(t){return Ic?Ic(t)&&!En(t):Kg(t)&&aA.test(In.call(t))}var aA,os,zc=H(()=>{Me();Ba();Lc();qg();aA=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;os=pc?lA:Xi(!1)});var xe,Br=H(()=>{Ec();xe=is("length")});function uA(t){for(var e={},r=t.length,n=0;n<r;++n)e[t[n]]=!0;return{contains:function(i){return e[i]===!0},push:function(i){return e[i]=!0,t.push(i)}}}function ss(t,e){e=uA(e);var r=Ac.length,n=t.constructor,i=ve(n)&&n.prototype||Da,o="constructor";for($e(t,o)&&!e.contains(o)&&e.push(o);r--;)o=Ac[r],o in t&&t[o]!==i[o]&&!e.contains(o)&&e.push(o)}var Oc=H(()=>{Me();Or();An()});function Ht(t){if(!ar(t))return[];if(mc)return mc(t);var e=[];for(var r in t)$e(t,r)&&e.push(r);return La&&ss(t,e),e}var Ye=H(()=>{kn();Me();An();Oc()});function ja(t){if(t==null)return!0;var e=xe(t);return typeof e=="number"&&(mr(t)||li(t)||ui(t))?e===0:xe(Ht(t))===0}var $g=H(()=>{Br();zn();za();Ra();Ye()});function Hi(t,e){var r=Ht(e),n=r.length;if(t==null)return!n;for(var i=Object(t),o=0;o<n;o++){var s=r[o];if(e[s]!==i[s]||!(s in i))return!1}return!0}var Bc=H(()=>{Ye()});function Zt(t){if(t instanceof Zt)return t;if(!(this instanceof Zt))return new Zt(t);this._wrapped=t}var Sr=H(()=>{Me();Zt.VERSION=qo;Zt.prototype.value=function(){return this._wrapped};Zt.prototype.valueOf=Zt.prototype.toJSON=Zt.prototype.value;Zt.prototype.toString=function(){return String(this._wrapped)}});function Wa(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,ci(t))}var tp=H(()=>{Za()});function Rc(t,e,r,n){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var i=typeof t;return i!=="function"&&i!=="object"&&typeof e!="object"?!1:rp(t,e,r,n)}function rp(t,e,r,n){t instanceof Zt&&(t=t._wrapped),e instanceof Zt&&(e=e._wrapped);var i=In.call(t);if(i!==In.call(e))return!1;if(Oa&&i=="[object Object]"&&En(t)){if(!En(e))return!1;i=ep}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return gc.valueOf.call(t)===gc.valueOf.call(e);case"[object ArrayBuffer]":case ep:return rp(Wa(t),Wa(e),r,n)}var o=i==="[object Array]";if(!o&&os(t)){var s=ci(t);if(s!==ci(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;o=!0}if(!o){if(typeof t!="object"||typeof e!="object")return!1;var a=t.constructor,u=e.constructor;if(a!==u&&!(ve(a)&&a instanceof a&&ve(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}r=r||[],n=n||[];for(var h=r.length;h--;)if(r[h]===t)return n[h]===e;if(r.push(t),n.push(e),o){if(h=t.length,h!==e.length)return!1;for(;h--;)if(!Rc(t[h],e[h],r,n))return!1}else{var d=Ht(t),f;if(h=d.length,Ht(e).length!==h)return!1;for(;h--;)if(f=d[h],!($e(e,f)&&Rc(t[f],e[f],r,n)))return!1}return r.pop(),n.pop(),!0}function Ya(t,e){return Rc(t,e)}var ep,np=H(()=>{Sr();Me();Za();zc();Or();Ui();Ba();Ye();An();tp();ep="[object DataView]"});function Wr(t){if(!ar(t))return[];var e=[];for(var r in t)e.push(r);return La&&ss(t,e),e}var Ji=H(()=>{kn();Me();Oc()});function Qi(t){var e=xe(t);return function(r){if(r==null)return!1;var n=Wr(r);if(xe(n))return!1;for(var i=0;i<e;i++)if(!ve(r[t[i]]))return!1;return t!==jc||!ve(r[Gc])}}var Gc,ip,Zc,op,sp,jc,ap,Fa=H(()=>{Br();Or();Ji();Gc="forEach",ip="has",Zc=["clear","delete"],op=["get",ip,"set"],sp=Zc.concat(Gc,op),jc=Zc.concat(op),ap=["add"].concat(Zc,Gc,ip)});var Wc,lp=H(()=>{qe();Ui();Fa();Wc=Vi?Qi(sp):ie("Map")});var Yc,up=H(()=>{qe();Ui();Fa();Yc=Vi?Qi(jc):ie("WeakMap")});var Fc,cp=H(()=>{qe();Ui();Fa();Fc=Vi?Qi(ap):ie("Set")});var Vc,fp=H(()=>{qe();Vc=ie("WeakSet")});function Pr(t){for(var e=Ht(t),r=e.length,n=Array(r),i=0;i<r;i++)n[i]=t[e[i]];return n}var fi=H(()=>{Ye()});function Va(t){for(var e=Ht(t),r=e.length,n=Array(r),i=0;i<r;i++)n[i]=[e[i],t[e[i]]];return n}var hp=H(()=>{Ye()});function Ki(t){for(var e={},r=Ht(t),n=0,i=r.length;n<i;n++)e[t[r[n]]]=r[n];return e}var Uc=H(()=>{Ye()});function hi(t){var e=[];for(var r in t)ve(t[r])&&e.push(r);return e.sort()}var _c=H(()=>{Or()});function di(t,e){return function(r){var n=arguments.length;if(e&&(r=Object(r)),n<2||r==null)return r;for(var i=1;i<n;i++)for(var o=arguments[i],s=t(o),a=s.length,u=0;u<a;u++){var h=s[u];(!e||r[h]===void 0)&&(r[h]=o[h])}return r}}var Ua=H(()=>{});var as,Xc=H(()=>{Ua();Ji();as=di(Wr)});var On,_a=H(()=>{Ua();Ye();On=di(Ht)});var ls,Hc=H(()=>{Ua();Ji();ls=di(Wr,!0)});function cA(){return function(){}}function us(t){if(!ar(t))return{};if(vc)return vc(t);var e=cA();e.prototype=t;var r=new e;return e.prototype=null,r}var Jc=H(()=>{kn();Me()});function Xa(t,e){var r=us(t);return e&&On(r,e),r}var dp=H(()=>{Jc();_a()});function Ha(t){return ar(t)?mr(t)?t.slice():as({},t):t}var gp=H(()=>{kn();zn();Xc()});function Ja(t,e){return e(t),t}var pp=H(()=>{});function cs(t){return mr(t)?t:[t]}var Qc=H(()=>{Sr();zn();Zt.toPath=cs});function Kr(t){return Zt.toPath(t)}var qi=H(()=>{Sr();Qc()});function gi(t,e){for(var r=e.length,n=0;n<r;n++){if(t==null)return;t=t[e[n]]}return r?t:void 0}var Qa=H(()=>{});function $i(t,e,r){var n=gi(t,Kr(e));return Yi(n)?r:n}var Kc=H(()=>{qi();Qa();yc()});function Ka(t,e){e=Kr(e);for(var r=e.length,n=0;n<r;n++){var i=e[n];if(!$e(t,i))return!1;t=t[i]}return!!r}var mp=H(()=>{An();qi()});function Bn(t){return t}var qa=H(()=>{});function qr(t){return t=On({},t),function(e){return Hi(e,t)}}var fs=H(()=>{_a();Bc()});function Rn(t){return t=Kr(t),function(e){return gi(e,t)}}var $a=H(()=>{Qa();qi()});function $r(t,e,r){if(e===void 0)return t;switch(r==null?3:r){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,s){return t.call(e,n,i,o,s)}}return function(){return t.apply(e,arguments)}}var to=H(()=>{});function hs(t,e,r){return t==null?Bn:ve(t)?$r(t,e,r):ar(t)&&!mr(t)?qr(t):Rn(t)}var qc=H(()=>{qa();Or();kn();zn();fs();$a();to()});function pi(t,e){return hs(t,e,1/0)}var $c=H(()=>{Sr();qc();Zt.iteratee=pi});function ge(t,e,r){return Zt.iteratee!==pi?Zt.iteratee(t,e):hs(t,e,r)}var vr=H(()=>{Sr();qc();$c()});function tl(t,e,r){e=ge(e,r);for(var n=Ht(t),i=n.length,o={},s=0;s<i;s++){var a=n[s];o[a]=e(t[a],a,t)}return o}var vp=H(()=>{vr();Ye()});function eo(){}var tf=H(()=>{});function el(t){return t==null?eo:function(e){return $i(t,e)}}var Ip=H(()=>{tf();Kc()});function rl(t,e,r){var n=Array(Math.max(0,t));e=$r(e,r,1);for(var i=0;i<t;i++)n[i]=e(i);return n}var Ap=H(()=>{to()});function mi(t,e){return e==null&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}var ef=H(()=>{});var yn,nl=H(()=>{yn=Date.now||function(){return new Date().getTime()}});function ds(t){var e=function(o){return t[o]},r="(?:"+Ht(t).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(o){return o=o==null?"":""+o,n.test(o)?o.replace(i,e):o}}var rf=H(()=>{Ye()});var il,nf=H(()=>{il={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"}});var of,yp=H(()=>{rf();nf();of=ds(il)});var Cp,xp=H(()=>{Uc();nf();Cp=Ki(il)});var sf,wp=H(()=>{rf();xp();sf=ds(Cp)});var af,lf=H(()=>{Sr();af=Zt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g}});function dA(t){return"\\"+fA[t]}function ol(t,e,r){!e&&r&&(e=r),e=ls({},e,Zt.templateSettings);var n=RegExp([(e.escape||uf).source,(e.interpolate||uf).source,(e.evaluate||uf).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(n,function(h,d,f,I,A){return o+=t.slice(i,A).replace(hA,dA),i=A+h.length,d?o+=`'+
((__t=(`+d+`))==null?'':_.escape(__t))+
'`:f?o+=`'+
((__t=(`+f+`))==null?'':__t)+
'`:I&&(o+=`';
`+I+`
__p+='`),h}),o+=`';
`;var s=e.variable;if(s){if(!gA.test(s))throw new Error("variable is not a bare identifier: "+s)}else o=`with(obj||{}){
`+o+`}
`,s="obj";o=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+o+`return __p;
`;var a;try{a=new Function(s,"_",o)}catch(h){throw h.source=o,h}var u=function(h){return a.call(this,h,Zt)};return u.source="function("+s+`){
`+o+"}",u}var uf,fA,hA,gA,bp=H(()=>{Hc();Sr();lf();uf=/(.)^/,fA={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},hA=/\\|'|\r|\n|\u2028|\u2029/g;gA=/^\s*(\w|\$)+\s*$/});function sl(t,e,r){e=Kr(e);var n=e.length;if(!n)return ve(r)?r.call(t):r;for(var i=0;i<n;i++){var o=t==null?void 0:t[e[i]];o===void 0&&(o=r,i=n),t=ve(o)?o.call(t):o}return t}var Np=H(()=>{Or();qi()});function al(t){var e=++pA+"";return t?t+e:e}var pA,Mp=H(()=>{pA=0});function ll(t){var e=Zt(t);return e._chain=!0,e}var Tp=H(()=>{Sr()});function gs(t,e,r,n,i){if(!(n instanceof e))return t.apply(r,i);var o=us(t.prototype),s=t.apply(o,i);return ar(s)?s:o}var cf=H(()=>{Jc();kn()});var ff,Cn,ps=H(()=>{Tr();cf();Sr();ff=de(function(t,e){var r=ff.placeholder,n=function(){for(var i=0,o=e.length,s=Array(o),a=0;a<o;a++)s[a]=e[a]===r?arguments[i++]:e[a];for(;i<arguments.length;)s.push(arguments[i++]);return gs(t,n,this,this,s)};return n});ff.placeholder=Zt;Cn=ff});var ms,hf=H(()=>{Tr();Or();cf();ms=de(function(t,e,r){if(!ve(t))throw new TypeError("Bind must be called on a function");var n=de(function(i){return gs(t,n,e,this,r.concat(i))});return n})});var we,Dr=H(()=>{kc();Br();we=ns(xe)});function Lr(t,e,r,n){if(n=n||[],!e&&e!==0)e=1/0;else if(e<=0)return n.concat(t);for(var i=n.length,o=0,s=xe(t);o<s;o++){var a=t[o];if(we(a)&&(mr(a)||ui(a)))if(e>1)Lr(a,e-1,r,n),i=n.length;else for(var u=0,h=a.length;u<h;)n[i++]=a[u++];else r||(n[i++]=a)}return n}var vi=H(()=>{Br();Dr();zn();Ra()});var df,Sp=H(()=>{Tr();vi();hf();df=de(function(t,e){e=Lr(e,!1,!1);var r=e.length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=e[r];t[n]=ms(t[n],t)}return t})});function ul(t,e){var r=function(n){var i=r.cache,o=""+(e?e.apply(this,arguments):n);return $e(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return r.cache={},r}var Pp=H(()=>{An()});var vs,gf=H(()=>{Tr();vs=de(function(t,e,r){return setTimeout(function(){return t.apply(null,r)},e)})});var pf,Dp=H(()=>{ps();gf();Sr();pf=Cn(vs,Zt,1)});function cl(t,e,r){var n,i,o,s,a=0;r||(r={});var u=function(){a=r.leading===!1?0:yn(),n=null,s=t.apply(i,o),n||(i=o=null)},h=function(){var d=yn();!a&&r.leading===!1&&(a=d);var f=e-(d-a);return i=this,o=arguments,f<=0||f>e?(n&&(clearTimeout(n),n=null),a=d,s=t.apply(i,o),n||(i=o=null)):!n&&r.trailing!==!1&&(n=setTimeout(u,f)),s};return h.cancel=function(){clearTimeout(n),a=0,n=i=o=null},h}var Lp=H(()=>{nl()});function fl(t,e,r){var n,i,o,s,a,u=function(){var d=yn()-i;e>d?n=setTimeout(u,e-d):(n=null,r||(s=t.apply(a,o)),n||(o=a=null))},h=de(function(d){return a=this,o=d,i=yn(),n||(n=setTimeout(u,e),r&&(s=t.apply(a,o))),s});return h.cancel=function(){clearTimeout(n),n=o=a=null},h}var kp=H(()=>{Tr();nl()});function hl(t,e){return Cn(e,t)}var Ep=H(()=>{ps()});function Gn(t){return function(){return!t.apply(this,arguments)}}var dl=H(()=>{});function gl(){var t=arguments,e=t.length-1;return function(){for(var r=e,n=t[e].apply(this,arguments);r--;)n=t[r].call(this,n);return n}}var zp=H(()=>{});function pl(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}var Op=H(()=>{});function ro(t,e){var r;return function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=null),r}}var mf=H(()=>{});var vf,Bp=H(()=>{ps();mf();vf=Cn(ro,2)});function no(t,e,r){e=ge(e,r);for(var n=Ht(t),i,o=0,s=n.length;o<s;o++)if(i=n[o],e(t[i],i,t))return i}var If=H(()=>{vr();Ye()});function Is(t){return function(e,r,n){r=ge(r,n);for(var i=xe(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(r(e[o],o,e))return o;return-1}}var Af=H(()=>{vr();Br()});var Ii,ml=H(()=>{Af();Ii=Is(1)});var As,yf=H(()=>{Af();As=Is(-1)});function io(t,e,r,n){r=ge(r,n,1);for(var i=r(e),o=0,s=xe(t);o<s;){var a=Math.floor((o+s)/2);r(t[a])<i?o=a+1:s=a}return o}var Cf=H(()=>{vr();Br()});function ys(t,e,r){return function(n,i,o){var s=0,a=xe(n);if(typeof o=="number")t>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(r&&o&&a)return o=r(n,i),n[o]===i?o:-1;if(i!==i)return o=e(cn.call(n,s,a),_i),o>=0?o+s:-1;for(o=t>0?s:a-1;o>=0&&o<a;o+=t)if(n[o]===i)return o;return-1}}var xf=H(()=>{Br();Me();Dc()});var Cs,wf=H(()=>{Cf();ml();xf();Cs=ys(1,Ii,io)});var bf,Rp=H(()=>{yf();xf();bf=ys(-1,As)});function Ai(t,e,r){var n=we(t)?Ii:no,i=n(t,e,r);if(i!==void 0&&i!==-1)return t[i]}var Nf=H(()=>{Dr();ml();If()});function vl(t,e){return Ai(t,qr(e))}var Gp=H(()=>{Nf();fs()});function Fe(t,e,r){e=$r(e,r);var n,i;if(we(t))for(n=0,i=t.length;n<i;n++)e(t[n],n,t);else{var o=Ht(t);for(n=0,i=o.length;n<i;n++)e(t[o[n]],o[n],t)}return t}var Zn=H(()=>{to();Dr();Ye()});function Ir(t,e,r){e=ge(e,r);for(var n=!we(t)&&Ht(t),i=(n||t).length,o=Array(i),s=0;s<i;s++){var a=n?n[s]:s;o[s]=e(t[a],a,t)}return o}var yi=H(()=>{vr();Dr();Ye()});function xs(t){var e=function(r,n,i,o){var s=!we(r)&&Ht(r),a=(s||r).length,u=t>0?0:a-1;for(o||(i=r[s?s[u]:u],u+=t);u>=0&&u<a;u+=t){var h=s?s[u]:u;i=n(i,r[h],h,r)}return i};return function(r,n,i,o){var s=arguments.length>=3;return e(r,$r(n,o,4),i,s)}}var Mf=H(()=>{Dr();Ye();to()});var ws,Zp=H(()=>{Mf();ws=xs(1)});var Il,jp=H(()=>{Mf();Il=xs(-1)});function Rr(t,e,r){var n=[];return e=ge(e,r),Fe(t,function(i,o,s){e(i,o,s)&&n.push(i)}),n}var oo=H(()=>{vr();Zn()});function Al(t,e,r){return Rr(t,Gn(ge(e)),r)}var Wp=H(()=>{oo();dl();vr()});function bs(t,e,r){e=ge(e,r);for(var n=!we(t)&&Ht(t),i=(n||t).length,o=0;o<i;o++){var s=n?n[o]:o;if(!e(t[s],s,t))return!1}return!0}var Yp=H(()=>{vr();Dr();Ye()});function Ns(t,e,r){e=ge(e,r);for(var n=!we(t)&&Ht(t),i=(n||t).length,o=0;o<i;o++){var s=n?n[o]:o;if(e(t[s],s,t))return!0}return!1}var Fp=H(()=>{vr();Dr();Ye()});function lr(t,e,r,n){return we(t)||(t=Pr(t)),(typeof r!="number"||n)&&(r=0),Cs(t,e,r)>=0}var so=H(()=>{Dr();fi();wf()});var Tf,Vp=H(()=>{Tr();Or();yi();Qa();qi();Tf=de(function(t,e,r){var n,i;return ve(e)?i=e:(e=Kr(e),n=e.slice(0,-1),e=e[e.length-1]),Ir(t,function(o){var s=i;if(!s){if(n&&n.length&&(o=gi(o,n)),o==null)return;s=o[e]}return s==null?s:s.apply(o,r)})})});function jn(t,e){return Ir(t,Rn(e))}var yl=H(()=>{yi();$a()});function Cl(t,e){return Rr(t,qr(e))}var Up=H(()=>{oo();fs()});function ao(t,e,r){var n=-1/0,i=-1/0,o,s;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=we(t)?t:Pr(t);for(var a=0,u=t.length;a<u;a++)o=t[a],o!=null&&o>n&&(n=o)}else e=ge(e,r),Fe(t,function(h,d,f){s=e(h,d,f),(s>i||s===-1/0&&n===-1/0)&&(n=h,i=s)});return n}var Sf=H(()=>{Dr();fi();vr();Zn()});function xl(t,e,r){var n=1/0,i=1/0,o,s;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=we(t)?t:Pr(t);for(var a=0,u=t.length;a<u;a++)o=t[a],o!=null&&o<n&&(n=o)}else e=ge(e,r),Fe(t,function(h,d,f){s=e(h,d,f),(s<i||s===1/0&&n===1/0)&&(n=h,i=s)});return n}var _p=H(()=>{Dr();fi();vr();Zn()});function lo(t){return t?mr(t)?cn.call(t):li(t)?t.match(mA):we(t)?Ir(t,Bn):Pr(t):[]}var mA,Pf=H(()=>{zn();Me();za();Dr();yi();qa();fi();mA=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g});function uo(t,e,r){if(e==null||r)return we(t)||(t=Pr(t)),t[mi(t.length-1)];var n=lo(t),i=xe(n);e=Math.max(Math.min(e,i),0);for(var o=i-1,s=0;s<e;s++){var a=mi(s,o),u=n[s];n[s]=n[a],n[a]=u}return n.slice(0,e)}var Df=H(()=>{Dr();fi();Br();ef();Pf()});function wl(t){return uo(t,1/0)}var Xp=H(()=>{Df()});function bl(t,e,r){var n=0;return e=ge(e,r),jn(Ir(t,function(i,o,s){return{value:i,index:n++,criteria:e(i,o,s)}}).sort(function(i,o){var s=i.criteria,a=o.criteria;if(s!==a){if(s>a||s===void 0)return 1;if(s<a||a===void 0)return-1}return i.index-o.index}),"value")}var Hp=H(()=>{vr();yl();yi()});function xn(t,e){return function(r,n,i){var o=e?[[],[]]:{};return n=ge(n,i),Fe(r,function(s,a){var u=n(s,a,r);t(o,s,u)}),o}}var Ms=H(()=>{vr();Zn()});var Lf,Jp=H(()=>{Ms();An();Lf=xn(function(t,e,r){$e(t,r)?t[r].push(e):t[r]=[e]})});var kf,Qp=H(()=>{Ms();kf=xn(function(t,e,r){t[r]=e})});var Ef,Kp=H(()=>{Ms();An();Ef=xn(function(t,e,r){$e(t,r)?t[r]++:t[r]=1})});var zf,qp=H(()=>{Ms();zf=xn(function(t,e,r){t[r?0:1].push(e)},!0)});function Nl(t){return t==null?0:we(t)?t.length:Ht(t).length}var $p=H(()=>{Dr();Ye()});function Of(t,e,r){return e in r}var tm=H(()=>{});var Ts,Bf=H(()=>{Tr();Or();to();Ji();tm();vi();Ts=de(function(t,e){var r={},n=e[0];if(t==null)return r;ve(n)?(e.length>1&&(n=$r(n,e[1])),e=Wr(t)):(n=Of,e=Lr(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var s=e[i],a=t[s];n(a,s,t)&&(r[s]=a)}return r})});var Rf,em=H(()=>{Tr();Or();dl();yi();vi();so();Bf();Rf=de(function(t,e){var r=e[0],n;return ve(r)?(r=Gn(r),e.length>1&&(n=e[1])):(e=Ir(Lr(e,!1,!1),String),r=function(i,o){return!lr(e,o)}),Ts(t,r,n)})});function co(t,e,r){return cn.call(t,0,Math.max(0,t.length-(e==null||r?1:e)))}var Gf=H(()=>{Me()});function fo(t,e,r){return t==null||t.length<1?e==null||r?void 0:[]:e==null||r?t[0]:co(t,t.length-e)}var rm=H(()=>{Gf()});function Wn(t,e,r){return cn.call(t,e==null||r?1:e)}var Zf=H(()=>{Me()});function Ml(t,e,r){return t==null||t.length<1?e==null||r?void 0:[]:e==null||r?t[t.length-1]:Wn(t,Math.max(0,t.length-e))}var nm=H(()=>{Zf()});function Tl(t){return Rr(t,Boolean)}var im=H(()=>{oo()});function Sl(t,e){return Lr(t,e,!1)}var om=H(()=>{vi()});var Ss,jf=H(()=>{Tr();vi();oo();so();Ss=de(function(t,e){return e=Lr(e,!0,!0),Rr(t,function(r){return!lr(e,r)})})});var Wf,sm=H(()=>{Tr();jf();Wf=de(function(t,e){return Ss(t,e)})});function Ci(t,e,r,n){Fi(e)||(n=r,r=e,e=!1),r!=null&&(r=ge(r,n));for(var i=[],o=[],s=0,a=xe(t);s<a;s++){var u=t[s],h=r?r(u,s,t):u;e&&!r?((!s||o!==h)&&i.push(u),o=h):r?lr(o,h)||(o.push(h),i.push(u)):lr(i,u)||i.push(u)}return i}var Yf=H(()=>{Cc();vr();Br();so()});var Ff,am=H(()=>{Tr();Yf();vi();Ff=de(function(t){return Ci(Lr(t,!0,!0))})});function Pl(t){for(var e=[],r=arguments.length,n=0,i=xe(t);n<i;n++){var o=t[n];if(!lr(e,o)){var s;for(s=1;s<r&&lr(arguments[s],o);s++);s===r&&e.push(o)}}return e}var lm=H(()=>{Br();so()});function xi(t){for(var e=t&&ao(t,xe).length||0,r=Array(e),n=0;n<e;n++)r[n]=jn(t,n);return r}var Vf=H(()=>{Sf();Br();yl()});var Uf,um=H(()=>{Tr();Vf();Uf=de(xi)});function Dl(t,e){for(var r={},n=0,i=xe(t);n<i;n++)e?r[t[n]]=e[n]:r[t[n][0]]=t[n][1];return r}var cm=H(()=>{Br()});function Ll(t,e,r){e==null&&(e=t||0,t=0),r||(r=e<t?-1:1);for(var n=Math.max(Math.ceil((e-t)/r),0),i=Array(n),o=0;o<n;o++,t+=r)i[o]=t;return i}var fm=H(()=>{});function kl(t,e){if(e==null||e<1)return[];for(var r=[],n=0,i=t.length;n<i;)r.push(cn.call(t,n,n+=e));return r}var hm=H(()=>{Me()});function ho(t,e){return t._chain?Zt(e).chain():e}var _f=H(()=>{Sr()});function go(t){return Fe(hi(t),function(e){var r=Zt[e]=t[e];Zt.prototype[e]=function(){var n=[this._wrapped];return Bg.apply(n,arguments),ho(this,r.apply(Zt,n))}}),Zt}var dm=H(()=>{Sr();Zn();_c();Me();_f()});var gm,pm=H(()=>{Sr();Zn();Me();_f();Fe(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=$o[t];Zt.prototype[t]=function(){var r=this._wrapped;return r!=null&&(e.apply(r,arguments),(t==="shift"||t==="splice")&&r.length===0&&delete r[0]),ho(this,r)}});Fe(["concat","join","slice"],function(t){var e=$o[t];Zt.prototype[t]=function(){var r=this._wrapped;return r!=null&&(r=e.apply(r,arguments)),ho(this,r)}});gm=Zt});var Xf={};Ae(Xf,{VERSION:()=>qo,after:()=>pl,all:()=>bs,allKeys:()=>Wr,any:()=>Ns,assign:()=>On,before:()=>ro,bind:()=>ms,bindAll:()=>df,chain:()=>ll,chunk:()=>kl,clone:()=>Ha,collect:()=>Ir,compact:()=>Tl,compose:()=>gl,constant:()=>Xi,contains:()=>lr,countBy:()=>Ef,create:()=>Xa,debounce:()=>fl,default:()=>gm,defaults:()=>ls,defer:()=>pf,delay:()=>vs,detect:()=>Ai,difference:()=>Ss,drop:()=>Wn,each:()=>Fe,escape:()=>of,every:()=>bs,extend:()=>as,extendOwn:()=>On,filter:()=>Rr,find:()=>Ai,findIndex:()=>Ii,findKey:()=>no,findLastIndex:()=>As,findWhere:()=>vl,first:()=>fo,flatten:()=>Sl,foldl:()=>ws,foldr:()=>Il,forEach:()=>Fe,functions:()=>hi,get:()=>$i,groupBy:()=>Lf,has:()=>Ka,head:()=>fo,identity:()=>Bn,include:()=>lr,includes:()=>lr,indexBy:()=>kf,indexOf:()=>Cs,initial:()=>co,inject:()=>ws,intersection:()=>Pl,invert:()=>Ki,invoke:()=>Tf,isArguments:()=>ui,isArray:()=>mr,isArrayBuffer:()=>rs,isBoolean:()=>Fi,isDataView:()=>En,isDate:()=>wc,isElement:()=>Ea,isEmpty:()=>ja,isEqual:()=>Ya,isError:()=>Nc,isFinite:()=>Ga,isFunction:()=>ve,isMap:()=>Wc,isMatch:()=>Hi,isNaN:()=>_i,isNull:()=>ka,isNumber:()=>ts,isObject:()=>ar,isRegExp:()=>bc,isSet:()=>Fc,isString:()=>li,isSymbol:()=>es,isTypedArray:()=>os,isUndefined:()=>Yi,isWeakMap:()=>Yc,isWeakSet:()=>Vc,iteratee:()=>pi,keys:()=>Ht,last:()=>Ml,lastIndexOf:()=>bf,map:()=>Ir,mapObject:()=>tl,matcher:()=>qr,matches:()=>qr,max:()=>ao,memoize:()=>ul,methods:()=>hi,min:()=>xl,mixin:()=>go,negate:()=>Gn,noop:()=>eo,now:()=>yn,object:()=>Dl,omit:()=>Rf,once:()=>vf,pairs:()=>Va,partial:()=>Cn,partition:()=>zf,pick:()=>Ts,pluck:()=>jn,property:()=>Rn,propertyOf:()=>el,random:()=>mi,range:()=>Ll,reduce:()=>ws,reduceRight:()=>Il,reject:()=>Al,rest:()=>Wn,restArguments:()=>de,result:()=>sl,sample:()=>uo,select:()=>Rr,shuffle:()=>wl,size:()=>Nl,some:()=>Ns,sortBy:()=>bl,sortedIndex:()=>io,tail:()=>Wn,take:()=>fo,tap:()=>Ja,template:()=>ol,templateSettings:()=>af,throttle:()=>cl,times:()=>rl,toArray:()=>lo,toPath:()=>cs,transpose:()=>xi,unescape:()=>sf,union:()=>Ff,uniq:()=>Ci,unique:()=>Ci,uniqueId:()=>al,unzip:()=>xi,values:()=>Pr,where:()=>Cl,without:()=>Wf,wrap:()=>hl,zip:()=>Uf});var El=H(()=>{Me();Tr();kn();Fg();yc();Cc();Vg();za();xc();Ug();_g();Xg();Mc();Tc();Ba();zn();Or();Ra();Qg();Dc();zc();$g();Bc();np();lp();up();cp();fp();Ye();Ji();fi();hp();Uc();_c();Xc();_a();Hc();dp();gp();pp();Kc();mp();vp();qa();Lc();tf();Qc();$a();Ip();fs();Ap();ef();nl();yp();wp();lf();bp();Np();Mp();Tp();$c();ps();hf();Sp();Pp();gf();Dp();Lp();kp();Ep();dl();zp();Op();mf();Bp();If();ml();yf();Cf();wf();Rp();Nf();Gp();Zn();yi();Zp();jp();oo();Wp();Yp();Fp();so();Vp();yl();Up();Sf();_p();Xp();Df();Hp();Jp();Qp();Kp();qp();Pf();$p();Bf();em();rm();Gf();nm();Zf();im();om();sm();Yf();am();lm();jf();Vf();um();cm();fm();hm();dm();pm()});var Hf,mm,vm=H(()=>{El();El();Hf=go(Xf);Hf._=Hf;mm=Hf});var Im={};Ae(Im,{VERSION:()=>qo,after:()=>pl,all:()=>bs,allKeys:()=>Wr,any:()=>Ns,assign:()=>On,before:()=>ro,bind:()=>ms,bindAll:()=>df,chain:()=>ll,chunk:()=>kl,clone:()=>Ha,collect:()=>Ir,compact:()=>Tl,compose:()=>gl,constant:()=>Xi,contains:()=>lr,countBy:()=>Ef,create:()=>Xa,debounce:()=>fl,default:()=>mm,defaults:()=>ls,defer:()=>pf,delay:()=>vs,detect:()=>Ai,difference:()=>Ss,drop:()=>Wn,each:()=>Fe,escape:()=>of,every:()=>bs,extend:()=>as,extendOwn:()=>On,filter:()=>Rr,find:()=>Ai,findIndex:()=>Ii,findKey:()=>no,findLastIndex:()=>As,findWhere:()=>vl,first:()=>fo,flatten:()=>Sl,foldl:()=>ws,foldr:()=>Il,forEach:()=>Fe,functions:()=>hi,get:()=>$i,groupBy:()=>Lf,has:()=>Ka,head:()=>fo,identity:()=>Bn,include:()=>lr,includes:()=>lr,indexBy:()=>kf,indexOf:()=>Cs,initial:()=>co,inject:()=>ws,intersection:()=>Pl,invert:()=>Ki,invoke:()=>Tf,isArguments:()=>ui,isArray:()=>mr,isArrayBuffer:()=>rs,isBoolean:()=>Fi,isDataView:()=>En,isDate:()=>wc,isElement:()=>Ea,isEmpty:()=>ja,isEqual:()=>Ya,isError:()=>Nc,isFinite:()=>Ga,isFunction:()=>ve,isMap:()=>Wc,isMatch:()=>Hi,isNaN:()=>_i,isNull:()=>ka,isNumber:()=>ts,isObject:()=>ar,isRegExp:()=>bc,isSet:()=>Fc,isString:()=>li,isSymbol:()=>es,isTypedArray:()=>os,isUndefined:()=>Yi,isWeakMap:()=>Yc,isWeakSet:()=>Vc,iteratee:()=>pi,keys:()=>Ht,last:()=>Ml,lastIndexOf:()=>bf,map:()=>Ir,mapObject:()=>tl,matcher:()=>qr,matches:()=>qr,max:()=>ao,memoize:()=>ul,methods:()=>hi,min:()=>xl,mixin:()=>go,negate:()=>Gn,noop:()=>eo,now:()=>yn,object:()=>Dl,omit:()=>Rf,once:()=>vf,pairs:()=>Va,partial:()=>Cn,partition:()=>zf,pick:()=>Ts,pluck:()=>jn,property:()=>Rn,propertyOf:()=>el,random:()=>mi,range:()=>Ll,reduce:()=>ws,reduceRight:()=>Il,reject:()=>Al,rest:()=>Wn,restArguments:()=>de,result:()=>sl,sample:()=>uo,select:()=>Rr,shuffle:()=>wl,size:()=>Nl,some:()=>Ns,sortBy:()=>bl,sortedIndex:()=>io,tail:()=>Wn,take:()=>fo,tap:()=>Ja,template:()=>ol,templateSettings:()=>af,throttle:()=>cl,times:()=>rl,toArray:()=>lo,toPath:()=>cs,transpose:()=>xi,unescape:()=>sf,union:()=>Ff,uniq:()=>Ci,unique:()=>Ci,uniqueId:()=>al,unzip:()=>xi,values:()=>Pr,where:()=>Cl,without:()=>Wf,wrap:()=>hl,zip:()=>Uf});var Am=H(()=>{vm();El()});var wn=tg((ym,zl)=>{(function(t,e){"use strict";typeof zl=="object"&&typeof zl.exports=="object"?zl.exports=t.document?e(t,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return e(r)}:e(t)})(typeof window!="undefined"?window:ym,function(t,e){"use strict";var r=[],n=Object.getPrototypeOf,i=r.slice,o=r.flat?function(l){return r.flat.call(l)}:function(l){return r.concat.apply([],l)},s=r.push,a=r.indexOf,u={},h=u.toString,d=u.hasOwnProperty,f=d.toString,I=f.call(Object),A={},b=function(c){return typeof c=="function"&&typeof c.nodeType!="number"&&typeof c.item!="function"},S=function(c){return c!=null&&c===c.window},P=t.document,E={type:!0,src:!0,nonce:!0,noModule:!0};function j(l,c,g){g=g||P;var m,y,x=g.createElement("script");if(x.text=l,c)for(m in E)y=c[m]||c.getAttribute&&c.getAttribute(m),y&&x.setAttribute(m,y);g.head.appendChild(x).parentNode.removeChild(x)}function U(l){return l==null?l+"":typeof l=="object"||typeof l=="function"?u[h.call(l)]||"object":typeof l}var Q="3.7.1",rt=/HTML$/i,p=function(l,c){return new p.fn.init(l,c)};p.fn=p.prototype={jquery:Q,constructor:p,length:0,toArray:function(){return i.call(this)},get:function(l){return l==null?i.call(this):l<0?this[l+this.length]:this[l]},pushStack:function(l){var c=p.merge(this.constructor(),l);return c.prevObject=this,c},each:function(l){return p.each(this,l)},map:function(l){return this.pushStack(p.map(this,function(c,g){return l.call(c,g,c)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(p.grep(this,function(l,c){return(c+1)%2}))},odd:function(){return this.pushStack(p.grep(this,function(l,c){return c%2}))},eq:function(l){var c=this.length,g=+l+(l<0?c:0);return this.pushStack(g>=0&&g<c?[this[g]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:r.sort,splice:r.splice},p.extend=p.fn.extend=function(){var l,c,g,m,y,x,N=arguments[0]||{},B=1,O=arguments.length,V=!1;for(typeof N=="boolean"&&(V=N,N=arguments[B]||{},B++),typeof N!="object"&&!b(N)&&(N={}),B===O&&(N=this,B--);B<O;B++)if((l=arguments[B])!=null)for(c in l)m=l[c],!(c==="__proto__"||N===m)&&(V&&m&&(p.isPlainObject(m)||(y=Array.isArray(m)))?(g=N[c],y&&!Array.isArray(g)?x=[]:!y&&!p.isPlainObject(g)?x={}:x=g,y=!1,N[c]=p.extend(V,x,m)):m!==void 0&&(N[c]=m));return N},p.extend({expando:"jQuery"+(Q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(l){throw new Error(l)},noop:function(){},isPlainObject:function(l){var c,g;return!l||h.call(l)!=="[object Object]"?!1:(c=n(l),c?(g=d.call(c,"constructor")&&c.constructor,typeof g=="function"&&f.call(g)===I):!0)},isEmptyObject:function(l){var c;for(c in l)return!1;return!0},globalEval:function(l,c,g){j(l,{nonce:c&&c.nonce},g)},each:function(l,c){var g,m=0;if(v(l))for(g=l.length;m<g&&c.call(l[m],m,l[m])!==!1;m++);else for(m in l)if(c.call(l[m],m,l[m])===!1)break;return l},text:function(l){var c,g="",m=0,y=l.nodeType;if(!y)for(;c=l[m++];)g+=p.text(c);return y===1||y===11?l.textContent:y===9?l.documentElement.textContent:y===3||y===4?l.nodeValue:g},makeArray:function(l,c){var g=c||[];return l!=null&&(v(Object(l))?p.merge(g,typeof l=="string"?[l]:l):s.call(g,l)),g},inArray:function(l,c,g){return c==null?-1:a.call(c,l,g)},isXMLDoc:function(l){var c=l&&l.namespaceURI,g=l&&(l.ownerDocument||l).documentElement;return!rt.test(c||g&&g.nodeName||"HTML")},merge:function(l,c){for(var g=+c.length,m=0,y=l.length;m<g;m++)l[y++]=c[m];return l.length=y,l},grep:function(l,c,g){for(var m,y=[],x=0,N=l.length,B=!g;x<N;x++)m=!c(l[x],x),m!==B&&y.push(l[x]);return y},map:function(l,c,g){var m,y,x=0,N=[];if(v(l))for(m=l.length;x<m;x++)y=c(l[x],x,g),y!=null&&N.push(y);else for(x in l)y=c(l[x],x,g),y!=null&&N.push(y);return o(N)},guid:1,support:A}),typeof Symbol=="function"&&(p.fn[Symbol.iterator]=r[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(l,c){u["[object "+c+"]"]=c.toLowerCase()});function v(l){var c=!!l&&"length"in l&&l.length,g=U(l);return b(l)||S(l)?!1:g==="array"||c===0||typeof c=="number"&&c>0&&c-1 in l}function w(l,c){return l.nodeName&&l.nodeName.toLowerCase()===c.toLowerCase()}var M=r.pop,D=r.sort,G=r.splice,Z="[\\x20\\t\\r\\n\\f]",_=new RegExp("^"+Z+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Z+"+$","g");p.contains=function(l,c){var g=c&&c.parentNode;return l===g||!!(g&&g.nodeType===1&&(l.contains?l.contains(g):l.compareDocumentPosition&&l.compareDocumentPosition(g)&16))};var at=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function ht(l,c){return c?l==="\0"?"\uFFFD":l.slice(0,-1)+"\\"+l.charCodeAt(l.length-1).toString(16)+" ":"\\"+l}p.escapeSelector=function(l){return(l+"").replace(at,ht)};var Y=P,K=s;(function(){var l,c,g,m,y,x=K,N,B,O,V,nt,ut=p.expando,tt=0,dt=0,Ot=ca(),re=ca(),Yt=ca(),He=ca(),Ze=function(L,W){return L===W&&(y=!0),0},rn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nn="(?:\\\\[\\da-fA-F]{1,6}"+Z+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Kt="\\["+Z+"*("+nn+")(?:"+Z+"*([*^$|!~]?=)"+Z+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+nn+"))|)"+Z+"*\\]",ei=":("+nn+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Kt+")*)|.*)\\)|)",ne=new RegExp(Z+"+","g"),ze=new RegExp("^"+Z+"*,"+Z+"*"),Xo=new RegExp("^"+Z+"*([>+~]|"+Z+")"+Z+"*"),Vu=new RegExp(Z+"|>"),on=new RegExp(ei),Ho=new RegExp("^"+nn+"$"),sn={ID:new RegExp("^#("+nn+")"),CLASS:new RegExp("^\\.("+nn+")"),TAG:new RegExp("^("+nn+"|[*])"),ATTR:new RegExp("^"+Kt),PSEUDO:new RegExp("^"+ei),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Z+"*(even|odd|(([+-]|)(\\d*)n|)"+Z+"*(?:([+-]|)"+Z+"*(\\d+)|))"+Z+"*\\)|)","i"),bool:new RegExp("^(?:"+rn+")$","i"),needsContext:new RegExp("^"+Z+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Z+"*((?:-\\d)?\\d*)"+Z+"*\\)|)(?=[^-]|$)","i")},Sn=/^(?:input|select|textarea|button)$/i,Pn=/^h\d$/i,Zr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Uu=/[+~]/,gn=new RegExp("\\\\[\\da-fA-F]{1,6}"+Z+"?|\\\\([^\\r\\n\\f])","g"),pn=function(L,W){var $="0x"+L.slice(1)-65536;return W||($<0?String.fromCharCode($+65536):String.fromCharCode($>>10|55296,$&1023|56320))},xI=function(){Dn()},wI=ha(function(L){return L.disabled===!0&&w(L,"fieldset")},{dir:"parentNode",next:"legend"});function bI(){try{return N.activeElement}catch(L){}}try{x.apply(r=i.call(Y.childNodes),Y.childNodes),r[Y.childNodes.length].nodeType}catch(L){x={apply:function(W,$){K.apply(W,i.call($))},call:function(W){K.apply(W,i.call(arguments,1))}}}function he(L,W,$,et){var lt,vt,Ct,bt,xt,_t,Et,Rt=W&&W.ownerDocument,Xt=W?W.nodeType:9;if($=$||[],typeof L!="string"||!L||Xt!==1&&Xt!==9&&Xt!==11)return $;if(!et&&(Dn(W),W=W||N,O)){if(Xt!==11&&(xt=Zr.exec(L)))if(lt=xt[1]){if(Xt===9)if(Ct=W.getElementById(lt)){if(Ct.id===lt)return x.call($,Ct),$}else return $;else if(Rt&&(Ct=Rt.getElementById(lt))&&he.contains(W,Ct)&&Ct.id===lt)return x.call($,Ct),$}else{if(xt[2])return x.apply($,W.getElementsByTagName(L)),$;if((lt=xt[3])&&W.getElementsByClassName)return x.apply($,W.getElementsByClassName(lt)),$}if(!He[L+" "]&&(!V||!V.test(L))){if(Et=L,Rt=W,Xt===1&&(Vu.test(L)||Xo.test(L))){for(Rt=Uu.test(L)&&_u(W.parentNode)||W,(Rt!=W||!A.scope)&&((bt=W.getAttribute("id"))?bt=p.escapeSelector(bt):W.setAttribute("id",bt=ut)),_t=Jo(L),vt=_t.length;vt--;)_t[vt]=(bt?"#"+bt:":scope")+" "+fa(_t[vt]);Et=_t.join(",")}try{return x.apply($,Rt.querySelectorAll(Et)),$}catch(Pt){He(L,!0)}finally{bt===ut&&W.removeAttribute("id")}}}return Hd(L.replace(_,"$1"),W,$,et)}function ca(){var L=[];function W($,et){return L.push($+" ")>c.cacheLength&&delete W[L.shift()],W[$+" "]=et}return W}function Jr(L){return L[ut]=!0,L}function Ri(L){var W=N.createElement("fieldset");try{return!!L(W)}catch($){return!1}finally{W.parentNode&&W.parentNode.removeChild(W),W=null}}function NI(L){return function(W){return w(W,"input")&&W.type===L}}function MI(L){return function(W){return(w(W,"input")||w(W,"button"))&&W.type===L}}function _d(L){return function(W){return"form"in W?W.parentNode&&W.disabled===!1?"label"in W?"label"in W.parentNode?W.parentNode.disabled===L:W.disabled===L:W.isDisabled===L||W.isDisabled!==!L&&wI(W)===L:W.disabled===L:"label"in W?W.disabled===L:!1}}function ri(L){return Jr(function(W){return W=+W,Jr(function($,et){for(var lt,vt=L([],$.length,W),Ct=vt.length;Ct--;)$[lt=vt[Ct]]&&($[lt]=!(et[lt]=$[lt]))})})}function _u(L){return L&&typeof L.getElementsByTagName!="undefined"&&L}function Dn(L){var W,$=L?L.ownerDocument||L:Y;return $==N||$.nodeType!==9||!$.documentElement||(N=$,B=N.documentElement,O=!p.isXMLDoc(N),nt=B.matches||B.webkitMatchesSelector||B.msMatchesSelector,B.msMatchesSelector&&Y!=N&&(W=N.defaultView)&&W.top!==W&&W.addEventListener("unload",xI),A.getById=Ri(function(et){return B.appendChild(et).id=p.expando,!N.getElementsByName||!N.getElementsByName(p.expando).length}),A.disconnectedMatch=Ri(function(et){return nt.call(et,"*")}),A.scope=Ri(function(){return N.querySelectorAll(":scope")}),A.cssHas=Ri(function(){try{return N.querySelector(":has(*,:jqfake)"),!1}catch(et){return!0}}),A.getById?(c.filter.ID=function(et){var lt=et.replace(gn,pn);return function(vt){return vt.getAttribute("id")===lt}},c.find.ID=function(et,lt){if(typeof lt.getElementById!="undefined"&&O){var vt=lt.getElementById(et);return vt?[vt]:[]}}):(c.filter.ID=function(et){var lt=et.replace(gn,pn);return function(vt){var Ct=typeof vt.getAttributeNode!="undefined"&&vt.getAttributeNode("id");return Ct&&Ct.value===lt}},c.find.ID=function(et,lt){if(typeof lt.getElementById!="undefined"&&O){var vt,Ct,bt,xt=lt.getElementById(et);if(xt){if(vt=xt.getAttributeNode("id"),vt&&vt.value===et)return[xt];for(bt=lt.getElementsByName(et),Ct=0;xt=bt[Ct++];)if(vt=xt.getAttributeNode("id"),vt&&vt.value===et)return[xt]}return[]}}),c.find.TAG=function(et,lt){return typeof lt.getElementsByTagName!="undefined"?lt.getElementsByTagName(et):lt.querySelectorAll(et)},c.find.CLASS=function(et,lt){if(typeof lt.getElementsByClassName!="undefined"&&O)return lt.getElementsByClassName(et)},V=[],Ri(function(et){var lt;B.appendChild(et).innerHTML="<a id='"+ut+"' href='' disabled='disabled'></a><select id='"+ut+"-\r\\' disabled='disabled'><option selected=''></option></select>",et.querySelectorAll("[selected]").length||V.push("\\["+Z+"*(?:value|"+rn+")"),et.querySelectorAll("[id~="+ut+"-]").length||V.push("~="),et.querySelectorAll("a#"+ut+"+*").length||V.push(".#.+[+~]"),et.querySelectorAll(":checked").length||V.push(":checked"),lt=N.createElement("input"),lt.setAttribute("type","hidden"),et.appendChild(lt).setAttribute("name","D"),B.appendChild(et).disabled=!0,et.querySelectorAll(":disabled").length!==2&&V.push(":enabled",":disabled"),lt=N.createElement("input"),lt.setAttribute("name",""),et.appendChild(lt),et.querySelectorAll("[name='']").length||V.push("\\["+Z+"*name"+Z+"*="+Z+`*(?:''|"")`)}),A.cssHas||V.push(":has"),V=V.length&&new RegExp(V.join("|")),Ze=function(et,lt){if(et===lt)return y=!0,0;var vt=!et.compareDocumentPosition-!lt.compareDocumentPosition;return vt||(vt=(et.ownerDocument||et)==(lt.ownerDocument||lt)?et.compareDocumentPosition(lt):1,vt&1||!A.sortDetached&&lt.compareDocumentPosition(et)===vt?et===N||et.ownerDocument==Y&&he.contains(Y,et)?-1:lt===N||lt.ownerDocument==Y&&he.contains(Y,lt)?1:m?a.call(m,et)-a.call(m,lt):0:vt&4?-1:1)}),N}he.matches=function(L,W){return he(L,null,null,W)},he.matchesSelector=function(L,W){if(Dn(L),O&&!He[W+" "]&&(!V||!V.test(W)))try{var $=nt.call(L,W);if($||A.disconnectedMatch||L.document&&L.document.nodeType!==11)return $}catch(et){He(W,!0)}return he(W,N,null,[L]).length>0},he.contains=function(L,W){return(L.ownerDocument||L)!=N&&Dn(L),p.contains(L,W)},he.attr=function(L,W){(L.ownerDocument||L)!=N&&Dn(L);var $=c.attrHandle[W.toLowerCase()],et=$&&d.call(c.attrHandle,W.toLowerCase())?$(L,W,!O):void 0;return et!==void 0?et:L.getAttribute(W)},he.error=function(L){throw new Error("Syntax error, unrecognized expression: "+L)},p.uniqueSort=function(L){var W,$=[],et=0,lt=0;if(y=!A.sortStable,m=!A.sortStable&&i.call(L,0),D.call(L,Ze),y){for(;W=L[lt++];)W===L[lt]&&(et=$.push(lt));for(;et--;)G.call(L,$[et],1)}return m=null,L},p.fn.uniqueSort=function(){return this.pushStack(p.uniqueSort(i.apply(this)))},c=p.expr={cacheLength:50,createPseudo:Jr,match:sn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(L){return L[1]=L[1].replace(gn,pn),L[3]=(L[3]||L[4]||L[5]||"").replace(gn,pn),L[2]==="~="&&(L[3]=" "+L[3]+" "),L.slice(0,4)},CHILD:function(L){return L[1]=L[1].toLowerCase(),L[1].slice(0,3)==="nth"?(L[3]||he.error(L[0]),L[4]=+(L[4]?L[5]+(L[6]||1):2*(L[3]==="even"||L[3]==="odd")),L[5]=+(L[7]+L[8]||L[3]==="odd")):L[3]&&he.error(L[0]),L},PSEUDO:function(L){var W,$=!L[6]&&L[2];return sn.CHILD.test(L[0])?null:(L[3]?L[2]=L[4]||L[5]||"":$&&on.test($)&&(W=Jo($,!0))&&(W=$.indexOf(")",$.length-W)-$.length)&&(L[0]=L[0].slice(0,W),L[2]=$.slice(0,W)),L.slice(0,3))}},filter:{TAG:function(L){var W=L.replace(gn,pn).toLowerCase();return L==="*"?function(){return!0}:function($){return w($,W)}},CLASS:function(L){var W=Ot[L+" "];return W||(W=new RegExp("(^|"+Z+")"+L+"("+Z+"|$)"))&&Ot(L,function($){return W.test(typeof $.className=="string"&&$.className||typeof $.getAttribute!="undefined"&&$.getAttribute("class")||"")})},ATTR:function(L,W,$){return function(et){var lt=he.attr(et,L);return lt==null?W==="!=":W?(lt+="",W==="="?lt===$:W==="!="?lt!==$:W==="^="?$&&lt.indexOf($)===0:W==="*="?$&&lt.indexOf($)>-1:W==="$="?$&&lt.slice(-$.length)===$:W==="~="?(" "+lt.replace(ne," ")+" ").indexOf($)>-1:W==="|="?lt===$||lt.slice(0,$.length+1)===$+"-":!1):!0}},CHILD:function(L,W,$,et,lt){var vt=L.slice(0,3)!=="nth",Ct=L.slice(-4)!=="last",bt=W==="of-type";return et===1&&lt===0?function(xt){return!!xt.parentNode}:function(xt,_t,Et){var Rt,Xt,Pt,Ce,Mr,sr=vt!==Ct?"nextSibling":"previousSibling",jr=xt.parentNode,an=bt&&xt.nodeName.toLowerCase(),Gi=!Et&&!bt,gr=!1;if(jr){if(vt){for(;sr;){for(Pt=xt;Pt=Pt[sr];)if(bt?w(Pt,an):Pt.nodeType===1)return!1;Mr=sr=L==="only"&&!Mr&&"nextSibling"}return!0}if(Mr=[Ct?jr.firstChild:jr.lastChild],Ct&&Gi){for(Xt=jr[ut]||(jr[ut]={}),Rt=Xt[L]||[],Ce=Rt[0]===tt&&Rt[1],gr=Ce&&Rt[2],Pt=Ce&&jr.childNodes[Ce];Pt=++Ce&&Pt&&Pt[sr]||(gr=Ce=0)||Mr.pop();)if(Pt.nodeType===1&&++gr&&Pt===xt){Xt[L]=[tt,Ce,gr];break}}else if(Gi&&(Xt=xt[ut]||(xt[ut]={}),Rt=Xt[L]||[],Ce=Rt[0]===tt&&Rt[1],gr=Ce),gr===!1)for(;(Pt=++Ce&&Pt&&Pt[sr]||(gr=Ce=0)||Mr.pop())&&!((bt?w(Pt,an):Pt.nodeType===1)&&++gr&&(Gi&&(Xt=Pt[ut]||(Pt[ut]={}),Xt[L]=[tt,gr]),Pt===xt)););return gr-=lt,gr===et||gr%et===0&&gr/et>=0}}},PSEUDO:function(L,W){var $,et=c.pseudos[L]||c.setFilters[L.toLowerCase()]||he.error("unsupported pseudo: "+L);return et[ut]?et(W):et.length>1?($=[L,L,"",W],c.setFilters.hasOwnProperty(L.toLowerCase())?Jr(function(lt,vt){for(var Ct,bt=et(lt,W),xt=bt.length;xt--;)Ct=a.call(lt,bt[xt]),lt[Ct]=!(vt[Ct]=bt[xt])}):function(lt){return et(lt,0,$)}):et}},pseudos:{not:Jr(function(L){var W=[],$=[],et=Qu(L.replace(_,"$1"));return et[ut]?Jr(function(lt,vt,Ct,bt){for(var xt,_t=et(lt,null,bt,[]),Et=lt.length;Et--;)(xt=_t[Et])&&(lt[Et]=!(vt[Et]=xt))}):function(lt,vt,Ct){return W[0]=lt,et(W,null,Ct,$),W[0]=null,!$.pop()}}),has:Jr(function(L){return function(W){return he(L,W).length>0}}),contains:Jr(function(L){return L=L.replace(gn,pn),function(W){return(W.textContent||p.text(W)).indexOf(L)>-1}}),lang:Jr(function(L){return Ho.test(L||"")||he.error("unsupported lang: "+L),L=L.replace(gn,pn).toLowerCase(),function(W){var $;do if($=O?W.lang:W.getAttribute("xml:lang")||W.getAttribute("lang"))return $=$.toLowerCase(),$===L||$.indexOf(L+"-")===0;while((W=W.parentNode)&&W.nodeType===1);return!1}}),target:function(L){var W=t.location&&t.location.hash;return W&&W.slice(1)===L.id},root:function(L){return L===B},focus:function(L){return L===bI()&&N.hasFocus()&&!!(L.type||L.href||~L.tabIndex)},enabled:_d(!1),disabled:_d(!0),checked:function(L){return w(L,"input")&&!!L.checked||w(L,"option")&&!!L.selected},selected:function(L){return L.parentNode&&L.parentNode.selectedIndex,L.selected===!0},empty:function(L){for(L=L.firstChild;L;L=L.nextSibling)if(L.nodeType<6)return!1;return!0},parent:function(L){return!c.pseudos.empty(L)},header:function(L){return Pn.test(L.nodeName)},input:function(L){return Sn.test(L.nodeName)},button:function(L){return w(L,"input")&&L.type==="button"||w(L,"button")},text:function(L){var W;return w(L,"input")&&L.type==="text"&&((W=L.getAttribute("type"))==null||W.toLowerCase()==="text")},first:ri(function(){return[0]}),last:ri(function(L,W){return[W-1]}),eq:ri(function(L,W,$){return[$<0?$+W:$]}),even:ri(function(L,W){for(var $=0;$<W;$+=2)L.push($);return L}),odd:ri(function(L,W){for(var $=1;$<W;$+=2)L.push($);return L}),lt:ri(function(L,W,$){var et;for($<0?et=$+W:$>W?et=W:et=$;--et>=0;)L.push(et);return L}),gt:ri(function(L,W,$){for(var et=$<0?$+W:$;++et<W;)L.push(et);return L})}},c.pseudos.nth=c.pseudos.eq;for(l in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})c.pseudos[l]=NI(l);for(l in{submit:!0,reset:!0})c.pseudos[l]=MI(l);function Xd(){}Xd.prototype=c.filters=c.pseudos,c.setFilters=new Xd;function Jo(L,W){var $,et,lt,vt,Ct,bt,xt,_t=re[L+" "];if(_t)return W?0:_t.slice(0);for(Ct=L,bt=[],xt=c.preFilter;Ct;){(!$||(et=ze.exec(Ct)))&&(et&&(Ct=Ct.slice(et[0].length)||Ct),bt.push(lt=[])),$=!1,(et=Xo.exec(Ct))&&($=et.shift(),lt.push({value:$,type:et[0].replace(_," ")}),Ct=Ct.slice($.length));for(vt in c.filter)(et=sn[vt].exec(Ct))&&(!xt[vt]||(et=xt[vt](et)))&&($=et.shift(),lt.push({value:$,type:vt,matches:et}),Ct=Ct.slice($.length));if(!$)break}return W?Ct.length:Ct?he.error(L):re(L,bt).slice(0)}function fa(L){for(var W=0,$=L.length,et="";W<$;W++)et+=L[W].value;return et}function ha(L,W,$){var et=W.dir,lt=W.next,vt=lt||et,Ct=$&&vt==="parentNode",bt=dt++;return W.first?function(xt,_t,Et){for(;xt=xt[et];)if(xt.nodeType===1||Ct)return L(xt,_t,Et);return!1}:function(xt,_t,Et){var Rt,Xt,Pt=[tt,bt];if(Et){for(;xt=xt[et];)if((xt.nodeType===1||Ct)&&L(xt,_t,Et))return!0}else for(;xt=xt[et];)if(xt.nodeType===1||Ct)if(Xt=xt[ut]||(xt[ut]={}),lt&&w(xt,lt))xt=xt[et]||xt;else{if((Rt=Xt[vt])&&Rt[0]===tt&&Rt[1]===bt)return Pt[2]=Rt[2];if(Xt[vt]=Pt,Pt[2]=L(xt,_t,Et))return!0}return!1}}function Xu(L){return L.length>1?function(W,$,et){for(var lt=L.length;lt--;)if(!L[lt](W,$,et))return!1;return!0}:L[0]}function TI(L,W,$){for(var et=0,lt=W.length;et<lt;et++)he(L,W[et],$);return $}function da(L,W,$,et,lt){for(var vt,Ct=[],bt=0,xt=L.length,_t=W!=null;bt<xt;bt++)(vt=L[bt])&&(!$||$(vt,et,lt))&&(Ct.push(vt),_t&&W.push(bt));return Ct}function Hu(L,W,$,et,lt,vt){return et&&!et[ut]&&(et=Hu(et)),lt&&!lt[ut]&&(lt=Hu(lt,vt)),Jr(function(Ct,bt,xt,_t){var Et,Rt,Xt,Pt,Ce=[],Mr=[],sr=bt.length,jr=Ct||TI(W||"*",xt.nodeType?[xt]:xt,[]),an=L&&(Ct||!W)?da(jr,Ce,L,xt,_t):jr;if($?(Pt=lt||(Ct?L:sr||et)?[]:bt,$(an,Pt,xt,_t)):Pt=an,et)for(Et=da(Pt,Mr),et(Et,[],xt,_t),Rt=Et.length;Rt--;)(Xt=Et[Rt])&&(Pt[Mr[Rt]]=!(an[Mr[Rt]]=Xt));if(Ct){if(lt||L){if(lt){for(Et=[],Rt=Pt.length;Rt--;)(Xt=Pt[Rt])&&Et.push(an[Rt]=Xt);lt(null,Pt=[],Et,_t)}for(Rt=Pt.length;Rt--;)(Xt=Pt[Rt])&&(Et=lt?a.call(Ct,Xt):Ce[Rt])>-1&&(Ct[Et]=!(bt[Et]=Xt))}}else Pt=da(Pt===bt?Pt.splice(sr,Pt.length):Pt),lt?lt(null,bt,Pt,_t):x.apply(bt,Pt)})}function Ju(L){for(var W,$,et,lt=L.length,vt=c.relative[L[0].type],Ct=vt||c.relative[" "],bt=vt?1:0,xt=ha(function(Rt){return Rt===W},Ct,!0),_t=ha(function(Rt){return a.call(W,Rt)>-1},Ct,!0),Et=[function(Rt,Xt,Pt){var Ce=!vt&&(Pt||Xt!=g)||((W=Xt).nodeType?xt(Rt,Xt,Pt):_t(Rt,Xt,Pt));return W=null,Ce}];bt<lt;bt++)if($=c.relative[L[bt].type])Et=[ha(Xu(Et),$)];else{if($=c.filter[L[bt].type].apply(null,L[bt].matches),$[ut]){for(et=++bt;et<lt&&!c.relative[L[et].type];et++);return Hu(bt>1&&Xu(Et),bt>1&&fa(L.slice(0,bt-1).concat({value:L[bt-2].type===" "?"*":""})).replace(_,"$1"),$,bt<et&&Ju(L.slice(bt,et)),et<lt&&Ju(L=L.slice(et)),et<lt&&fa(L))}Et.push($)}return Xu(Et)}function SI(L,W){var $=W.length>0,et=L.length>0,lt=function(vt,Ct,bt,xt,_t){var Et,Rt,Xt,Pt=0,Ce="0",Mr=vt&&[],sr=[],jr=g,an=vt||et&&c.find.TAG("*",_t),Gi=tt+=jr==null?1:Math.random()||.1,gr=an.length;for(_t&&(g=Ct==N||Ct||_t);Ce!==gr&&(Et=an[Ce])!=null;Ce++){if(et&&Et){for(Rt=0,!Ct&&Et.ownerDocument!=N&&(Dn(Et),bt=!O);Xt=L[Rt++];)if(Xt(Et,Ct||N,bt)){x.call(xt,Et);break}_t&&(tt=Gi)}$&&((Et=!Xt&&Et)&&Pt--,vt&&Mr.push(Et))}if(Pt+=Ce,$&&Ce!==Pt){for(Rt=0;Xt=W[Rt++];)Xt(Mr,sr,Ct,bt);if(vt){if(Pt>0)for(;Ce--;)Mr[Ce]||sr[Ce]||(sr[Ce]=M.call(xt));sr=da(sr)}x.apply(xt,sr),_t&&!vt&&sr.length>0&&Pt+W.length>1&&p.uniqueSort(xt)}return _t&&(tt=Gi,g=jr),Mr};return $?Jr(lt):lt}function Qu(L,W){var $,et=[],lt=[],vt=Yt[L+" "];if(!vt){for(W||(W=Jo(L)),$=W.length;$--;)vt=Ju(W[$]),vt[ut]?et.push(vt):lt.push(vt);vt=Yt(L,SI(lt,et)),vt.selector=L}return vt}function Hd(L,W,$,et){var lt,vt,Ct,bt,xt,_t=typeof L=="function"&&L,Et=!et&&Jo(L=_t.selector||L);if($=$||[],Et.length===1){if(vt=Et[0]=Et[0].slice(0),vt.length>2&&(Ct=vt[0]).type==="ID"&&W.nodeType===9&&O&&c.relative[vt[1].type]){if(W=(c.find.ID(Ct.matches[0].replace(gn,pn),W)||[])[0],W)_t&&(W=W.parentNode);else return $;L=L.slice(vt.shift().value.length)}for(lt=sn.needsContext.test(L)?0:vt.length;lt--&&(Ct=vt[lt],!c.relative[bt=Ct.type]);)if((xt=c.find[bt])&&(et=xt(Ct.matches[0].replace(gn,pn),Uu.test(vt[0].type)&&_u(W.parentNode)||W))){if(vt.splice(lt,1),L=et.length&&fa(vt),!L)return x.apply($,et),$;break}}return(_t||Qu(L,Et))(et,W,!O,$,!W||Uu.test(L)&&_u(W.parentNode)||W),$}A.sortStable=ut.split("").sort(Ze).join("")===ut,Dn(),A.sortDetached=Ri(function(L){return L.compareDocumentPosition(N.createElement("fieldset"))&1}),p.find=he,p.expr[":"]=p.expr.pseudos,p.unique=p.uniqueSort,he.compile=Qu,he.select=Hd,he.setDocument=Dn,he.tokenize=Jo,he.escape=p.escapeSelector,he.getText=p.text,he.isXML=p.isXMLDoc,he.selectors=p.expr,he.support=p.support,he.uniqueSort=p.uniqueSort})();var J=function(l,c,g){for(var m=[],y=g!==void 0;(l=l[c])&&l.nodeType!==9;)if(l.nodeType===1){if(y&&p(l).is(g))break;m.push(l)}return m},q=function(l,c){for(var g=[];l;l=l.nextSibling)l.nodeType===1&&l!==c&&g.push(l);return g},St=p.expr.match.needsContext,Nt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function oe(l,c,g){return b(c)?p.grep(l,function(m,y){return!!c.call(m,y,m)!==g}):c.nodeType?p.grep(l,function(m){return m===c!==g}):typeof c!="string"?p.grep(l,function(m){return a.call(c,m)>-1!==g}):p.filter(c,l,g)}p.filter=function(l,c,g){var m=c[0];return g&&(l=":not("+l+")"),c.length===1&&m.nodeType===1?p.find.matchesSelector(m,l)?[m]:[]:p.find.matches(l,p.grep(c,function(y){return y.nodeType===1}))},p.fn.extend({find:function(l){var c,g,m=this.length,y=this;if(typeof l!="string")return this.pushStack(p(l).filter(function(){for(c=0;c<m;c++)if(p.contains(y[c],this))return!0}));for(g=this.pushStack([]),c=0;c<m;c++)p.find(l,y[c],g);return m>1?p.uniqueSort(g):g},filter:function(l){return this.pushStack(oe(this,l||[],!1))},not:function(l){return this.pushStack(oe(this,l||[],!0))},is:function(l){return!!oe(this,typeof l=="string"&&St.test(l)?p(l):l||[],!1).length}});var pe,wt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Mt=p.fn.init=function(l,c,g){var m,y;if(!l)return this;if(g=g||pe,typeof l=="string")if(l[0]==="<"&&l[l.length-1]===">"&&l.length>=3?m=[null,l,null]:m=wt.exec(l),m&&(m[1]||!c))if(m[1]){if(c=c instanceof p?c[0]:c,p.merge(this,p.parseHTML(m[1],c&&c.nodeType?c.ownerDocument||c:P,!0)),Nt.test(m[1])&&p.isPlainObject(c))for(m in c)b(this[m])?this[m](c[m]):this.attr(m,c[m]);return this}else return y=P.getElementById(m[2]),y&&(this[0]=y,this.length=1),this;else return!c||c.jquery?(c||g).find(l):this.constructor(c).find(l);else{if(l.nodeType)return this[0]=l,this.length=1,this;if(b(l))return g.ready!==void 0?g.ready(l):l(p)}return p.makeArray(l,this)};Mt.prototype=p.fn,pe=p(P);var ot=/^(?:parents|prev(?:Until|All))/,it={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(l){var c=p(l,this),g=c.length;return this.filter(function(){for(var m=0;m<g;m++)if(p.contains(this,c[m]))return!0})},closest:function(l,c){var g,m=0,y=this.length,x=[],N=typeof l!="string"&&p(l);if(!St.test(l)){for(;m<y;m++)for(g=this[m];g&&g!==c;g=g.parentNode)if(g.nodeType<11&&(N?N.index(g)>-1:g.nodeType===1&&p.find.matchesSelector(g,l))){x.push(g);break}}return this.pushStack(x.length>1?p.uniqueSort(x):x)},index:function(l){return l?typeof l=="string"?a.call(p(l),this[0]):a.call(this,l.jquery?l[0]:l):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(l,c){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(l,c))))},addBack:function(l){return this.add(l==null?this.prevObject:this.prevObject.filter(l))}});function pt(l,c){for(;(l=l[c])&&l.nodeType!==1;);return l}p.each({parent:function(l){var c=l.parentNode;return c&&c.nodeType!==11?c:null},parents:function(l){return J(l,"parentNode")},parentsUntil:function(l,c,g){return J(l,"parentNode",g)},next:function(l){return pt(l,"nextSibling")},prev:function(l){return pt(l,"previousSibling")},nextAll:function(l){return J(l,"nextSibling")},prevAll:function(l){return J(l,"previousSibling")},nextUntil:function(l,c,g){return J(l,"nextSibling",g)},prevUntil:function(l,c,g){return J(l,"previousSibling",g)},siblings:function(l){return q((l.parentNode||{}).firstChild,l)},children:function(l){return q(l.firstChild)},contents:function(l){return l.contentDocument!=null&&n(l.contentDocument)?l.contentDocument:(w(l,"template")&&(l=l.content||l),p.merge([],l.childNodes))}},function(l,c){p.fn[l]=function(g,m){var y=p.map(this,c,g);return l.slice(-5)!=="Until"&&(m=g),m&&typeof m=="string"&&(y=p.filter(m,y)),this.length>1&&(it[l]||p.uniqueSort(y),ot.test(l)&&y.reverse()),this.pushStack(y)}});var Bt=/[^\x20\t\r\n\f]+/g;function Qt(l){var c={};return p.each(l.match(Bt)||[],function(g,m){c[m]=!0}),c}p.Callbacks=function(l){l=typeof l=="string"?Qt(l):p.extend({},l);var c,g,m,y,x=[],N=[],B=-1,O=function(){for(y=y||l.once,m=c=!0;N.length;B=-1)for(g=N.shift();++B<x.length;)x[B].apply(g[0],g[1])===!1&&l.stopOnFalse&&(B=x.length,g=!1);l.memory||(g=!1),c=!1,y&&(g?x=[]:x="")},V={add:function(){return x&&(g&&!c&&(B=x.length-1,N.push(g)),function nt(ut){p.each(ut,function(tt,dt){b(dt)?(!l.unique||!V.has(dt))&&x.push(dt):dt&&dt.length&&U(dt)!=="string"&&nt(dt)})}(arguments),g&&!c&&O()),this},remove:function(){return p.each(arguments,function(nt,ut){for(var tt;(tt=p.inArray(ut,x,tt))>-1;)x.splice(tt,1),tt<=B&&B--}),this},has:function(nt){return nt?p.inArray(nt,x)>-1:x.length>0},empty:function(){return x&&(x=[]),this},disable:function(){return y=N=[],x=g="",this},disabled:function(){return!x},lock:function(){return y=N=[],!g&&!c&&(x=g=""),this},locked:function(){return!!y},fireWith:function(nt,ut){return y||(ut=ut||[],ut=[nt,ut.slice?ut.slice():ut],N.push(ut),c||O()),this},fire:function(){return V.fireWith(this,arguments),this},fired:function(){return!!m}};return V};function Tt(l){return l}function ee(l){throw l}function C(l,c,g,m){var y;try{l&&b(y=l.promise)?y.call(l).done(c).fail(g):l&&b(y=l.then)?y.call(l,c,g):c.apply(void 0,[l].slice(m))}catch(x){g.apply(void 0,[x])}}p.extend({Deferred:function(l){var c=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),1,"rejected"]],g="pending",m={state:function(){return g},always:function(){return y.done(arguments).fail(arguments),this},catch:function(x){return m.then(null,x)},pipe:function(){var x=arguments;return p.Deferred(function(N){p.each(c,function(B,O){var V=b(x[O[4]])&&x[O[4]];y[O[1]](function(){var nt=V&&V.apply(this,arguments);nt&&b(nt.promise)?nt.promise().progress(N.notify).done(N.resolve).fail(N.reject):N[O[0]+"With"](this,V?[nt]:arguments)})}),x=null}).promise()},then:function(x,N,B){var O=0;function V(nt,ut,tt,dt){return function(){var Ot=this,re=arguments,Yt=function(){var Ze,rn;if(!(nt<O)){if(Ze=tt.apply(Ot,re),Ze===ut.promise())throw new TypeError("Thenable self-resolution");rn=Ze&&(typeof Ze=="object"||typeof Ze=="function")&&Ze.then,b(rn)?dt?rn.call(Ze,V(O,ut,Tt,dt),V(O,ut,ee,dt)):(O++,rn.call(Ze,V(O,ut,Tt,dt),V(O,ut,ee,dt),V(O,ut,Tt,ut.notifyWith))):(tt!==Tt&&(Ot=void 0,re=[Ze]),(dt||ut.resolveWith)(Ot,re))}},He=dt?Yt:function(){try{Yt()}catch(Ze){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(Ze,He.error),nt+1>=O&&(tt!==ee&&(Ot=void 0,re=[Ze]),ut.rejectWith(Ot,re))}};nt?He():(p.Deferred.getErrorHook?He.error=p.Deferred.getErrorHook():p.Deferred.getStackHook&&(He.error=p.Deferred.getStackHook()),t.setTimeout(He))}}return p.Deferred(function(nt){c[0][3].add(V(0,nt,b(B)?B:Tt,nt.notifyWith)),c[1][3].add(V(0,nt,b(x)?x:Tt)),c[2][3].add(V(0,nt,b(N)?N:ee))}).promise()},promise:function(x){return x!=null?p.extend(x,m):m}},y={};return p.each(c,function(x,N){var B=N[2],O=N[5];m[N[1]]=B.add,O&&B.add(function(){g=O},c[3-x][2].disable,c[3-x][3].disable,c[0][2].lock,c[0][3].lock),B.add(N[3].fire),y[N[0]]=function(){return y[N[0]+"With"](this===y?void 0:this,arguments),this},y[N[0]+"With"]=B.fireWith}),m.promise(y),l&&l.call(y,y),y},when:function(l){var c=arguments.length,g=c,m=Array(g),y=i.call(arguments),x=p.Deferred(),N=function(B){return function(O){m[B]=this,y[B]=arguments.length>1?i.call(arguments):O,--c||x.resolveWith(m,y)}};if(c<=1&&(C(l,x.done(N(g)).resolve,x.reject,!c),x.state()==="pending"||b(y[g]&&y[g].then)))return x.then();for(;g--;)C(y[g],N(g),x.reject);return x.promise()}});var T=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(l,c){t.console&&t.console.warn&&l&&T.test(l.name)&&t.console.warn("jQuery.Deferred exception: "+l.message,l.stack,c)},p.readyException=function(l){t.setTimeout(function(){throw l})};var k=p.Deferred();p.fn.ready=function(l){return k.then(l).catch(function(c){p.readyException(c)}),this},p.extend({isReady:!1,readyWait:1,ready:function(l){(l===!0?--p.readyWait:p.isReady)||(p.isReady=!0,!(l!==!0&&--p.readyWait>0)&&k.resolveWith(P,[p]))}}),p.ready.then=k.then;function R(){P.removeEventListener("DOMContentLoaded",R),t.removeEventListener("load",R),p.ready()}P.readyState==="complete"||P.readyState!=="loading"&&!P.documentElement.doScroll?t.setTimeout(p.ready):(P.addEventListener("DOMContentLoaded",R),t.addEventListener("load",R));var F=function(l,c,g,m,y,x,N){var B=0,O=l.length,V=g==null;if(U(g)==="object"){y=!0;for(B in g)F(l,c,B,g[B],!0,x,N)}else if(m!==void 0&&(y=!0,b(m)||(N=!0),V&&(N?(c.call(l,m),c=null):(V=c,c=function(nt,ut,tt){return V.call(p(nt),tt)})),c))for(;B<O;B++)c(l[B],g,N?m:m.call(l[B],B,c(l[B],g)));return y?l:V?c.call(l):O?c(l[0],g):x},st=/^-ms-/,It=/-([a-z])/g;function Lt(l,c){return c.toUpperCase()}function Ft(l){return l.replace(st,"ms-").replace(It,Lt)}var Pe=function(l){return l.nodeType===1||l.nodeType===9||!+l.nodeType};function De(){this.expando=p.expando+De.uid++}De.uid=1,De.prototype={cache:function(l){var c=l[this.expando];return c||(c={},Pe(l)&&(l.nodeType?l[this.expando]=c:Object.defineProperty(l,this.expando,{value:c,configurable:!0}))),c},set:function(l,c,g){var m,y=this.cache(l);if(typeof c=="string")y[Ft(c)]=g;else for(m in c)y[Ft(m)]=c[m];return y},get:function(l,c){return c===void 0?this.cache(l):l[this.expando]&&l[this.expando][Ft(c)]},access:function(l,c,g){return c===void 0||c&&typeof c=="string"&&g===void 0?this.get(l,c):(this.set(l,c,g),g!==void 0?g:c)},remove:function(l,c){var g,m=l[this.expando];if(m!==void 0){if(c!==void 0)for(Array.isArray(c)?c=c.map(Ft):(c=Ft(c),c=c in m?[c]:c.match(Bt)||[]),g=c.length;g--;)delete m[c[g]];(c===void 0||p.isEmptyObject(m))&&(l.nodeType?l[this.expando]=void 0:delete l[this.expando])}},hasData:function(l){var c=l[this.expando];return c!==void 0&&!p.isEmptyObject(c)}};var mt=new De,se=new De,me=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,be=/[A-Z]/g;function Ne(l){return l==="true"?!0:l==="false"?!1:l==="null"?null:l===+l+""?+l:me.test(l)?JSON.parse(l):l}function Re(l,c,g){var m;if(g===void 0&&l.nodeType===1)if(m="data-"+c.replace(be,"-$&").toLowerCase(),g=l.getAttribute(m),typeof g=="string"){try{g=Ne(g)}catch(y){}se.set(l,c,g)}else g=void 0;return g}p.extend({hasData:function(l){return se.hasData(l)||mt.hasData(l)},data:function(l,c,g){return se.access(l,c,g)},removeData:function(l,c){se.remove(l,c)},_data:function(l,c,g){return mt.access(l,c,g)},_removeData:function(l,c){mt.remove(l,c)}}),p.fn.extend({data:function(l,c){var g,m,y,x=this[0],N=x&&x.attributes;if(l===void 0){if(this.length&&(y=se.get(x),x.nodeType===1&&!mt.get(x,"hasDataAttrs"))){for(g=N.length;g--;)N[g]&&(m=N[g].name,m.indexOf("data-")===0&&(m=Ft(m.slice(5)),Re(x,m,y[m])));mt.set(x,"hasDataAttrs",!0)}return y}return typeof l=="object"?this.each(function(){se.set(this,l)}):F(this,function(B){var O;if(x&&B===void 0)return O=se.get(x,l),O!==void 0||(O=Re(x,l),O!==void 0)?O:void 0;this.each(function(){se.set(this,l,B)})},null,c,arguments.length>1,null,!0)},removeData:function(l){return this.each(function(){se.remove(this,l)})}}),p.extend({queue:function(l,c,g){var m;if(l)return c=(c||"fx")+"queue",m=mt.get(l,c),g&&(!m||Array.isArray(g)?m=mt.access(l,c,p.makeArray(g)):m.push(g)),m||[]},dequeue:function(l,c){c=c||"fx";var g=p.queue(l,c),m=g.length,y=g.shift(),x=p._queueHooks(l,c),N=function(){p.dequeue(l,c)};y==="inprogress"&&(y=g.shift(),m--),y&&(c==="fx"&&g.unshift("inprogress"),delete x.stop,y.call(l,N,x)),!m&&x&&x.empty.fire()},_queueHooks:function(l,c){var g=c+"queueHooks";return mt.get(l,g)||mt.access(l,g,{empty:p.Callbacks("once memory").add(function(){mt.remove(l,[c+"queue",g])})})}}),p.fn.extend({queue:function(l,c){var g=2;return typeof l!="string"&&(c=l,l="fx",g--),arguments.length<g?p.queue(this[0],l):c===void 0?this:this.each(function(){var m=p.queue(this,l,c);p._queueHooks(this,l),l==="fx"&&m[0]!=="inprogress"&&p.dequeue(this,l)})},dequeue:function(l){return this.each(function(){p.dequeue(this,l)})},clearQueue:function(l){return this.queue(l||"fx",[])},promise:function(l,c){var g,m=1,y=p.Deferred(),x=this,N=this.length,B=function(){--m||y.resolveWith(x,[x])};for(typeof l!="string"&&(c=l,l=void 0),l=l||"fx";N--;)g=mt.get(x[N],l+"queueHooks"),g&&g.empty&&(m++,g.empty.add(B));return B(),y.promise(c)}});var dr=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_r=new RegExp("^(?:([+-])=|)("+dr+")([a-z%]*)$","i"),wr=["Top","Right","Bottom","Left"],Xr=P.documentElement,en=function(l){return p.contains(l.ownerDocument,l)},Go={composed:!0};Xr.getRootNode&&(en=function(l){return p.contains(l.ownerDocument,l)||l.getRootNode(Go)===l.ownerDocument});var qn=function(l,c){return l=c||l,l.style.display==="none"||l.style.display===""&&en(l)&&p.css(l,"display")==="none"};function Zo(l,c,g,m){var y,x,N=20,B=m?function(){return m.cur()}:function(){return p.css(l,c,"")},O=B(),V=g&&g[3]||(p.cssNumber[c]?"":"px"),nt=l.nodeType&&(p.cssNumber[c]||V!=="px"&&+O)&&_r.exec(p.css(l,c));if(nt&&nt[3]!==V){for(O=O/2,V=V||nt[3],nt=+O||1;N--;)p.style(l,c,nt+V),(1-x)*(1-(x=B()/O||.5))<=0&&(N=0),nt=nt/x;nt=nt*2,p.style(l,c,nt+V),g=g||[]}return g&&(nt=+nt||+O||0,y=g[1]?nt+(g[1]+1)*g[2]:+g[2],m&&(m.unit=V,m.start=nt,m.end=y)),y}var jo={};function oa(l){var c,g=l.ownerDocument,m=l.nodeName,y=jo[m];return y||(c=g.body.appendChild(g.createElement(m)),y=p.css(c,"display"),c.parentNode.removeChild(c),y==="none"&&(y="block"),jo[m]=y,y)}function Er(l,c){for(var g,m,y=[],x=0,N=l.length;x<N;x++)m=l[x],m.style&&(g=m.style.display,c?(g==="none"&&(y[x]=mt.get(m,"display")||null,y[x]||(m.style.display="")),m.style.display===""&&qn(m)&&(y[x]=oa(m))):g!=="none"&&(y[x]="none",mt.set(m,"display",g)));for(x=0;x<N;x++)y[x]!=null&&(l[x].style.display=y[x]);return l}p.fn.extend({show:function(){return Er(this,!0)},hide:function(){return Er(this)},toggle:function(l){return typeof l=="boolean"?l?this.show():this.hide():this.each(function(){qn(this)?p(this).show():p(this).hide()})}});var Tn=/^(?:checkbox|radio)$/i,Wo=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Yo=/^$|^module$|\/(?:java|ecma)script/i;(function(){var l=P.createDocumentFragment(),c=l.appendChild(P.createElement("div")),g=P.createElement("input");g.setAttribute("type","radio"),g.setAttribute("checked","checked"),g.setAttribute("name","t"),c.appendChild(g),A.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked,c.innerHTML="<textarea>x</textarea>",A.noCloneChecked=!!c.cloneNode(!0).lastChild.defaultValue,c.innerHTML="<option></option>",A.option=!!c.lastChild})();var br={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};br.tbody=br.tfoot=br.colgroup=br.caption=br.thead,br.th=br.td,A.option||(br.optgroup=br.option=[1,"<select multiple='multiple'>","</select>"]);function ke(l,c){var g;return typeof l.getElementsByTagName!="undefined"?g=l.getElementsByTagName(c||"*"):typeof l.querySelectorAll!="undefined"?g=l.querySelectorAll(c||"*"):g=[],c===void 0||c&&w(l,c)?p.merge([l],g):g}function Du(l,c){for(var g=0,m=l.length;g<m;g++)mt.set(l[g],"globalEval",!c||mt.get(c[g],"globalEval"))}var Y0=/<|&#?\w+;/;function Cd(l,c,g,m,y){for(var x,N,B,O,V,nt,ut=c.createDocumentFragment(),tt=[],dt=0,Ot=l.length;dt<Ot;dt++)if(x=l[dt],x||x===0)if(U(x)==="object")p.merge(tt,x.nodeType?[x]:x);else if(!Y0.test(x))tt.push(c.createTextNode(x));else{for(N=N||ut.appendChild(c.createElement("div")),B=(Wo.exec(x)||["",""])[1].toLowerCase(),O=br[B]||br._default,N.innerHTML=O[1]+p.htmlPrefilter(x)+O[2],nt=O[0];nt--;)N=N.lastChild;p.merge(tt,N.childNodes),N=ut.firstChild,N.textContent=""}for(ut.textContent="",dt=0;x=tt[dt++];){if(m&&p.inArray(x,m)>-1){y&&y.push(x);continue}if(V=en(x),N=ke(ut.appendChild(x),"script"),V&&Du(N),g)for(nt=0;x=N[nt++];)Yo.test(x.type||"")&&g.push(x)}return ut}var xd=/^([^.]*)(?:\.(.+)|)/;function Ei(){return!0}function zi(){return!1}function Lu(l,c,g,m,y,x){var N,B;if(typeof c=="object"){typeof g!="string"&&(m=m||g,g=void 0);for(B in c)Lu(l,B,g,m,c[B],x);return l}if(m==null&&y==null?(y=g,m=g=void 0):y==null&&(typeof g=="string"?(y=m,m=void 0):(y=m,m=g,g=void 0)),y===!1)y=zi;else if(!y)return l;return x===1&&(N=y,y=function(O){return p().off(O),N.apply(this,arguments)},y.guid=N.guid||(N.guid=p.guid++)),l.each(function(){p.event.add(this,c,y,m,g)})}p.event={global:{},add:function(l,c,g,m,y){var x,N,B,O,V,nt,ut,tt,dt,Ot,re,Yt=mt.get(l);if(Pe(l))for(g.handler&&(x=g,g=x.handler,y=x.selector),y&&p.find.matchesSelector(Xr,y),g.guid||(g.guid=p.guid++),(O=Yt.events)||(O=Yt.events=Object.create(null)),(N=Yt.handle)||(N=Yt.handle=function(He){return typeof p!="undefined"&&p.event.triggered!==He.type?p.event.dispatch.apply(l,arguments):void 0}),c=(c||"").match(Bt)||[""],V=c.length;V--;)B=xd.exec(c[V])||[],dt=re=B[1],Ot=(B[2]||"").split(".").sort(),dt&&(ut=p.event.special[dt]||{},dt=(y?ut.delegateType:ut.bindType)||dt,ut=p.event.special[dt]||{},nt=p.extend({type:dt,origType:re,data:m,handler:g,guid:g.guid,selector:y,needsContext:y&&p.expr.match.needsContext.test(y),namespace:Ot.join(".")},x),(tt=O[dt])||(tt=O[dt]=[],tt.delegateCount=0,(!ut.setup||ut.setup.call(l,m,Ot,N)===!1)&&l.addEventListener&&l.addEventListener(dt,N)),ut.add&&(ut.add.call(l,nt),nt.handler.guid||(nt.handler.guid=g.guid)),y?tt.splice(tt.delegateCount++,0,nt):tt.push(nt),p.event.global[dt]=!0)},remove:function(l,c,g,m,y){var x,N,B,O,V,nt,ut,tt,dt,Ot,re,Yt=mt.hasData(l)&&mt.get(l);if(!(!Yt||!(O=Yt.events))){for(c=(c||"").match(Bt)||[""],V=c.length;V--;){if(B=xd.exec(c[V])||[],dt=re=B[1],Ot=(B[2]||"").split(".").sort(),!dt){for(dt in O)p.event.remove(l,dt+c[V],g,m,!0);continue}for(ut=p.event.special[dt]||{},dt=(m?ut.delegateType:ut.bindType)||dt,tt=O[dt]||[],B=B[2]&&new RegExp("(^|\\.)"+Ot.join("\\.(?:.*\\.|)")+"(\\.|$)"),N=x=tt.length;x--;)nt=tt[x],(y||re===nt.origType)&&(!g||g.guid===nt.guid)&&(!B||B.test(nt.namespace))&&(!m||m===nt.selector||m==="**"&&nt.selector)&&(tt.splice(x,1),nt.selector&&tt.delegateCount--,ut.remove&&ut.remove.call(l,nt));N&&!tt.length&&((!ut.teardown||ut.teardown.call(l,Ot,Yt.handle)===!1)&&p.removeEvent(l,dt,Yt.handle),delete O[dt])}p.isEmptyObject(O)&&mt.remove(l,"handle events")}},dispatch:function(l){var c,g,m,y,x,N,B=new Array(arguments.length),O=p.event.fix(l),V=(mt.get(this,"events")||Object.create(null))[O.type]||[],nt=p.event.special[O.type]||{};for(B[0]=O,c=1;c<arguments.length;c++)B[c]=arguments[c];if(O.delegateTarget=this,!(nt.preDispatch&&nt.preDispatch.call(this,O)===!1)){for(N=p.event.handlers.call(this,O,V),c=0;(y=N[c++])&&!O.isPropagationStopped();)for(O.currentTarget=y.elem,g=0;(x=y.handlers[g++])&&!O.isImmediatePropagationStopped();)(!O.rnamespace||x.namespace===!1||O.rnamespace.test(x.namespace))&&(O.handleObj=x,O.data=x.data,m=((p.event.special[x.origType]||{}).handle||x.handler).apply(y.elem,B),m!==void 0&&(O.result=m)===!1&&(O.preventDefault(),O.stopPropagation()));return nt.postDispatch&&nt.postDispatch.call(this,O),O.result}},handlers:function(l,c){var g,m,y,x,N,B=[],O=c.delegateCount,V=l.target;if(O&&V.nodeType&&!(l.type==="click"&&l.button>=1)){for(;V!==this;V=V.parentNode||this)if(V.nodeType===1&&!(l.type==="click"&&V.disabled===!0)){for(x=[],N={},g=0;g<O;g++)m=c[g],y=m.selector+" ",N[y]===void 0&&(N[y]=m.needsContext?p(y,this).index(V)>-1:p.find(y,this,null,[V]).length),N[y]&&x.push(m);x.length&&B.push({elem:V,handlers:x})}}return V=this,O<c.length&&B.push({elem:V,handlers:c.slice(O)}),B},addProp:function(l,c){Object.defineProperty(p.Event.prototype,l,{enumerable:!0,configurable:!0,get:b(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[l]},set:function(g){Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:g})}})},fix:function(l){return l[p.expando]?l:new p.Event(l)},special:{load:{noBubble:!0},click:{setup:function(l){var c=this||l;return Tn.test(c.type)&&c.click&&w(c,"input")&&sa(c,"click",!0),!1},trigger:function(l){var c=this||l;return Tn.test(c.type)&&c.click&&w(c,"input")&&sa(c,"click"),!0},_default:function(l){var c=l.target;return Tn.test(c.type)&&c.click&&w(c,"input")&&mt.get(c,"click")||w(c,"a")}},beforeunload:{postDispatch:function(l){l.result!==void 0&&l.originalEvent&&(l.originalEvent.returnValue=l.result)}}}};function sa(l,c,g){if(!g){mt.get(l,c)===void 0&&p.event.add(l,c,Ei);return}mt.set(l,c,!1),p.event.add(l,c,{namespace:!1,handler:function(m){var y,x=mt.get(this,c);if(m.isTrigger&1&&this[c]){if(x)(p.event.special[c]||{}).delegateType&&m.stopPropagation();else if(x=i.call(arguments),mt.set(this,c,x),this[c](),y=mt.get(this,c),mt.set(this,c,!1),x!==y)return m.stopImmediatePropagation(),m.preventDefault(),y}else x&&(mt.set(this,c,p.event.trigger(x[0],x.slice(1),this)),m.stopPropagation(),m.isImmediatePropagationStopped=Ei)}})}p.removeEvent=function(l,c,g){l.removeEventListener&&l.removeEventListener(c,g)},p.Event=function(l,c){if(!(this instanceof p.Event))return new p.Event(l,c);l&&l.type?(this.originalEvent=l,this.type=l.type,this.isDefaultPrevented=l.defaultPrevented||l.defaultPrevented===void 0&&l.returnValue===!1?Ei:zi,this.target=l.target&&l.target.nodeType===3?l.target.parentNode:l.target,this.currentTarget=l.currentTarget,this.relatedTarget=l.relatedTarget):this.type=l,c&&p.extend(this,c),this.timeStamp=l&&l.timeStamp||Date.now(),this[p.expando]=!0},p.Event.prototype={constructor:p.Event,isDefaultPrevented:zi,isPropagationStopped:zi,isImmediatePropagationStopped:zi,isSimulated:!1,preventDefault:function(){var l=this.originalEvent;this.isDefaultPrevented=Ei,l&&!this.isSimulated&&l.preventDefault()},stopPropagation:function(){var l=this.originalEvent;this.isPropagationStopped=Ei,l&&!this.isSimulated&&l.stopPropagation()},stopImmediatePropagation:function(){var l=this.originalEvent;this.isImmediatePropagationStopped=Ei,l&&!this.isSimulated&&l.stopImmediatePropagation(),this.stopPropagation()}},p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},p.event.addProp),p.each({focus:"focusin",blur:"focusout"},function(l,c){function g(m){if(P.documentMode){var y=mt.get(this,"handle"),x=p.event.fix(m);x.type=m.type==="focusin"?"focus":"blur",x.isSimulated=!0,y(m),x.target===x.currentTarget&&y(x)}else p.event.simulate(c,m.target,p.event.fix(m))}p.event.special[l]={setup:function(){var m;if(sa(this,l,!0),P.documentMode)m=mt.get(this,c),m||this.addEventListener(c,g),mt.set(this,c,(m||0)+1);else return!1},trigger:function(){return sa(this,l),!0},teardown:function(){var m;if(P.documentMode)m=mt.get(this,c)-1,m?mt.set(this,c,m):(this.removeEventListener(c,g),mt.remove(this,c));else return!1},_default:function(m){return mt.get(m.target,l)},delegateType:c},p.event.special[c]={setup:function(){var m=this.ownerDocument||this.document||this,y=P.documentMode?this:m,x=mt.get(y,c);x||(P.documentMode?this.addEventListener(c,g):m.addEventListener(l,g,!0)),mt.set(y,c,(x||0)+1)},teardown:function(){var m=this.ownerDocument||this.document||this,y=P.documentMode?this:m,x=mt.get(y,c)-1;x?mt.set(y,c,x):(P.documentMode?this.removeEventListener(c,g):m.removeEventListener(l,g,!0),mt.remove(y,c))}}}),p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(l,c){p.event.special[l]={delegateType:c,bindType:c,handle:function(g){var m,y=this,x=g.relatedTarget,N=g.handleObj;return(!x||x!==y&&!p.contains(y,x))&&(g.type=N.origType,m=N.handler.apply(this,arguments),g.type=c),m}}}),p.fn.extend({on:function(l,c,g,m){return Lu(this,l,c,g,m)},one:function(l,c,g,m){return Lu(this,l,c,g,m,1)},off:function(l,c,g){var m,y;if(l&&l.preventDefault&&l.handleObj)return m=l.handleObj,p(l.delegateTarget).off(m.namespace?m.origType+"."+m.namespace:m.origType,m.selector,m.handler),this;if(typeof l=="object"){for(y in l)this.off(y,c,l[y]);return this}return(c===!1||typeof c=="function")&&(g=c,c=void 0),g===!1&&(g=zi),this.each(function(){p.event.remove(this,l,g,c)})}});var F0=/<script|<style|<link/i,V0=/checked\s*(?:[^=]|=\s*.checked.)/i,U0=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function wd(l,c){return w(l,"table")&&w(c.nodeType!==11?c:c.firstChild,"tr")&&p(l).children("tbody")[0]||l}function _0(l){return l.type=(l.getAttribute("type")!==null)+"/"+l.type,l}function X0(l){return(l.type||"").slice(0,5)==="true/"?l.type=l.type.slice(5):l.removeAttribute("type"),l}function bd(l,c){var g,m,y,x,N,B,O;if(c.nodeType===1){if(mt.hasData(l)&&(x=mt.get(l),O=x.events,O)){mt.remove(c,"handle events");for(y in O)for(g=0,m=O[y].length;g<m;g++)p.event.add(c,y,O[y][g])}se.hasData(l)&&(N=se.access(l),B=p.extend({},N),se.set(c,B))}}function H0(l,c){var g=c.nodeName.toLowerCase();g==="input"&&Tn.test(l.type)?c.checked=l.checked:(g==="input"||g==="textarea")&&(c.defaultValue=l.defaultValue)}function Oi(l,c,g,m){c=o(c);var y,x,N,B,O,V,nt=0,ut=l.length,tt=ut-1,dt=c[0],Ot=b(dt);if(Ot||ut>1&&typeof dt=="string"&&!A.checkClone&&V0.test(dt))return l.each(function(re){var Yt=l.eq(re);Ot&&(c[0]=dt.call(this,re,Yt.html())),Oi(Yt,c,g,m)});if(ut&&(y=Cd(c,l[0].ownerDocument,!1,l,m),x=y.firstChild,y.childNodes.length===1&&(y=x),x||m)){for(N=p.map(ke(y,"script"),_0),B=N.length;nt<ut;nt++)O=y,nt!==tt&&(O=p.clone(O,!0,!0),B&&p.merge(N,ke(O,"script"))),g.call(l[nt],O,nt);if(B)for(V=N[N.length-1].ownerDocument,p.map(N,X0),nt=0;nt<B;nt++)O=N[nt],Yo.test(O.type||"")&&!mt.access(O,"globalEval")&&p.contains(V,O)&&(O.src&&(O.type||"").toLowerCase()!=="module"?p._evalUrl&&!O.noModule&&p._evalUrl(O.src,{nonce:O.nonce||O.getAttribute("nonce")},V):j(O.textContent.replace(U0,""),O,V))}return l}function Nd(l,c,g){for(var m,y=c?p.filter(c,l):l,x=0;(m=y[x])!=null;x++)!g&&m.nodeType===1&&p.cleanData(ke(m)),m.parentNode&&(g&&en(m)&&Du(ke(m,"script")),m.parentNode.removeChild(m));return l}p.extend({htmlPrefilter:function(l){return l},clone:function(l,c,g){var m,y,x,N,B=l.cloneNode(!0),O=en(l);if(!A.noCloneChecked&&(l.nodeType===1||l.nodeType===11)&&!p.isXMLDoc(l))for(N=ke(B),x=ke(l),m=0,y=x.length;m<y;m++)H0(x[m],N[m]);if(c)if(g)for(x=x||ke(l),N=N||ke(B),m=0,y=x.length;m<y;m++)bd(x[m],N[m]);else bd(l,B);return N=ke(B,"script"),N.length>0&&Du(N,!O&&ke(l,"script")),B},cleanData:function(l){for(var c,g,m,y=p.event.special,x=0;(g=l[x])!==void 0;x++)if(Pe(g)){if(c=g[mt.expando]){if(c.events)for(m in c.events)y[m]?p.event.remove(g,m):p.removeEvent(g,m,c.handle);g[mt.expando]=void 0}g[se.expando]&&(g[se.expando]=void 0)}}}),p.fn.extend({detach:function(l){return Nd(this,l,!0)},remove:function(l){return Nd(this,l)},text:function(l){return F(this,function(c){return c===void 0?p.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=c)})},null,l,arguments.length)},append:function(){return Oi(this,arguments,function(l){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=wd(this,l);c.appendChild(l)}})},prepend:function(){return Oi(this,arguments,function(l){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=wd(this,l);c.insertBefore(l,c.firstChild)}})},before:function(){return Oi(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this)})},after:function(){return Oi(this,arguments,function(l){this.parentNode&&this.parentNode.insertBefore(l,this.nextSibling)})},empty:function(){for(var l,c=0;(l=this[c])!=null;c++)l.nodeType===1&&(p.cleanData(ke(l,!1)),l.textContent="");return this},clone:function(l,c){return l=l==null?!1:l,c=c==null?l:c,this.map(function(){return p.clone(this,l,c)})},html:function(l){return F(this,function(c){var g=this[0]||{},m=0,y=this.length;if(c===void 0&&g.nodeType===1)return g.innerHTML;if(typeof c=="string"&&!F0.test(c)&&!br[(Wo.exec(c)||["",""])[1].toLowerCase()]){c=p.htmlPrefilter(c);try{for(;m<y;m++)g=this[m]||{},g.nodeType===1&&(p.cleanData(ke(g,!1)),g.innerHTML=c);g=0}catch(x){}}g&&this.empty().append(c)},null,l,arguments.length)},replaceWith:function(){var l=[];return Oi(this,arguments,function(c){var g=this.parentNode;p.inArray(this,l)<0&&(p.cleanData(ke(this)),g&&g.replaceChild(c,this))},l)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(l,c){p.fn[l]=function(g){for(var m,y=[],x=p(g),N=x.length-1,B=0;B<=N;B++)m=B===N?this:this.clone(!0),p(x[B])[c](m),s.apply(y,m.get());return this.pushStack(y)}});var ku=new RegExp("^("+dr+")(?!px)[a-z%]+$","i"),Eu=/^--/,aa=function(l){var c=l.ownerDocument.defaultView;return(!c||!c.opener)&&(c=t),c.getComputedStyle(l)},Md=function(l,c,g){var m,y,x={};for(y in c)x[y]=l.style[y],l.style[y]=c[y];m=g.call(l);for(y in c)l.style[y]=x[y];return m},J0=new RegExp(wr.join("|"),"i");(function(){function l(){if(V){O.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",V.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Xr.appendChild(O).appendChild(V);var nt=t.getComputedStyle(V);g=nt.top!=="1%",B=c(nt.marginLeft)===12,V.style.right="60%",x=c(nt.right)===36,m=c(nt.width)===36,V.style.position="absolute",y=c(V.offsetWidth/3)===12,Xr.removeChild(O),V=null}}function c(nt){return Math.round(parseFloat(nt))}var g,m,y,x,N,B,O=P.createElement("div"),V=P.createElement("div");V.style&&(V.style.backgroundClip="content-box",V.cloneNode(!0).style.backgroundClip="",A.clearCloneStyle=V.style.backgroundClip==="content-box",p.extend(A,{boxSizingReliable:function(){return l(),m},pixelBoxStyles:function(){return l(),x},pixelPosition:function(){return l(),g},reliableMarginLeft:function(){return l(),B},scrollboxSize:function(){return l(),y},reliableTrDimensions:function(){var nt,ut,tt,dt;return N==null&&(nt=P.createElement("table"),ut=P.createElement("tr"),tt=P.createElement("div"),nt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ut.style.cssText="box-sizing:content-box;border:1px solid",ut.style.height="1px",tt.style.height="9px",tt.style.display="block",Xr.appendChild(nt).appendChild(ut).appendChild(tt),dt=t.getComputedStyle(ut),N=parseInt(dt.height,10)+parseInt(dt.borderTopWidth,10)+parseInt(dt.borderBottomWidth,10)===ut.offsetHeight,Xr.removeChild(nt)),N}}))})();function Fo(l,c,g){var m,y,x,N,B=Eu.test(c),O=l.style;return g=g||aa(l),g&&(N=g.getPropertyValue(c)||g[c],B&&N&&(N=N.replace(_,"$1")||void 0),N===""&&!en(l)&&(N=p.style(l,c)),!A.pixelBoxStyles()&&ku.test(N)&&J0.test(c)&&(m=O.width,y=O.minWidth,x=O.maxWidth,O.minWidth=O.maxWidth=O.width=N,N=g.width,O.width=m,O.minWidth=y,O.maxWidth=x)),N!==void 0?N+"":N}function Td(l,c){return{get:function(){if(l()){delete this.get;return}return(this.get=c).apply(this,arguments)}}}var Sd=["Webkit","Moz","ms"],Pd=P.createElement("div").style,Dd={};function Q0(l){for(var c=l[0].toUpperCase()+l.slice(1),g=Sd.length;g--;)if(l=Sd[g]+c,l in Pd)return l}function zu(l){var c=p.cssProps[l]||Dd[l];return c||(l in Pd?l:Dd[l]=Q0(l)||l)}var K0=/^(none|table(?!-c[ea]).+)/,q0={position:"absolute",visibility:"hidden",display:"block"},Ld={letterSpacing:"0",fontWeight:"400"};function kd(l,c,g){var m=_r.exec(c);return m?Math.max(0,m[2]-(g||0))+(m[3]||"px"):c}function Ou(l,c,g,m,y,x){var N=c==="width"?1:0,B=0,O=0,V=0;if(g===(m?"border":"content"))return 0;for(;N<4;N+=2)g==="margin"&&(V+=p.css(l,g+wr[N],!0,y)),m?(g==="content"&&(O-=p.css(l,"padding"+wr[N],!0,y)),g!=="margin"&&(O-=p.css(l,"border"+wr[N]+"Width",!0,y))):(O+=p.css(l,"padding"+wr[N],!0,y),g!=="padding"?O+=p.css(l,"border"+wr[N]+"Width",!0,y):B+=p.css(l,"border"+wr[N]+"Width",!0,y));return!m&&x>=0&&(O+=Math.max(0,Math.ceil(l["offset"+c[0].toUpperCase()+c.slice(1)]-x-O-B-.5))||0),O+V}function Ed(l,c,g){var m=aa(l),y=!A.boxSizingReliable()||g,x=y&&p.css(l,"boxSizing",!1,m)==="border-box",N=x,B=Fo(l,c,m),O="offset"+c[0].toUpperCase()+c.slice(1);if(ku.test(B)){if(!g)return B;B="auto"}return(!A.boxSizingReliable()&&x||!A.reliableTrDimensions()&&w(l,"tr")||B==="auto"||!parseFloat(B)&&p.css(l,"display",!1,m)==="inline")&&l.getClientRects().length&&(x=p.css(l,"boxSizing",!1,m)==="border-box",N=O in l,N&&(B=l[O])),B=parseFloat(B)||0,B+Ou(l,c,g||(x?"border":"content"),N,m,B)+"px"}p.extend({cssHooks:{opacity:{get:function(l,c){if(c){var g=Fo(l,"opacity");return g===""?"1":g}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(l,c,g,m){if(!(!l||l.nodeType===3||l.nodeType===8||!l.style)){var y,x,N,B=Ft(c),O=Eu.test(c),V=l.style;if(O||(c=zu(B)),N=p.cssHooks[c]||p.cssHooks[B],g!==void 0){if(x=typeof g,x==="string"&&(y=_r.exec(g))&&y[1]&&(g=Zo(l,c,y),x="number"),g==null||g!==g)return;x==="number"&&!O&&(g+=y&&y[3]||(p.cssNumber[B]?"":"px")),!A.clearCloneStyle&&g===""&&c.indexOf("background")===0&&(V[c]="inherit"),(!N||!("set"in N)||(g=N.set(l,g,m))!==void 0)&&(O?V.setProperty(c,g):V[c]=g)}else return N&&"get"in N&&(y=N.get(l,!1,m))!==void 0?y:V[c]}},css:function(l,c,g,m){var y,x,N,B=Ft(c),O=Eu.test(c);return O||(c=zu(B)),N=p.cssHooks[c]||p.cssHooks[B],N&&"get"in N&&(y=N.get(l,!0,g)),y===void 0&&(y=Fo(l,c,m)),y==="normal"&&c in Ld&&(y=Ld[c]),g===""||g?(x=parseFloat(y),g===!0||isFinite(x)?x||0:y):y}}),p.each(["height","width"],function(l,c){p.cssHooks[c]={get:function(g,m,y){if(m)return K0.test(p.css(g,"display"))&&(!g.getClientRects().length||!g.getBoundingClientRect().width)?Md(g,q0,function(){return Ed(g,c,y)}):Ed(g,c,y)},set:function(g,m,y){var x,N=aa(g),B=!A.scrollboxSize()&&N.position==="absolute",O=B||y,V=O&&p.css(g,"boxSizing",!1,N)==="border-box",nt=y?Ou(g,c,y,V,N):0;return V&&B&&(nt-=Math.ceil(g["offset"+c[0].toUpperCase()+c.slice(1)]-parseFloat(N[c])-Ou(g,c,"border",!1,N)-.5)),nt&&(x=_r.exec(m))&&(x[3]||"px")!=="px"&&(g.style[c]=m,m=p.css(g,c)),kd(g,m,nt)}}}),p.cssHooks.marginLeft=Td(A.reliableMarginLeft,function(l,c){if(c)return(parseFloat(Fo(l,"marginLeft"))||l.getBoundingClientRect().left-Md(l,{marginLeft:0},function(){return l.getBoundingClientRect().left}))+"px"}),p.each({margin:"",padding:"",border:"Width"},function(l,c){p.cssHooks[l+c]={expand:function(g){for(var m=0,y={},x=typeof g=="string"?g.split(" "):[g];m<4;m++)y[l+wr[m]+c]=x[m]||x[m-2]||x[0];return y}},l!=="margin"&&(p.cssHooks[l+c].set=kd)}),p.fn.extend({css:function(l,c){return F(this,function(g,m,y){var x,N,B={},O=0;if(Array.isArray(m)){for(x=aa(g),N=m.length;O<N;O++)B[m[O]]=p.css(g,m[O],!1,x);return B}return y!==void 0?p.style(g,m,y):p.css(g,m)},l,c,arguments.length>1)}});function Nr(l,c,g,m,y){return new Nr.prototype.init(l,c,g,m,y)}p.Tween=Nr,Nr.prototype={constructor:Nr,init:function(l,c,g,m,y,x){this.elem=l,this.prop=g,this.easing=y||p.easing._default,this.options=c,this.start=this.now=this.cur(),this.end=m,this.unit=x||(p.cssNumber[g]?"":"px")},cur:function(){var l=Nr.propHooks[this.prop];return l&&l.get?l.get(this):Nr.propHooks._default.get(this)},run:function(l){var c,g=Nr.propHooks[this.prop];return this.options.duration?this.pos=c=p.easing[this.easing](l,this.options.duration*l,0,1,this.options.duration):this.pos=c=l,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),g&&g.set?g.set(this):Nr.propHooks._default.set(this),this}},Nr.prototype.init.prototype=Nr.prototype,Nr.propHooks={_default:{get:function(l){var c;return l.elem.nodeType!==1||l.elem[l.prop]!=null&&l.elem.style[l.prop]==null?l.elem[l.prop]:(c=p.css(l.elem,l.prop,""),!c||c==="auto"?0:c)},set:function(l){p.fx.step[l.prop]?p.fx.step[l.prop](l):l.elem.nodeType===1&&(p.cssHooks[l.prop]||l.elem.style[zu(l.prop)]!=null)?p.style(l.elem,l.prop,l.now+l.unit):l.elem[l.prop]=l.now}}},Nr.propHooks.scrollTop=Nr.propHooks.scrollLeft={set:function(l){l.elem.nodeType&&l.elem.parentNode&&(l.elem[l.prop]=l.now)}},p.easing={linear:function(l){return l},swing:function(l){return .5-Math.cos(l*Math.PI)/2},_default:"swing"},p.fx=Nr.prototype.init,p.fx.step={};var Bi,la,$0=/^(?:toggle|show|hide)$/,tI=/queueHooks$/;function Bu(){la&&(P.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(Bu):t.setTimeout(Bu,p.fx.interval),p.fx.tick())}function zd(){return t.setTimeout(function(){Bi=void 0}),Bi=Date.now()}function ua(l,c){var g,m=0,y={height:l};for(c=c?1:0;m<4;m+=2-c)g=wr[m],y["margin"+g]=y["padding"+g]=l;return c&&(y.opacity=y.width=l),y}function Od(l,c,g){for(var m,y=(Hr.tweeners[c]||[]).concat(Hr.tweeners["*"]),x=0,N=y.length;x<N;x++)if(m=y[x].call(g,c,l))return m}function eI(l,c,g){var m,y,x,N,B,O,V,nt,ut="width"in c||"height"in c,tt=this,dt={},Ot=l.style,re=l.nodeType&&qn(l),Yt=mt.get(l,"fxshow");g.queue||(N=p._queueHooks(l,"fx"),N.unqueued==null&&(N.unqueued=0,B=N.empty.fire,N.empty.fire=function(){N.unqueued||B()}),N.unqueued++,tt.always(function(){tt.always(function(){N.unqueued--,p.queue(l,"fx").length||N.empty.fire()})}));for(m in c)if(y=c[m],$0.test(y)){if(delete c[m],x=x||y==="toggle",y===(re?"hide":"show"))if(y==="show"&&Yt&&Yt[m]!==void 0)re=!0;else continue;dt[m]=Yt&&Yt[m]||p.style(l,m)}if(O=!p.isEmptyObject(c),!(!O&&p.isEmptyObject(dt))){ut&&l.nodeType===1&&(g.overflow=[Ot.overflow,Ot.overflowX,Ot.overflowY],V=Yt&&Yt.display,V==null&&(V=mt.get(l,"display")),nt=p.css(l,"display"),nt==="none"&&(V?nt=V:(Er([l],!0),V=l.style.display||V,nt=p.css(l,"display"),Er([l]))),(nt==="inline"||nt==="inline-block"&&V!=null)&&p.css(l,"float")==="none"&&(O||(tt.done(function(){Ot.display=V}),V==null&&(nt=Ot.display,V=nt==="none"?"":nt)),Ot.display="inline-block")),g.overflow&&(Ot.overflow="hidden",tt.always(function(){Ot.overflow=g.overflow[0],Ot.overflowX=g.overflow[1],Ot.overflowY=g.overflow[2]})),O=!1;for(m in dt)O||(Yt?"hidden"in Yt&&(re=Yt.hidden):Yt=mt.access(l,"fxshow",{display:V}),x&&(Yt.hidden=!re),re&&Er([l],!0),tt.done(function(){re||Er([l]),mt.remove(l,"fxshow");for(m in dt)p.style(l,m,dt[m])})),O=Od(re?Yt[m]:0,m,tt),m in Yt||(Yt[m]=O.start,re&&(O.end=O.start,O.start=0))}}function rI(l,c){var g,m,y,x,N;for(g in l)if(m=Ft(g),y=c[m],x=l[g],Array.isArray(x)&&(y=x[1],x=l[g]=x[0]),g!==m&&(l[m]=x,delete l[g]),N=p.cssHooks[m],N&&"expand"in N){x=N.expand(x),delete l[m];for(g in x)g in l||(l[g]=x[g],c[g]=y)}else c[m]=y}function Hr(l,c,g){var m,y,x=0,N=Hr.prefilters.length,B=p.Deferred().always(function(){delete O.elem}),O=function(){if(y)return!1;for(var ut=Bi||zd(),tt=Math.max(0,V.startTime+V.duration-ut),dt=tt/V.duration||0,Ot=1-dt,re=0,Yt=V.tweens.length;re<Yt;re++)V.tweens[re].run(Ot);return B.notifyWith(l,[V,Ot,tt]),Ot<1&&Yt?tt:(Yt||B.notifyWith(l,[V,1,0]),B.resolveWith(l,[V]),!1)},V=B.promise({elem:l,props:p.extend({},c),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},g),originalProperties:c,originalOptions:g,startTime:Bi||zd(),duration:g.duration,tweens:[],createTween:function(ut,tt){var dt=p.Tween(l,V.opts,ut,tt,V.opts.specialEasing[ut]||V.opts.easing);return V.tweens.push(dt),dt},stop:function(ut){var tt=0,dt=ut?V.tweens.length:0;if(y)return this;for(y=!0;tt<dt;tt++)V.tweens[tt].run(1);return ut?(B.notifyWith(l,[V,1,0]),B.resolveWith(l,[V,ut])):B.rejectWith(l,[V,ut]),this}}),nt=V.props;for(rI(nt,V.opts.specialEasing);x<N;x++)if(m=Hr.prefilters[x].call(V,l,nt,V.opts),m)return b(m.stop)&&(p._queueHooks(V.elem,V.opts.queue).stop=m.stop.bind(m)),m;return p.map(nt,Od,V),b(V.opts.start)&&V.opts.start.call(l,V),V.progress(V.opts.progress).done(V.opts.done,V.opts.complete).fail(V.opts.fail).always(V.opts.always),p.fx.timer(p.extend(O,{elem:l,anim:V,queue:V.opts.queue})),V}p.Animation=p.extend(Hr,{tweeners:{"*":[function(l,c){var g=this.createTween(l,c);return Zo(g.elem,l,_r.exec(c),g),g}]},tweener:function(l,c){b(l)?(c=l,l=["*"]):l=l.match(Bt);for(var g,m=0,y=l.length;m<y;m++)g=l[m],Hr.tweeners[g]=Hr.tweeners[g]||[],Hr.tweeners[g].unshift(c)},prefilters:[eI],prefilter:function(l,c){c?Hr.prefilters.unshift(l):Hr.prefilters.push(l)}}),p.speed=function(l,c,g){var m=l&&typeof l=="object"?p.extend({},l):{complete:g||!g&&c||b(l)&&l,duration:l,easing:g&&c||c&&!b(c)&&c};return p.fx.off?m.duration=0:typeof m.duration!="number"&&(m.duration in p.fx.speeds?m.duration=p.fx.speeds[m.duration]:m.duration=p.fx.speeds._default),(m.queue==null||m.queue===!0)&&(m.queue="fx"),m.old=m.complete,m.complete=function(){b(m.old)&&m.old.call(this),m.queue&&p.dequeue(this,m.queue)},m},p.fn.extend({fadeTo:function(l,c,g,m){return this.filter(qn).css("opacity",0).show().end().animate({opacity:c},l,g,m)},animate:function(l,c,g,m){var y=p.isEmptyObject(l),x=p.speed(c,g,m),N=function(){var B=Hr(this,p.extend({},l),x);(y||mt.get(this,"finish"))&&B.stop(!0)};return N.finish=N,y||x.queue===!1?this.each(N):this.queue(x.queue,N)},stop:function(l,c,g){var m=function(y){var x=y.stop;delete y.stop,x(g)};return typeof l!="string"&&(g=c,c=l,l=void 0),c&&this.queue(l||"fx",[]),this.each(function(){var y=!0,x=l!=null&&l+"queueHooks",N=p.timers,B=mt.get(this);if(x)B[x]&&B[x].stop&&m(B[x]);else for(x in B)B[x]&&B[x].stop&&tI.test(x)&&m(B[x]);for(x=N.length;x--;)N[x].elem===this&&(l==null||N[x].queue===l)&&(N[x].anim.stop(g),y=!1,N.splice(x,1));(y||!g)&&p.dequeue(this,l)})},finish:function(l){return l!==!1&&(l=l||"fx"),this.each(function(){var c,g=mt.get(this),m=g[l+"queue"],y=g[l+"queueHooks"],x=p.timers,N=m?m.length:0;for(g.finish=!0,p.queue(this,l,[]),y&&y.stop&&y.stop.call(this,!0),c=x.length;c--;)x[c].elem===this&&x[c].queue===l&&(x[c].anim.stop(!0),x.splice(c,1));for(c=0;c<N;c++)m[c]&&m[c].finish&&m[c].finish.call(this);delete g.finish})}}),p.each(["toggle","show","hide"],function(l,c){var g=p.fn[c];p.fn[c]=function(m,y,x){return m==null||typeof m=="boolean"?g.apply(this,arguments):this.animate(ua(c,!0),m,y,x)}}),p.each({slideDown:ua("show"),slideUp:ua("hide"),slideToggle:ua("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(l,c){p.fn[l]=function(g,m,y){return this.animate(c,g,m,y)}}),p.timers=[],p.fx.tick=function(){var l,c=0,g=p.timers;for(Bi=Date.now();c<g.length;c++)l=g[c],!l()&&g[c]===l&&g.splice(c--,1);g.length||p.fx.stop(),Bi=void 0},p.fx.timer=function(l){p.timers.push(l),p.fx.start()},p.fx.interval=13,p.fx.start=function(){la||(la=!0,Bu())},p.fx.stop=function(){la=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(l,c){return l=p.fx&&p.fx.speeds[l]||l,c=c||"fx",this.queue(c,function(g,m){var y=t.setTimeout(g,l);m.stop=function(){t.clearTimeout(y)}})},function(){var l=P.createElement("input"),c=P.createElement("select"),g=c.appendChild(P.createElement("option"));l.type="checkbox",A.checkOn=l.value!=="",A.optSelected=g.selected,l=P.createElement("input"),l.value="t",l.type="radio",A.radioValue=l.value==="t"}();var Bd,Vo=p.expr.attrHandle;p.fn.extend({attr:function(l,c){return F(this,p.attr,l,c,arguments.length>1)},removeAttr:function(l){return this.each(function(){p.removeAttr(this,l)})}}),p.extend({attr:function(l,c,g){var m,y,x=l.nodeType;if(!(x===3||x===8||x===2)){if(typeof l.getAttribute=="undefined")return p.prop(l,c,g);if((x!==1||!p.isXMLDoc(l))&&(y=p.attrHooks[c.toLowerCase()]||(p.expr.match.bool.test(c)?Bd:void 0)),g!==void 0){if(g===null){p.removeAttr(l,c);return}return y&&"set"in y&&(m=y.set(l,g,c))!==void 0?m:(l.setAttribute(c,g+""),g)}return y&&"get"in y&&(m=y.get(l,c))!==null?m:(m=p.find.attr(l,c),m==null?void 0:m)}},attrHooks:{type:{set:function(l,c){if(!A.radioValue&&c==="radio"&&w(l,"input")){var g=l.value;return l.setAttribute("type",c),g&&(l.value=g),c}}}},removeAttr:function(l,c){var g,m=0,y=c&&c.match(Bt);if(y&&l.nodeType===1)for(;g=y[m++];)l.removeAttribute(g)}}),Bd={set:function(l,c,g){return c===!1?p.removeAttr(l,g):l.setAttribute(g,g),g}},p.each(p.expr.match.bool.source.match(/\w+/g),function(l,c){var g=Vo[c]||p.find.attr;Vo[c]=function(m,y,x){var N,B,O=y.toLowerCase();return x||(B=Vo[O],Vo[O]=N,N=g(m,y,x)!=null?O:null,Vo[O]=B),N}});var nI=/^(?:input|select|textarea|button)$/i,iI=/^(?:a|area)$/i;p.fn.extend({prop:function(l,c){return F(this,p.prop,l,c,arguments.length>1)},removeProp:function(l){return this.each(function(){delete this[p.propFix[l]||l]})}}),p.extend({prop:function(l,c,g){var m,y,x=l.nodeType;if(!(x===3||x===8||x===2))return(x!==1||!p.isXMLDoc(l))&&(c=p.propFix[c]||c,y=p.propHooks[c]),g!==void 0?y&&"set"in y&&(m=y.set(l,g,c))!==void 0?m:l[c]=g:y&&"get"in y&&(m=y.get(l,c))!==null?m:l[c]},propHooks:{tabIndex:{get:function(l){var c=p.find.attr(l,"tabindex");return c?parseInt(c,10):nI.test(l.nodeName)||iI.test(l.nodeName)&&l.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),A.optSelected||(p.propHooks.selected={get:function(l){var c=l.parentNode;return c&&c.parentNode&&c.parentNode.selectedIndex,null},set:function(l){var c=l.parentNode;c&&(c.selectedIndex,c.parentNode&&c.parentNode.selectedIndex)}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this});function $n(l){var c=l.match(Bt)||[];return c.join(" ")}function ti(l){return l.getAttribute&&l.getAttribute("class")||""}function Ru(l){return Array.isArray(l)?l:typeof l=="string"?l.match(Bt)||[]:[]}p.fn.extend({addClass:function(l){var c,g,m,y,x,N;return b(l)?this.each(function(B){p(this).addClass(l.call(this,B,ti(this)))}):(c=Ru(l),c.length?this.each(function(){if(m=ti(this),g=this.nodeType===1&&" "+$n(m)+" ",g){for(x=0;x<c.length;x++)y=c[x],g.indexOf(" "+y+" ")<0&&(g+=y+" ");N=$n(g),m!==N&&this.setAttribute("class",N)}}):this)},removeClass:function(l){var c,g,m,y,x,N;return b(l)?this.each(function(B){p(this).removeClass(l.call(this,B,ti(this)))}):arguments.length?(c=Ru(l),c.length?this.each(function(){if(m=ti(this),g=this.nodeType===1&&" "+$n(m)+" ",g){for(x=0;x<c.length;x++)for(y=c[x];g.indexOf(" "+y+" ")>-1;)g=g.replace(" "+y+" "," ");N=$n(g),m!==N&&this.setAttribute("class",N)}}):this):this.attr("class","")},toggleClass:function(l,c){var g,m,y,x,N=typeof l,B=N==="string"||Array.isArray(l);return b(l)?this.each(function(O){p(this).toggleClass(l.call(this,O,ti(this),c),c)}):typeof c=="boolean"&&B?c?this.addClass(l):this.removeClass(l):(g=Ru(l),this.each(function(){if(B)for(x=p(this),y=0;y<g.length;y++)m=g[y],x.hasClass(m)?x.removeClass(m):x.addClass(m);else(l===void 0||N==="boolean")&&(m=ti(this),m&&mt.set(this,"__className__",m),this.setAttribute&&this.setAttribute("class",m||l===!1?"":mt.get(this,"__className__")||""))}))},hasClass:function(l){var c,g,m=0;for(c=" "+l+" ";g=this[m++];)if(g.nodeType===1&&(" "+$n(ti(g))+" ").indexOf(c)>-1)return!0;return!1}});var oI=/\r/g;p.fn.extend({val:function(l){var c,g,m,y=this[0];return arguments.length?(m=b(l),this.each(function(x){var N;this.nodeType===1&&(m?N=l.call(this,x,p(this).val()):N=l,N==null?N="":typeof N=="number"?N+="":Array.isArray(N)&&(N=p.map(N,function(B){return B==null?"":B+""})),c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],(!c||!("set"in c)||c.set(this,N,"value")===void 0)&&(this.value=N))})):y?(c=p.valHooks[y.type]||p.valHooks[y.nodeName.toLowerCase()],c&&"get"in c&&(g=c.get(y,"value"))!==void 0?g:(g=y.value,typeof g=="string"?g.replace(oI,""):g==null?"":g)):void 0}}),p.extend({valHooks:{option:{get:function(l){var c=p.find.attr(l,"value");return c!=null?c:$n(p.text(l))}},select:{get:function(l){var c,g,m,y=l.options,x=l.selectedIndex,N=l.type==="select-one",B=N?null:[],O=N?x+1:y.length;for(x<0?m=O:m=N?x:0;m<O;m++)if(g=y[m],(g.selected||m===x)&&!g.disabled&&(!g.parentNode.disabled||!w(g.parentNode,"optgroup"))){if(c=p(g).val(),N)return c;B.push(c)}return B},set:function(l,c){for(var g,m,y=l.options,x=p.makeArray(c),N=y.length;N--;)m=y[N],(m.selected=p.inArray(p.valHooks.option.get(m),x)>-1)&&(g=!0);return g||(l.selectedIndex=-1),x}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(l,c){if(Array.isArray(c))return l.checked=p.inArray(p(l).val(),c)>-1}},A.checkOn||(p.valHooks[this].get=function(l){return l.getAttribute("value")===null?"on":l.value})});var Uo=t.location,Rd={guid:Date.now()},Gu=/\?/;p.parseXML=function(l){var c,g;if(!l||typeof l!="string")return null;try{c=new t.DOMParser().parseFromString(l,"text/xml")}catch(m){}return g=c&&c.getElementsByTagName("parsererror")[0],(!c||g)&&p.error("Invalid XML: "+(g?p.map(g.childNodes,function(m){return m.textContent}).join(`
`):l)),c};var Gd=/^(?:focusinfocus|focusoutblur)$/,Zd=function(l){l.stopPropagation()};p.extend(p.event,{trigger:function(l,c,g,m){var y,x,N,B,O,V,nt,ut,tt=[g||P],dt=d.call(l,"type")?l.type:l,Ot=d.call(l,"namespace")?l.namespace.split("."):[];if(x=ut=N=g=g||P,!(g.nodeType===3||g.nodeType===8)&&!Gd.test(dt+p.event.triggered)&&(dt.indexOf(".")>-1&&(Ot=dt.split("."),dt=Ot.shift(),Ot.sort()),O=dt.indexOf(":")<0&&"on"+dt,l=l[p.expando]?l:new p.Event(dt,typeof l=="object"&&l),l.isTrigger=m?2:3,l.namespace=Ot.join("."),l.rnamespace=l.namespace?new RegExp("(^|\\.)"+Ot.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l.result=void 0,l.target||(l.target=g),c=c==null?[l]:p.makeArray(c,[l]),nt=p.event.special[dt]||{},!(!m&&nt.trigger&&nt.trigger.apply(g,c)===!1))){if(!m&&!nt.noBubble&&!S(g)){for(B=nt.delegateType||dt,Gd.test(B+dt)||(x=x.parentNode);x;x=x.parentNode)tt.push(x),N=x;N===(g.ownerDocument||P)&&tt.push(N.defaultView||N.parentWindow||t)}for(y=0;(x=tt[y++])&&!l.isPropagationStopped();)ut=x,l.type=y>1?B:nt.bindType||dt,V=(mt.get(x,"events")||Object.create(null))[l.type]&&mt.get(x,"handle"),V&&V.apply(x,c),V=O&&x[O],V&&V.apply&&Pe(x)&&(l.result=V.apply(x,c),l.result===!1&&l.preventDefault());return l.type=dt,!m&&!l.isDefaultPrevented()&&(!nt._default||nt._default.apply(tt.pop(),c)===!1)&&Pe(g)&&O&&b(g[dt])&&!S(g)&&(N=g[O],N&&(g[O]=null),p.event.triggered=dt,l.isPropagationStopped()&&ut.addEventListener(dt,Zd),g[dt](),l.isPropagationStopped()&&ut.removeEventListener(dt,Zd),p.event.triggered=void 0,N&&(g[O]=N)),l.result}},simulate:function(l,c,g){var m=p.extend(new p.Event,g,{type:l,isSimulated:!0});p.event.trigger(m,null,c)}}),p.fn.extend({trigger:function(l,c){return this.each(function(){p.event.trigger(l,c,this)})},triggerHandler:function(l,c){var g=this[0];if(g)return p.event.trigger(l,c,g,!0)}});var sI=/\[\]$/,jd=/\r?\n/g,aI=/^(?:submit|button|image|reset|file)$/i,lI=/^(?:input|select|textarea|keygen)/i;function Zu(l,c,g,m){var y;if(Array.isArray(c))p.each(c,function(x,N){g||sI.test(l)?m(l,N):Zu(l+"["+(typeof N=="object"&&N!=null?x:"")+"]",N,g,m)});else if(!g&&U(c)==="object")for(y in c)Zu(l+"["+y+"]",c[y],g,m);else m(l,c)}p.param=function(l,c){var g,m=[],y=function(x,N){var B=b(N)?N():N;m[m.length]=encodeURIComponent(x)+"="+encodeURIComponent(B==null?"":B)};if(l==null)return"";if(Array.isArray(l)||l.jquery&&!p.isPlainObject(l))p.each(l,function(){y(this.name,this.value)});else for(g in l)Zu(g,l[g],c,y);return m.join("&")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var l=p.prop(this,"elements");return l?p.makeArray(l):this}).filter(function(){var l=this.type;return this.name&&!p(this).is(":disabled")&&lI.test(this.nodeName)&&!aI.test(l)&&(this.checked||!Tn.test(l))}).map(function(l,c){var g=p(this).val();return g==null?null:Array.isArray(g)?p.map(g,function(m){return{name:c.name,value:m.replace(jd,`\r
`)}}):{name:c.name,value:g.replace(jd,`\r
`)}}).get()}});var uI=/%20/g,cI=/#.*$/,fI=/([?&])_=[^&]*/,hI=/^(.*?):[ \t]*([^\r\n]*)$/mg,dI=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,gI=/^(?:GET|HEAD)$/,pI=/^\/\//,Wd={},ju={},Yd="*/".concat("*"),Wu=P.createElement("a");Wu.href=Uo.href;function Fd(l){return function(c,g){typeof c!="string"&&(g=c,c="*");var m,y=0,x=c.toLowerCase().match(Bt)||[];if(b(g))for(;m=x[y++];)m[0]==="+"?(m=m.slice(1)||"*",(l[m]=l[m]||[]).unshift(g)):(l[m]=l[m]||[]).push(g)}}function Vd(l,c,g,m){var y={},x=l===ju;function N(B){var O;return y[B]=!0,p.each(l[B]||[],function(V,nt){var ut=nt(c,g,m);if(typeof ut=="string"&&!x&&!y[ut])return c.dataTypes.unshift(ut),N(ut),!1;if(x)return!(O=ut)}),O}return N(c.dataTypes[0])||!y["*"]&&N("*")}function Yu(l,c){var g,m,y=p.ajaxSettings.flatOptions||{};for(g in c)c[g]!==void 0&&((y[g]?l:m||(m={}))[g]=c[g]);return m&&p.extend(!0,l,m),l}function mI(l,c,g){for(var m,y,x,N,B=l.contents,O=l.dataTypes;O[0]==="*";)O.shift(),m===void 0&&(m=l.mimeType||c.getResponseHeader("Content-Type"));if(m){for(y in B)if(B[y]&&B[y].test(m)){O.unshift(y);break}}if(O[0]in g)x=O[0];else{for(y in g){if(!O[0]||l.converters[y+" "+O[0]]){x=y;break}N||(N=y)}x=x||N}if(x)return x!==O[0]&&O.unshift(x),g[x]}function vI(l,c,g,m){var y,x,N,B,O,V={},nt=l.dataTypes.slice();if(nt[1])for(N in l.converters)V[N.toLowerCase()]=l.converters[N];for(x=nt.shift();x;)if(l.responseFields[x]&&(g[l.responseFields[x]]=c),!O&&m&&l.dataFilter&&(c=l.dataFilter(c,l.dataType)),O=x,x=nt.shift(),x){if(x==="*")x=O;else if(O!=="*"&&O!==x){if(N=V[O+" "+x]||V["* "+x],!N){for(y in V)if(B=y.split(" "),B[1]===x&&(N=V[O+" "+B[0]]||V["* "+B[0]],N)){N===!0?N=V[y]:V[y]!==!0&&(x=B[0],nt.unshift(B[1]));break}}if(N!==!0)if(N&&l.throws)c=N(c);else try{c=N(c)}catch(ut){return{state:"parsererror",error:N?ut:"No conversion from "+O+" to "+x}}}}return{state:"success",data:c}}p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Uo.href,type:"GET",isLocal:dI.test(Uo.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Yd,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(l,c){return c?Yu(Yu(l,p.ajaxSettings),c):Yu(p.ajaxSettings,l)},ajaxPrefilter:Fd(Wd),ajaxTransport:Fd(ju),ajax:function(l,c){typeof l=="object"&&(c=l,l=void 0),c=c||{};var g,m,y,x,N,B,O,V,nt,ut,tt=p.ajaxSetup({},c),dt=tt.context||tt,Ot=tt.context&&(dt.nodeType||dt.jquery)?p(dt):p.event,re=p.Deferred(),Yt=p.Callbacks("once memory"),He=tt.statusCode||{},Ze={},rn={},nn="canceled",Kt={readyState:0,getResponseHeader:function(ne){var ze;if(O){if(!x)for(x={};ze=hI.exec(y);)x[ze[1].toLowerCase()+" "]=(x[ze[1].toLowerCase()+" "]||[]).concat(ze[2]);ze=x[ne.toLowerCase()+" "]}return ze==null?null:ze.join(", ")},getAllResponseHeaders:function(){return O?y:null},setRequestHeader:function(ne,ze){return O==null&&(ne=rn[ne.toLowerCase()]=rn[ne.toLowerCase()]||ne,Ze[ne]=ze),this},overrideMimeType:function(ne){return O==null&&(tt.mimeType=ne),this},statusCode:function(ne){var ze;if(ne)if(O)Kt.always(ne[Kt.status]);else for(ze in ne)He[ze]=[He[ze],ne[ze]];return this},abort:function(ne){var ze=ne||nn;return g&&g.abort(ze),ei(0,ze),this}};if(re.promise(Kt),tt.url=((l||tt.url||Uo.href)+"").replace(pI,Uo.protocol+"//"),tt.type=c.method||c.type||tt.method||tt.type,tt.dataTypes=(tt.dataType||"*").toLowerCase().match(Bt)||[""],tt.crossDomain==null){B=P.createElement("a");try{B.href=tt.url,B.href=B.href,tt.crossDomain=Wu.protocol+"//"+Wu.host!=B.protocol+"//"+B.host}catch(ne){tt.crossDomain=!0}}if(tt.data&&tt.processData&&typeof tt.data!="string"&&(tt.data=p.param(tt.data,tt.traditional)),Vd(Wd,tt,c,Kt),O)return Kt;V=p.event&&tt.global,V&&p.active++===0&&p.event.trigger("ajaxStart"),tt.type=tt.type.toUpperCase(),tt.hasContent=!gI.test(tt.type),m=tt.url.replace(cI,""),tt.hasContent?tt.data&&tt.processData&&(tt.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(tt.data=tt.data.replace(uI,"+")):(ut=tt.url.slice(m.length),tt.data&&(tt.processData||typeof tt.data=="string")&&(m+=(Gu.test(m)?"&":"?")+tt.data,delete tt.data),tt.cache===!1&&(m=m.replace(fI,"$1"),ut=(Gu.test(m)?"&":"?")+"_="+Rd.guid+++ut),tt.url=m+ut),tt.ifModified&&(p.lastModified[m]&&Kt.setRequestHeader("If-Modified-Since",p.lastModified[m]),p.etag[m]&&Kt.setRequestHeader("If-None-Match",p.etag[m])),(tt.data&&tt.hasContent&&tt.contentType!==!1||c.contentType)&&Kt.setRequestHeader("Content-Type",tt.contentType),Kt.setRequestHeader("Accept",tt.dataTypes[0]&&tt.accepts[tt.dataTypes[0]]?tt.accepts[tt.dataTypes[0]]+(tt.dataTypes[0]!=="*"?", "+Yd+"; q=0.01":""):tt.accepts["*"]);for(nt in tt.headers)Kt.setRequestHeader(nt,tt.headers[nt]);if(tt.beforeSend&&(tt.beforeSend.call(dt,Kt,tt)===!1||O))return Kt.abort();if(nn="abort",Yt.add(tt.complete),Kt.done(tt.success),Kt.fail(tt.error),g=Vd(ju,tt,c,Kt),!g)ei(-1,"No Transport");else{if(Kt.readyState=1,V&&Ot.trigger("ajaxSend",[Kt,tt]),O)return Kt;tt.async&&tt.timeout>0&&(N=t.setTimeout(function(){Kt.abort("timeout")},tt.timeout));try{O=!1,g.send(Ze,ei)}catch(ne){if(O)throw ne;ei(-1,ne)}}function ei(ne,ze,Xo,Vu){var on,Ho,sn,Sn,Pn,Zr=ze;O||(O=!0,N&&t.clearTimeout(N),g=void 0,y=Vu||"",Kt.readyState=ne>0?4:0,on=ne>=200&&ne<300||ne===304,Xo&&(Sn=mI(tt,Kt,Xo)),!on&&p.inArray("script",tt.dataTypes)>-1&&p.inArray("json",tt.dataTypes)<0&&(tt.converters["text script"]=function(){}),Sn=vI(tt,Sn,Kt,on),on?(tt.ifModified&&(Pn=Kt.getResponseHeader("Last-Modified"),Pn&&(p.lastModified[m]=Pn),Pn=Kt.getResponseHeader("etag"),Pn&&(p.etag[m]=Pn)),ne===204||tt.type==="HEAD"?Zr="nocontent":ne===304?Zr="notmodified":(Zr=Sn.state,Ho=Sn.data,sn=Sn.error,on=!sn)):(sn=Zr,(ne||!Zr)&&(Zr="error",ne<0&&(ne=0))),Kt.status=ne,Kt.statusText=(ze||Zr)+"",on?re.resolveWith(dt,[Ho,Zr,Kt]):re.rejectWith(dt,[Kt,Zr,sn]),Kt.statusCode(He),He=void 0,V&&Ot.trigger(on?"ajaxSuccess":"ajaxError",[Kt,tt,on?Ho:sn]),Yt.fireWith(dt,[Kt,Zr]),V&&(Ot.trigger("ajaxComplete",[Kt,tt]),--p.active||p.event.trigger("ajaxStop")))}return Kt},getJSON:function(l,c,g){return p.get(l,c,g,"json")},getScript:function(l,c){return p.get(l,void 0,c,"script")}}),p.each(["get","post"],function(l,c){p[c]=function(g,m,y,x){return b(m)&&(x=x||y,y=m,m=void 0),p.ajax(p.extend({url:g,type:c,dataType:x,data:m,success:y},p.isPlainObject(g)&&g))}}),p.ajaxPrefilter(function(l){var c;for(c in l.headers)c.toLowerCase()==="content-type"&&(l.contentType=l.headers[c]||"")}),p._evalUrl=function(l,c,g){return p.ajax({url:l,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(m){p.globalEval(m,c,g)}})},p.fn.extend({wrapAll:function(l){var c;return this[0]&&(b(l)&&(l=l.call(this[0])),c=p(l,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var g=this;g.firstElementChild;)g=g.firstElementChild;return g}).append(this)),this},wrapInner:function(l){return b(l)?this.each(function(c){p(this).wrapInner(l.call(this,c))}):this.each(function(){var c=p(this),g=c.contents();g.length?g.wrapAll(l):c.append(l)})},wrap:function(l){var c=b(l);return this.each(function(g){p(this).wrapAll(c?l.call(this,g):l)})},unwrap:function(l){return this.parent(l).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}}),p.expr.pseudos.hidden=function(l){return!p.expr.pseudos.visible(l)},p.expr.pseudos.visible=function(l){return!!(l.offsetWidth||l.offsetHeight||l.getClientRects().length)},p.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(l){}};var II={0:200,1223:204},_o=p.ajaxSettings.xhr();A.cors=!!_o&&"withCredentials"in _o,A.ajax=_o=!!_o,p.ajaxTransport(function(l){var c,g;if(A.cors||_o&&!l.crossDomain)return{send:function(m,y){var x,N=l.xhr();if(N.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(x in l.xhrFields)N[x]=l.xhrFields[x];l.mimeType&&N.overrideMimeType&&N.overrideMimeType(l.mimeType),!l.crossDomain&&!m["X-Requested-With"]&&(m["X-Requested-With"]="XMLHttpRequest");for(x in m)N.setRequestHeader(x,m[x]);c=function(B){return function(){c&&(c=g=N.onload=N.onerror=N.onabort=N.ontimeout=N.onreadystatechange=null,B==="abort"?N.abort():B==="error"?typeof N.status!="number"?y(0,"error"):y(N.status,N.statusText):y(II[N.status]||N.status,N.statusText,(N.responseType||"text")!=="text"||typeof N.responseText!="string"?{binary:N.response}:{text:N.responseText},N.getAllResponseHeaders()))}},N.onload=c(),g=N.onerror=N.ontimeout=c("error"),N.onabort!==void 0?N.onabort=g:N.onreadystatechange=function(){N.readyState===4&&t.setTimeout(function(){c&&g()})},c=c("abort");try{N.send(l.hasContent&&l.data||null)}catch(B){if(c)throw B}},abort:function(){c&&c()}}}),p.ajaxPrefilter(function(l){l.crossDomain&&(l.contents.script=!1)}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(l){return p.globalEval(l),l}}}),p.ajaxPrefilter("script",function(l){l.cache===void 0&&(l.cache=!1),l.crossDomain&&(l.type="GET")}),p.ajaxTransport("script",function(l){if(l.crossDomain||l.scriptAttrs){var c,g;return{send:function(m,y){c=p("<script>").attr(l.scriptAttrs||{}).prop({charset:l.scriptCharset,src:l.url}).on("load error",g=function(x){c.remove(),g=null,x&&y(x.type==="error"?404:200,x.type)}),P.head.appendChild(c[0])},abort:function(){g&&g()}}}});var Ud=[],Fu=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var l=Ud.pop()||p.expando+"_"+Rd.guid++;return this[l]=!0,l}}),p.ajaxPrefilter("json jsonp",function(l,c,g){var m,y,x,N=l.jsonp!==!1&&(Fu.test(l.url)?"url":typeof l.data=="string"&&(l.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Fu.test(l.data)&&"data");if(N||l.dataTypes[0]==="jsonp")return m=l.jsonpCallback=b(l.jsonpCallback)?l.jsonpCallback():l.jsonpCallback,N?l[N]=l[N].replace(Fu,"$1"+m):l.jsonp!==!1&&(l.url+=(Gu.test(l.url)?"&":"?")+l.jsonp+"="+m),l.converters["script json"]=function(){return x||p.error(m+" was not called"),x[0]},l.dataTypes[0]="json",y=t[m],t[m]=function(){x=arguments},g.always(function(){y===void 0?p(t).removeProp(m):t[m]=y,l[m]&&(l.jsonpCallback=c.jsonpCallback,Ud.push(m)),x&&b(y)&&y(x[0]),x=y=void 0}),"script"}),A.createHTMLDocument=function(){var l=P.implementation.createHTMLDocument("").body;return l.innerHTML="<form></form><form></form>",l.childNodes.length===2}(),p.parseHTML=function(l,c,g){if(typeof l!="string")return[];typeof c=="boolean"&&(g=c,c=!1);var m,y,x;return c||(A.createHTMLDocument?(c=P.implementation.createHTMLDocument(""),m=c.createElement("base"),m.href=P.location.href,c.head.appendChild(m)):c=P),y=Nt.exec(l),x=!g&&[],y?[c.createElement(y[1])]:(y=Cd([l],c,x),x&&x.length&&p(x).remove(),p.merge([],y.childNodes))},p.fn.load=function(l,c,g){var m,y,x,N=this,B=l.indexOf(" ");return B>-1&&(m=$n(l.slice(B)),l=l.slice(0,B)),b(c)?(g=c,c=void 0):c&&typeof c=="object"&&(y="POST"),N.length>0&&p.ajax({url:l,type:y||"GET",dataType:"html",data:c}).done(function(O){x=arguments,N.html(m?p("<div>").append(p.parseHTML(O)).find(m):O)}).always(g&&function(O,V){N.each(function(){g.apply(this,x||[O.responseText,V,O])})}),this},p.expr.pseudos.animated=function(l){return p.grep(p.timers,function(c){return l===c.elem}).length},p.offset={setOffset:function(l,c,g){var m,y,x,N,B,O,V,nt=p.css(l,"position"),ut=p(l),tt={};nt==="static"&&(l.style.position="relative"),B=ut.offset(),x=p.css(l,"top"),O=p.css(l,"left"),V=(nt==="absolute"||nt==="fixed")&&(x+O).indexOf("auto")>-1,V?(m=ut.position(),N=m.top,y=m.left):(N=parseFloat(x)||0,y=parseFloat(O)||0),b(c)&&(c=c.call(l,g,p.extend({},B))),c.top!=null&&(tt.top=c.top-B.top+N),c.left!=null&&(tt.left=c.left-B.left+y),"using"in c?c.using.call(l,tt):ut.css(tt)}},p.fn.extend({offset:function(l){if(arguments.length)return l===void 0?this:this.each(function(y){p.offset.setOffset(this,l,y)});var c,g,m=this[0];if(m)return m.getClientRects().length?(c=m.getBoundingClientRect(),g=m.ownerDocument.defaultView,{top:c.top+g.pageYOffset,left:c.left+g.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var l,c,g,m=this[0],y={top:0,left:0};if(p.css(m,"position")==="fixed")c=m.getBoundingClientRect();else{for(c=this.offset(),g=m.ownerDocument,l=m.offsetParent||g.documentElement;l&&(l===g.body||l===g.documentElement)&&p.css(l,"position")==="static";)l=l.parentNode;l&&l!==m&&l.nodeType===1&&(y=p(l).offset(),y.top+=p.css(l,"borderTopWidth",!0),y.left+=p.css(l,"borderLeftWidth",!0))}return{top:c.top-y.top-p.css(m,"marginTop",!0),left:c.left-y.left-p.css(m,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var l=this.offsetParent;l&&p.css(l,"position")==="static";)l=l.offsetParent;return l||Xr})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(l,c){var g=c==="pageYOffset";p.fn[l]=function(m){return F(this,function(y,x,N){var B;if(S(y)?B=y:y.nodeType===9&&(B=y.defaultView),N===void 0)return B?B[c]:y[x];B?B.scrollTo(g?B.pageXOffset:N,g?N:B.pageYOffset):y[x]=N},l,m,arguments.length)}}),p.each(["top","left"],function(l,c){p.cssHooks[c]=Td(A.pixelPosition,function(g,m){if(m)return m=Fo(g,c),ku.test(m)?p(g).position()[c]+"px":m})}),p.each({Height:"height",Width:"width"},function(l,c){p.each({padding:"inner"+l,content:c,"":"outer"+l},function(g,m){p.fn[m]=function(y,x){var N=arguments.length&&(g||typeof y!="boolean"),B=g||(y===!0||x===!0?"margin":"border");return F(this,function(O,V,nt){var ut;return S(O)?m.indexOf("outer")===0?O["inner"+l]:O.document.documentElement["client"+l]:O.nodeType===9?(ut=O.documentElement,Math.max(O.body["scroll"+l],ut["scroll"+l],O.body["offset"+l],ut["offset"+l],ut["client"+l])):nt===void 0?p.css(O,V,B):p.style(O,V,nt,B)},c,N?y:void 0,N)}})}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(l,c){p.fn[c]=function(g){return this.on(c,g)}}),p.fn.extend({bind:function(l,c,g){return this.on(l,null,c,g)},unbind:function(l,c){return this.off(l,null,c)},delegate:function(l,c,g,m){return this.on(c,l,g,m)},undelegate:function(l,c,g){return arguments.length===1?this.off(l,"**"):this.off(c,l||"**",g)},hover:function(l,c){return this.on("mouseenter",l).on("mouseleave",c||l)}}),p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(l,c){p.fn[c]=function(g,m){return arguments.length>0?this.on(c,null,g,m):this.trigger(c)}});var AI=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;p.proxy=function(l,c){var g,m,y;if(typeof c=="string"&&(g=l[c],c=l,l=g),!!b(l))return m=i.call(arguments,2),y=function(){return l.apply(c||this,m.concat(i.call(arguments)))},y.guid=l.guid=l.guid||p.guid++,y},p.holdReady=function(l){l?p.readyWait++:p.ready(!0)},p.isArray=Array.isArray,p.parseJSON=JSON.parse,p.nodeName=w,p.isFunction=b,p.isWindow=S,p.camelCase=Ft,p.type=U,p.now=Date.now,p.isNumeric=function(l){var c=p.type(l);return(c==="number"||c==="string")&&!isNaN(l-parseFloat(l))},p.trim=function(l){return l==null?"":(l+"").replace(AI,"$1")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return p});var yI=t.jQuery,CI=t.$;return p.noConflict=function(l){return t.$===p&&(t.$=CI),l&&t.jQuery===p&&(t.jQuery=yI),p},typeof e=="undefined"&&(t.jQuery=t.$=p),p})});var Ps=tg(Jf=>{(function(t){var e=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global;if(typeof define=="function"&&define.amd)define(["underscore","jquery","exports"],function(i,o,s){e.Backbone=t(e,s,i,o)});else if(typeof Jf!="undefined"){var r=(Am(),BI(Im)),n;try{n=wn()}catch(i){}t(e,Jf,r,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)})(function(t,e,r,n){var i=t.Backbone,o=Array.prototype.slice;e.VERSION="1.4.1",e.$=n,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s=e.Events={},a=/\s+/,u,h=function(C,T,k,R,F){var st=0,It;if(k&&typeof k=="object")for(R!==void 0&&("context"in F)&&F.context===void 0&&(F.context=R),It=r.keys(k);st<It.length;st++)T=h(C,T,It[st],k[It[st]],F);else if(k&&a.test(k))for(It=k.split(a);st<It.length;st++)T=C(T,It[st],R,F);else T=C(T,k,R,F);return T};s.on=function(C,T,k){if(this._events=h(d,this._events||{},C,T,{context:k,ctx:this,listening:u}),u){var R=this._listeners||(this._listeners={});R[u.id]=u,u.interop=!1}return this},s.listenTo=function(C,T,k){if(!C)return this;var R=C._listenId||(C._listenId=r.uniqueId("l")),F=this._listeningTo||(this._listeningTo={}),st=u=F[R];st||(this._listenId||(this._listenId=r.uniqueId("l")),st=u=F[R]=new P(this,C));var It=f(C,T,k,this);if(u=void 0,It)throw It;return st.interop&&st.on(T,k),this};var d=function(C,T,k,R){if(k){var F=C[T]||(C[T]=[]),st=R.context,It=R.ctx,Lt=R.listening;Lt&&Lt.count++,F.push({callback:k,context:st,ctx:st||It,listening:Lt})}return C},f=function(C,T,k,R){try{C.on(T,k,R)}catch(F){return F}};s.off=function(C,T,k){return this._events?(this._events=h(I,this._events,C,T,{context:k,listeners:this._listeners}),this):this},s.stopListening=function(C,T,k){var R=this._listeningTo;if(!R)return this;for(var F=C?[C._listenId]:r.keys(R),st=0;st<F.length;st++){var It=R[F[st]];if(!It)break;It.obj.off(T,k,this),It.interop&&It.off(T,k)}return r.isEmpty(R)&&(this._listeningTo=void 0),this};var I=function(C,T,k,R){if(C){var F=R.context,st=R.listeners,It=0,Lt;if(!T&&!F&&!k){for(Lt=r.keys(st);It<Lt.length;It++)st[Lt[It]].cleanup();return}for(Lt=T?[T]:r.keys(C);It<Lt.length;It++){T=Lt[It];var Ft=C[T];if(!Ft)break;for(var Pe=[],De=0;De<Ft.length;De++){var mt=Ft[De];if(k&&k!==mt.callback&&k!==mt.callback._callback||F&&F!==mt.context)Pe.push(mt);else{var se=mt.listening;se&&se.off(T,k)}}Pe.length?C[T]=Pe:delete C[T]}return C}};s.once=function(C,T,k){var R=h(A,{},C,T,this.off.bind(this));return typeof C=="string"&&k==null&&(T=void 0),this.on(R,T,k)},s.listenToOnce=function(C,T,k){var R=h(A,{},T,k,this.stopListening.bind(this,C));return this.listenTo(C,R)};var A=function(C,T,k,R){if(k){var F=C[T]=r.once(function(){R(T,F),k.apply(this,arguments)});F._callback=k}return C};s.trigger=function(C){if(!this._events)return this;for(var T=Math.max(0,arguments.length-1),k=Array(T),R=0;R<T;R++)k[R]=arguments[R+1];return h(b,this._events,C,void 0,k),this};var b=function(C,T,k,R){if(C){var F=C[T],st=C.all;F&&st&&(st=st.slice()),F&&S(F,R),st&&S(st,[T].concat(R))}return C},S=function(C,T){var k,R=-1,F=C.length,st=T[0],It=T[1],Lt=T[2];switch(T.length){case 0:for(;++R<F;)(k=C[R]).callback.call(k.ctx);return;case 1:for(;++R<F;)(k=C[R]).callback.call(k.ctx,st);return;case 2:for(;++R<F;)(k=C[R]).callback.call(k.ctx,st,It);return;case 3:for(;++R<F;)(k=C[R]).callback.call(k.ctx,st,It,Lt);return;default:for(;++R<F;)(k=C[R]).callback.apply(k.ctx,T);return}},P=function(C,T){this.id=C._listenId,this.listener=C,this.obj=T,this.interop=!0,this.count=0,this._events=void 0};P.prototype.on=s.on,P.prototype.off=function(C,T){var k;this.interop?(this._events=h(I,this._events,C,T,{context:void 0,listeners:void 0}),k=!this._events):(this.count--,k=this.count===0),k&&this.cleanup()},P.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},s.bind=s.on,s.unbind=s.off,r.extend(e,s);var E=e.Model=function(C,T){var k=C||{};T||(T={}),this.preinitialize.apply(this,arguments),this.cid=r.uniqueId(this.cidPrefix),this.attributes={},T.collection&&(this.collection=T.collection),T.parse&&(k=this.parse(k,T)||{});var R=r.result(this,"defaults");k=r.defaults(r.extend({},R,k),R),this.set(k,T),this.changed={},this.initialize.apply(this,arguments)};r.extend(E.prototype,s,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(C){return r.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(C){return this.attributes[C]},escape:function(C){return r.escape(this.get(C))},has:function(C){return this.get(C)!=null},matches:function(C){return!!r.iteratee(C,this)(this.attributes)},set:function(C,T,k){if(C==null)return this;var R;if(typeof C=="object"?(R=C,k=T):(R={})[C]=T,k||(k={}),!this._validate(R,k))return!1;var F=k.unset,st=k.silent,It=[],Lt=this._changing;this._changing=!0,Lt||(this._previousAttributes=r.clone(this.attributes),this.changed={});var Ft=this.attributes,Pe=this.changed,De=this._previousAttributes;for(var mt in R)T=R[mt],r.isEqual(Ft[mt],T)||It.push(mt),r.isEqual(De[mt],T)?delete Pe[mt]:Pe[mt]=T,F?delete Ft[mt]:Ft[mt]=T;if(this.idAttribute in R){var se=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,se,k)}if(!st){It.length&&(this._pending=k);for(var me=0;me<It.length;me++)this.trigger("change:"+It[me],this,Ft[It[me]],k)}if(Lt)return this;if(!st)for(;this._pending;)k=this._pending,this._pending=!1,this.trigger("change",this,k);return this._pending=!1,this._changing=!1,this},unset:function(C,T){return this.set(C,void 0,r.extend({},T,{unset:!0}))},clear:function(C){var T={};for(var k in this.attributes)T[k]=void 0;return this.set(T,r.extend({},C,{unset:!0}))},hasChanged:function(C){return C==null?!r.isEmpty(this.changed):r.has(this.changed,C)},changedAttributes:function(C){if(!C)return this.hasChanged()?r.clone(this.changed):!1;var T=this._changing?this._previousAttributes:this.attributes,k={},R;for(var F in C){var st=C[F];r.isEqual(T[F],st)||(k[F]=st,R=!0)}return R?k:!1},previous:function(C){return C==null||!this._previousAttributes?null:this._previousAttributes[C]},previousAttributes:function(){return r.clone(this._previousAttributes)},fetch:function(C){C=r.extend({parse:!0},C);var T=this,k=C.success;return C.success=function(R){var F=C.parse?T.parse(R,C):R;if(!T.set(F,C))return!1;k&&k.call(C.context,T,R,C),T.trigger("sync",T,R,C)},ee(this,C),this.sync("read",this,C)},save:function(C,T,k){var R;C==null||typeof C=="object"?(R=C,k=T):(R={})[C]=T,k=r.extend({validate:!0,parse:!0},k);var F=k.wait;if(R&&!F){if(!this.set(R,k))return!1}else if(!this._validate(R,k))return!1;var st=this,It=k.success,Lt=this.attributes;k.success=function(De){st.attributes=Lt;var mt=k.parse?st.parse(De,k):De;if(F&&(mt=r.extend({},R,mt)),mt&&!st.set(mt,k))return!1;It&&It.call(k.context,st,De,k),st.trigger("sync",st,De,k)},ee(this,k),R&&F&&(this.attributes=r.extend({},Lt,R));var Ft=this.isNew()?"create":k.patch?"patch":"update";Ft==="patch"&&!k.attrs&&(k.attrs=R);var Pe=this.sync(Ft,this,k);return this.attributes=Lt,Pe},destroy:function(C){C=C?r.clone(C):{};var T=this,k=C.success,R=C.wait,F=function(){T.stopListening(),T.trigger("destroy",T,T.collection,C)};C.success=function(It){R&&F(),k&&k.call(C.context,T,It,C),T.isNew()||T.trigger("sync",T,It,C)};var st=!1;return this.isNew()?r.defer(C.success):(ee(this,C),st=this.sync("delete",this,C)),R||F(),st},url:function(){var C=r.result(this,"urlRoot")||r.result(this.collection,"url")||Tt();if(this.isNew())return C;var T=this.get(this.idAttribute);return C.replace(/[^\/]$/,"$&/")+encodeURIComponent(T)},parse:function(C,T){return C},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(C){return this._validate({},r.extend({},C,{validate:!0}))},_validate:function(C,T){if(!T.validate||!this.validate)return!0;C=r.extend({},this.attributes,C);var k=this.validationError=this.validate(C,T)||null;return k?(this.trigger("invalid",this,k,r.extend(T,{validationError:k})),!1):!0}});var j=e.Collection=function(C,T){T||(T={}),this.preinitialize.apply(this,arguments),T.model&&(this.model=T.model),T.comparator!==void 0&&(this.comparator=T.comparator),this._reset(),this.initialize.apply(this,arguments),C&&this.reset(C,r.extend({silent:!0},T))},U={add:!0,remove:!0,merge:!0},Q={add:!0,remove:!1},rt=function(C,T,k){k=Math.min(Math.max(k,0),C.length);var R=Array(C.length-k),F=T.length,st;for(st=0;st<R.length;st++)R[st]=C[st+k];for(st=0;st<F;st++)C[st+k]=T[st];for(st=0;st<R.length;st++)C[st+F+k]=R[st]};r.extend(j.prototype,s,{model:E,preinitialize:function(){},initialize:function(){},toJSON:function(C){return this.map(function(T){return T.toJSON(C)})},sync:function(){return e.sync.apply(this,arguments)},add:function(C,T){return this.set(C,r.extend({merge:!1},T,Q))},remove:function(C,T){T=r.extend({},T);var k=!r.isArray(C);C=k?[C]:C.slice();var R=this._removeModels(C,T);return!T.silent&&R.length&&(T.changes={added:[],merged:[],removed:R},this.trigger("update",this,T)),k?R[0]:R},set:function(C,T){if(C!=null){T=r.extend({},U,T),T.parse&&!this._isModel(C)&&(C=this.parse(C,T)||[]);var k=!r.isArray(C);C=k?[C]:C.slice();var R=T.at;R!=null&&(R=+R),R>this.length&&(R=this.length),R<0&&(R+=this.length+1);var F=[],st=[],It=[],Lt=[],Ft={},Pe=T.add,De=T.merge,mt=T.remove,se=!1,me=this.comparator&&R==null&&T.sort!==!1,be=r.isString(this.comparator)?this.comparator:null,Ne,Re;for(Re=0;Re<C.length;Re++){Ne=C[Re];var dr=this.get(Ne);if(dr){if(De&&Ne!==dr){var _r=this._isModel(Ne)?Ne.attributes:Ne;T.parse&&(_r=dr.parse(_r,T)),dr.set(_r,T),It.push(dr),me&&!se&&(se=dr.hasChanged(be))}Ft[dr.cid]||(Ft[dr.cid]=!0,F.push(dr)),C[Re]=dr}else Pe&&(Ne=C[Re]=this._prepareModel(Ne,T),Ne&&(st.push(Ne),this._addReference(Ne,T),Ft[Ne.cid]=!0,F.push(Ne)))}if(mt){for(Re=0;Re<this.length;Re++)Ne=this.models[Re],Ft[Ne.cid]||Lt.push(Ne);Lt.length&&this._removeModels(Lt,T)}var wr=!1,Xr=!me&&Pe&&mt;if(F.length&&Xr?(wr=this.length!==F.length||r.some(this.models,function(en,Go){return en!==F[Go]}),this.models.length=0,rt(this.models,F,0),this.length=this.models.length):st.length&&(me&&(se=!0),rt(this.models,st,R==null?this.length:R),this.length=this.models.length),se&&this.sort({silent:!0}),!T.silent){for(Re=0;Re<st.length;Re++)R!=null&&(T.index=R+Re),Ne=st[Re],Ne.trigger("add",Ne,this,T);(se||wr)&&this.trigger("sort",this,T),(st.length||Lt.length||It.length)&&(T.changes={added:st,removed:Lt,merged:It},this.trigger("update",this,T))}return k?C[0]:C}},reset:function(C,T){T=T?r.clone(T):{};for(var k=0;k<this.models.length;k++)this._removeReference(this.models[k],T);return T.previousModels=this.models,this._reset(),C=this.add(C,r.extend({silent:!0},T)),T.silent||this.trigger("reset",this,T),C},push:function(C,T){return this.add(C,r.extend({at:this.length},T))},pop:function(C){var T=this.at(this.length-1);return this.remove(T,C)},unshift:function(C,T){return this.add(C,r.extend({at:0},T))},shift:function(C){var T=this.at(0);return this.remove(T,C)},slice:function(){return o.apply(this.models,arguments)},get:function(C){if(C!=null)return this._byId[C]||this._byId[this.modelId(this._isModel(C)?C.attributes:C,C.idAttribute)]||C.cid&&this._byId[C.cid]},has:function(C){return this.get(C)!=null},at:function(C){return C<0&&(C+=this.length),this.models[C]},where:function(C,T){return this[T?"find":"filter"](C)},findWhere:function(C){return this.where(C,!0)},sort:function(C){var T=this.comparator;if(!T)throw new Error("Cannot sort a set without a comparator");C||(C={});var k=T.length;return r.isFunction(T)&&(T=T.bind(this)),k===1||r.isString(T)?this.models=this.sortBy(T):this.models.sort(T),C.silent||this.trigger("sort",this,C),this},pluck:function(C){return this.map(C+"")},fetch:function(C){C=r.extend({parse:!0},C);var T=C.success,k=this;return C.success=function(R){var F=C.reset?"reset":"set";k[F](R,C),T&&T.call(C.context,k,R,C),k.trigger("sync",k,R,C)},ee(this,C),this.sync("read",this,C)},create:function(C,T){T=T?r.clone(T):{};var k=T.wait;if(C=this._prepareModel(C,T),!C)return!1;k||this.add(C,T);var R=this,F=T.success;return T.success=function(st,It,Lt){k&&R.add(st,Lt),F&&F.call(Lt.context,st,It,Lt)},C.save(null,T),C},parse:function(C,T){return C},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(C,T){return C[T||this.model.prototype.idAttribute||"id"]},values:function(){return new v(this,w)},keys:function(){return new v(this,M)},entries:function(){return new v(this,D)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(C,T){if(this._isModel(C))return C.collection||(C.collection=this),C;T=T?r.clone(T):{},T.collection=this;var k;return this.model.prototype?k=new this.model(C,T):k=this.model(C,T),k.validationError?(this.trigger("invalid",this,k.validationError,T),!1):k},_removeModels:function(C,T){for(var k=[],R=0;R<C.length;R++){var F=this.get(C[R]);if(F){var st=this.indexOf(F);this.models.splice(st,1),this.length--,delete this._byId[F.cid];var It=this.modelId(F.attributes,F.idAttribute);It!=null&&delete this._byId[It],T.silent||(T.index=st,F.trigger("remove",F,this,T)),k.push(F),this._removeReference(F,T)}}return k},_isModel:function(C){return C instanceof E},_addReference:function(C,T){this._byId[C.cid]=C;var k=this.modelId(C.attributes,C.idAttribute);k!=null&&(this._byId[k]=C),C.on("all",this._onModelEvent,this)},_removeReference:function(C,T){delete this._byId[C.cid];var k=this.modelId(C.attributes,C.idAttribute);k!=null&&delete this._byId[k],this===C.collection&&delete C.collection,C.off("all",this._onModelEvent,this)},_onModelEvent:function(C,T,k,R){if(T){if((C==="add"||C==="remove")&&k!==this)return;if(C==="destroy"&&this.remove(T,R),C==="changeId"){var F=this.modelId(T.previousAttributes(),T.idAttribute),st=this.modelId(T.attributes,T.idAttribute);F!=null&&delete this._byId[F],st!=null&&(this._byId[st]=T)}}this.trigger.apply(this,arguments)}});var p=typeof Symbol=="function"&&Symbol.iterator;p&&(j.prototype[p]=j.prototype.values);var v=function(C,T){this._collection=C,this._kind=T,this._index=0},w=1,M=2,D=3;p&&(v.prototype[p]=function(){return this}),v.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var C=this._collection.at(this._index);this._index++;var T;if(this._kind===w)T=C;else{var k=this._collection.modelId(C.attributes,C.idAttribute);this._kind===M?T=k:T=[k,C]}return{value:T,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var G=e.View=function(C){this.cid=r.uniqueId("view"),this.preinitialize.apply(this,arguments),r.extend(this,r.pick(C,_)),this._ensureElement(),this.initialize.apply(this,arguments)},Z=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];r.extend(G.prototype,s,{tagName:"div",$:function(C){return this.$el.find(C)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(C){return this.undelegateEvents(),this._setElement(C),this.delegateEvents(),this},_setElement:function(C){this.$el=C instanceof e.$?C:e.$(C),this.el=this.$el[0]},delegateEvents:function(C){if(C||(C=r.result(this,"events")),!C)return this;this.undelegateEvents();for(var T in C){var k=C[T];if(r.isFunction(k)||(k=this[k]),!!k){var R=T.match(Z);this.delegate(R[1],R[2],k.bind(this))}}return this},delegate:function(C,T,k){return this.$el.on(C+".delegateEvents"+this.cid,T,k),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(C,T,k){return this.$el.off(C+".delegateEvents"+this.cid,T,k),this},_createElement:function(C){return document.createElement(C)},_ensureElement:function(){if(this.el)this.setElement(r.result(this,"el"));else{var C=r.extend({},r.result(this,"attributes"));this.id&&(C.id=r.result(this,"id")),this.className&&(C.class=r.result(this,"className")),this.setElement(this._createElement(r.result(this,"tagName"))),this._setAttributes(C)}},_setAttributes:function(C){this.$el.attr(C)}});var at=function(C,T,k,R){switch(T){case 1:return function(){return C[k](this[R])};case 2:return function(F){return C[k](this[R],F)};case 3:return function(F,st){return C[k](this[R],Y(F,this),st)};case 4:return function(F,st,It){return C[k](this[R],Y(F,this),st,It)};default:return function(){var F=o.call(arguments);return F.unshift(this[R]),C[k].apply(C,F)}}},ht=function(C,T,k,R){r.each(k,function(F,st){T[st]&&(C.prototype[st]=at(T,F,st,R))})},Y=function(C,T){return r.isFunction(C)?C:r.isObject(C)&&!T._isModel(C)?K(C):r.isString(C)?function(k){return k.get(C)}:C},K=function(C){var T=r.matches(C);return function(k){return T(k.attributes)}},J={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},q={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};r.each([[j,J,"models"],[E,q,"attributes"]],function(C){var T=C[0],k=C[1],R=C[2];T.mixin=function(F){var st=r.reduce(r.functions(F),function(It,Lt){return It[Lt]=0,It},{});ht(T,F,st,R)},ht(T,r,k,R)}),e.sync=function(C,T,k){var R=St[C];r.defaults(k||(k={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var F={type:R,dataType:"json"};if(k.url||(F.url=r.result(T,"url")||Tt()),k.data==null&&T&&(C==="create"||C==="update"||C==="patch")&&(F.contentType="application/json",F.data=JSON.stringify(k.attrs||T.toJSON(k))),k.emulateJSON&&(F.contentType="application/x-www-form-urlencoded",F.data=F.data?{model:F.data}:{}),k.emulateHTTP&&(R==="PUT"||R==="DELETE"||R==="PATCH")){F.type="POST",k.emulateJSON&&(F.data._method=R);var st=k.beforeSend;k.beforeSend=function(Ft){if(Ft.setRequestHeader("X-HTTP-Method-Override",R),st)return st.apply(this,arguments)}}F.type!=="GET"&&!k.emulateJSON&&(F.processData=!1);var It=k.error;k.error=function(Ft,Pe,De){k.textStatus=Pe,k.errorThrown=De,It&&It.call(k.context,Ft,Pe,De)};var Lt=k.xhr=e.ajax(r.extend(F,k));return T.trigger("request",T,Lt,k),Lt};var St={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var Nt=e.Router=function(C){C||(C={}),this.preinitialize.apply(this,arguments),C.routes&&(this.routes=C.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},oe=/\((.*?)\)/g,pe=/(\(\?)?:\w+/g,wt=/\*\w+/g,Mt=/[\-{}\[\]+?.,\\\^$|#\s]/g;r.extend(Nt.prototype,s,{preinitialize:function(){},initialize:function(){},route:function(C,T,k){r.isRegExp(C)||(C=this._routeToRegExp(C)),r.isFunction(T)&&(k=T,T=""),k||(k=this[T]);var R=this;return e.history.route(C,function(F){var st=R._extractParameters(C,F);R.execute(k,st,T)!==!1&&(R.trigger.apply(R,["route:"+T].concat(st)),R.trigger("route",T,st),e.history.trigger("route",R,T,st))}),this},execute:function(C,T,k){C&&C.apply(this,T)},navigate:function(C,T){return e.history.navigate(C,T),this},_bindRoutes:function(){if(this.routes){this.routes=r.result(this,"routes");for(var C,T=r.keys(this.routes);(C=T.pop())!=null;)this.route(C,this.routes[C])}},_routeToRegExp:function(C){return C=C.replace(Mt,"\\$&").replace(oe,"(?:$1)?").replace(pe,function(T,k){return k?T:"([^/?]+)"}).replace(wt,"([^?]*?)"),new RegExp("^"+C+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(C,T){var k=C.exec(T).slice(1);return r.map(k,function(R,F){return F===k.length-1?R||null:R?decodeURIComponent(R):null})}});var ot=e.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},it=/^[#\/]|\s+$/g,pt=/^\/+|\/+$/g,Bt=/#.*$/;ot.started=!1,r.extend(ot.prototype,s,{interval:50,atRoot:function(){var C=this.location.pathname.replace(/[^\/]$/,"$&/");return C===this.root&&!this.getSearch()},matchRoot:function(){var C=this.decodeFragment(this.location.pathname),T=C.slice(0,this.root.length-1)+"/";return T===this.root},decodeFragment:function(C){return decodeURI(C.replace(/%25/g,"%2525"))},getSearch:function(){var C=this.location.href.replace(/#.*/,"").match(/\?.+/);return C?C[0]:""},getHash:function(C){var T=(C||this).location.href.match(/#(.*)$/);return T?T[1]:""},getPath:function(){var C=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return C.charAt(0)==="/"?C.slice(1):C},getFragment:function(C){return C==null&&(this._usePushState||!this._wantsHashChange?C=this.getPath():C=this.getHash()),C.replace(it,"")},start:function(C){if(ot.started)throw new Error("Backbone.history has already been started");if(ot.started=!0,this.options=r.extend({root:"/"},this.options,C),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(pt,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var T=this.root.slice(0,-1)||"/";return this.location.replace(T+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var k=document.body,R=k.insertBefore(this.iframe,k.firstChild).contentWindow;R.document.open(),R.document.close(),R.location.hash="#"+this.fragment}var F=window.addEventListener||function(st,It){return attachEvent("on"+st,It)};if(this._usePushState?F("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?F("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var C=window.removeEventListener||function(T,k){return detachEvent("on"+T,k)};this._usePushState?C("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&C("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),ot.started=!1},route:function(C,T){this.handlers.unshift({route:C,callback:T})},checkUrl:function(C){var T=this.getFragment();if(T===this.fragment&&this.iframe&&(T=this.getHash(this.iframe.contentWindow)),T===this.fragment)return!1;this.iframe&&this.navigate(T),this.loadUrl()},loadUrl:function(C){return this.matchRoot()?(C=this.fragment=this.getFragment(C),r.some(this.handlers,function(T){if(T.route.test(C))return T.callback(C),!0})):!1},navigate:function(C,T){if(!ot.started)return!1;(!T||T===!0)&&(T={trigger:!!T}),C=this.getFragment(C||"");var k=this.root;(C===""||C.charAt(0)==="?")&&(k=k.slice(0,-1)||"/");var R=k+C;C=C.replace(Bt,"");var F=this.decodeFragment(C);if(this.fragment!==F){if(this.fragment=F,this._usePushState)this.history[T.replace?"replaceState":"pushState"]({},document.title,R);else if(this._wantsHashChange){if(this._updateHash(this.location,C,T.replace),this.iframe&&C!==this.getHash(this.iframe.contentWindow)){var st=this.iframe.contentWindow;T.replace||(st.document.open(),st.document.close()),this._updateHash(st.location,C,T.replace)}}else return this.location.assign(R);if(T.trigger)return this.loadUrl(C)}},_updateHash:function(C,T,k){if(k){var R=C.href.replace(/(javascript:|#).*$/,"");C.replace(R+"#"+T)}else C.hash="#"+T}}),e.history=new ot;var Qt=function(C,T){var k=this,R;return C&&r.has(C,"constructor")?R=C.constructor:R=function(){return k.apply(this,arguments)},r.extend(R,k,T),R.prototype=r.create(k.prototype,C),R.prototype.constructor=R,R.__super__=k.prototype,R};E.extend=j.extend=Nt.extend=G.extend=ot.extend=Qt;var Tt=function(){throw new Error('A "url" property or function must be specified')},ee=function(C,T){var k=T.error;T.error=function(R){k&&k.call(T.context,C,R,T),C.trigger("error",C,R,T)}};return e})});var Bh={};Ae(Bh,{absolute:()=>AC,bottom:()=>NC,ellipse:()=>TC,ellipseSpread:()=>MC,fn:()=>yC,left:()=>xC,line:()=>CC,right:()=>wC,top:()=>bC});var mn={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},RI=Object.keys(mn).map(t=>mn[t]).join(""),Ku="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",GI=/\s/g,rg=new RegExp(`^(${Ku}\\*)?([${RI}])(/${Ku})?([-+]{1,2}${Ku})?$`,"g");function ig(t){throw new Error(`Invalid calc() expression: ${t}`)}function ZI(t,e){let r=rg.exec(t.replace(GI,""));r||ig(t),rg.lastIndex=0;let[,n,i,o,s]=r,{x:a,y:u,width:h,height:d}=e,f=0;switch(i){case mn.width:{f=h;break}case mn.height:{f=d;break}case mn.x:{f=a;break}case mn.y:{f=u;break}case mn.minimum:{f=Math.min(d,h);break}case mn.maximum:{f=Math.max(d,h);break}case mn.diagonal:{f=Math.sqrt(d*d+h*h);break}}return n&&(f*=parseFloat(n)),o&&(f/=parseFloat(o.slice(1))),s&&(f+=jI(s)),f}function jI(t){if(!t)return 0;let[e]=t;switch(e){case"+":return parseFloat(t.substr(1));case"-":return-parseFloat(t.substr(1))}return parseFloat(t)}function Je(t){return typeof t=="string"&&t.includes("calc")}var og="calc(",ng=og.length;function Qe(t,e){let r=t,n=0;do{let i=r.indexOf(og,n);if(i===-1)return r;let o=i+ng,s=1;t:do{switch(r[o]){case"(":{s++;break}case")":{if(s--,s===0)break t;break}case void 0:ig(r)}o++}while(!0);let a=r.slice(i+ng,o);Je(a)&&(a=Qe(a,e));let u=String(ZI(a,e));r=r.slice(0,i)+u+r.slice(o+1),n=i+u.length}while(!0)}var Le={};Ae(Le,{Curve:()=>$t,Ellipse:()=>je,Line:()=>gt,Path:()=>yt,Point:()=>z,Polygon:()=>pr,Polyline:()=>qt,Rect:()=>ft,bezier:()=>eA,ellipse:()=>HI,intersection:()=>nA,line:()=>vn,normalizeAngle:()=>We,point:()=>ji,random:()=>ga,rect:()=>qI,scale:()=>FI,snapToGrid:()=>ln,toDeg:()=>ni,toRad:()=>Oe,types:()=>kt});var{round:WI,floor:YI,PI:sg}=Math,FI={linear:function(t,e,r){var n=t[1]-t[0],i=e[1]-e[0];return(r-t[0])/n*i+e[0]||0}},We=function(t){return t%360+(t<0?360:0)},ln=function(t,e){return e*WI(t/e)},ni=function(t){return 180*t/sg%360},Oe=function(t,e){return e=e||!1,t=e?t:t%360,t*sg/180},ga=function(t,e){if(e===void 0)e=t===void 0?1:t,t=0;else if(e<t){let r=t;t=e,e=r}return YI(Math.random()*(e-t+1)+t)};var{cos:pa,sin:qu,atan2:VI}=Math,ma=function(t,e){var r=Oe(t.y),n=Oe(e.y),i=t.x,o=e.x,s=Oe(o-i),a=qu(s)*pa(n),u=pa(r)*qu(n)-qu(r)*pa(n)*pa(s),h=ni(VI(a,u)),d=["NE","E","SE","S","SW","W","NW","N"],f=h-22.5;return f<0&&(f+=360),f=parseInt(f/45),d[f]};var Zi=function(t,e){var r=t.x,n=t.y,i=e.x,o=e.y;return(r-=i)*r+(n-=o)*n};var va=function(t,e){return Math.sqrt(Zi(t,e))};var kt={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8};var{abs:Ia,cos:$u,sin:tc,sqrt:ag,min:lg,max:ug,atan2:UI,round:cg,pow:_I,PI:fg}=Math,z=function(t,e){if(!(this instanceof z))return new z(t,e);if(typeof t=="string"){var r=t.split(t.indexOf("@")===-1?" ":"@");t=parseFloat(r[0]),e=parseFloat(r[1])}else Object(t)===t&&(e=t.y,t=t.x);this.x=t===void 0?0:t,this.y=e===void 0?0:e};z.fromPolar=function(t,e,r){r=new z(r);var n=Ia(t*$u(e)),i=Ia(t*tc(e)),o=We(ni(e));return o<90?i=-i:o<180?(n=-n,i=-i):o<270&&(n=-n),new z(r.x+n,r.y+i)};z.random=function(t,e,r,n){return new z(ga(t,e),ga(r,n))};z.prototype={type:kt.Point,chooseClosest:function(t){var e=t.length;if(e===1)return new z(t[0]);for(var r=null,n=1/0,i=0;i<e;i++){var o=new z(t[i]),s=this.squaredDistance(o);s<n&&(r=o,n=s)}return r},adhereToRect:function(t){return t.containsPoint(this)?this:(this.x=lg(ug(this.x,t.x),t.x+t.width),this.y=lg(ug(this.y,t.y),t.y+t.height),this)},angleBetween:function(t,e){var r=this.equals(t)||this.equals(e)?NaN:this.theta(e)-this.theta(t);return r<0&&(r+=360),r},bearing:function(t){return ma(this,t)},changeInAngle:function(t,e,r){return this.clone().offset(-t,-e).theta(r)-this.theta(r)},clone:function(){return new z(this)},cross:function(t,e){return t&&e?(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x):NaN},difference:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),new z(this.x-(t||0),this.y-(e||0))},distance:function(t){return va(this,t)},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,e){var r=this.x,n=this.y;return new z((1-e)*r+e*t.x,(1-e)*n+e*t.y)},magnitude:function(){return ag(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return Ia(t.x-this.x)+Ia(t.y-this.y)},move:function(t,e){var r=Oe(new z(t).theta(this)),n=this.offset($u(r)*e,-tc(r)*e);return n},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},reflection:function(t){return new z(t).move(this,this.distance(t))},rotate:function(t,e){if(e===0)return this;t=t||new z(0,0),e=Oe(We(-e));var r=$u(e),n=tc(e),i=r*(this.x-t.x)-n*(this.y-t.y)+t.x,o=n*(this.x-t.x)+r*(this.y-t.y)+t.y;return this.x=i,this.y=o,this},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=_I(10,t);break}return this.x=cg(this.x*e)/e,this.y=cg(this.y*e)/e,this},scale:function(t,e,r){return r=r&&new z(r)||new z(0,0),this.x=r.x+t*(this.x-r.x),this.y=r.y+e*(this.y-r.y),this},snapToGrid:function(t,e){return this.x=ln(this.x,t),this.y=ln(this.y,e||t),this},squaredDistance:function(t){return Zi(this,t)},theta:function(t){t=new z(t);var e=-(t.y-this.y),r=t.x-this.x,n=UI(e,r);return n<0&&(n=2*fg+n),180*n/fg},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new z(t)||new z(0,0);var e=this.x,r=this.y;return this.x=ag((e-t.x)*(e-t.x)+(r-t.y)*(r-t.y)),this.y=Oe(t.theta(new z(e,r))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x=t||0,this.y=e||0,this},vectorAngle:function(t){var e=new z(0,0);return e.angleBetween(this,t)}};z.prototype.translate=z.prototype.offset;var ji=z;var{max:ec,min:rc}=Math,gt=function(t,e){if(!(this instanceof gt))return new gt(t,e);if(t instanceof gt)return new gt(t.start,t.end);this.start=new z(t),this.end=new z(e)};gt.prototype={type:kt.Line,angle:function(){var t=new z(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=rc(this.start.x,this.end.x),e=rc(this.start.y,this.end.y),r=ec(this.start.x,this.end.x),n=ec(this.start.y,this.end.y);return new ft(t,e,r-t,n-e)},bearing:function(){return ma(this.start,this.end)},clone:function(){return new gt(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var e=this.vector().dot(new gt(this.start,t).vector()),r=rc(1,ec(0,e/this.squaredLength()));return r!==r?0:r},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var e=this.start,r=this.end;if(e.cross(t,r)!==0)return!1;var n=this.length();return!(new gt(e,t).length()>n||new gt(t,r).length()>n)},divideAt:function(t){var e=this.pointAt(t);return[new gt(this.start,e),new gt(e,this.end)]},divideAtLength:function(t){var e=this.pointAtLength(t);return[new gt(this.start,e),new gt(e,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,e){if(t&&t.intersectionWithLine){var r=t.intersectionWithLine(this,e);return r&&t instanceof gt&&(r=r[0]),r}return null},intersectionWithLine:function(t){var e=new z(this.end.x-this.start.x,this.end.y-this.start.y),r=new z(t.end.x-t.start.x,t.end.y-t.start.y),n=e.x*r.y-e.y*r.x,i=new z(t.start.x-this.start.x,t.start.y-this.start.y),o=i.x*r.y-i.y*r.x,s=i.x*e.y-i.y*e.x;if(n===0||o*n<0||s*n<0)return null;if(n>0){if(o>n||s>n)return null}else if(o<n||s<n)return null;return[new z(this.start.x+o*e.x/n,this.start.y+o*e.y/n)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return va(this.start,this.end)},midpoint:function(){return new z((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){let e=this.clone();if(!this.isDifferentiable())return e;let{start:r,end:n}=e,i=r.clone().rotate(n,270),o=n.clone().rotate(r,90);return r.move(o,t),n.move(i,t),e},pointAt:function(t){var e=this.start,r=this.end;return t<=0?e.clone():t>=1?r.clone():e.lerp(r,t)},pointAtLength:function(t){var e=this.start,r=this.end,n=!0;t<0&&(n=!1,t=-t);var i=this.length();return t>=i?n?r.clone():e.clone():this.pointAt((n?t:i-t)/i)},pointOffset:function(t){t=new z(t);var e=this.start,r=this.end,n=(r.x-e.x)*(t.y-e.y)-(r.y-e.y)*(t.x-e.x);return n/this.length()},rotate:function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},round:function(t){return this.start.round(t),this.end.round(t),this},scale:function(t,e,r){return this.start.scale(t,e,r),this.end.scale(t,e,r),this},setLength:function(t){var e=this.length();if(!e)return this;var r=t/e;return this.scale(r,r,this.start)},squaredLength:function(){return Zi(this.start,this.end)},tangentAt:function(t){if(!this.isDifferentiable())return null;var e=this.start,r=this.end,n=this.pointAt(t),i=new gt(e,r);return i.translate(n.x-e.x,n.y-e.y),i},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var e=this.start,r=this.end,n=this.pointAtLength(t),i=new gt(e,r);return i.translate(n.x-e.x,n.y-e.y),i},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,e){return this.start.translate(t,e),this.end.translate(t,e),this},vector:function(){return new z(this.end.x-this.start.x,this.end.y-this.start.y)}};gt.prototype.intersection=gt.prototype.intersect;var vn=gt;var{sqrt:hg,round:Aa,pow:XI}=Math,je=function(t,e,r){if(!(this instanceof je))return new je(t,e,r);if(t instanceof je)return new je(new z(t.x,t.y),t.a,t.b);t=new z(t),this.x=t.x,this.y=t.y,this.a=e,this.b=r};je.fromRect=function(t){return t=new ft(t),new je(t.center(),t.width/2,t.height/2)};je.prototype={type:kt.Ellipse,bbox:function(){return new ft(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new z(this.x,this.y)},clone:function(){return new je(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.a+=2*t,this.b+=2*e,this},intersectionWithLine:function(t){var e=[],r=t.start,n=t.end,i=this.a,o=this.b,s=t.vector(),a=r.difference(new z(this)),u=new z(s.x/(i*i),s.y/(o*o)),h=new z(a.x/(i*i),a.y/(o*o)),d=s.dot(u),f=s.dot(h),I=a.dot(h)-1,A=f*f-d*I;if(A<0)return null;if(A>0){var b=hg(A),S=(-f-b)/d,P=(-f+b)/d;if((S<0||1<S)&&(P<0||1<P))return null;0<=S&&S<=1&&e.push(r.lerp(n,S)),0<=P&&P<=1&&e.push(r.lerp(n,P))}else{var E=-f/d;if(0<=E&&E<=1)e.push(r.lerp(n,E));else return null}return e},intersectionWithLineFromCenterToPoint:function(t,e){t=new z(t),e&&t.rotate(new z(this.x,this.y),e);var r=t.x-this.x,n=t.y-this.y,i;if(r===0)return i=this.bbox().pointNearestToPoint(t),e?i.rotate(new z(this.x,this.y),-e):i;var o=n/r,s=o*o,a=this.a*this.a,u=this.b*this.b,h=hg(1/(1/a+s/u));h=r<0?-h:h;var d=o*h;return i=new z(this.x+h,this.y+d),e?i.rotate(new z(this.x,this.y),-e):i},normalizedDistance:function(t){var e=t.x,r=t.y,n=this.a,i=this.b,o=this.x,s=this.y;return(e-o)*(e-o)/(n*n)+(r-s)*(r-s)/(i*i)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=XI(10,t);break}return this.x=Aa(this.x*e)/e,this.y=Aa(this.y*e)/e,this.a=Aa(this.a*e)/e,this.b=Aa(this.b*e)/e,this},tangentTheta:function(t){var e=30,r=t.x,n=t.y,i=this.a,o=this.b,s=this.bbox().center(),a=s.x,u=s.y,h=r>s.x+i/2,d=r<s.x-i/2,f,I;return h||d?(f=r>s.x?n-e:n+e,I=i*i/(r-a)-i*i*(n-u)*(f-u)/(o*o*(r-a))+a):(I=n>s.y?r+e:r-e,f=o*o/(n-u)-o*o*(r-a)*(I-a)/(i*i*(n-u))+u),new z(I,f).theta(t)},toString:function(){return new z(this.x,this.y).toString()+" "+this.a+" "+this.b}};var HI=je;var{abs:dg,cos:JI,sin:QI,min:Ko,max:gg,round:ya,pow:KI}=Math,ft=function(t,e,r,n){if(!(this instanceof ft))return new ft(t,e,r,n);Object(t)===t&&(e=t.y,r=t.width,n=t.height,t=t.x),this.x=t===void 0?0:t,this.y=e===void 0?0:e,this.width=r===void 0?0:r,this.height=n===void 0?0:n};ft.fromEllipse=function(t){return t=new je(t),new ft(t.x-t.a,t.y-t.b,2*t.a,2*t.b)};ft.fromPointUnion=function(...t){if(t.length===0)return null;let e=new z,r,n,i,o;r=n=1/0,i=o=-1/0;for(let s=0;s<t.length;s++){e.update(t[s]);let a=e.x,u=e.y;a<r&&(r=a),a>i&&(i=a),u<n&&(n=u),u>o&&(o=u)}return new ft(r,n,i-r,o-n)};ft.fromRectUnion=function(...t){if(t.length===0)return null;let e=new ft,r,n,i,o;r=n=1/0,i=o=-1/0;for(let s=0;s<t.length;s++){e.update(t[s]);let a=e.x,u=e.y,h=a+e.width,d=u+e.height;a<r&&(r=a),h>i&&(i=h),u<n&&(n=u),d>o&&(o=d)}return new ft(r,n,i-r,o-n)};ft.prototype={type:kt.Rect,bbox:function(t){return this.clone().rotateAroundCenter(t)},rotateAroundCenter:function(t){if(!t)return this;let{width:e,height:r}=this,n=Oe(t),i=dg(QI(n)),o=dg(JI(n)),s=e*o+r*i,a=e*i+r*o;return this.x+=(e-s)/2,this.y+=(r-a)/2,this.width=s,this.height=a,this},bottomLeft:function(){return new z(this.x,this.y+this.height)},bottomLine:function(){return new gt(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new z(this.x+this.width/2,this.y+this.height)},center:function(){return new z(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new ft(this)},containsPoint:function(t){return t instanceof z||(t=new z(t)),t.x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=new ft(this).normalize(),r=new ft(t).normalize(),n=e.width,i=e.height,o=r.width,s=r.height;if(!n||!i||!o||!s)return!1;var a=e.x,u=e.y,h=r.x,d=r.y;return o+=h,n+=a,s+=d,i+=u,a<=h&&o<=n&&u<=d&&s<=i},corner:function(){return new z(this.x+this.width,this.y+this.height)},equals:function(t){var e=new ft(this).normalize(),r=new ft(t).normalize();return e.x===r.x&&e.y===r.y&&e.width===r.width&&e.height===r.height},inflate:function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},intersect:function(t){var e=this.origin(),r=this.corner(),n=t.origin(),i=t.corner();if(i.x<=e.x||i.y<=e.y||n.x>=r.x||n.y>=r.y)return null;var o=gg(e.x,n.x),s=gg(e.y,n.y);return new ft(o,s,Ko(r.x,i.x)-o,Ko(r.y,i.y)-s)},intersectionWithLine:function(t){var e=this,r=[e.topLine(),e.rightLine(),e.bottomLine(),e.leftLine()],n=[],i=[],o,s,a=r.length;for(s=0;s<a;s++)o=t.intersect(r[s]),o!==null&&i.indexOf(o.toString())<0&&(n.push(o),i.push(o.toString()));return n.length>0?n:null},intersectionWithLineFromCenterToPoint:function(t,e){t=new z(t);var r=new z(this.x+this.width/2,this.y+this.height/2),n;e&&t.rotate(r,e);for(var i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],o=new gt(r,t),s=i.length-1;s>=0;--s){var a=i[s].intersection(o);if(a!==null){n=a;break}}return n&&e&&n.rotate(r,-e),n},leftLine:function(){return new gt(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new z(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,e){t=new ft(t),e||(e=t.center());var r,n,i,o,s,a,u,h,d=e.x,f=e.y;r=n=i=o=s=a=u=h=1/0;var I=t.topLeft();I.x<d&&(r=(this.x-d)/(I.x-d)),I.y<f&&(s=(this.y-f)/(I.y-f));var A=t.bottomRight();A.x>d&&(n=(this.x+this.width-d)/(A.x-d)),A.y>f&&(a=(this.y+this.height-f)/(A.y-f));var b=t.topRight();b.x>d&&(i=(this.x+this.width-d)/(b.x-d)),b.y<f&&(u=(this.y-f)/(b.y-f));var S=t.bottomLeft();return S.x<d&&(o=(this.x-d)/(S.x-d)),S.y>f&&(h=(this.y+this.height-f)/(S.y-f)),{sx:Ko(r,n,i,o),sy:Ko(s,a,u,h)}},maxRectUniformScaleToFit:function(t,e){var r=this.maxRectScaleToFit(t,e);return Ko(r.sx,r.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,r=this.width,n=this.height;return this.width<0&&(t=this.x+this.width,r=-this.width),this.height<0&&(e=this.y+this.height,n=-this.height),this.x=t,this.y=e,this.width=r,this.height=n,this},offset:function(t,e){return z.prototype.offset.call(this,t,e)},origin:function(){return new z(this.x,this.y)},pointNearestToPoint:function(t){if(t=new z(t),this.containsPoint(t)){var e=this.sideNearestToPoint(t);switch(e){case"right":return new z(this.x+this.width,t.y);case"left":return new z(this.x,t.y);case"bottom":return new z(t.x,this.y+this.height);case"top":return new z(t.x,this.y)}}return t.adhereToRect(this)},rightLine:function(){return new gt(this.topRight(),this.bottomRight())},rightMiddle:function(){return new z(this.x+this.width,this.y+this.height/2)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=KI(10,t);break}return this.x=ya(this.x*e)/e,this.y=ya(this.y*e)/e,this.width=ya(this.width*e)/e,this.height=ya(this.height*e)/e,this},scale:function(t,e,r){return r=this.origin().scale(t,e,r),this.x=r.x,this.y=r.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){t=new z(t);var e=t.x-this.x,r=this.x+this.width-t.x,n=t.y-this.y,i=this.y+this.height-t.y,o=e,s="left";return r<o&&(o=r,s="right"),n<o&&(o=n,s="top"),i<o&&(s="bottom"),s},snapToGrid:function(t,e){var r=this.origin().snapToGrid(t,e),n=this.corner().snapToGrid(t,e);return this.x=r.x,this.y=r.y,this.width=n.x-r.x,this.height=n.y-r.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new gt(this.topLeft(),this.topRight())},topMiddle:function(){return new z(this.x+this.width/2,this.y)},topRight:function(){return new z(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){return ft.fromRectUnion(this,t)},update:function(t,e,r,n){return Object(t)===t&&(e=t.y,r=t.width,n=t.height,t=t.x),this.x=t||0,this.y=e||0,this.width=r||0,this.height=n||0,this}};ft.prototype.bottomRight=ft.prototype.corner;ft.prototype.topLeft=ft.prototype.origin;ft.prototype.translate=ft.prototype.offset;var qI=ft;function Ca(t){let e=t.trim();if(e==="")return[];let r=[],n=e.split(/\b\s*,\s*|,\s*|\s+/),i=n.length;for(let o=0;o<i;o+=2)r.push({x:+n[o],y:+n[o+1]});return r}function xa(t){let e=t.length;if(e===0)return[];let r=[];for(let n=0;n<e;n++){let i=t[n].clone();r.push(i)}return r}function wa(t){let{abs:e}=Math;var r,n,i=t.length;if(i===0)return[];var o;for(r=0;r<i;r++)(o===void 0||t[r].y<o.y||t[r].y===o.y&&t[r].x>o.x)&&(o=t[r]);var s=[];for(r=0;r<i;r++){var a=o.theta(t[r]);a===0&&(a=360);var u=[t[r],r,a];s.push(u)}if(s.sort(function(_,at){var ht=_[2]-at[2];return ht===0&&(ht=at[1]-_[1]),ht}),s.length>2){var h=s[s.length-1];s.unshift(h)}for(var d={},f=[],I,A,b,S,P,E;s.length!==0;)if(I=s.pop(),A=I[0],!d.hasOwnProperty(I[0]+"@@"+I[1]))for(var j=!1;!j;)if(f.length<2)f.push(I),j=!0;else{b=f.pop(),S=b[0],P=f.pop(),E=P[0];var U=E.cross(S,A);if(U<0)f.push(P),f.push(b),f.push(I),j=!0;else if(U===0){var Q=1e-10,rt=S.angleBetween(E,A);e(rt-180)<Q||S.equals(A)||E.equals(S)?(d[b[0]+"@@"+b[1]]=S,f.push(P)):e((rt+1)%360-1)<Q&&(f.push(P),s.push(b))}else d[b[0]+"@@"+b[1]]=S,f.push(P)}f.length>2&&f.pop();var p,v=-1;for(n=f.length,r=0;r<n;r++){var w=f[r][1];(p===void 0||w<p)&&(p=w,v=r)}var M=[];if(v>0){var D=f.slice(v),G=f.slice(0,v);M=D.concat(G)}else M=f;var Z=[];for(n=M.length,r=0;r<n;r++)Z.push(M[r][0]);return Z}var qt=function(t){if(!(this instanceof qt))return new qt(t);if(typeof t=="string")return new qt.parse(t);this.points=Array.isArray(t)?t.map(z):[]};qt.parse=function(t){return new qt(Ca(t))};qt.fromRect=function(t){return new qt([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft(),t.topLeft()])};qt.prototype={type:kt.Polyline,bbox:function(){var t=1/0,e=-1/0,r=1/0,n=-1/0,i=this.points,o=i.length;if(o===0)return null;for(var s=0;s<o;s++){var a=i[s],u=a.x,h=a.y;u<t&&(t=u),u>e&&(e=u),h<r&&(r=h),h>n&&(n=h)}return new ft(t,r,e-t,n-r)},clone:function(){return new qt(xa(this.points))},closestPoint:function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)},closestPointLength:function(t){var e=this.lengthPoints(),r=e.length;if(r===0||r===1)return 0;for(var n,i=1/0,o=0,s=r-1,a=0;a<s;a++){var u=new gt(e[a],e[a+1]),h=u.length(),d=u.closestPointNormalizedLength(t),f=u.pointAt(d),I=f.squaredDistance(t);I<i&&(i=I,n=o+d*h),o+=h}return n},closestPointNormalizedLength:function(t){var e=this.closestPointLength(t);if(e===0)return 0;var r=this.length();return r===0?0:e/r},closestPointTangent:function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)},containsPoint:function(t){var e=this.points,r=e.length;if(r===0)return!1;for(var n=t.x,i=t.y,o=r-1,s=0,a=0,u=new gt,h=new gt,d=new z;s<r;s++){var f=e[o],I=e[s];if(t.equals(f)||(u.start=f,u.end=I,u.containsPoint(t)))return!0;if(i<=f.y&&i>I.y||i>f.y&&i<=I.y){var A=f.x-n>I.x-n?f.x-n:I.x-n;A>=0&&(d.x=n+A,d.y=i,h.start=t,h.end=d,u.intersect(h)&&a++)}o=s}return a%2===1},close:function(){let{start:t,end:e,points:r}=this;return t&&e&&!t.equals(e)&&r.push(t.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new qt(wa(this.points))},equals:function(t){if(!t)return!1;var e=this.points,r=t.points,n=e.length;if(r.length!==n)return!1;for(var i=0;i<n;i++){var o=e[i],s=t.points[i];if(!o.equals(s))return!1}return!0},intersectionWithLine:function(t){for(var e=new gt(t),r=[],n=this.lengthPoints(),i=new gt,o=0,s=n.length-1;o<s;o++){i.start=n[o],i.end=n[o+1];var a=e.intersectionWithLine(i);a&&r.push(a[0])}return r.length>0?r:null},isDifferentiable:function(){var t=this.points,e=t.length;if(e===0)return!1;for(var r=new gt,n=e-1,i=0;i<n;i++)if(r.start=t[i],r.end=t[i+1],r.isDifferentiable())return!0;return!1},length:function(){var t=this.lengthPoints(),e=t.length;if(e===0)return 0;for(var r=0,n=e-1,i=0;i<n;i++)r+=t[i].distance(t[i+1]);return r},pointAt:function(t){var e=this.lengthPoints(),r=e.length;if(r===0)return null;if(r===1||t<=0)return e[0].clone();if(t>=1)return e[r-1].clone();var n=this.length(),i=n*t;return this.pointAtLength(i)},pointAtLength:function(t){var e=this.lengthPoints(),r=e.length;if(r===0)return null;if(r===1)return e[0].clone();var n=!0;t<0&&(n=!1,t=-t);for(var i=0,o=r-1,s=0;s<o;s++){var a=n?s:o-1-s,u=e[a],h=e[a+1],d=new gt(u,h),f=u.distance(h);if(t<=i+f)return d.pointAtLength((n?1:-1)*(t-i));i+=f}var I=n?e[r-1]:e[0];return I.clone()},round:function(t){for(var e=this.points,r=e.length,n=0;n<r;n++)e[n].round(t);return this},scale:function(t,e,r){for(var n=this.points,i=n.length,o=0;o<i;o++)n[o].scale(t,e,r);return this},simplify:function(t={}){let e=this.points;if(e.length<3)return this;let r=t.threshold||1e-10,n=0;for(;e[n+2];){let i=n,o=n+1,s=n+2,a=e[i],u=e[o],h=e[s];new gt(a,h).closestPoint(u).distance(u)<=r?e.splice(o,1):n+=1}return this},tangentAt:function(t){var e=this.lengthPoints(),r=e.length;if(r===0||r===1)return null;t<0&&(t=0),t>1&&(t=1);var n=this.length(),i=n*t;return this.tangentAtLength(i)},tangentAtLength:function(t){var e=this.lengthPoints(),r=e.length;if(r===0||r===1)return null;var n=!0;t<0&&(n=!1,t=-t);for(var i,o=0,s=r-1,a=0;a<s;a++){var u=n?a:s-1-a,h=e[u],d=e[u+1],f=new gt(h,d),I=h.distance(d);if(f.isDifferentiable()){if(t<=o+I)return f.tangentAtLength((n?1:-1)*(t-o));i=f}o+=I}if(i){var A=n?1:0;return i.tangentAt(A)}return null},toString:function(){return this.points+""},translate:function(t,e){for(var r=this.points,n=r.length,i=0;i<n;i++)r[i].translate(t,e);return this},serialize:function(){var t=this.points,e=t.length;if(e===0)return"";for(var r="",n=0;n<e;n++){var i=t[n];r+=i.x+","+i.y+" "}return r.trim()}};Object.defineProperty(qt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.points,e=t.length;return e===0?null:this.points[0]}});Object.defineProperty(qt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.points,e=t.length;return e===0?null:this.points[e-1]}});var{abs:ba,sqrt:$I,min:pg,max:mg,pow:nc}=Math,$t=function(t,e,r,n){if(!(this instanceof $t))return new $t(t,e,r,n);if(t instanceof $t)return new $t(t.start,t.controlPoint1,t.controlPoint2,t.end);this.start=new z(t),this.controlPoint1=new z(e),this.controlPoint2=new z(r),this.end=new z(n)};$t.throughPoints=function(){function t(r){var n=[],i=[],o=r.length-1,s;if(o==1)return n[0]=new z((2*r[0].x+r[1].x)/3,(2*r[0].y+r[1].y)/3),i[0]=new z(2*n[0].x-r[0].x,2*n[0].y-r[0].y),[n,i];var a=[];for(s=1;s<o-1;s++)a[s]=4*r[s].x+2*r[s+1].x;a[0]=r[0].x+2*r[1].x,a[o-1]=(8*r[o-1].x+r[o].x)/2;var u=e(a);for(s=1;s<o-1;++s)a[s]=4*r[s].y+2*r[s+1].y;a[0]=r[0].y+2*r[1].y,a[o-1]=(8*r[o-1].y+r[o].y)/2;var h=e(a);for(s=0;s<o;s++)n.push(new z(u[s],h[s])),s<o-1?i.push(new z(2*r[s+1].x-u[s+1],2*r[s+1].y-h[s+1])):i.push(new z((r[o].x+u[o-1])/2,(r[o].y+h[o-1])/2));return[n,i]}function e(r){var n=r.length,i=[],o=[],s=2;i[0]=r[0]/s;for(var a=1;a<n;a++)o[a]=1/s,s=(a<n-1?4:3.5)-o[a],i[a]=(r[a]-i[a-1])/s;for(a=1;a<n;a++)i[n-a-1]-=o[n-a]*i[n-a];return i}return function(r){if(!r||Array.isArray(r)&&r.length<2)throw new Error("At least 2 points are required");for(var n=t(r),i=[],o=n[0].length,s=0;s<o;s++){var a=new z(n[0][s].x,n[0][s].y),u=new z(n[1][s].x,n[1][s].y);i.push(new $t(r[s],a,u,r[s+1]))}return i}}();$t.prototype={type:kt.Curve,bbox:function(){for(var t=this.start,e=this.controlPoint1,r=this.controlPoint2,n=this.end,i=t.x,o=t.y,s=e.x,a=e.y,u=r.x,h=r.y,d=n.x,f=n.y,I=new Array,A=new Array,b=[new Array,new Array],S,P,E,j,U,Q,rt,p,v=0;v<2;++v){if(v===0?(P=6*i-12*s+6*u,S=-3*i+9*s-9*u+3*d,E=3*s-3*i):(P=6*o-12*a+6*h,S=-3*o+9*a-9*h+3*f,E=3*a-3*o),ba(S)<1e-12){if(ba(P)<1e-12)continue;j=-E/P,0<j&&j<1&&A.push(j);continue}rt=P*P-4*E*S,p=$I(rt),!(rt<0)&&(U=(-P+p)/(2*S),0<U&&U<1&&A.push(U),Q=(-P-p)/(2*S),0<Q&&Q<1&&A.push(Q))}for(var w=A.length,M=w,D,G,Z;w--;)j=A[w],D=1-j,G=D*D*D*i+3*D*D*j*s+3*D*j*j*u+j*j*j*d,b[0][w]=G,Z=D*D*D*o+3*D*D*j*a+3*D*j*j*h+j*j*j*f,b[1][w]=Z,I[w]={X:G,Y:Z};A[M]=0,A[M+1]=1,I[M]={X:i,Y:o},I[M+1]={X:d,Y:f},b[0][M]=i,b[1][M]=o,b[0][M+1]=d,b[1][M+1]=f,A.length=M+2,b[0].length=M+2,b[1].length=M+2,I.length=M+2;var _=pg.apply(null,b[0]),at=pg.apply(null,b[1]),ht=mg.apply(null,b[0]),Y=mg.apply(null,b[1]);return new ft(_,at,ht-_,Y-at)},clone:function(){return new $t(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,e){return this.pointAtT(this.closestPointT(t,e))},closestPointLength:function(t,e){e=e||{};var r=e.precision===void 0?this.PRECISION:e.precision,n=e.subdivisions===void 0?this.getSubdivisions({precision:r}):e.subdivisions,i={precision:r,subdivisions:n};return this.lengthAtT(this.closestPointT(t,i),i)},closestPointNormalizedLength:function(t,e){e=e||{};var r=e.precision===void 0?this.PRECISION:e.precision,n=e.subdivisions===void 0?this.getSubdivisions({precision:r}):e.subdivisions,i={precision:r,subdivisions:n},o=this.closestPointLength(t,i);if(!o)return 0;var s=this.length(i);return s===0?0:o/s},closestPointT:function(t,e){e=e||{};for(var r=e.precision===void 0?this.PRECISION:e.precision,n=e.subdivisions===void 0?this.getSubdivisions({precision:r}):e.subdivisions,i,o,s,a,u,h,d,f=n.length,I=f?1/f:0,A=0;A<f;A++){var b=n[A],S=b.start.distance(t),P=b.end.distance(t),E=S+P;(!d||E<d)&&(i=b,o=A*I,s=(A+1)*I,a=S,u=P,h=b.start.distance(b.end),d=E)}for(var j=nc(10,-r);;){var U=a?ba(a-u)/a:0,Q=u?ba(a-u)/u:0,rt=U<j||Q<j,p=a?a<h*j:!0,v=u?u<h*j:!0,w=p||v;if(rt||w)return a<=u?o:s;var M=i.divide(.5);I/=2;var D=M[0].start.distance(t),G=M[0].end.distance(t),Z=D+G,_=M[1].start.distance(t),at=M[1].end.distance(t),ht=_+at;Z<=ht?(i=M[0],s-=I,a=D,u=G):(i=M[1],o+=I,a=_,u=at)}},closestPointTangent:function(t,e){return this.tangentAtT(this.closestPointT(t,e))},containsPoint:function(t,e){var r=this.toPolyline(e);return r.containsPoint(t)},divideAt:function(t,e){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var r=this.tAt(t,e);return this.divideAtT(r)},divideAtLength:function(t,e){var r=this.tAtLength(t,e);return this.divideAtT(r)},divideAtT:function(t){var e=this.start,r=this.controlPoint1,n=this.controlPoint2,i=this.end;if(t<=0)return[new $t(e,e,e,e),new $t(e,r,n,i)];if(t>=1)return[new $t(e,r,n,i),new $t(i,i,i,i)];var o=this.getSkeletonPoints(t),s=o.startControlPoint1,a=o.startControlPoint2,u=o.divider,h=o.dividerControlPoint1,d=o.dividerControlPoint2;return[new $t(e,s,a,u),new $t(u,h,d,i)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var e=this.start,r=this.controlPoint1,n=this.controlPoint2,i=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:r.clone(),dividerControlPoint2:n.clone()};if(t>=1)return{startControlPoint1:r.clone(),startControlPoint2:n.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};var o=new gt(e,r).pointAt(t),s=new gt(r,n).pointAt(t),a=new gt(n,i).pointAt(t),u=new gt(o,s).pointAt(t),h=new gt(s,a).pointAt(t),d=new gt(u,h).pointAt(t),f={startControlPoint1:o,startControlPoint2:u,divider:d,dividerControlPoint1:h,dividerControlPoint2:a};return f},getSubdivisions:function(t){t=t||{};var e=t.precision===void 0?this.PRECISION:t.precision,r=this.start,n=this.controlPoint1,i=this.controlPoint2,o=this.end,s=[new $t(r,n,i,o)];if(e===0)return s;var a=!this.isDifferentiable();if(a)return s;var u=this.endpointDistance(),h=nc(10,-e),d=2,f=n.cross(r,o)===0&&i.cross(r,o)===0;f&&(d=2*e);for(var I=0;;){I+=1;for(var A=[],b=s.length,S=0;S<b;S++){var P=s[S],E=P.divide(.5);A.push(E[0],E[1])}for(var j=0,U=A.length,Q=0;Q<U;Q++){var rt=A[Q];j+=rt.endpointDistance()}if(I>=d){var p=j!==0?(j-u)/j:0;if(p<h)return A}s=A,u=j}},isDifferentiable:function(){var t=this.start,e=this.controlPoint1,r=this.controlPoint2,n=this.end;return!(t.equals(e)&&e.equals(r)&&r.equals(n))},length:function(t){t=t||{};for(var e=t.precision===void 0?this.PRECISION:t.precision,r=t.subdivisions===void 0?this.getSubdivisions({precision:e}):t.subdivisions,n=0,i=r.length,o=0;o<i;o++){var s=r[o];n+=s.endpointDistance()}return n},lengthAtT:function(t,e){if(t<=0)return 0;e=e||{};var r=e.precision===void 0?this.PRECISION:e.precision,n=this.divide(t)[0],i=n.length({precision:r});return i},pointAt:function(t,e){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var r=this.tAt(t,e);return this.pointAtT(r)},pointAtLength:function(t,e){var r=this.tAtLength(t,e);return this.pointAtT(r)},pointAtT:function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,round:function(t){return this.start.round(t),this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,r){return this.start.scale(t,e,r),this.controlPoint1.scale(t,e,r),this.controlPoint2.scale(t,e,r),this.end.scale(t,e,r),this},tangentAt:function(t,e){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var r=this.tAt(t,e);return this.tangentAtT(r)},tangentAtLength:function(t,e){if(!this.isDifferentiable())return null;var r=this.tAtLength(t,e);return this.tangentAtT(r)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var e=this.getSkeletonPoints(t),r=e.startControlPoint2,n=e.dividerControlPoint1,i=e.divider,o=new gt(r,n);return o.translate(i.x-r.x,i.y-r.y),o},tAt:function(t,e){if(t<=0)return 0;if(t>=1)return 1;e=e||{};var r=e.precision===void 0?this.PRECISION:e.precision,n=e.subdivisions===void 0?this.getSubdivisions({precision:r}):e.subdivisions,i={precision:r,subdivisions:n},o=this.length(i),s=o*t;return this.tAtLength(s,i)},tAtLength:function(t,e){var r=!0;t<0&&(r=!1,t=-t),e=e||{};for(var n=e.precision===void 0?this.PRECISION:e.precision,i=e.subdivisions===void 0?this.getSubdivisions({precision:n}):e.subdivisions,o={precision:n,subdivisions:i},s,a,u,h,d,f=0,I=i.length,A=1/I,b=0;b<I;b++){var S=r?b:I-1-b,P=i[b],E=P.endpointDistance();if(t<=f+E){s=P,a=S*A,u=(S+1)*A,h=r?t-f:E+f-t,d=r?E+f-t:t-f;break}f+=E}if(!s)return r?1:0;for(var j=this.length(o),U=nc(10,-n);;){var Q;if(Q=j!==0?h/j:0,Q<U)return a;if(Q=j!==0?d/j:0,Q<U)return u;var rt,p,v=s.divide(.5);A/=2;var w=v[0].endpointDistance(),M=v[1].endpointDistance();h<=w?(s=v[0],u-=A,rt=h,p=w-rt):(s=v[1],a+=A,rt=h-w,p=M-rt),h=rt,d=p}},toPoints:function(t){t=t||{};for(var e=t.precision===void 0?this.PRECISION:t.precision,r=t.subdivisions===void 0?this.getSubdivisions({precision:e}):t.subdivisions,n=[r[0].start.clone()],i=r.length,o=0;o<i;o++){var s=r[o];n.push(s.end.clone())}return n},toPolyline:function(t){return new qt(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};$t.prototype.divide=$t.prototype.divideAtT;function ii(t){var e,r,n=[];for(r=arguments.length,e=1;e<r;e++)n.push(arguments[e]);if(!t)throw new Error("Missing a parent object.");var i=Object.create(t);for(r=n.length,e=0;e<r;e++){var o=n[e],s,a;for(a in o)o.hasOwnProperty(a)&&(delete i[a],s=Object.getOwnPropertyDescriptor(o,a),Object.defineProperty(i,a,s))}return i}var yt=function(t){if(!(this instanceof yt))return new yt(t);if(typeof t=="string")return new yt.parse(t);this.segments=[];var e,r;if(t)if(Array.isArray(t)&&t.length!==0)if(t=t.reduce(function(a,u){return a.concat(u)},[]),r=t.length,t[0].isSegment)for(e=0;e<r;e++){var n=t[e];this.appendSegment(n)}else{var i=null;for(e=0;e<r;e++){var o=t[e];if(!(o instanceof gt||o instanceof $t))throw new Error("Cannot construct a path segment from the provided object.");e===0&&this.appendSegment(yt.createSegment("M",o.start)),i&&!i.end.equals(o.start)&&this.appendSegment(yt.createSegment("M",o.start)),o instanceof gt?this.appendSegment(yt.createSegment("L",o.end)):o instanceof $t&&this.appendSegment(yt.createSegment("C",o.controlPoint1,o.controlPoint2,o.end)),i=o}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof gt)this.appendSegment(yt.createSegment("M",t.start)),this.appendSegment(yt.createSegment("L",t.end));else if(t instanceof $t)this.appendSegment(yt.createSegment("M",t.start)),this.appendSegment(yt.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else if(t instanceof qt){if(!(t.points&&t.points.length!==0))return;for(r=t.points.length,e=0;e<r;e++){var s=t.points[e];e===0?this.appendSegment(yt.createSegment("M",s)):this.appendSegment(yt.createSegment("L",s))}}else throw new Error("Cannot construct a path from the provided object.")};yt.parse=function(t){if(!t)return new yt;for(var e=new yt,r=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,n=t.match(r),i=n.length,o=0;o<i;o++){var s=n[o],a=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,u=s.match(a),h=yt.createSegment.apply(this,u);e.appendSegment(h)}return e};yt.createSegment=function(t){if(!t)throw new Error("Type must be provided.");var e=yt.segmentTypes[t];if(!e)throw new Error(t+" is not a recognized path segment type.");for(var r=[],n=arguments.length,i=1;i<n;i++)r.push(arguments[i]);return un(e,r)};yt.prototype={type:kt.Path,appendSegment:function(t){var e=this.segments,r=e.length,n,i=r!==0?e[r-1]:null,o=null;if(Array.isArray(t)){if(t=t.reduce(function(h,d){return h.concat(d)},[]),!t[0].isSegment)throw new Error("Segments required.");for(var s=t.length,a=0;a<s;a++){var u=t[a];n=this.prepareSegment(u,i,o),e.push(n),i=n}}else{if(!t||!t.isSegment)throw new Error("Segment required.");n=this.prepareSegment(t,i,o),e.push(n)}},bbox:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var r,n=0;n<e;n++){var i=t[n];if(i.isVisible){var o=i.bbox();r=r?r.union(o):o}}if(r)return r;var s=t[e-1];return new ft(s.end.x,s.end.y,0,0)},clone:function(){for(var t=this.segments,e=t.length,r=new yt,n=0;n<e;n++){var i=t[n].clone();r.appendSegment(i)}return r},closestPoint:function(t,e){var r=this.closestPointT(t,e);return r?this.pointAtT(r):null},closestPointLength:function(t,e){e=e||{};var r=e.precision===void 0?this.PRECISION:e.precision,n=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):e.segmentSubdivisions,i={precision:r,segmentSubdivisions:n},o=this.closestPointT(t,i);return o?this.lengthAtT(o,i):0},closestPointNormalizedLength:function(t,e){e=e||{};var r=e.precision===void 0?this.PRECISION:e.precision,n=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:r}):e.segmentSubdivisions,i={precision:r,segmentSubdivisions:n},o=this.closestPointLength(t,i);if(o===0)return 0;var s=this.length(i);return s===0?0:o/s},closestPointT:function(t,e){var r=this.segments,n=r.length;if(n===0)return null;e=e||{};for(var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,s,a=1/0,u=0;u<n;u++){var h=r[u],d=o[u];if(h.isVisible){var f=h.closestPointT(t,{precision:i,subdivisions:d}),I=h.pointAtT(f),A=new gt(I,t).squaredLength();A<a&&(s={segmentIndex:u,value:f},a=A)}}return s||{segmentIndex:n-1,value:1}},closestPointTangent:function(t,e){var r=this.segments,n=r.length;if(n===0)return null;e=e||{};for(var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,s,a=1/0,u=0;u<n;u++){var h=r[u],d=o[u];if(h.isDifferentiable()){var f=h.closestPointT(t,{precision:i,subdivisions:d}),I=h.pointAtT(f),A=new gt(I,t).squaredLength();A<a&&(s=h.tangentAtT(f),a=A)}}return s||null},containsPoint:function(t,e){var r=this.toPolylines(e);if(!r)return!1;for(var n=r.length,i=0,o=0;o<n;o++){var s=r[o];s.containsPoint(t)&&i++}return i%2===1},divideAt:function(t,e){var r=this.segments,n=r.length;if(n===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,s={precision:i,segmentSubdivisions:o},a=this.length(s),u=a*t;return this.divideAtLength(u,s)},divideAtLength:function(t,e){var r=this.segments.length;if(r===0)return null;var n=!0;t<0&&(n=!1,t=-t),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,s,a,u=0,h,d,f,I,A;for(s=0;s<r;s++){var b=n?s:r-1-s;a=this.getSegment(b);var S=o[b],P=a.length({precision:i,subdivisions:S});if(a.isDifferentiable()&&(f=a,I=b,t<=u+P)){d=b,h=a.divideAtLength((n?1:-1)*(t-u),{precision:i,subdivisions:S});break}u+=P}if(!f)return null;h||(d=I,A=n?1:0,h=f.divideAtT(A));var E=this.clone();E.replaceSegment(d,h);var j=d,U=d+1,Q=d+2;h[0].isDifferentiable()||(E.removeSegment(j),U-=1,Q-=1);var rt=E.getSegment(U).start;E.insertSegment(U,yt.createSegment("M",rt)),Q+=1,h[1].isDifferentiable()||(E.removeSegment(Q-1),Q-=1);var p=Q-j-1;for(s=Q;s<E.segments.length;s++){var v=this.getSegment(s-p);if(a=E.getSegment(s),a.type==="Z"&&!v.subpathStartSegment.end.equals(a.subpathStartSegment.end)){var w=yt.createSegment("L",v.end);E.replaceSegment(s,w)}}var M=new yt(E.segments.slice(0,U)),D=new yt(E.segments.slice(U));return[M,D]},equals:function(t){if(!t)return!1;var e=this.segments,r=t.segments,n=e.length;if(r.length!==n)return!1;for(var i=0;i<n;i++){var o=e[i],s=r[i];if(o.type!==s.type||!o.equals(s))return!1}return!0},getSegment:function(t){var e=this.segments,r=e.length;if(r===0)throw new Error("Path has no segments.");if(t<0&&(t=r+t),t>=r||t<0)throw new Error("Index out of range.");return e[t]},getSegmentSubdivisions:function(t){var e=this.segments,r=e.length;t=t||{};for(var n=t.precision===void 0?this.PRECISION:t.precision,i=[],o=0;o<r;o++){var s=e[o],a=s.getSubdivisions({precision:n});i.push(a)}return i},getSubpaths:function(){let e=this.clone().validate().segments,r=e.length,n=[];for(let i=0;i<r;i++){let o=e[i];o.isSubpathStart?n.push(new yt(o)):n[n.length-1].appendSegment(o)}return n},insertSegment:function(t,e){var r=this.segments,n=r.length;if(t<0&&(t=n+t+1),t>n||t<0)throw new Error("Index out of range.");var i,o=null,s=null;if(n!==0&&(t>=1?(o=r[t-1],s=o.nextSegment):s=r[0]),Array.isArray(e)){if(e=e.reduce(function(d,f){return d.concat(f)},[]),!e[0].isSegment)throw new Error("Segments required.");for(var a=e.length,u=0;u<a;u++){var h=e[u];i=this.prepareSegment(h,o,s),r.splice(t+u,0,i),o=i}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,o,s),r.splice(t,0,i)}},intersectionWithLine:function(t,e){var r=null,n=this.toPolylines(e);if(!n)return null;for(var i=0,o=n.length;i<o;i++){var s=n[i],a=t.intersect(s);a&&(r||(r=[]),Array.isArray(a)?Array.prototype.push.apply(r,a):r.push(a))}return r},isDifferentiable:function(){for(var t=this.segments,e=t.length,r=0;r<e;r++){var n=t[r];if(n.isDifferentiable())return!0}return!1},isValid:function(){var t=this.segments,e=t.length===0||t[0].type==="M";return e},length:function(t){var e=this.segments,r=e.length;if(r===0)return 0;t=t||{};for(var n=t.precision===void 0?this.PRECISION:t.precision,i=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):t.segmentSubdivisions,o=0,s=0;s<r;s++){var a=e[s],u=i[s];o+=a.length({subdivisions:u})}return o},lengthAtT:function(t,e){var r=this.segments,n=r.length;if(n===0)return 0;var i=t.segmentIndex;if(i<0)return 0;var o=t.value;i>=n?(i=n-1,o=1):o<0?o=0:o>1&&(o=1),e=e||{};for(var s=e.precision===void 0?this.PRECISION:e.precision,a=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,u,h=0,d=0;d<i;d++){var f=r[d];u=a[d],h+=f.length({precisison:s,subdivisions:u})}return f=r[i],u=a[i],h+=f.lengthAtT(o,{precisison:s,subdivisions:u}),h},pointAt:function(t,e){var r=this.segments,n=r.length;if(n===0)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,s={precision:i,segmentSubdivisions:o},a=this.length(s),u=a*t;return this.pointAtLength(u,s)},pointAtLength:function(t,e){var r=this.segments,n=r.length;if(n===0)return null;if(t===0)return this.start.clone();var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var o=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a,u=0,h=0;h<n;h++){var d=i?h:n-1-h,f=r[d],I=s[d],A=f.length({precision:o,subdivisions:I});if(f.isVisible){if(t<=u+A)return f.pointAtLength((i?1:-1)*(t-u),{precision:o,subdivisions:I});a=f}u+=A}if(a)return i?a.end:a.start;var b=r[n-1];return b.end.clone()},pointAtT:function(t){var e=this.segments,r=e.length;if(r===0)return null;var n=t.segmentIndex;if(n<0)return e[0].pointAtT(0);if(n>=r)return e[r-1].pointAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[n].pointAtT(i)},PRECISION:3,prepareSegment:function(t,e,r){t.previousSegment=e,t.nextSegment=r,e&&(e.nextSegment=t),r&&(r.previousSegment=t);var n=t;return t.isSubpathStart&&(t.subpathStartSegment=t,n=r),n&&this.updateSubpathStartSegment(n),t},removeSegment:function(t){var e=this.segments,r=e.length;if(r===0)throw new Error("Path has no segments.");if(t<0&&(t=r+t),t>=r||t<0)throw new Error("Index out of range.");var n=e.splice(t,1)[0],i=n.previousSegment,o=n.nextSegment;i&&(i.nextSegment=o),o&&(o.previousSegment=i),n.isSubpathStart&&o&&this.updateSubpathStartSegment(o)},replaceSegment:function(t,e){var r=this.segments,n=r.length;if(n===0)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");var i,o=r[t],s=o.previousSegment,a=o.nextSegment,u=o.isSubpathStart;if(Array.isArray(e)){if(e=e.reduce(function(I,A){return I.concat(A)},[]),!e[0].isSegment)throw new Error("Segments required.");r.splice(t,1);for(var h=e.length,d=0;d<h;d++){var f=e[d];i=this.prepareSegment(f,s,a),r.splice(t+d,0,i),s=i,u&&i.isSubpathStart&&(u=!1)}}else{if(!e||!e.isSegment)throw new Error("Segment required.");i=this.prepareSegment(e,s,a),r.splice(t,1,i),u&&i.isSubpathStart&&(u=!1)}u&&a&&this.updateSubpathStartSegment(a)},round:function(t){for(var e=this.segments,r=e.length,n=0;n<r;n++){var i=e[n];i.round(t)}return this},scale:function(t,e,r){for(var n=this.segments,i=n.length,o=0;o<i;o++){var s=n[o];s.scale(t,e,r)}return this},segmentAt:function(t,e){var r=this.segmentIndexAt(t,e);return r?this.getSegment(r):null},segmentAtLength:function(t,e){var r=this.segmentIndexAtLength(t,e);return r?this.getSegment(r):null},segmentIndexAt:function(t,e){var r=this.segments,n=r.length;if(n===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,s={precision:i,segmentSubdivisions:o},a=this.length(s),u=a*t;return this.segmentIndexAtLength(u,s)},segmentIndexAtLength:function(t,e){var r=this.segments,n=r.length;if(n===0)return null;var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var o=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a=null,u=0,h=0;h<n;h++){var d=i?h:n-1-h,f=r[d],I=s[d],A=f.length({precision:o,subdivisions:I});if(f.isVisible){if(t<=u+A)return d;a=d}u+=A}return a},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,e){var r=this.segments,n=r.length;if(n===0)return null;t<0&&(t=0),t>1&&(t=1),e=e||{};var i=e.precision===void 0?this.PRECISION:e.precision,o=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:i}):e.segmentSubdivisions,s={precision:i,segmentSubdivisions:o},a=this.length(s),u=a*t;return this.tangentAtLength(u,s)},tangentAtLength:function(t,e){var r=this.segments,n=r.length;if(n===0)return null;var i=!0;t<0&&(i=!1,t=-t),e=e||{};for(var o=e.precision===void 0?this.PRECISION:e.precision,s=e.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a,u=0,h=0;h<n;h++){var d=i?h:n-1-h,f=r[d],I=s[d],A=f.length({precision:o,subdivisions:I});if(f.isDifferentiable()){if(t<=u+A)return f.tangentAtLength((i?1:-1)*(t-u),{precision:o,subdivisions:I});a=f}u+=A}if(a){var b=i?1:0;return a.tangentAtT(b)}return null},tangentAtT:function(t){var e=this.segments,r=e.length;if(r===0)return null;var n=t.segmentIndex;if(n<0)return e[0].tangentAtT(0);if(n>=r)return e[r-1].tangentAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[n].tangentAtT(i)},toPoints:function(t){var e=this.segments,r=e.length;if(r===0)return null;t=t||{};for(var n=t.precision===void 0?this.PRECISION:t.precision,i=t.segmentSubdivisions===void 0?this.getSegmentSubdivisions({precision:n}):t.segmentSubdivisions,o=[],s=[],a=0;a<r;a++){var u=e[a];if(u.isVisible){var h=i[a];if(h.length>0){var d=h.map(function(f){return f.start});Array.prototype.push.apply(s,d)}else s.push(u.start)}else s.length>0&&(s.push(e[a-1].end),o.push(s),s=[])}return s.length>0&&(s.push(this.end),o.push(s)),o},toPolylines:function(t){var e=[],r=this.toPoints(t);if(!r)return null;for(var n=0,i=r.length;n<i;n++)e.push(new qt(r[n]));return e},toString:function(){for(var t=this.segments,e=t.length,r="",n=0;n<e;n++){var i=t[n];r+=i.serialize()+" "}return r.trim()},translate:function(t,e){for(var r=this.segments,n=r.length,i=0;i<n;i++){var o=r[i];o.translate(t,e)}return this},updateSubpathStartSegment:function(t){for(var e=t.previousSegment;t&&!t.isSubpathStart;)e?t.subpathStartSegment=e.subpathStartSegment:t.subpathStartSegment=null,e=t,t=t.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,yt.createSegment("M",0,0)),this}};Object.defineProperty(yt.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var r=0;r<e;r++){var n=t[r];if(n.isVisible)return n.start}return t[e-1].end}});Object.defineProperty(yt.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(e===0)return null;for(var r=e-1;r>=0;r--){var n=t[r];if(n.isVisible)return n.end}return t[e-1].end}});function un(t,e){return e.unshift(null),new(Function.prototype.bind.apply(t,e))}var si={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var e=this.length();return t>=1?e:e*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(si,"end",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(si,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}});Object.defineProperty(si,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var Ke=function(){for(var t=[],e=arguments.length,r=0;r<e;r++)t.push(arguments[r]);if(!(this instanceof Ke))return un(Ke,t);if(e===0)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");var n;if(t[0]instanceof gt){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+e+" lines provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===2)return this.end=new z(+t[0],+t[1]),this;if(e<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+e+" coordinates provided).");var i;for(n=[],r=0;r<e;r+=2)i=t.slice(r,r+2),n.push(un(Ke,i));return n}else{if(e===1)return this.end=new z(t[0]),this;var o;for(n=[],r=0;r<e;r+=1)o=t[r],n.push(new Ke(o));return n}},vg={clone:function(){return new Ke(this.end)},divideAt:function(t){var e=new gt(this.start,this.end),r=e.divideAt(t);return[new Ke(r[0]),new Ke(r[1])]},divideAtLength:function(t){var e=new gt(this.start,this.end),r=e.divideAtLength(t);return[new Ke(r[0]),new Ke(r[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return this.previousSegment?!this.start.equals(this.end):!1},round:function(t){return this.end.round(t),this},scale:function(t,e,r){return this.end.scale(t,e,r),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(vg,"type",{configurable:!0,enumerable:!0,value:"L"});Ke.prototype=ii(si,gt.prototype,vg);var zr=function(){for(var t=[],e=arguments.length,r=0;r<e;r++)t.push(arguments[r]);if(!(this instanceof zr))return un(zr,t);if(e===0)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");var n;if(t[0]instanceof $t){if(e===1)return this.controlPoint1=t[0].controlPoint1.clone(),this.controlPoint2=t[0].controlPoint2.clone(),this.end=t[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" curves provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===6)return this.controlPoint1=new z(+t[0],+t[1]),this.controlPoint2=new z(+t[2],+t[3]),this.end=new z(+t[4],+t[5]),this;if(e<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" coordinates provided).");var i;for(n=[],r=0;r<e;r+=6)i=t.slice(r,r+6),n.push(un(zr,i));return n}else{if(e===3)return this.controlPoint1=new z(t[0]),this.controlPoint2=new z(t[1]),this.end=new z(t[2]),this;if(e<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+e+" points provided).");var o;for(n=[],r=0;r<e;r+=3)o=t.slice(r,r+3),n.push(un(zr,o));return n}},Ig={clone:function(){return new zr(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,e){var r=new $t(this.start,this.controlPoint1,this.controlPoint2,this.end),n=r.divideAt(t,e);return[new zr(n[0]),new zr(n[1])]},divideAtLength:function(t,e){var r=new $t(this.start,this.controlPoint1,this.controlPoint2,this.end),n=r.divideAtLength(t,e);return[new zr(n[0]),new zr(n[1])]},divideAtT:function(t){var e=new $t(this.start,this.controlPoint1,this.controlPoint2,this.end),r=e.divideAtT(t);return[new zr(r[0]),new zr(r[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var t=this.start,e=this.controlPoint1,r=this.controlPoint2,n=this.end;return!(t.equals(e)&&e.equals(r)&&r.equals(n))},round:function(t){return this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,r){return this.controlPoint1.scale(t,e,r),this.controlPoint2.scale(t,e,r),this.end.scale(t,e,r),this},serialize:function(){var t=this.controlPoint1,e=this.controlPoint2,r=this.end;return this.type+" "+t.x+" "+t.y+" "+e.x+" "+e.y+" "+r.x+" "+r.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Object.defineProperty(Ig,"type",{configurable:!0,enumerable:!0,value:"C"});zr.prototype=ii(si,$t.prototype,Ig);var oi=function(){for(var t=[],e=arguments.length,r=0;r<e;r++)t.push(arguments[r]);if(!(this instanceof oi))return un(oi,t);if(e===0)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");var n;if(t[0]instanceof gt){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" lines provided).")}else if(t[0]instanceof $t){if(e===1)return this.end=t[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" curves provided).")}else if(typeof t[0]=="string"||typeof t[0]=="number"){if(e===2)return this.end=new z(+t[0],+t[1]),this;if(e<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+e+" coordinates provided).");var i;for(n=[],r=0;r<e;r+=2)i=t.slice(r,r+2),r===0?n.push(un(oi,i)):n.push(un(Ke,i));return n}else{if(e===1)return this.end=new z(t[0]),this;var o;for(n=[],r=0;r<e;r+=1)o=t[r],r===0?n.push(new oi(o)):n.push(new Ke(o));return n}},ic={bbox:function(){return null},clone:function(){return new oi(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(t){return this.end.round(t),this},scale:function(t,e,r){return this.end.scale(t,e,r),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(ic,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}});Object.defineProperty(ic,"type",{configurable:!0,enumerable:!0,value:"M"});oi.prototype=ii(si,ic);var Wi=function(){for(var t=[],e=arguments.length,r=0;r<e;r++)t.push(arguments[r]);if(!(this instanceof Wi))return un(Wi,t);if(e>0)throw new Error("Closepath constructor expects no arguments.");return this},oc={clone:function(){return new Wi},divideAt:function(t){var e=new gt(this.start,this.end),r=e.divideAt(t);return[r[1].isDifferentiable()?new Ke(r[0]):this.clone(),new Ke(r[1])]},divideAtLength:function(t){var e=new gt(this.start,this.end),r=e.divideAtLength(t);return[r[1].isDifferentiable()?new Ke(r[0]):this.clone(),new Ke(r[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(oc,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}});Object.defineProperty(oc,"type",{configurable:!0,enumerable:!0,value:"Z"});Wi.prototype=ii(si,gt.prototype,oc);var tA=yt.segmentTypes={L:Ke,C:zr,M:oi,Z:Wi,z:Wi};yt.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(tA).join("")+",.]*$");yt.isDataSupported=function(t){return typeof t!="string"?!1:this.regexSupportedData.test(t)};var eA={curveThroughPoints:function(t){return console.warn("deprecated"),new yt($t.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var e=[],r=[],n=t.length-1,i;if(n==1)return e[0]=new z((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),r[0]=new z(2*e[0].x-t[0].x,2*e[0].y-t[0].y),[e,r];var o=[];for(i=1;i<n-1;i++)o[i]=4*t[i].x+2*t[i+1].x;o[0]=t[0].x+2*t[1].x,o[n-1]=(8*t[n-1].x+t[n].x)/2;var s=this.getFirstControlPoints(o);for(i=1;i<n-1;++i)o[i]=4*t[i].y+2*t[i+1].y;o[0]=t[0].y+2*t[1].y,o[n-1]=(8*t[n-1].y+t[n].y)/2;var a=this.getFirstControlPoints(o);for(i=0;i<n;i++)e.push(new z(s[i],a[i])),i<n-1?r.push(new z(2*t[i+1].x-s[i+1],2*t[i+1].y-a[i+1])):r.push(new z((t[n].x+s[n-1])/2,(t[n].y+a[n-1])/2));return[e,r]},getCurveDivider:function(t,e,r,n){console.warn("deprecated");var i=new $t(t,e,r,n);return function(s){var a=i.divide(s);return[{p0:a[0].start,p1:a[0].controlPoint1,p2:a[0].controlPoint2,p3:a[0].end},{p0:a[1].start,p1:a[1].controlPoint1,p2:a[1].controlPoint2,p3:a[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var e=t.length,r=[],n=[],i=2;r[0]=t[0]/i;for(var o=1;o<e;o++)n[o]=1/i,i=(o<e-1?4:3.5)-n[o],r[o]=(t[o]-r[o-1])/i;for(o=1;o<e;o++)r[e-o-1]-=n[e-o]*r[e-o];return r},getInversionSolver:function(t,e,r,n){console.warn("deprecated");var i=new $t(t,e,r,n);return function(s){return i.closestPointT(s)}}};var pr=function(t){if(!(this instanceof pr))return new pr(t);if(typeof t=="string")return new pr.parse(t);this.points=Array.isArray(t)?t.map(z):[]};pr.parse=function(t){return new pr(Ca(t))};pr.fromRect=function(t){return new pr([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft()])};pr.prototype=ii(qt.prototype,{type:kt.Polygon,clone:function(){return new pr(xa(this.points))},convexHull:function(){return new pr(wa(this.points))},lengthPoints:function(){let{start:t,end:e,points:r}=this;return r.length<=1||t.equals(e)?r:[...r,t.clone()]}});var hc={};Ae(hc,{ellipseWithEllipse:()=>yg,ellipseWithLine:()=>sc,exists:()=>Ag,lineWithLine:()=>ai,pathWithEllipse:()=>Pg,pathWithLine:()=>Sg,pathWithPath:()=>Lg,pathWithPolygon:()=>Sa,pathWithPolyline:()=>cc,pathWithRect:()=>Dg,polygonWithEllipse:()=>Ta,polygonWithLine:()=>uc,polygonWithPolygon:()=>Tg,polygonWithPolyline:()=>Mg,polygonWithRect:()=>Ng,polylineWithEllipse:()=>lc,polylineWithLine:()=>Ma,polylineWithPolyline:()=>bg,polylineWithRect:()=>wg,rectWithEllipse:()=>xg,rectWithLine:()=>Cg,rectWithRect:()=>ac});function Ag(t,e,r,n){switch(t.type){case kt.Line:{switch(e.type){case kt.Line:return ai(t,e)}break}case kt.Ellipse:{switch(e.type){case kt.Line:return sc(t,e);case kt.Ellipse:return yg(t,e)}break}case kt.Rect:{switch(e.type){case kt.Line:return Cg(t,e);case kt.Ellipse:return xg(t,e);case kt.Rect:return ac(t,e)}break}case kt.Polyline:{switch(e.type){case kt.Line:return Ma(t,e);case kt.Ellipse:return lc(t,e);case kt.Rect:return wg(t,e);case kt.Polyline:return bg(t,e)}break}case kt.Polygon:{switch(e.type){case kt.Line:return uc(t,e);case kt.Ellipse:return Ta(t,e);case kt.Rect:return Ng(t,e);case kt.Polyline:return Mg(t,e);case kt.Polygon:return Tg(t,e)}break}case kt.Path:{switch(e.type){case kt.Line:return Sg(t,e,r);case kt.Ellipse:return Pg(t,e,r);case kt.Rect:return Dg(t,e,r);case kt.Polyline:return cc(t,e,r);case kt.Polygon:return Sa(t,e,r);case kt.Path:return Lg(t,e,r,n)}break}}switch(e.type){case kt.Ellipse:case kt.Rect:case kt.Polyline:case kt.Polygon:case kt.Path:return Ag(e,t,n,r);default:throw Error(`The intersection for ${t} and ${e} could not be found.`)}}function ai(t,e){let r=t.start.x,n=t.start.y,i=t.end.x,o=t.end.y,s=e.start.x,a=e.start.y,u=e.end.x,h=e.end.y,d=i-r,f=o-n,I=u-s,A=h-a,b=r-s,S=n-a,P=d*A-I*f,E=(d*S-f*b)/P,j=(I*S-A*b)/P;return E>=0&&E<=1&&j>=0&&j<=1}function sc(t,e){let r=t.a,n=t.b,i=t.x,o=t.y,s=e.start.x-i,a=e.end.x-i,u=e.start.y-o,h=e.end.y-o,d=r*r,f=n*n,I=a-s,A=h-u,b=I*I/d+A*A/f,S=2*s*I/d+2*u*A/f,P=s*s/d+u*u/f-1,E=S*S-4*b*P;if(E===0){let j=-S/2/b;return j>=0&&j<=1}else if(E>0){let j=Math.sqrt(E),U=(-S+j)/2/b,Q=(-S-j)/2/b;return U>=0&&U<=1||Q>=0&&Q<=1}return!1}function yg(t,e){return rA(t,0,e,0)}function Cg(t,e){let{start:r,end:n}=e,{x:i,y:o,width:s,height:a}=t;return r.x>i+s&&n.x>i+s||r.x<i&&n.x<i||r.y>o+a&&n.y>o+a||r.y<o&&n.y<o?!1:t.containsPoint(e.start)||t.containsPoint(e.end)?!0:ai(t.topLine(),e)||ai(t.rightLine(),e)||ai(t.bottomLine(),e)||ai(t.leftLine(),e)}function xg(t,e){return ac(t,ft.fromEllipse(e))?Ta(pr.fromRect(t),e):!1}function ac(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function Ma(t,e){return kg(t,e,{interior:!1})}function lc(t,e){return Eg(t,e,{interior:!1})}function wg(t,e){return zg(t,e,{interior:!1})}function bg(t,e){return Pa(t,e,{interior:!1})}function uc(t,e){return kg(t,e,{interior:!0})}function Ta(t,e){return Eg(t,e,{interior:!0})}function Ng(t,e){return zg(t,e,{interior:!0})}function Mg(t,e){return Pa(t,e,{interior:!0})}function Tg(t,e){return fc(t,e,{interior:!0})}function Sg(t,e,r){return t.getSubpaths().some(n=>{let[i]=n.toPolylines(r),{type:o}=n.getSegment(-1);return o==="Z"?uc(i,e):Ma(i,e)})}function Pg(t,e,r){return t.getSubpaths().some(n=>{let[i]=n.toPolylines(r),{type:o}=n.getSegment(-1);return o==="Z"?Ta(i,e):lc(i,e)})}function Dg(t,e,r){return Sa(t,pr.fromRect(e),r)}function cc(t,e,r){return Og(t,e,r,{interior:!1})}function Sa(t,e,r){return Og(t,e,r,{interior:!0})}function Lg(t,e,r,n){return t.getSubpaths().some(i=>{let[o]=i.toPolylines(r),{type:s}=i.getSegment(-1);return s==="Z"?Sa(e,o,n):cc(e,o,n)})}function kg(t,e,r={}){let{interior:n=!1}=r,i;if(n){if(t.containsPoint(e.start))return!0;let{start:a,end:u,points:h}=t;i=u.equals(a)?h:[...h,a]}else i=t.points;let{length:o}=i,s=new gt;for(let a=0;a<o-1;a++)if(s.start=i[a],s.end=i[a+1],ai(e,s))return!0;return!1}function Eg(t,e,r={}){let{start:n,end:i,points:o}=t;if(e.containsPoint(n))return!0;let s,{interior:a=!1}=r;if(a){if(t.containsPoint(e.center()))return!0;s=i.equals(n)?o:[...o,n]}else s=o;let{length:u}=s,h=new gt;for(let d=0;d<u-1;d++)if(h.start=s[d],h.end=s[d+1],sc(e,h))return!0;return!1}function zg(t,e,r){let n=pr.fromRect(e);return fc(t,n,r)}function Og(t,e,r,n){return t.getSubpaths().some(i=>{let[o]=i.toPolylines(r),{type:s}=i.getSegment(-1);return s==="Z"?fc(e,o,n):Pa(e,o,n)})}function Pa(t,e,r={}){let{interior:n=!1}=r,i;if(n){let{start:u}=e;if(t.containsPoint(u))return!0;i=t.clone().close()}else i=t;let o=e.points,{length:s}=o,a=new gt;for(let u=0;u<s-1;u++)if(a.start=o[u],a.end=o[u+1],Ma(i,a))return!0;return!1}function fc(t,e,r){return e.containsPoint(t.start)||Pa(t,e.clone().close(),r)}function rA(t,e,r,n){let{cos:i,sin:o}=Math,s=o(e),a=i(e),u=o(n),h=i(n),d=s*s,f=a*a,I=s*a,A=u*u,b=h*h,S=u*h,P=t.a*t.a,E=t.b*t.b,j=r.a*r.a,U=r.b*r.b,Q=P*d+E*f,rt=j*A+U*b,p=P*f+E*d,v=j*b+U*A,w=2*(E-P)*I,M=2*(U-j)*S,D=-2*Q*t.x-w*t.y,G=-2*rt*r.x-M*r.y,Z=-w*t.x-2*p*t.y,_=-M*r.x-2*v*r.y,at=Q*t.x*t.x+p*t.y*t.y+w*t.x*t.y-P*E,ht=rt*r.x*r.x+v*r.y*r.y+M*r.x*r.y-j*U;w=w/2,M=M/2,D=D/2,G=G/2,Z=Z/2,_=_/2;let Y=Ln([[Q,w,D],[w,p,Z],[D,Z,at]]),K=Ln([[rt,M,G],[M,v,_],[G,_,ht]]),J=.33333333*(Ln([[rt,w,D],[M,p,Z],[G,Z,at]])+Ln([[Q,M,D],[w,v,Z],[D,_,at]])+Ln([[Q,w,G],[w,p,_],[D,Z,ht]])),q=.33333333*(Ln([[Q,M,G],[w,v,_],[D,_,ht]])+Ln([[rt,w,G],[M,p,_],[G,Z,ht]])+Ln([[rt,M,D],[M,v,Z],[G,_,at]])),St=Na([[Y,J],[J,q]]),Nt=Na([[Y,q],[J,K]]),oe=Na([[J,q],[q,K]]);return!(Na([[2*St,Nt],[Nt,2*oe]])>0&&(q>0||J>0))}function Na(t){return t[0][0]*t[1][1]-t[0][1]*t[1][0]}function Ln(t){return t[0][0]*t[1][1]*t[2][2]-t[0][0]*t[1][2]*t[2][1]-t[0][1]*t[1][0]*t[2][2]+t[0][1]*t[1][2]*t[2][0]+t[0][2]*t[1][0]*t[2][1]-t[0][2]*t[1][1]*t[2][0]}var nA=hc;var le={};Ae(le,{addClassNamePrefix:()=>Ue,assign:()=>At,bindAll:()=>mv,breakText:()=>js,camelCase:()=>ql,cancelFrame:()=>Mo,cap:()=>Mh,clone:()=>rr,cloneCells:()=>Ys,cloneDeep:()=>Be,dataUriToBlob:()=>xv,debounce:()=>Jl,deepMixin:()=>dv,deepSupplement:()=>yh,defaults:()=>Ve,defaultsDeep:()=>Un,difference:()=>xo,downloadBlob:()=>Cv,downloadDataUri:()=>sC,filter:()=>Dh,flattenDeep:()=>Kl,flattenObject:()=>Av,forIn:()=>nr,format:()=>cC,getByPath:()=>hn,getElementBBox:()=>lC,getRectPoint:()=>Po,groupBy:()=>Ql,guid:()=>Nn,has:()=>cr,hashCode:()=>wo,imageToDataUri:()=>aC,interpolate:()=>Ws,intersection:()=>gv,invoke:()=>er,invokeProperty:()=>Ch,isBoolean:()=>Hl,isEmpty:()=>ur,isEqual:()=>tn,isFunction:()=>Vt,isNumber:()=>Ge,isObject:()=>Gt,isPercentage:()=>ye,isPlainObject:()=>ae,isString:()=>Te,merge:()=>Ie,mixin:()=>Ih,nextFrame:()=>No,noop:()=>hC,normalizeEvent:()=>Jt,normalizeSides:()=>fr,normalizeWheel:()=>Nh,omit:()=>Ar,parseCssNumeric:()=>yv,parseDOMJSON:()=>_n,pick:()=>pv,removeClassNamePrefix:()=>xh,result:()=>ue,sanitizeHTML:()=>Th,setAttributesBySelector:()=>uC,setByPath:()=>bo,shapePerimeterConnectionPoint:()=>iC,sortBy:()=>Co,sortElements:()=>Sh,sortedIndex:()=>yo,supplement:()=>Ah,svg:()=>mC,template:()=>ir,timing:()=>Ph,toArray:()=>Dt,toKebabCase:()=>bh,toggleFullScreen:()=>fC,union:()=>Ni,uniq:()=>kr,uniqueId:()=>$l,unsetByPath:()=>tu,uuid:()=>wh,without:()=>bi,wrapWith:()=>Eh,wrappers:()=>Us});var kh=Qr(Ps(),1);var fn=Qr(wn(),1);var vA=function(){var t=typeof window=="object"&&!!window.SVGAngle;if(!t)return function(){throw new Error("SVG is required to use Vectorizer.")};var e={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},r="1.1",n=Math,i=n.PI,o=n.atan2,s=n.sqrt,a=n.min,u=n.max,h=n.cos,d=n.sin,f=function(v,w,M){if(!(this instanceof f))return f.apply(Object.create(f.prototype),arguments);if(v){if(f.isV(v)&&(v=v.node),w=w||{},f.isString(v)){if(v=v.trim(),v.toLowerCase()==="svg")v=f.createSvgDocument();else if(v[0]==="<"){var D=f.createSvgDocument(v);if(D.childNodes.length>1){var G=[],Z,_;for(Z=0,_=D.childNodes.length;Z<_;Z++){var at=D.childNodes[Z];G.push(new f(document.importNode(at,!0)))}return G}v=document.importNode(D.firstChild,!0)}else v=document.createElementNS(e.svg,v);f.ensureId(v)}return this.node=v,this.setAttributes(w),M&&this.append(M),this}},I=f.prototype;Object.defineProperty(I,"id",{enumerable:!0,get:function(){return this.node.id},set:function(v){this.node.id=v}}),I.getTransformToElement=function(v){var w=this.node;if(f.isSVGGraphicsElement(v)&&f.isSVGGraphicsElement(w)){var M=f.toNode(v).getScreenCTM(),D=w.getScreenCTM();if(M&&D)return M.inverse().multiply(D)}return f.createSVGMatrix()},I.transform=function(v,w){var M=this.node;if(f.isUndefined(v))return f.transformStringToMatrix(this.attr("transform"));if(w&&w.absolute)return this.attr("transform",f.matrixToTransformString(v));var D=f.createSVGTransform(v);return M.transform.baseVal.appendItem(D),this},I.translate=function(v,w,M){M=M||{},w=w||0;var D=this.attr("transform")||"",G=f.parseTransformString(D);if(D=G.value,f.isUndefined(v))return G.translate;D=D.replace(/translate\([^)]*\)/g,"").trim();var Z=M.absolute?v:G.translate.tx+v,_=M.absolute?w:G.translate.ty+w,at="translate("+Z+","+_+")";return this.attr("transform",(at+" "+D).trim()),this},I.rotate=function(v,w,M,D){D=D||{};var G=this.attr("transform")||"",Z=f.parseTransformString(G);if(G=Z.value,f.isUndefined(v))return Z.rotate;G=G.replace(/rotate\([^)]*\)/g,"").trim(),v%=360;var _=D.absolute?v:Z.rotate.angle+v,at=w!==void 0&&M!==void 0?","+w+","+M:"",ht="rotate("+_+at+")";return this.attr("transform",(G+" "+ht).trim()),this},I.scale=function(v,w){w=f.isUndefined(w)?v:w;var M=this.attr("transform")||"",D=f.parseTransformString(M);if(M=D.value,f.isUndefined(v))return D.scale;M=M.replace(/scale\([^)]*\)/g,"").trim();var G="scale("+v+","+w+")";return this.attr("transform",(M+" "+G).trim()),this},I.bbox=function(v,w){var M,D=this.node,G=D.ownerSVGElement;if(!G)return new ft(0,0,0,0);try{M=D.getBBox()}catch(_){M={x:D.clientLeft,y:D.clientTop,width:D.clientWidth,height:D.clientHeight}}if(v)return new ft(M);var Z=this.getTransformToElement(w||G);return f.transformRect(M,Z)},I.getBBox=function(v){var w={},M,D=this.node,G=D.ownerSVGElement;if(!G||!f.isSVGGraphicsElement(D))return new ft(0,0,0,0);if(v&&(v.target&&(w.target=f.toNode(v.target)),v.recursive&&(w.recursive=v.recursive)),w.recursive){var _=this.children(),at=_.length;if(at===0)return this.getBBox({target:w.target,recursive:!1});w.target||(w.target=this);for(var ht=0;ht<at;ht++){var Y=_[ht],K;Y.children().length===0?K=Y.getBBox({target:w.target,recursive:!1}):K=Y.getBBox({target:w.target,recursive:!0}),M?M=M.union(K):M=K}return M}else{try{M=D.getBBox()}catch(J){M={x:D.clientLeft,y:D.clientTop,width:D.clientWidth,height:D.clientHeight}}if(w.target){var Z=this.getTransformToElement(w.target);return f.transformRect(M,Z)}else return new ft(M)}};function A(v,w){v||(v={});var M=f("textPath"),D=v.d;if(D&&v["xlink:href"]===void 0){var G=f("path").attr("d",D).appendTo(w.defs());M.attr("xlink:href","#"+G.id)}return f.isObject(v)&&M.attr(v),M.node}function b(v,w,M){M||(M={});for(var D=M.includeAnnotationIndices,G=M.eol,Z=M.lineHeight,_=M.baseSize,at=0,ht={},Y=w.length-1,K=0;K<=Y;K++){var J=w[K],q=null;if(f.isObject(J)){var St=J.attrs,Nt=f("tspan",St),oe=Nt.node,pe=J.t;G&&K===Y&&(pe+=G),oe.textContent=pe;var wt=St.class;wt&&Nt.addClass(wt),D&&Nt.attr("annotations",J.annotations),q=parseFloat(St["font-size"]),isFinite(q)||(q=_),q&&q>at&&(at=q)}else G&&K===Y&&(J+=G),oe=document.createTextNode(J||" "),_&&_>at&&(at=_);v.appendChild(oe)}return at&&(ht.maxFontSize=at),Z?ht.lineHeight=Z:at&&(ht.lineHeight=at*1.2),ht}var S=/em$/;function P(v,w){var M=parseFloat(v);return S.test(v)?M*w:M}function E(v,w,M,D){if(!Array.isArray(w))return 0;var G=w.length;if(!G)return 0;for(var Z=w[0],_=P(Z.maxFontSize,M)||M,at=0,ht=P(D,M),Y=1;Y<G;Y++){Z=w[Y];var K=P(Z.lineHeight,M)||ht;at+=K}var J=P(Z.maxFontSize,M)||M,q;switch(v){case"middle":q=_/2-.15*J-at/2;break;case"bottom":q=-(.25*J)-at;break;default:case"top":q=.8*_;break}return q}I.text=function(v,w){if(v&&typeof v!="string")throw new Error("Vectorizer: text() expects the first argument to be a string.");v=f.sanitizeText(v),w||(w={});var M=w.displayEmpty,D=w.eol,G=w.textPath,Z=w.textVerticalAnchor,_=Z==="middle"||Z==="bottom"||Z==="top",at=w.x;at===void 0&&(at=this.attr("x")||0);var ht=w.includeAnnotationIndices,Y=w.annotations;Y&&!f.isArray(Y)&&(Y=[Y]);var K=w.lineHeight,J=K==="auto",q=J?"1.5em":K||"1em";this.empty(),this.attr({"xml:space":"preserve",display:v||M?null:"none"});var St=parseFloat(this.attr("font-size"));St||(St=16,(_||Y)&&this.attr("font-size",St));var Nt=document,oe;G?(typeof G=="string"&&(G={d:G}),oe=A(G,this)):oe=Nt.createDocumentFragment();for(var pe=0,wt=v.split(`
`),Mt=[],ot,it=0,pt=wt.length-1;it<=pt;it++){var Bt=q,Qt="v-line",Tt=Nt.createElementNS(e.svg,"tspan"),ee=wt[it],C;if(ee)if(Y){var T=f.annotateString(ee,Y,{offset:-pe,includeAnnotationIndices:ht});C=b(Tt,T,{includeAnnotationIndices:ht,eol:it!==pt&&D,lineHeight:J?null:q,baseSize:St});var k=C.lineHeight;k&&J&&it!==0&&(Bt=k),it===0&&(ot=C.maxFontSize*.8)}else D&&it!==pt&&(ee+=D),Tt.textContent=ee;else{Tt.textContent="-",Qt+=" v-empty-line";var R=Tt.style;if(R.fillOpacity=0,R.strokeOpacity=0,Y){C={},T=f.findAnnotationsAtIndex(Y,pe);let st=St;for(let It=T.length;It>0;It--){let Lt=T[It-1].attrs;if(!Lt||!("font-size"in Lt))continue;let Ft=parseFloat(Lt["font-size"]);if(isFinite(Ft)){st=Ft;break}}J&&(it>0?Bt=st*1.2:ot=st*.8),Tt.setAttribute("font-size",st),C.maxFontSize=st}}C&&Mt.push(C),it>0&&Tt.setAttribute("dy",Bt),(it>0||G)&&Tt.setAttribute("x",at),Tt.className.baseVal=Qt,oe.appendChild(Tt),pe+=ee.length+1}if(_)if(Y)Bt=E(Z,Mt,St,q);else if(Z==="top")Bt="0.8em";else{var F;switch(pt>0?(F=parseFloat(q)||1,F*=pt,S.test(q)||(F/=St)):F=0,Z){case"middle":Bt=.3-F/2+"em";break;case"bottom":Bt=-F-.3+"em";break}}else Z===0?Bt="0em":Z?Bt=Z:(Bt=0,this.attr("y")===null&&this.attr("y",ot||"0.8em"));return oe.firstChild.setAttribute("dy",Bt),this.append(oe),this},I.removeAttr=function(v){let w=rt[v],{ns:M,local:D}=f.qualifyAttr(w),G=this.node;return M?G.hasAttributeNS(M,D)&&G.removeAttributeNS(M,D):G.hasAttribute(w)&&G.removeAttribute(w),this},I.attr=function(v,w){if(f.isUndefined(v)){for(var M=this.node.attributes,D={},G=0;G<M.length;G++)D[M[G].name]=M[G].value;return D}if(f.isString(v)&&f.isUndefined(w))return this.node.getAttribute(rt[v]);if(typeof v=="object")for(var Z in v)v.hasOwnProperty(Z)&&this.setAttribute(Z,v[Z]);else this.setAttribute(v,w);return this},I.normalizePath=function(){var v=this.tagName();return v==="PATH"&&this.attr("d",f.normalizePathData(this.attr("d"))),this},I.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},I.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},I.setAttributes=function(v){for(var w in v)v.hasOwnProperty(w)&&this.setAttribute(w,v[w]);return this},I.append=function(v){f.isArray(v)||(v=[v]);for(var w=0,M=v.length;w<M;w++)this.node.appendChild(f.toNode(v[w]));return this},I.prepend=function(v){var w=this.node.firstChild;return w?f(w).before(v):this.append(v)},I.before=function(v){var w=this.node,M=w.parentNode;if(M){f.isArray(v)||(v=[v]);for(var D=0,G=v.length;D<G;D++)M.insertBefore(f.toNode(v[D]),w)}return this},I.appendTo=function(v){return f.toNode(v).appendChild(this.node),this},I.svg=function(){return this.node instanceof window.SVGSVGElement?this:f(this.node.ownerSVGElement)},I.tagName=function(){return this.node.tagName.toUpperCase()},I.defs=function(){var v=this.svg()||this,w=v.node.getElementsByTagName("defs")[0];return w?f(w):f("defs").appendTo(v)},I.clone=function(){var v=f(this.node.cloneNode(!0));return v.node.id=f.uniqueId(),v},I.findOne=function(v){var w=this.node.querySelector(v);return w?f(w):void 0},I.find=function(v){var w=[],M=this.node.querySelectorAll(v);if(M)for(var D=0;D<M.length;D++)w.push(f(M[D]));return w},I.children=function(){for(var v=this.node.childNodes,w=[],M=0;M<v.length;M++){var D=v[M];D.nodeType===1&&w.push(f(v[M]))}return w},I.parent=function(){return f(this.node.parentNode)||null},I.index=function(){for(var v=0,w=this.node.previousSibling;w;)w.nodeType===1&&v++,w=w.previousSibling;return v},I.findParentByClass=function(v,w){for(var M=this.node.ownerSVGElement,D=this.node.parentNode;D&&D!==w&&D!==M;){var G=f(D);if(G.hasClass(v))return G;D=D.parentNode}return null},I.contains=function(v){var w=this.node,M=f.toNode(v),D=M&&M.parentNode;return w===D||!!(D&&D.nodeType===1&&w.compareDocumentPosition(D)&16)},I.toLocalPoint=function(v,w){var M=this.svg().node,D=M.createSVGPoint();D.x=v,D.y=w;try{var G=D.matrixTransform(M.getScreenCTM().inverse()),Z=this.getTransformToElement(M).inverse()}catch(_){return D}return G.matrixTransform(Z)},I.translateCenterToPoint=function(v){var w=this.getBBox({target:this.svg()}),M=w.center();return this.translate(v.x-M.x,v.y-M.y),this},I.translateAndAutoOrient=function(v,w,M){v=new z(v),w=new z(w),M||(M=this.svg());var D=this.scale();this.attr("transform","");var G=this.getBBox({target:M}).scale(D.sx,D.sy),Z=f.createSVGTransform();Z.setTranslate(-G.x-G.width/2,-G.y-G.height/2);var _=f.createSVGTransform(),at=v.angleBetween(w,v.clone().offset(1,0));at&&_.setRotate(at,0,0);var ht=f.createSVGTransform(),Y=v.clone().move(w,G.width/2);ht.setTranslate(2*v.x-Y.x,2*v.y-Y.y);var K=this.getTransformToElement(M),J=f.createSVGTransform();return J.setMatrix(ht.matrix.multiply(_.matrix.multiply(Z.matrix.multiply(K.scale(D.sx,D.sy))))),this.attr("transform",f.matrixToTransformString(J.matrix)),this},I.animateAlongPath=function(v,w){w=f.toNode(w);var M=f.ensureId(w),D=f("animateMotion",v),G=f("mpath",{"xlink:href":"#"+M});D.append(G),this.append(D);try{D.node.beginElement()}catch(q){if(document.documentElement.getAttribute("smiling")==="fake"){var Z=D.node;Z.animators=[];var _=Z.getAttribute("id");_&&(id2anim[_]=Z);for(var at=getTargets(Z),ht=0,Y=at.length;ht<Y;ht++){var K=at[ht],J=new Animator(Z,K,ht);animators.push(J),Z.animators[ht]=J,J.register()}}}return this};let j=/[^\x20\t\r\n\f]+/g;function U(v){return f.isString(v)?v.trim().match(j)||[]:[]}I.hasClass=function(v){return f.isString(v)?this.node.classList.contains(v.trim()):!1},I.addClass=function(v){return this.node.classList.add(...U(v)),this},I.removeClass=function(v){return this.node.classList.remove(...U(v)),this},I.toggleClass=function(v,w){let M=U(v);for(let D=0;D<M.length;D++)this.node.classList.toggle(M[D],w);return this},I.sample=function(v){v=v||1;for(var w=this.node,M=w.getTotalLength(),D=[],G=0,Z;G<M;)Z=w.getPointAtLength(G),D.push({x:Z.x,y:Z.y,distance:G}),G+=v;return D},I.convertToPath=function(){var v=f("path");v.attr(this.attr());var w=this.convertToPathData();return w&&v.attr("d",w),v},I.convertToPathData=function(){var v=this.tagName();switch(v){case"PATH":return this.attr("d");case"LINE":return f.convertLineToPathData(this.node);case"POLYGON":return f.convertPolygonToPathData(this.node);case"POLYLINE":return f.convertPolylineToPathData(this.node);case"ELLIPSE":return f.convertEllipseToPathData(this.node);case"CIRCLE":return f.convertCircleToPathData(this.node);case"RECT":return f.convertRectToPathData(this.node)}throw new Error(v+" cannot be converted to PATH.")},f.prototype.toGeometryShape=function(){var v,w,M,D,G,Z,_,at,ht,Y,K,J,q,St,Nt;switch(this.tagName()){case"RECT":return v=parseFloat(this.attr("x"))||0,w=parseFloat(this.attr("y"))||0,M=parseFloat(this.attr("width"))||0,D=parseFloat(this.attr("height"))||0,new ft(v,w,M,D);case"CIRCLE":return G=parseFloat(this.attr("cx"))||0,Z=parseFloat(this.attr("cy"))||0,_=parseFloat(this.attr("r"))||0,new je({x:G,y:Z},_,_);case"ELLIPSE":return G=parseFloat(this.attr("cx"))||0,Z=parseFloat(this.attr("cy"))||0,at=parseFloat(this.attr("rx"))||0,ht=parseFloat(this.attr("ry"))||0,new je({x:G,y:Z},at,ht);case"POLYLINE":return Y=f.getPointsFromSvgNode(this),new qt(Y);case"POLYGON":return Y=f.getPointsFromSvgNode(this),Y.length>1&&Y.push(Y[0]),new qt(Y);case"PATH":return K=this.attr("d"),yt.isDataSupported(K)||(K=f.normalizePathData(K)),new yt(K);case"LINE":return J=parseFloat(this.attr("x1"))||0,St=parseFloat(this.attr("y1"))||0,q=parseFloat(this.attr("x2"))||0,Nt=parseFloat(this.attr("y2"))||0,new gt({x:J,y:St},{x:q,y:Nt})}return this.getBBox()},I.findIntersection=function(v,w){var M=this.svg().node;w=w||M;var D=this.getBBox({target:w}),G=D.center();if(D.intersectionWithLineFromCenterToPoint(v)){var Z,_=this.tagName();if(_==="RECT"){var at=new ft(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),ht=this.getTransformToElement(w),Y=f.decomposeMatrix(ht),K=M.createSVGTransform();K.setRotate(-Y.rotation,G.x,G.y);var J=f.transformRect(at,K.matrix.multiply(ht));Z=new ft(J).intersectionWithLineFromCenterToPoint(v,Y.rotation)}else if(_==="PATH"||_==="POLYGON"||_==="POLYLINE"||_==="CIRCLE"||_==="ELLIPSE"){var q=_==="PATH"?this:this.convertToPath(),St=q.sample(),Nt=1/0,oe=[],pe,wt,Mt,ot,it,pt;for(pe=0;pe<St.length;pe++)wt=St[pe],Mt=f.createSVGPoint(wt.x,wt.y),Mt=Mt.matrixTransform(this.getTransformToElement(w)),wt=new z(Mt),ot=wt.distance(G),it=wt.distance(v)*1.1,pt=ot+it,pt<Nt?(Nt=pt,oe=[{sample:wt,refDistance:it}]):pt<Nt+1&&oe.push({sample:wt,refDistance:it});oe.sort(function(Bt,Qt){return Bt.refDistance-Qt.refDistance}),oe[0]&&(Z=oe[0].sample)}return Z}},I.setAttribute=function(v,w){let M=this.node;if(w===null)return this.removeAttr(v),this;let D=rt[v],{ns:G}=f.qualifyAttr(D);return G?M.setAttributeNS(G,D,w):D==="id"?M.id=w:M.setAttribute(D,w),this},f.createSvgDocument=function(v){if(v){let M=`<svg xmlns="${e.svg}" xmlns:xlink="${e.xlink}" version="${r}">${v}</svg>`,{documentElement:D}=f.parseXML(M,{async:!1});return D}let w=document.createElementNS(e.svg,"svg");return w.setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),w.setAttribute("version",r),w},f.createSVGStyle=function(v){let{node:w}=f("style",{type:"text/css"},[f.createCDATASection(v)]);return w},f.createCDATASection=function(v=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(v)},f.idCounter=0,f.uniqueId=function(){return"v-"+ ++f.idCounter},f.toNode=function(v){return f.isV(v)?v.node:v.nodeName&&v||v[0]},f.ensureId=function(v){return v=f.toNode(v),v.id||(v.id=f.uniqueId())},f.sanitizeText=function(v){return(v||"").replace(/ /g,"\xA0")},f.isUndefined=function(v){return typeof v=="undefined"},f.isString=function(v){return typeof v=="string"},f.isObject=function(v){return v&&typeof v=="object"},f.isArray=Array.isArray,f.parseXML=function(v,w){w=w||{};var M;try{var D=new DOMParser;f.isUndefined(w.async)||(D.async=w.async),M=D.parseFromString(v,"text/xml")}catch(G){M=void 0}if(!M||M.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+v);return M};let Q=Object.create(null);["baseFrequency","baseProfile","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].forEach(v=>Q[v]=v);let rt=new Proxy(Q,{get(v,w){return f.supportCamelCaseAttributes?w in v?v[w]:v[w]=w.replace(/[A-Z]/g,"-$&").toLowerCase():w}});Object.defineProperty(f,"attributeNames",{value:rt,writable:!1}),Object.defineProperty(f,"supportCamelCaseAttributes",{value:!1,writable:!0}),f.qualifyAttr=function(v){if(v.indexOf(":")!==-1){var w=v.split(":");return{ns:e[w[0]],local:w[1]}}return{ns:null,local:v}},f.transformSeparatorRegex=/[ ,]+/,f.transformRegex=/\b\w+\([^()]+\)/g,f.transformFunctionRegex=/\b(\w+)\(([^()]+)\)/,f.transformTranslateRegex=/\btranslate\(([^()]+)\)/,f.transformRotateRegex=/\brotate\(([^()]+)\)/,f.transformScaleRegex=/\bscale\(([^()]+)\)/,f.transformStringToMatrix=function(v){let w=f.createSVGMatrix(),M=v&&v.match(f.transformRegex);if(!M)return w;let D=M.length;for(let G=0;G<D;G++){let _=M[G].match(f.transformFunctionRegex);if(_){let at,ht,Y,K,J,q=f.createSVGMatrix(),St=_[1].toLowerCase(),Nt=_[2].split(f.transformSeparatorRegex);switch(St){case"scale":at=parseFloat(Nt[0]),ht=Nt[1]===void 0?at:parseFloat(Nt[1]),q=q.scaleNonUniform(at,ht);break;case"translate":Y=parseFloat(Nt[0]),K=parseFloat(Nt[1]),q=q.translate(Y,K);break;case"rotate":J=parseFloat(Nt[0]),Y=parseFloat(Nt[1])||0,K=parseFloat(Nt[2])||0,Y!==0||K!==0?q=q.translate(Y,K).rotate(J).translate(-Y,-K):q=q.rotate(J);break;case"skewx":J=parseFloat(Nt[0]),q=q.skewX(J);break;case"skewy":J=parseFloat(Nt[0]),q=q.skewY(J);break;case"matrix":q.a=parseFloat(Nt[0]),q.b=parseFloat(Nt[1]),q.c=parseFloat(Nt[2]),q.d=parseFloat(Nt[3]),q.e=parseFloat(Nt[4]),q.f=parseFloat(Nt[5]);break;default:continue}w=w.multiply(q)}}return w},f.matrixToTransformString=function(v){return v||(v=!0),"matrix("+(v.a!==void 0?v.a:1)+","+(v.b!==void 0?v.b:0)+","+(v.c!==void 0?v.c:0)+","+(v.d!==void 0?v.d:1)+","+(v.e!==void 0?v.e:0)+","+(v.f!==void 0?v.f:0)+")"},f.parseTransformString=function(v){var w,M,D;if(v){var G=f.transformSeparatorRegex;if(v.trim().indexOf("matrix")>=0){var Z=f.transformStringToMatrix(v),_=f.decomposeMatrix(Z);w=[_.translateX,_.translateY],D=[_.scaleX,_.scaleY],M=[_.rotation];var at=[];(w[0]!==0||w[1]!==0)&&at.push("translate("+w+")"),(D[0]!==1||D[1]!==1)&&at.push("scale("+D+")"),M[0]!==0&&at.push("rotate("+M+")"),v=at.join(" ")}else{let Y=v.match(f.transformTranslateRegex);Y&&(w=Y[1].split(G));let K=v.match(f.transformRotateRegex);K&&(M=K[1].split(G));let J=v.match(f.transformScaleRegex);J&&(D=J[1].split(G))}}var ht=D&&D[0]?parseFloat(D[0]):1;return{value:v,translate:{tx:w&&w[0]?parseInt(w[0],10):0,ty:w&&w[1]?parseInt(w[1],10):0},rotate:{angle:M&&M[0]?parseInt(M[0],10):0,cx:M&&M[1]?parseInt(M[1],10):void 0,cy:M&&M[2]?parseInt(M[2],10):void 0},scale:{sx:ht,sy:D&&D[1]?parseFloat(D[1]):ht}}},f.deltaTransformPoint=function(v,w){var M=w.x*v.a+w.y*v.c+0,D=w.x*v.b+w.y*v.d+0;return{x:M,y:D}},f.decomposeMatrix=function(v){var w=f.deltaTransformPoint(v,{x:0,y:1}),M=f.deltaTransformPoint(v,{x:1,y:0}),D=180/i*o(w.y,w.x)-90,G=180/i*o(M.y,M.x);return{translateX:v.e,translateY:v.f,scaleX:s(v.a*v.a+v.b*v.b),scaleY:s(v.c*v.c+v.d*v.d),skewX:D,skewY:G,rotation:D}},f.matrixToScale=function(v){var w,M,D,G;return v?(w=f.isUndefined(v.a)?1:v.a,G=f.isUndefined(v.d)?1:v.d,M=v.b,D=v.c):w=G=1,{sx:M?s(w*w+M*M):w,sy:D?s(D*D+G*G):G}},f.matrixToRotate=function(v){var w={x:0,y:1};return v&&(w=f.deltaTransformPoint(v,w)),{angle:We(ni(o(w.y,w.x))-90)}},f.matrixToTranslate=function(v){return{tx:v&&v.e||0,ty:v&&v.f||0}},f.isV=function(v){return v instanceof f},f.isVElement=f.isV,f.isSVGGraphicsElement=function(v){return v?(v=f.toNode(v),v instanceof SVGElement&&typeof v.getScreenCTM=="function"):!1};var p=f("svg").node;return f.createSVGMatrix=function(v){var w=p.createSVGMatrix();for(var M in v)w[M]=v[M];return w},f.createSVGTransform=function(v){return f.isUndefined(v)?p.createSVGTransform():(v instanceof SVGMatrix||(v=f.createSVGMatrix(v)),p.createSVGTransformFromMatrix(v))},f.createSVGPoint=function(v,w){var M=p.createSVGPoint();return M.x=v,M.y=w,M},f.transformRect=function(v,w){var M=p.createSVGPoint();M.x=v.x,M.y=v.y;var D=M.matrixTransform(w);M.x=v.x+v.width,M.y=v.y;var G=M.matrixTransform(w);M.x=v.x+v.width,M.y=v.y+v.height;var Z=M.matrixTransform(w);M.x=v.x,M.y=v.y+v.height;var _=M.matrixTransform(w),at=a(D.x,G.x,Z.x,_.x),ht=u(D.x,G.x,Z.x,_.x),Y=a(D.y,G.y,Z.y,_.y),K=u(D.y,G.y,Z.y,_.y);return new ft(at,Y,ht-at,K-Y)},f.transformPoint=function(v,w){return new z(f.createSVGPoint(v.x,v.y).matrixTransform(w))},f.transformLine=function(v,w){return new gt(f.transformPoint(v.start,w),f.transformPoint(v.end,w))},f.transformPolyline=function(v,w){var M=v instanceof qt?v.points:v;f.isArray(M)||(M=[]);for(var D=[],G=0,Z=M.length;G<Z;G++)D[G]=f.transformPoint(M[G],w);return new qt(D)},f.styleToObject=function(v){for(var w={},M=v.split(";"),D=0;D<M.length;D++){var G=M[D],Z=G.split("=");w[Z[0].trim()]=Z[1].trim()}return w},f.createSlicePathData=function(v,w,M,D){var G=2*i-1e-6,Z=v,_=w,at=M,ht=D,Y=(ht<at&&(Y=at,at=ht,ht=Y),ht-at),K=Y<i?"0":"1",J=h(at),q=d(at),St=h(ht),Nt=d(ht);return Y>=G?Z?"M0,"+_+"A"+_+","+_+" 0 1,1 0,"+-_+"A"+_+","+_+" 0 1,1 0,"+_+"M0,"+Z+"A"+Z+","+Z+" 0 1,0 0,"+-Z+"A"+Z+","+Z+" 0 1,0 0,"+Z+"Z":"M0,"+_+"A"+_+","+_+" 0 1,1 0,"+-_+"A"+_+","+_+" 0 1,1 0,"+_+"Z":Z?"M"+_*J+","+_*q+"A"+_+","+_+" 0 "+K+",1 "+_*St+","+_*Nt+"L"+Z*St+","+Z*Nt+"A"+Z+","+Z+" 0 "+K+",0 "+Z*J+","+Z*q+"Z":"M"+_*J+","+_*q+"A"+_+","+_+" 0 "+K+",1 "+_*St+","+_*Nt+"L0,0Z"},f.mergeAttrs=function(v,w){for(var M in w)M==="class"?v[M]=v[M]?v[M]+" "+w[M]:w[M]:M==="style"?f.isObject(v[M])&&f.isObject(w[M])?v[M]=f.mergeAttrs(v[M],w[M]):f.isObject(v[M])?v[M]=f.mergeAttrs(v[M],f.styleToObject(w[M])):f.isObject(w[M])?v[M]=f.mergeAttrs(f.styleToObject(v[M]),w[M]):v[M]=f.mergeAttrs(f.styleToObject(v[M]),f.styleToObject(w[M])):v[M]=w[M];return v},f.annotateString=function(v,w,M){w=w||[],M=M||{};for(var D=M.offset||0,G=[],Z,_=[],at,ht,Y=0;Y<v.length;Y++){at=_[Y]=v[Y];for(var K=0;K<w.length;K++){var J=w[K],q=J.start+D,St=J.end+D;Y>=q&&Y<St&&(f.isObject(at)?at.attrs=f.mergeAttrs(f.mergeAttrs({},at.attrs),J.attrs):at=_[Y]={t:v[Y],attrs:J.attrs},M.includeAnnotationIndices&&(at.annotations||(at.annotations=[])).push(K))}ht=_[Y-1],ht?f.isObject(at)&&f.isObject(ht)?JSON.stringify(at.attrs)===JSON.stringify(ht.attrs)?Z.t+=at.t:(G.push(Z),Z=at):f.isObject(at)||f.isObject(ht)?(G.push(Z),Z=at):Z=(Z||"")+at:Z=at}return Z&&G.push(Z),G},f.findAnnotationsAtIndex=function(v,w){var M=[];return v&&v.forEach(function(D){D.start<w&&w<=D.end&&M.push(D)}),M},f.findAnnotationsBetweenIndexes=function(v,w,M){var D=[];return v&&v.forEach(function(G){(w>=G.start&&w<G.end||M>G.start&&M<=G.end||G.start>=w&&G.end<M)&&D.push(G)}),D},f.shiftAnnotations=function(v,w,M){return v&&v.forEach(function(D){D.start<w&&D.end>=w?D.end+=M:D.start>=w&&(D.start+=M,D.end+=M)}),v},f.convertLineToPathData=function(v){v=f(v);var w=["M",v.attr("x1"),v.attr("y1"),"L",v.attr("x2"),v.attr("y2")].join(" ");return w},f.convertPolygonToPathData=function(v){var w=f.getPointsFromSvgNode(v);return w.length===0?null:f.svgPointsToPath(w)+" Z"},f.convertPolylineToPathData=function(v){var w=f.getPointsFromSvgNode(v);return w.length===0?null:f.svgPointsToPath(w)},f.svgPointsToPath=function(v){for(var w=0,M=v.length;w<M;w++)v[w]=v[w].x+" "+v[w].y;return"M "+v.join(" L")},f.getPointsFromSvgNode=function(v){v=f.toNode(v);var w=[],M=v.points;if(M)for(var D=0,G=M.numberOfItems;D<G;D++)w.push(M.getItem(D));return w},f.KAPPA=.551784,f.convertCircleToPathData=function(v){v=f(v);var w=parseFloat(v.attr("cx"))||0,M=parseFloat(v.attr("cy"))||0,D=parseFloat(v.attr("r")),G=D*f.KAPPA,Z=["M",w,M-D,"C",w+G,M-D,w+D,M-G,w+D,M,"C",w+D,M+G,w+G,M+D,w,M+D,"C",w-G,M+D,w-D,M+G,w-D,M,"C",w-D,M-G,w-G,M-D,w,M-D,"Z"].join(" ");return Z},f.convertEllipseToPathData=function(v){v=f(v);var w=parseFloat(v.attr("cx"))||0,M=parseFloat(v.attr("cy"))||0,D=parseFloat(v.attr("rx")),G=parseFloat(v.attr("ry"))||D,Z=D*f.KAPPA,_=G*f.KAPPA,at=["M",w,M-G,"C",w+Z,M-G,w+D,M-_,w+D,M,"C",w+D,M+_,w+Z,M+G,w,M+G,"C",w-Z,M+G,w-D,M+_,w-D,M,"C",w-D,M-_,w-Z,M-G,w,M-G,"Z"].join(" ");return at},f.convertRectToPathData=function(v){return v=f(v),f.rectToPath({x:parseFloat(v.attr("x"))||0,y:parseFloat(v.attr("y"))||0,width:parseFloat(v.attr("width"))||0,height:parseFloat(v.attr("height"))||0,rx:parseFloat(v.attr("rx"))||0,ry:parseFloat(v.attr("ry"))||0})},f.rectToPath=function(v){var w,M=v.x,D=v.y,G=v.width,Z=v.height,_=a(v.rx||v["top-rx"]||0,G/2),at=a(v.rx||v["bottom-rx"]||0,G/2),ht=a(v.ry||v["top-ry"]||0,Z/2),Y=a(v.ry||v["bottom-ry"]||0,Z/2);return _||at||ht||Y?w=["M",M,D+ht,"v",Z-ht-Y,"a",at,Y,0,0,0,at,Y,"h",G-2*at,"a",at,Y,0,0,0,at,-Y,"v",-(Z-Y-ht),"a",_,ht,0,0,0,-_,-ht,"h",-(G-2*_),"a",_,ht,0,0,0,-_,ht,"Z"]:w=["M",M,D,"H",M+G,"V",D+Z,"H",M,"V",D,"Z"],w.join(" ")},f.normalizePathData=function(){var v=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,w=new RegExp("([a-z])["+v+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+v+"]*,?["+v+"]*)+)","ig"),M=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+v+"]*,?["+v+"]*","ig"),D=Math,G=D.PI,Z=D.sin,_=D.cos,at=D.tan,ht=D.asin,Y=D.sqrt,K=D.abs;function J(wt,Mt,ot,it,pt,Bt){var Qt=.3333333333333333,Tt=2/3;return[Qt*wt+Tt*ot,Qt*Mt+Tt*it,Qt*pt+Tt*ot,Qt*Bt+Tt*it,pt,Bt]}function q(wt,Mt,ot){var it=wt*_(ot)-Mt*Z(ot),pt=wt*Z(ot)+Mt*_(ot);return{x:it,y:pt}}function St(wt,Mt,ot,it,pt,Bt,Qt,Tt,ee,C){var T=G*120/180,k=G/180*(+pt||0),R=[],F;if(C)me=C[0],be=C[1],mt=C[2],se=C[3];else{F=q(wt,Mt,-k),wt=F.x,Mt=F.y,F=q(Tt,ee,-k),Tt=F.x,ee=F.y;var st=(wt-Tt)/2,It=(Mt-ee)/2,Lt=st*st/(ot*ot)+It*It/(it*it);Lt>1&&(Lt=Y(Lt),ot=Lt*ot,it=Lt*it);var Ft=ot*ot,Pe=it*it,De=(Bt==Qt?-1:1)*Y(K((Ft*Pe-Ft*It*It-Pe*st*st)/(Ft*It*It+Pe*st*st))),mt=De*ot*It/it+(wt+Tt)/2,se=De*-it*st/ot+(Mt+ee)/2,me=ht(((Mt-se)/it).toFixed(9)),be=ht(((ee-se)/it).toFixed(9));me=wt<mt?G-me:me,be=Tt<mt?G-be:be,me<0&&(me=G*2+me),be<0&&(be=G*2+be),Qt&&me>be&&(me=me-G*2),!Qt&&be>me&&(be=be-G*2)}var Ne=be-me;if(K(Ne)>T){var Re=be,dr=Tt,_r=ee;be=me+T*(Qt&&be>me?1:-1),Tt=mt+ot*_(be),ee=se+it*Z(be),R=St(Tt,ee,ot,it,pt,0,Qt,dr,_r,[be,Re,mt,se])}Ne=be-me;var wr=_(me),Xr=Z(me),en=_(be),Go=Z(be),qn=at(Ne/4),Zo=4/3*(ot*qn),jo=4/3*(it*qn),oa=[wt,Mt],Er=[wt+Zo*Xr,Mt-jo*wr],Tn=[Tt+Zo*Go,ee-jo*en],Wo=[Tt,ee];if(Er[0]=2*oa[0]-Er[0],Er[1]=2*oa[1]-Er[1],C)return[Er,Tn,Wo].concat(R);R=[Er,Tn,Wo].concat(R).join().split(",");for(var Yo=[],br=R.length,ke=0;ke<br;ke++)Yo[ke]=ke%2?q(R[ke-1],R[ke],k).y:q(R[ke],R[ke+1],k).x;return Yo}function Nt(wt){if(!wt)return null;var Mt={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},ot=[];return String(wt).replace(w,function(it,pt,Bt){var Qt=[],Tt=pt.toLowerCase();for(Bt.replace(M,function(ee,C){C&&Qt.push(+C)}),Tt==="m"&&Qt.length>2&&(ot.push([pt].concat(Qt.splice(0,2))),Tt="l",pt=pt==="m"?"l":"L");Qt.length>=Mt[Tt]&&(ot.push([pt].concat(Qt.splice(0,Mt[Tt]))),!!Mt[Tt]););}),ot}function oe(wt){if((!Array.isArray(wt)||!Array.isArray(wt&&wt[0]))&&(wt=Nt(wt)),!wt||!wt.length)return[["M",0,0]];for(var Mt=[],ot=0,it=0,pt=0,Bt=0,Qt=0,Tt,ee=wt.length,C=Qt;C<ee;C++){var T=[];Mt.push(T);var k=wt[C];if(Tt=k[0],Tt!=Tt.toUpperCase()){T[0]=Tt.toUpperCase();var R,F;switch(T[0]){case"A":T[1]=k[1],T[2]=k[2],T[3]=k[3],T[4]=k[4],T[5]=k[5],T[6]=+k[6]+ot,T[7]=+k[7]+it;break;case"V":T[1]=+k[1]+it;break;case"H":T[1]=+k[1]+ot;break;case"M":for(pt=+k[1]+ot,Bt=+k[2]+it,R=k.length,F=1;F<R;F++)T[F]=+k[F]+(F%2?ot:it);break;default:for(R=k.length,F=1;F<R;F++)T[F]=+k[F]+(F%2?ot:it);break}}else for(var st=k.length,It=0;It<st;It++)T[It]=k[It];switch(T[0]){case"Z":ot=+pt,it=+Bt;break;case"H":ot=T[1];break;case"V":it=T[1];break;case"M":pt=T[T.length-2],Bt=T[T.length-1],ot=T[T.length-2],it=T[T.length-1];break;default:ot=T[T.length-2],it=T[T.length-1];break}}return Mt}function pe(wt){var Mt=oe(wt),ot={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function it(R,F,st){var It,Lt;if(!R)return["C",F.x,F.y,F.x,F.y,F.x,F.y];switch(R[0]in{T:1,Q:1}||(F.qx=null,F.qy=null),R[0]){case"M":F.X=R[1],F.Y=R[2];break;case"A":parseFloat(R[1])===0||parseFloat(R[2])===0?R=["L",R[6],R[7]]:R=["C"].concat(St.apply(0,[F.x,F.y].concat(R.slice(1))));break;case"S":st==="C"||st==="S"?(It=F.x*2-F.bx,Lt=F.y*2-F.by):(It=F.x,Lt=F.y),R=["C",It,Lt].concat(R.slice(1));break;case"T":st==="Q"||st==="T"?(F.qx=F.x*2-F.qx,F.qy=F.y*2-F.qy):(F.qx=F.x,F.qy=F.y),R=["C"].concat(J(F.x,F.y,F.qx,F.qy,R[1],R[2]));break;case"Q":F.qx=R[1],F.qy=R[2],R=["C"].concat(J(F.x,F.y,R[1],R[2],R[3],R[4]));break;case"H":R=["L"].concat(R[1],F.y);break;case"V":R=["L"].concat(F.x,R[1]);break;case"L":break;case"Z":break}return R}function pt(R,F){if(R[F].length>7){R[F].shift();for(var st=R[F];st.length;)Bt[F]="A",R.splice(F++,0,["C"].concat(st.splice(0,6)));R.splice(F,1),ee=Mt.length}}for(var Bt=[],Qt="",Tt="",ee=Mt.length,C=0;C<ee;C++){Mt[C]&&(Qt=Mt[C][0]),Qt!=="C"&&(Bt[C]=Qt,C>0&&(Tt=Bt[C-1])),Mt[C]=it(Mt[C],ot,Tt),Bt[C]!=="A"&&Qt==="C"&&(Bt[C]="C"),pt(Mt,C);var T=Mt[C],k=T.length;ot.x=T[k-2],ot.y=T[k-1],ot.bx=parseFloat(T[k-4])||ot.x,ot.by=parseFloat(T[k-3])||ot.y}return(!Mt[0][0]||Mt[0][0]!=="M")&&Mt.unshift(["M",0,0]),Mt}return function(wt){return pe(wt).join(",").split(",").join(" ")}}(),f.namespace=e,f.g=Le,f}(),X=vA;var tr={useCSSSelectors:!0,classNamePrefix:"joint-",defaultTheme:"default",doubleTapInterval:300};var Ls="[object Arguments]",Qf="[object Array]",jl="[object Boolean]",eh="[object Date]",Tm="[object Error]",IA="[object Function]",Es="[object Map]",Wl="[object Number]",AA="[object Null]",mo="[object Object]",rh="[object RegExp]",zs="[object Set]",Yl="[object String]",Fl="[object Symbol]",yA="[object Undefined]",CA="[object WeakMap]",nh="[object ArrayBuffer]",ih="[object DataView]",Sm="[object Float32Array]",Pm="[object Float64Array]",Dm="[object Int8Array]",Lm="[object Int16Array]",km="[object Int32Array]",Em="[object Uint8Array]",zm="[object Uint8ClampedArray]",Om="[object Uint16Array]",Bm="[object Uint32Array]",xA={[Ls]:!0,[Qf]:!0,[nh]:!0,[ih]:!0,[jl]:!0,[eh]:!0,[Sm]:!0,[Pm]:!0,[Dm]:!0,[Lm]:!0,[km]:!0,[Es]:!0,[Wl]:!0,[mo]:!0,[rh]:!0,[zs]:!0,[Yl]:!0,[Fl]:!0,[Em]:!0,[zm]:!0,[Om]:!0,[Bm]:!0,[Tm]:!1,[IA]:!1,[CA]:!1},oh="\\ud800-\\udfff",wA="\\u0300-\\u036f",bA="\\ufe20-\\ufe2f",NA="\\u20d0-\\u20ff",MA="\\u1ab0-\\u1aff",TA="\\u1dc0-\\u1dff",SA=wA+bA+NA+MA+TA,Rm="\\u2700-\\u27bf",Gm="a-z\\xdf-\\xf6\\xf8-\\xff",PA="\\xac\\xb1\\xd7\\xf7",DA="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",LA="\\u2000-\\u206f",kA=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Zm="A-Z\\xc0-\\xd6\\xd8-\\xde",EA="\\ufe0e\\ufe0f",jm=PA+DA+LA+kA,Wm="['\u2019]",Cm=`[${jm}]`,sh=`[${SA}]`,Ym="\\d",zA=`[${Rm}]`,Fm=`[${Gm}]`,Vm=`[^${oh}${jm+Ym+Rm+Gm+Zm}]`,Kf="\\ud83c[\\udffb-\\udfff]",OA=`(?:${sh}|${Kf})`,Um=`[^${oh}]`,ah="(?:\\ud83c[\\udde6-\\uddff]){2}",lh="[\\ud800-\\udbff][\\udc00-\\udfff]",po=`[${Zm}]`,BA="\\u200d",xm=`(?:${Fm}|${Vm})`,RA=`(?:${po}|${Vm})`,wm=`(?:${Wm}(?:d|ll|m|re|s|t|ve))?`,bm=`(?:${Wm}(?:D|LL|M|RE|S|T|VE))?`,_m=`${OA}?`,Xm=`[${EA}]?`,GA=`(?:${BA}(?:${[Um,ah,lh].join("|")})${Xm+_m})*`,ZA="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",jA="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Hm=Xm+_m+GA,WA=`(?:${[zA,ah,lh].join("|")})${Hm}`,YA=RegExp([`${po}?${Fm}+${wm}(?=${[Cm,po,"$"].join("|")})`,`${RA}+${bm}(?=${[Cm,po+xm,"$"].join("|")})`,`${po}?${xm}+${wm}`,`${po}+${bm}`,jA,ZA,`${Ym}+`,WA].join("|"),"g"),uh=200,qf="__hash_undefined__",FA=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\]$/,VA=`[${oh}]`,UA=`${Um}${sh}?`,_A=`(?:${[UA,sh,ah,lh,VA].join("|")})`,Jm=RegExp(`${Kf}(?=${Kf})|${_A+Hm}`,"g"),XA=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,HA=/^\w*$/,JA=46,QA=/\\(\\)?/g,KA=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),qA=/^(?:0|[1-9]\d*)$/,$A=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),ty=4294967294,ey=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Qm=t=>Jm.test(t),ry=t=>t.match(Jm)||[],ny=t=>t.split(""),Km=t=>Qm(t)?ry(t):ny(t),iy=t=>t==null?[]:Os(t).map(e=>t[e]),Os=t=>Gr(t)?qm(t):Object.keys(Object(t)),oy=t=>{if(!Vl(t))return Object.keys(t);var e=[];for(var r in Object(t))hasOwnProperty.call(t,r)&&r!="constructor"&&e.push(r);return e},qm=(t,e)=>{let r=Array.isArray(t),n=!r&&Yr(t)&&Fr(t)===Ls,i=!r&&!n&&Rs(t),o=r||n||i,s=t.length,a=new Array(o?s:0),u=o?-1:s;for(;++u<s;)a[u]=`${u}`;for(let h in t)(e||hasOwnProperty.call(t,h))&&!(o&&(h==="length"||gh(h,s)))&&a.push(h);return a},Ol=(t,e)=>{let{length:r}=t;for(;r--;)if(Ao(t[r][0],e))return r;return-1},Ao=(t,e)=>t===e||t!==t&&e!==e,Yr=t=>t!=null&&typeof t=="object",Rl=(t,e,r)=>{if(!Gt(r))return!1;let n=typeof e;return(n=="number"?Gr(r)&&e>-1&&e<r.length:n=="string"&&e in r)?Ao(r[e],t):!1},sy=t=>Yr(t)&&Fr(t)==zs,ay=t=>Yr(t)&&Fr(t)==Es,Vl=t=>{let e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Object.prototype;return t===r},wi=(t,e,r)=>{let n=t[e];(!(hasOwnProperty.call(t,e)&&Ao(n,r))||r===void 0&&!(e in t))&&(t[e]=r)},Bs=(t,e,r)=>{let n=-1,i=e.length;for(;++n<i;){let o=e[n];wi(r,o,t[o])}return r},Gr=t=>t!=null&&typeof t!="function"&&typeof t.length=="number"&&t.length>-1&&t.length%1===0,Io=t=>typeof t=="symbol"||Yr(t)&&Fr(t)===Fl,ly=t=>{let e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&hasOwnProperty.call(t,"index")&&(r.index=t.index,r.input=t.input),r},ch=(t,e)=>{let r=-1,n=t.length;for(e||(e=new Array(n));++r<n;)e[r]=t[r];return e},Fr=t=>t==null?t===void 0?yA:AA:Object.prototype.toString.call(t),fh=t=>{let e=new t.constructor(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e},$m=(t,e)=>{let r=e?fh(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},uy=t=>{let e=new t.constructor(t.source,/\w*$/.exec(t));return e.lastIndex=t.lastIndex,e},tv=t=>typeof t.constructor=="function"&&!Vl(t)?Object.create(Object.getPrototypeOf(t)):{},hh=t=>t==null?[]:(t=Object(t),Object.getOwnPropertySymbols(t).filter(r=>propertyIsEnumerable.call(t,r))),cy=(t,e)=>Bs(t,hh(t),e);function fy(t,e){let r=e?fh(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var hy=(t,e,r)=>{let n=t.constructor;switch(e){case nh:return fh(t,r);case jl:case eh:return new n(+t);case ih:return fy(t,r);case Sm:case Pm:case Dm:case Lm:case km:case Em:case zm:case Om:case Bm:return $m(t,r);case Es:return new n(t);case Wl:case Yl:return new n(t);case rh:return uy(t);case zs:return new n;case Fl:return Symbol.prototype.valueOf?Object(Symbol.prototype.valueOf.call(t)):{}}},Rs=t=>Yr(t)&&FA.test(Fr(t)),$f=t=>{let e=Object.keys(t);return!Array.isArray(t)&&t!=null&&e.push(...hh(Object(t))),e},ev=t=>{let e=[];for(;t;)e.push(...hh(t)),t=Object.getPrototypeOf(Object(t));return e},rv=t=>{let e=[];for(let r in t)e.push(r);return Array.isArray(t)||e.push(...ev(t)),e},Bl=({__data__:t},e)=>{let r=t;return Ny(e)?r[typeof e=="string"?"string":"hash"]:r.map},dy=(t,e,r,n)=>{let i=$f(t),o=i.length,a=$f(e).length;if(o!=a)return!1;let u,h=o;for(;h--;)if(u=i[h],!hasOwnProperty.call(e,u))return!1;let d=n.get(t),f=n.get(e);if(d&&f)return d==e&&f==t;let I=!0;n.set(t,e),n.set(e,t);let A,b;for(;++h<o;){u=i[h];let S=t[u],P=e[u];if(!(A===void 0?S===P||r(S,P,n):A)){I=!1;break}b||(b=u=="constructor")}if(I&&!b){let S=t.constructor,P=e.constructor;S!=P&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof P=="function"&&P instanceof P)&&(I=!1)}return n.delete(t),n.delete(e),I},Ul=(t,e,r)=>t===e?!0:t==null||e==null||!Yr(t)&&!Yr(e)?t!==t&&e!==e:gy(t,e,Ul,r),gy=(t,e,r,n)=>{let i=Array.isArray(t),o=Array.isArray(e),s=i?Qf:Fr(t),a=o?Qf:Fr(e);s=s==Ls?mo:s,a=a==Ls?mo:a;let u=s==mo,h=a==mo,d=s==a;if(d&&!u)return n||(n=new Yn),i||Rs(t)?nv(t,e,!1,r,n):vy(t,e,s,r,n);let f=u&&hasOwnProperty.call(t,"__wrapped__"),I=h&&hasOwnProperty.call(e,"__wrapped__");if(f||I){let A=f?t.value():t,b=I?e.value():e;return n||(n=new Yn),r(A,b,n)}return d?(n||(n=new Yn),dy(t,e,r,n)):!1},nv=(t,e,r,n,i)=>{let s=t.length,a=e.length;if(s!=a)return!1;let u=i.get(t),h=i.get(e);if(u&&h)return u==e&&h==t;let d=-1,f=!0,I=r?new Fn:void 0;for(i.set(t,e),i.set(e,t);++d<s;){let A,b=t[d],S=e[d];if(A!==void 0){if(A)continue;f=!1;break}if(I){if(!py(e,(P,E)=>{if(!my(I,E)&&(b===P||n(b,P,i)))return I.push(E)})){f=!1;break}}else if(!(b===S||n(b,S,i))){f=!1;break}}return i.delete(t),i.delete(e),f},py=(t,e)=>{let r=-1,n=t==null?0:t.length;for(;++r<n;)if(e(t[r],r,t))return!0;return!1},my=(t,e)=>t.has(e),Nm=(t,e,r,n)=>!(t.byteLength!=e.byteLength||!r(new Uint8Array(t),new Uint8Array(e),n)),vy=(t,e,r,n,i)=>{switch(r){case ih:return t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset?!1:(t=t.buffer,e=e.buffer,Nm(t,e,n,i));case nh:return Nm(t,e,n,i);case jl:case eh:case Wl:return Ao(+t,+e);case Tm:return t.name==e.name&&t.message==e.message;case rh:case Yl:return t==`${e}`;case Es:let o=iv;case zs:if(o||(o=_l),t.size!=e.size)return!1;let s=i.get(t);if(s)return s==e;i.set(t,e);let a=nv(o(t),o(e),!0,n,i);return i.delete(t),a;case Fl:return Symbol.prototype.valueOf.call(t)==Symbol.prototype.valueOf.call(e)}return!1},iv=t=>{let e=-1,r=Array(t.size);return t.forEach((n,i)=>{r[++e]=[i,n]}),r},_l=t=>{let e=-1,r=new Array(t.size);return t.forEach(n=>{r[++e]=n}),r},dh=(t,e)=>{if(Array.isArray(t))return!1;let r=typeof t;return r==="number"||r==="boolean"||t==null||Io(t)?!0:HA.test(t)||!XA.test(t)||e!=null&&t in Object(e)},Iy=t=>{let e=[];return t.charCodeAt(0)===JA&&e.push(""),t.replace(KA,(r,n,i,o)=>{let s=r;i?s=o.replace(QA,"$1"):n&&(s=n.trim()),e.push(s)}),e},Vn=(t,e)=>Array.isArray(t)?t:dh(t,e)?[t]:Iy(`${t}`),Gs=(t,e)=>{e=Vn(e,t);let r=0,n=e.length;for(;t!=null&&r<n;)t=t[bn(e[r])],r++;return r&&r==n?t:void 0};function Ay(t,e){if(t!==e){let r=t!==void 0,n=t===null,i=t===t,o=Io(t),s=e!==void 0,a=e===null,u=e===e,h=Io(e);if(!a&&!h&&!o&&t>e||o&&s&&u&&!a&&!h||n&&s&&u||!r&&u||!i)return 1;if(!n&&!o&&!h&&t<e||h&&r&&i&&!n&&!o||a&&r&&i||!s&&i||!u)return-1}return 0}function yy(t,e,r){let n=-1,i=t.criteria,o=e.criteria,s=i.length,a=r.length;for(;++n<s;){let u=n<a?r[n]:null,d=(u&&typeof u=="function"?u:Ay)(i[n],o[n]);if(d)return u&&typeof u!="function"?d*(u=="desc"?-1:1):d}return t.index-e.index}var ov=(t,e)=>{let r=(s,a)=>!!(s==null?0:s.length)&&s.indexOf(a)>-1,n=!0,i=[],o=e.length;if(!t.length)return i;e.length>=uh&&(r=(s,a)=>s.has(a),n=!1,e=new Fn(e));t:for(let s in t){let a=t[s],u=a;if(a=a!==0?a:0,n&&u===u){let h=o;for(;h--;)if(e[h]===u)continue t;i.push(a)}else r(e,u)||i.push(a)}return i},Cy=t=>{let e=(I,A)=>!!(I==null?0:I.length)&&I.indexOf(A)>-1,r=(I,A)=>I.has(A),n=t[0].length,i=t.length,o=new Array(i),s=[],a,u=1/0,h=i;for(;h--;)a=t[h],u=Math.min(a.length,u),o[h]=n>=120&&a.length>=120?new Fn(h&&a):void 0;a=t[0];let d=-1,f=o[0];t:for(;++d<n&&s.length<u;){let I=a[d],A=I;if(I=I!==0?I:0,!(f?r(f,A):e(s,A))){for(h=i;--h;){let b=o[h];if(!(b?r(b,A):e(t[h],A)))continue t}f&&f.push(A),s.push(I)}}return s},bn=t=>{if(typeof t=="string"||Io(t))return t;let e=`${t}`;return e=="0"&&1/t==-1/0?"-0":e},vo=(t,e=!1,r=!1,n=!0,i,o,s,a)=>{let u;if(i&&(u=s?i(t,o,s,a):i(t)),u!==void 0)return u;if(!Gt(t))return t;let h=Array.isArray(t),d=Fr(t);if(h){if(u=ly(t),!e)return ch(t,u)}else{let b=typeof t=="function";if(d===mo||d===Ls||b&&!s){if(u=r||b?{}:tv(t),!e)return r?xy(t,Bs(t,Object.keys(t),u)):cy(t,Object.assign(u,t))}else{if(b||!xA[d])return s?t:{};u=hy(t,d,e)}}a||(a=new Yn);let f=a.get(t);if(f)return f;if(a.set(t,u),ay(t))return t.forEach((b,S)=>{u.set(S,vo(b,e,r,n,i,S,t,a))}),u;if(sy(t))return t.forEach(b=>{u.add(vo(b,e,r,n,i,b,t,a))}),u;if(Rs(t))return u;let A=h?void 0:(n?r?rv:$f:r?ph:Os)(t);return(A||t).forEach((b,S)=>{A&&(S=b,b=t[S]),wi(u,S,vo(b,e,r,n,i,S,t,a))}),u},xy=(t,e)=>Bs(t,ev(t),e),sv=(t,e)=>e.length<2?t:Gs(t,e.slice(0,-1)),wy=(t,e,r)=>{if(!Gt(t))return t;e=Vn(e,t);let n=e.length,i=n-1,o=-1,s=t;for(;s!=null&&++o<n;){let a=bn(e[o]),u=r;if(o!=i){let h=s[a];u=void 0,u===void 0&&(u=Gt(h)?h:gh(e[o+1])?[]:{})}wi(s,a,u),s=s[a]}return t},gh=(t,e)=>{let r=typeof t;return e=e==null?Number.MAX_SAFE_INTEGER:e,!!e&&(r==="number"||r!=="symbol"&&qA.test(t))&&t>-1&&t%1==0&&t<e},by=(t,e)=>{e=Vn(e,t),t=sv(t,e);let r=e[e.length-1];return t==null||delete t[bn(r)]},Ny=t=>{let e=typeof t;return e==="string"||e==="number"||e==="symbol"||e==="boolean"?t!=="__proto__":t===null},ph=t=>{let e=[];for(let r in t)e.push(r);return e},My=t=>{t=Object(t);let e={};for(let r in t)e[r]=t[r];return e},Mm=(t,e)=>{if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]};function av(t,e=!1){return(r,...n)=>{let i=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(o--,s):e?(u,h)=>{if(Array.isArray(u)&&!Array.isArray(h))return h}:void 0,a&&Rl(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),r=Object(r);++i<o;){let u=n[i];u&&t(r,u,i,s)}return r}}var mh=(t,e,r,n,i)=>{t!==e&&nr(e,(o,s)=>{if(Gt(o))i||(i=new Yn),Ty(t,e,s,r,mh,n,i);else{let a=n?n(t[s],o,`${s}`,t,e,i):void 0;a===void 0&&(a=o),th(t,s,a)}},ph)},Ty=(t,e,r,n,i,o,s)=>{let a=Mm(t,r),u=Mm(e,r),h=s.get(u);if(h){th(t,r,h);return}let d=o?o(a,u,`${r}`,t,e,s):void 0,f=d===void 0;if(f){let I=Array.isArray(u),A=!I&&Rs(u);d=u,I||A?Array.isArray(a)?d=a:Yr(a)&&Gr(a)?d=ch(a):A?(f=!1,d=$m(u,!0)):d=[]:ae(u)||ks(u)?(d=a,ks(a)?d=My(a):(typeof a=="function"||!Gt(a))&&(d=tv(u))):f=!1}f&&(s.set(u,d),i(d,u,n,o,s),s.delete(u)),th(t,r,d)},th=(t,e,r)=>{(r!==void 0&&!Ao(t[e],r)||r===void 0&&!(e in t))&&wi(t,e,r)};function Sy(t,e,r){let n=Object(t),i=r(t),{length:o}=i,s=-1;for(;o--;){let a=i[++s];if(e(n[a],a,n)===!1)break}return t}var Py=(t,e)=>t&&Sy(t,e,Os),vh=(t,e)=>{if(t==null)return t;if(!Gr(t))return Py(t,e);let r=t.length,n=Object(t),i=-1;for(;++i<r&&e(n[i],i,n)!==!1;);return t};function Dy(t){let e=t==null?0:t.length;return e?t[e-1]:void 0}var Ly=Set&&1/_l(new Set([void 0,-0]))[1]==1/0?t=>new Set(t):()=>{};function lv(t,e,r,n,i,o){return Gt(t)&&Gt(e)&&(o.set(e,t),mh(t,e,void 0,lv,o),o.delete(e)),t}function ky(t,e,r){e.length?e=e.map(s=>Array.isArray(s)?a=>Gs(a,s.length===1?s[0]:s):s):e=[s=>s];let n=-1,i=-1,o=Gr(t)?new Array(t.length):[];return vh(t,s=>{let a=e.map(u=>u(s));o[++i]={criteria:a,index:++n,value:s}}),Ey(o,(s,a)=>yy(s,a,r))}function Ey(t,e){let{length:r}=t;for(t.sort(e);r--;)t[r]=t[r].value;return t}function uv(t){return t===t&&!Gt(t)}function cv(t,e){return r=>r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}function fv(t,e){return t!=null&&Qy(t,e,Jy)}function zy(t,e){return dh(t)&&uv(e)?cv(bn(t),e):r=>{let n=Gs(r,t);return n===void 0&&n===e?fv(r,t):Ul(e,n)}}function Oy(t){let e=By(t);return e.length===1&&e[0][2]?cv(e[0][0],e[0][1]):r=>r===t||Ry(r,t,e)}function By(t){let e=Os(t),r=e.length;for(;r--;){let n=e[r],i=t[n];e[r]=[n,i,uv(i)]}return e}function Ry(t,e,r,n){let i=r.length,o=i,s=!n;if(t==null)return!o;let a,u;for(t=Object(t);i--;)if(a=r[i],s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1;for(;++i<o;){a=r[i];let h=a[0],d=t[h],f=a[1];if(s&&a[2]){if(d===void 0&&!(h in t))return!1}else{let I=new Yn;if(n&&(u=n(d,f,h,t,e,I)),!(u===void 0?Ul(f,d,I):u))return!1}}return!0}function Gy(t){return dh(t)?Zy(bn(t)):jy(t)}function Zy(t){return e=>e==null?void 0:e[t]}function jy(t){return e=>Gs(e,t)}function Wy(t){return typeof t=="function"?t:t==null?e=>e:typeof t=="object"?Array.isArray(t)?zy(t[0],t[1]):Oy(t):Gy(t)}function Xl(){let t=Wy;return arguments.length?t(arguments[0],arguments[1]):t}var Yy=(t,e,r,n)=>{let i=-1,o=t==null?0:t.length;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r},Fy=(t,e,r,n,i)=>(i(t,(o,s,a)=>{r=n?(n=!1,o):e(r,o,s,a)}),r);function Vy(t,e,r){let n=Array.isArray(t)?Yy:Fy,i=arguments.length<3;return n(t,e,r,i,vh)}var Uy=t=>Array.isArray(t)||ks(t)||!!(t&&t[Symbol.isConcatSpreadable]);function hv(t,e,r,n,i){let o=-1,s=t.length;for(r||(r=Uy),i||(i=[]);++o<s;){var a=t[o];e>0&&r(a)?e>1?hv(a,e-1,r,n,i):i.push(...a):n||(i[i.length]=a)}return i}var ks=t=>Yr(t)&&Fr(t)=="[object Arguments]",_y=(t,e)=>Xy(t,e,(r,n)=>fv(t,n)),Xy=(t,e,r)=>{let n=-1,i=e.length,o={};for(;++n<i;){let s=e[n],a=Gs(t,s);r(a,s)&&wy(o,Vn(s,t),a)}return o},Hy=t=>typeof t=="number"&&t>-1&&t%1==0&&t<=Number.MAX_SAFE_INTEGER,Jy=(t,e)=>t!=null&&e in Object(t),Qy=(t,e,r)=>{e=Vn(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=bn(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&Hy(i)&&gh(s,i)&&(Array.isArray(t)||ks(t)))},Ky=t=>t.match(ey),qy=t=>t.match(YA),$y=(t,e)=>e===void 0?($A(t)?qy(t):Ky(t))||[]:t.match(e)||[],tC=(t,e,r)=>{let{length:n}=t;return r=r===void 0?n:r,!e&&r>=n?t:t.slice(e,r)},eC=rC("toUpperCase");function rC(t){return e=>{if(!e)return"";let r=Qm(e)?Km(e):void 0,n=r?r[0]:e[0],i=r?tC(r,1).join(""):e.slice(1);return n[t]()+i}}var Yn=class{constructor(e){let r=this.__data__=new Ds(e);this.size=r.size}clear(){this.__data__=new Ds,this.size=0}delete(e){let r=this.__data__,n=r.delete(e);return this.size=r.size,n}get(e){return this.__data__.get(e)}has(e){return this.__data__.has(e)}set(e,r){let n=this.__data__;if(n instanceof Ds){let i=n.__data__;if(i.length<uh-1)return i.push([e,r]),this.size=++n.size,this;n=this.__data__=new Gl(i)}return n.set(e,r),this.size=n.size,this}},Ds=class{constructor(e){let r=-1,n=e==null?0:e.length;for(this.clear();++r<n;){let i=e[r];this.set(i[0],i[1])}}clear(){this.__data__=[],this.size=0}delete(e){let r=this.__data__,n=Ol(r,e);if(n<0)return!1;let i=r.length-1;return n==i?r.pop():r.splice(n,1),--this.size,!0}get(e){let r=this.__data__,n=Ol(r,e);return n<0?void 0:r[n][1]}has(e){return Ol(this.__data__,e)>-1}set(e,r){let n=this.__data__,i=Ol(n,e);return i<0?(++this.size,n.push([e,r])):n[i][1]=r,this}},Gl=class{constructor(e){let r=-1,n=e==null?0:e.length;for(this.clear();++r<n;){let i=e[r];this.set(i[0],i[1])}}clear(){this.size=0,this.__data__={hash:new Zl,map:new Map,string:new Zl}}delete(e){let r=Bl(this,e).delete(e);return this.size-=r?1:0,r}get(e){return Bl(this,e).get(e)}has(e){return Bl(this,e).has(e)}set(e,r){let n=Bl(this,e),i=n.size;return n.set(e,r),this.size+=n.size==i?0:1,this}},Zl=class{constructor(e){let r=-1,n=e==null?0:e.length;for(this.clear();++r<n;){let i=e[r];this.set(i[0],i[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(e){let r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}get(e){let n=this.__data__[e];return n===qf?void 0:n}has(e){return this.__data__[e]!==void 0}set(e,r){let n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r===void 0?qf:r,this}},Fn=class{constructor(e){let r=-1,n=e==null?0:e.length;for(this.__data__=new Gl;++r<n;)this.add(e[r])}add(e){return this.__data__.set(e,qf),this}has(e){return this.__data__.has(e)}};Fn.prototype.push=Fn.prototype.add;var Hl=function(t){var e=Object.prototype.toString;return t===!0||t===!1||!!t&&typeof t=="object"&&e.call(t)===jl},Gt=function(t){return!!t&&(typeof t=="object"||typeof t=="function")},Ge=function(t){var e=Object.prototype.toString;return typeof t=="number"||!!t&&typeof t=="object"&&e.call(t)===Wl},Te=function(t){var e=Object.prototype.toString;return typeof t=="string"||!!t&&typeof t=="object"&&e.call(t)===Yl},At=av((t,e)=>{if(Vl(e)||Gr(e)){Bs(e,Os(e),t);return}for(var r in e)hasOwnProperty.call(e,r)&&wi(t,r,e[r])}),Ih=At,dv=Ih,Ah=(t,...e)=>{let r=-1,n=e.length,i=n>2?e[2]:void 0;for(i&&Rl(e[0],e[1],i)&&(n=1);++r<n;){let o=e[r];if(o==null)continue;let s=Object.keys(o),a=s.length,u=-1;for(;++u<a;){let h=s[u],d=t[h];(d===void 0||Ao(d,Object.prototype[h])&&!hasOwnProperty.call(t,h))&&(t[h]=o[h])}}return t},Ve=Ah,yh=function(...e){return e.push(void 0,lv),Ie.apply(void 0,e)},Un=yh,er=(t,e,...r)=>{let n=-1,i=typeof e=="function",o=Gr(t)?new Array(t.length):[];return vh(t,s=>{o[++n]=i?e.apply(s,r):Ch(s,e,...r)}),o},Ch=(t,e,...r)=>{e=Vn(e,t),t=sv(t,e);let n=t==null?t:t[bn(Dy(e))];return n==null?void 0:n.apply(t,r)},yo=(t,e,r)=>{let n=0,i=t==null?0:t.length;if(i==0)return 0;r=Xl(r,2),e=r(e);let o=e!==e,s=e===null,a=Io(e),u=e===void 0;for(;n<i;){let h,d=Math.floor((n+i)/2),f=r(t[d]),I=f!==void 0,A=f===null,b=f===f,S=Io(f);o?h=b:u?h=b&&I:s?h=b&&I&&!A:a?h=b&&I&&!A&&!S:A||S?h=!1:h=f<e,h?n=d+1:i=d}return Math.min(i,ty)},kr=(t,e)=>{let r=-1,n=(u,h)=>!!(u==null?0:u.length)&&u.indexOf(h)>-1;e=Xl(e,2);let i=!0,{length:o}=t,s=[],a=s;if(o>=uh){let u=e?null:Ly(t);if(u)return _l(u);i=!1,n=(h,d)=>h.has(d),a=new Fn}else a=e?[]:s;t:for(;++r<o;){let u=t[r],h=e?e(u):u;if(u=u!==0?u:0,i&&h===h){let d=a.length;for(;d--;)if(a[d]===h)continue t;e&&a.push(h),s.push(u)}else n(a,h)||(a!==s&&a.push(h),s.push(u))}return s},rr=t=>vo(t),Be=t=>vo(t,!0),ur=t=>{if(t==null)return!0;if(Gr(t)&&(Array.isArray(t)||typeof t=="string"||typeof t.splice=="function"||Rs(t)||ks(t)))return!t.length;let e=Fr(t);if(e=="[object Map]"||e=="[object Set]")return!t.size;if(Vl(t))return!oy(t).length;for(let r in t)if(hasOwnProperty.call(t,r))return!1;return!0},tn=(t,e)=>Ul(t,e),Vt=t=>typeof t=="function",ae=t=>{if(!Yr(t)||Fr(t)!="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Dt=t=>{if(!t)return[];if(Gr(t))return Te(t)?Km(t):ch(t);if(Symbol.iterator&&Symbol.iterator in Object(t)){let n=t[Symbol.iterator](),i,o=[];for(;!(i=n.next()).done;)o.push(i.value);return o}let e=Fr(t);return(e==Es?iv:e==zs?_l:iy)(t)};function Jl(t,e,r){if(typeof t!="function")throw new TypeError("Expected a function");let n,i,o,s,a,u,h=0,d=!1,f=!1,I=!0,A=!e&&e!==0&&window&&typeof window.requestAnimationFrame=="function";e=+e||0,Gt(r)&&(d=!!r.leading,f="maxWait"in r,o=f?Math.max(+r.maxWait||0,e):o,I="trailing"in r?!!r.trailing:I);function b(v){let w=n,M=i;return n=i=void 0,h=v,s=t.apply(M,w),s}function S(v,w){return A?(window.cancelAnimationFrame(a),window.requestAnimationFrame(v)):setTimeout(v,w)}function P(v){if(A)return window.cancelAnimationFrame(v);clearTimeout(v)}function E(v){return h=v,a=S(Q,e),d?b(v):s}function j(v){let w=v-u,M=v-h,D=e-w;return f?Math.min(D,o-M):D}function U(v){let w=v-u,M=v-h;return u===void 0||w>=e||w<0||f&&M>=o}function Q(){let v=Date.now();if(U(v))return rt(v);a=S(Q,j(v))}function rt(v){return a=void 0,I&&n?b(v):(n=i=void 0,s)}function p(...v){let w=Date.now(),M=U(w);if(n=v,i=this,u=w,M){if(a===void 0)return E(u);if(f)return a=S(Q,e),b(u)}return a===void 0&&(a=S(Q,e)),s}return p.cancel=()=>{a!==void 0&&P(a),h=0,n=u=i=a=void 0},p.flush=()=>a===void 0?s:rt(Date.now()),p.pending=()=>a!==void 0,p}var Ql=(t,e)=>(e=Xl(e,2),Vy(t,(r,n,i)=>(i=e(n),hasOwnProperty.call(r,i)?r[i].push(n):wi(r,i,[n]),r),{})),Co=(t,e=[])=>{if(t==null)return[];let r=e.length;return r>1&&Rl(t,e[0],e[1])?e=[]:r>2&&Rl(e[0],e[1],e[2])&&(e=[e[0]]),Array.isArray(e)||(e=[Xl(e,2)]),ky(t,e.flat(1),[])},Kl=t=>(t==null?0:t.length)?hv(t,1/0):[],bi=(t,...e)=>Gr(t)?ov(t,e):[],xo=(t,...e)=>Yr(t)&&Gr(t)?ov(t,e.flat(1)):[],gv=(...t)=>{let e=t.map(r=>Yr(r)&&Gr(r)?r:[]);return e.length&&e[0]===t[0]?Cy(e):[]},Ni=(...t)=>{let e=t.flat(1);return kr(e)},cr=(t,e)=>{if(t==null)return!1;typeof e=="string"&&(e=e.split("."));let r=-1,n=t;for(;++r<e.length;){if(!n||!hasOwnProperty.call(n,e[r]))return!1;n=n[e[r]]}return!0},ue=(t,e,r)=>{e=Vn(e,t);let n=-1,i=e.length;for(i||(i=1,t=void 0);++n<i;){let o=t==null?void 0:t[bn(e[n])];o===void 0&&(n=i,o=r),t=typeof o=="function"?o.call(t):o}return t},Ar=(t,...e)=>{let r={};if(t==null)return r;let n=!1;e=e.flat(1).map(o=>(o=Vn(o,t),n||(n=o.length>1),o)),Bs(t,rv(t),r),n&&(r=vo(r,!0,!0,!0,o=>ae(o)?void 0:o));let i=e.length;for(;i--;)by(r,e[i]);return r},pv=(t,...e)=>t==null?{}:_y(t,e.flat(1/0)),mv=(t,...e)=>(e.flat(1).forEach(r=>{r=bn(r),wi(t,r,t[r].bind(t))}),t),nr=(t,e=r=>r)=>{let r=-1,n=Object(t),i=Gr(t)?qm(t,!0):ph(t),o=i.length;for(;o--;){let s=i[++r];if(e(n[s],s,n)===!1)break}},ql=(t="")=>$y(`${t}`.replace(/['\u2019]/g,"")).reduce((e,r,n)=>(r=r.toLowerCase(),e+(n?eC(r):r)),""),nC=0,$l=(t="")=>{let e=++nC;return`${t}`+e},Ie=av((t,e,r,n)=>{mh(t,e,r,n)},!0);var Ue=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,tr.classNamePrefix.length)!==tr.classNamePrefix&&(e=tr.classNamePrefix+e),e}).join(" ")},xh=function(t){return t&&t.toString().split(" ").map(function(e){return e.substr(0,tr.classNamePrefix.length)===tr.classNamePrefix&&(e=e.substr(tr.classNamePrefix.length)),e}).join(" ")},_n=function(t,e){let r={},n={},i=X.namespace.svg,o=e||i,s=document.createDocumentFragment(),a=function(u,h,d){for(let f=0;f<u.length;f++){let I=u[f];if(typeof I=="string"){let Q=document.createTextNode(I);h.appendChild(Q);continue}if(!I.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");let A=I.tagName,b;I.hasOwnProperty("namespaceURI")&&(d=I.namespaceURI),b=document.createElementNS(d,A);let S=d===i,P=S?X:fn.default,E=I.attributes;E&&P(b).attr(E);let j=I.style;if(j&&(0,fn.default)(b).css(j),I.hasOwnProperty("className")){let Q=I.className;S?b.className.baseVal=Q:b.className=Q}if(I.hasOwnProperty("textContent")&&(b.textContent=I.textContent),I.hasOwnProperty("selector")){let Q=I.selector;if(r[Q])throw new Error("json-dom-parser: selector must be unique");r[Q]=b,P(b).attr("joint-selector",Q)}if(I.hasOwnProperty("groupSelector")){let Q=I.groupSelector;Array.isArray(Q)||(Q=[Q]);for(let rt=0;rt<Q.length;rt++){let p=Q[rt],v=n[p];v||(v=n[p]=[]),v.push(b)}}h.appendChild(b);let U=I.children;Array.isArray(U)&&a(U,b,d)}};return a(t,s,o),{fragment:s,selectors:r,groupSelectors:n}},wo=function(t){let e=0;if(t.length===0)return e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);e=(e<<5)-e+n,e=e&e}return e},hn=function(t,e,r){for(var n=Array.isArray(e)?e:e.split(r||"/"),i,o=0,s=n.length;o<s;)if(i=n[o++],Object(t)===t&&i in t)t=t[i];else return;return t},Iv=function(t,e){return typeof e!="string"&&typeof e!="number"&&(e=String(e)),!(e==="constructor"&&typeof t[e]=="function"||e==="__proto__")},bo=function(t,e,r,n){let i=Array.isArray(e)?e:e.split(n||"/"),o=i.length-1,s=t,a=0;for(;a<o;a++){let u=i[a];if(!Iv(s,u))return t;s=s[u]||(s[u]={})}return s[i[o]]=r,t},tu=function(t,e,r){let n=Array.isArray(e)?e:e.split(r||"/"),i=n.length-1,o=t,s=0;for(;s<i;s++){let a=n[s];if(!Iv(o,a))return t;let u=o[a];if(!u)return t;o=u}return delete o[n[i]],t},Av=function(t,e,r){e=e||"/";var n={};for(var i in t)if(t.hasOwnProperty(i)){var o=typeof t[i]=="object";if(o&&r&&r(t[i])&&(o=!1),o){var s=Av(t[i],e,r);for(var a in s)s.hasOwnProperty(a)&&(n[i+e+a]=s[a])}else n[i]=t[i]}return n},wh=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,r=t==="x"?e:e&3|8;return r.toString(16)})},Nn=function(t){return Nn.id=Nn.id||1,t===void 0?"j_"+Nn.id++:(t.id=t.id===void 0?"j_"+Nn.id++:t.id,t.id)},bh=function(t){return t.replace(/[A-Z]/g,"-$&").toLowerCase()},Jt=function(t){if(t.normalized)return t;let{originalEvent:e,target:r}=t,n=e&&e.changedTouches&&e.changedTouches[0];if(n)for(let i in n)t[i]===void 0&&(t[i]=n[i]);if(r){let i=r.correspondingUseElement;i&&(t.target=i)}return t.normalized=!0,t},Nh=function(t){let i=0,o=0,s=0,a=0;return"detail"in t&&(o=t.detail),"wheelDelta"in t&&(o=-t.wheelDelta/120),"wheelDeltaY"in t&&(o=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(i=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(i=o,o=0),s="deltaX"in t?t.deltaX:i*10,a="deltaY"in t?t.deltaY:o*10,(s||a)&&t.deltaMode&&(t.deltaMode==1?(s*=40,a*=40):(s*=800,a*=800)),t.deltaX===0&&t.deltaY!==0&&t.shiftKey&&(s=a,a=0,i=o,o=0),s&&!i&&(i=s<1?-1:1),a&&!o&&(o=a<1?-1:1),{spinX:i,spinY:o,deltaX:s,deltaY:a}},Mh=function(t,e){return t>e?e:t<-e?-e:t},No=function(){var t;if(typeof window!="undefined"&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(r){var n=new Date().getTime(),i=Math.max(0,16-(n-e)),o=setTimeout(function(){r(n+i)},i);return e=n+i,o}}return function(r,n,...i){return t(n!==void 0?r.bind(n,...i):r)}}(),Mo=function(){var t,e=typeof window!="undefined";return e&&(t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),t=t||clearTimeout,e?t.bind(window):t}(),iC=function(t,e,r,n){var i,o;if(!r){var s=e.$(".scalable")[0],a=e.$(".rotatable")[0];s&&s.firstChild?r=s.firstChild:a&&a.firstChild&&(r=a.firstChild)}return r?(o=X(r).findIntersection(n,t.paper.cells),o||(i=X(r).getBBox({target:t.paper.cells}))):(i=e.model.getBBox(),o=i.intersectionWithLineFromCenterToPoint(n)),o||i.center()},ye=function(t){return Te(t)&&t.slice(-1)==="%"},yv=function(t,e){function r(a){var u=new RegExp("(?:\\d+(?:\\.\\d+)*)("+a+")$").exec(t);return u?u[1]:null}var n=parseFloat(t);if(Number.isNaN(n))return null;var i={};i.value=n;var o;if(e==null)o="[A-Za-z]*";else if(Array.isArray(e)){if(e.length===0)return null;o=e.join("|")}else Te(e)&&(o=e);var s=r(o);return s===null?null:(i.unit=s,i)},Zs=0;function oC(t,e){let r=t.split(e),n=1;for(let i=0,o=r.length-1;i<o;i++){let s=[];(i>0||r[0]!=="")&&s.push(Zs),s.push(e),(i<o-1||r[o]!=="")&&s.push(Zs),r.splice(n,0,...s),n+=s.length+1}return r.filter(i=>i!=="")}function vv(t,e){if(t===null)return e.getBBox().height;switch(t.unit){case"em":return e.getBBox().height*t.value;case"px":case"":return t.value}}var js=function(t,e,r={},n={}){var i=e.width,o=e.height,s=n.svgDocument||X("svg").node,a=X("tspan").node,u=X("text").attr(r).append(a).node,h=document.createTextNode("");u.style.opacity=0,u.style.display="block",a.style.display="block",a.appendChild(h),s.appendChild(u),n.svgDocument||document.body.appendChild(s);let d=n.preserveSpaces,f=" ",I=n.separator||n.separator===""?n.separator:f,A=typeof I=="string"?I:f;var b=n.eol||`
`,S=n.hyphen?new RegExp(n.hyphen):/[^\w\d\u00C0-\u1FFF\u2800-\uFFFD]/,P=n.maxLineCount;Ge(P)||(P=1/0);var E=t.split(I),j=[],U=[],Q,rt,p;d&&X(a).attr("xml:space","preserve");for(var v=0,w=0,M=E.length;v<M;v++){var D=E[v];if(!(!D&&!d)&&typeof D=="string"){var G=!1;if(b&&D.indexOf(b)>=0)if(D.length>1){let St=oC(E[v],b);E.splice(v,1,...St),v--,M=E.length;continue}else{if(d&&typeof E[v-1]=="string"){E.splice(v,Zs,"",Zs),M+=2,v--;continue}U[++w]=!d||typeof E[v+1]=="string"?"":void 0,G=!0}if(!G){let St;if(d?St=U[w]!==void 0?U[w]+A+D:D:St=U[w]?U[w]+A+D:D,h.data=St,a.getComputedTextLength()<=i)U[w]=St,(Q||rt)&&(j[w++]=!0,Q=0,rt=0);else{if(!U[w]||Q){var Z=!!Q;if(Q=D.length-1,Z||!Q){if(!Q){if(!U[w]){U=[];break}E.splice(v,2,D+E[v+1]),M--,j[w++]=!0,v--;continue}E[v]=D.substring(0,Q);let Nt=E[v+1];E[v+1]=D.substring(Q)+(Nt===void 0||Nt===Zs?"":Nt)}else{if(rt)E.splice(v,2,E[v]+E[v+1]),rt=0;else{var _=D.search(S);_>-1&&_!==D.length-1&&_!==0&&(rt=_+1,Q=0),E.splice(v,1,D.substring(0,rt||Q),D.substring(rt||Q)),M++}w&&!j[w-1]&&w--}(!d||U[w]!=="")&&v--;continue}w++,v--}}var at=null;if(U.length>P)at=P-1;else if(o!==void 0){if(p===void 0&&h.data!=="")if(r.lineHeight==="auto")p=vv({value:1.5,unit:"em"},u);else{let St=yv(r.lineHeight,["em","px",""]);p=vv(St,u)}p*U.length>o&&(at=Math.floor(o/p)-1)}if(at!==null){U.splice(at+1);var ht=n.ellipsis;if(!ht||at<0)break;typeof ht!="string"&&(ht="\u2026");var Y=U[at];if(!Y&&!G)break;var K=Y.length,J,q;do{if(q=Y[K],J=Y.substring(0,K),q?q.match(I)&&(J+=q):J+=A,J+=ht,h.data=J,a.getComputedTextLength()<=i){U[at]=J;break}K--}while(K>=0);break}}}return n.svgDocument?s.removeChild(u):document.body.removeChild(s),U.join(b)},Th=function(t){var e=(0,fn.default)(fn.default.parseHTML("<div>"+t+"</div>",null,!1));return e.find("*").each(function(){var r=this;fn.default.each(r.attributes,function(){var n=this,i=n.name,o=n.value;(i.startsWith("on")||o.startsWith("javascript:")||o.startsWith("data:")||o.startsWith("vbscript:"))&&(0,fn.default)(r).removeAttr(i)})}),e.html()},Cv=function(t,e){if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(t,e);else{var r=window.URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(r)}},sC=function(t,e){let r=xv(t);Cv(r,e)},xv=function(t){t=t.replace(/\s/g,""),t=decodeURIComponent(t);var e=t.indexOf(","),r=t.slice(0,e),n=r.split(":")[1].split(";")[0],i=t.slice(e+1),o;r.indexOf("base64")>=0?o=atob(i):o=unescape(encodeURIComponent(i));for(var s=new Uint8Array(o.length),a=0;a<o.length;a++)s[a]=o.charCodeAt(a);return new Blob([s],{type:n})},aC=function(t,e){if(!t||t.substr(0,5)==="data:")return setTimeout(function(){e(null,t)},0);var r=function(o,s){if(o.status===200){var a=new FileReader;a.onload=function(u){var h=u.target.result;s(null,h)},a.onerror=function(){s(new Error("Failed to load image "+t))},a.readAsDataURL(o.response)}else s(new Error("Failed to load image "+t))},n=function(o,s){var a=function(A){for(var b=32768,S=[],P=0;P<A.length;P+=b)S.push(String.fromCharCode.apply(null,A.subarray(P,P+b)));return S.join("")};if(o.status===200){var u=new Uint8Array(o.response),h=t.split(".").pop()||"png",d={svg:"svg+xml"},f="data:image/"+(d[h]||h)+";base64,",I=f+btoa(a(u));s(null,I)}else s(new Error("Failed to load image "+t))},i=new XMLHttpRequest;i.open("GET",t,!0),i.addEventListener("error",function(){e(new Error("Failed to load image "+t))}),i.responseType=window.FileReader?"blob":"arraybuffer",i.addEventListener("load",function(){window.FileReader?r(i,e):n(i,e)}),i.send()},lC=function(t){var e=(0,fn.default)(t);if(e.length===0)throw new Error("Element not found");var r=e[0],n=r.ownerDocument,i=r.getBoundingClientRect(),o=0,s=0;if(r.ownerSVGElement){var a=X(r),u=a.getBBox({target:a.svg()});o=i.width-u.width,s=i.height-u.height}return{x:i.left+window.pageXOffset-n.documentElement.offsetLeft+o/2,y:i.top+window.pageYOffset-n.documentElement.offsetTop+s/2,width:i.width-o,height:i.height-s}},Sh=function(t,e){var r=(0,fn.default)(t),n=r.map(function(){var i=this,o=i.parentNode,s=o.insertBefore(document.createTextNode(""),i.nextSibling);return function(){if(o===this)throw new Error("You can't sort elements if any one is a descendant of another.");o.insertBefore(this,s),o.removeChild(s)}});return Array.prototype.sort.call(r,e).each(function(i){n[i].call(this)})},uC=function(t,e){var r=(0,fn.default)(t);nr(e,function(n,i){var o=r.find(i).addBack().filter(i);cr(n,"class")&&(o.addClass(n.class),n=Ar(n,"class")),o.attr(n)})},fr=function(t){if(Object(t)!==t){var e=0;return isFinite(t)&&(e=+t),{top:e,right:e,bottom:e,left:e}}var r,n,i,o;return r=n=i=o=0,isFinite(t.vertical)&&(r=i=+t.vertical),isFinite(t.horizontal)&&(n=o=+t.horizontal),isFinite(t.top)&&(r=+t.top),isFinite(t.right)&&(n=+t.right),isFinite(t.bottom)&&(i=+t.bottom),isFinite(t.left)&&(o=+t.left),{top:r,right:n,bottom:i,left:o}},Ph={linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,r=1;;e+=r,r/=2)if(t>=(7-4*e)/11){var n=(11-6*e-11*t)/4;return-n*n+r*r}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return .5*(e<.5?t(2*e):2-t(2-2*e))}},clamp:function(t,e,r){return e=e||0,r=r||1,function(n){var i=t(n);return i<e?e:i>r?r:i}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},Ws={number:function(t,e){var r=e-t;return function(n){return t+r*n}},object:function(t,e){var r=Object.keys(t);return function(n){var i,o,s={};for(i=r.length-1;i!=-1;i--)o=r[i],s[o]=t[o]+(e[o]-t[o])*n;return s}},hexColor:function(t,e){var r=parseInt(t.slice(1),16),n=parseInt(e.slice(1),16),i=r&255,o=(n&255)-i,s=r&65280,a=(n&65280)-s,u=r&16711680,h=(n&16711680)-u;return function(d){var f=i+o*d&255,I=s+a*d&65280,A=u+h*d&16711680;return"#"+(1<<24|f|I|A).toString(16).slice(1)}},unit:function(t,e){var r=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,n=r.exec(t),i=r.exec(e),o=i[1].indexOf("."),s=o>0?i[1].length-o-1:0;t=+n[1];var a=+i[1]-t,u=n[2];return function(h){return(t+a*h).toFixed(s)+u}}},Dh={outline:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>',r=Number.isFinite(t.margin)?t.margin:2,n=Number.isFinite(t.width)?t.width:1;return ir(e)({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:r+n,innerRadius:r})},highlight:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>';return ir(e)({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=Number.isFinite(t.x)?t.x:2;return ir('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return ir(e)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return ir('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return ir('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return ir('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return ir('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return ir('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return ir('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return ir('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},cC={number:function(t,e,r){r=r||{currency:["$",""],decimal:".",thousands:",",grouping:[3]};var n=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,i=n.exec(t),o=i[1]||" ",s=i[2]||">",a=i[3]||"",u=i[4]||"",h=i[5],d=+i[6],f=i[7],I=i[8],A=i[9],b=1,S="",P="",E=!1;switch(I&&(I=+I.substring(1)),(h||o==="0"&&s==="=")&&(h=o="0",s="=",f&&(d-=Math.floor((d-1)/4))),A){case"n":f=!0,A="g";break;case"%":b=100,P="%",A="f";break;case"p":b=100,P="%",A="r";break;case"b":case"o":case"x":case"X":u==="#"&&(S="0"+A.toLowerCase());break;case"c":case"d":E=!0,I=0;break;case"s":b=-1,A="r";break}u==="$"&&(S=r.currency[0],P=r.currency[1]),A=="r"&&!I&&(A="g"),I!=null&&(A=="g"?I=Math.max(1,Math.min(21,I)):(A=="e"||A=="f")&&(I=Math.max(0,Math.min(20,I))));var j=h&&f;if(E&&e%1)return"";var U=e<0||e===0&&1/e<0?(e=-e,"-"):a,Q=P;if(b<0){var rt=this.prefix(e,I);e=rt.scale(e),Q=rt.symbol+P}else e*=b;e=this.convert(A,e,I);var p=e.lastIndexOf("."),v=p<0?e:e.substring(0,p),w=p<0?"":r.decimal+e.substring(p+1);function M(Z){for(var _=Z.length,at=[],ht=0,Y=r.grouping[0];_>0&&Y>0;)at.push(Z.substring(_-=Y,_+Y)),Y=r.grouping[ht=(ht+1)%r.grouping.length];return at.reverse().join(r.thousands)}!h&&f&&r.grouping&&(v=M(v));var D=S.length+v.length+w.length+(j?0:U.length),G=D<d?new Array(D=d-D+1).join(o):"";return j&&(v=M(G+v)),U+=S,e=v+w,(s==="<"?U+e+G:s===">"?G+U+e:s==="^"?G.substring(0,D>>=1)+U+e+G.substring(D):U+(j?e:G+e))+Q},string:function(t,e){for(var r,n="{",i=!1,o=[];(r=t.indexOf(n))!==-1;){var s,a,u;if(s=t.slice(0,r),i){a=s.split(":"),u=a.shift().split("."),s=e;for(var h=0;h<u.length;h++)s=s[u[h]];a.length&&(s=this.number(a,s))}o.push(s),t=t.slice(r+1),i=!i,n=i?"}":"{"}return o.push(t),o.join("")},convert:function(t,e,r){switch(t){case"b":return e.toString(2);case"c":return String.fromCharCode(e);case"o":return e.toString(8);case"x":return e.toString(16);case"X":return e.toString(16).toUpperCase();case"g":return e.toPrecision(r);case"e":return e.toExponential(r);case"f":return e.toFixed(r);case"r":return(e=this.round(e,this.precision(e,r))).toFixed(Math.max(0,Math.min(20,this.precision(e*(1+1e-15),r))));default:return e+""}},round:function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},precision:function(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)},prefix:function(t,e){var r=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"].map(function(i,o){var s=Math.pow(10,Math.abs(8-o)*3);return{scale:o>8?function(a){return a/s}:function(a){return a*s},symbol:i}}),n=0;return t&&(t<0&&(t*=-1),e&&(t=this.round(t,this.precision(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,Math.floor((n<=0?n+1:n-1)/3)*3))),r[8+n/3]}},ir=function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(r){return r=r||{},t.replace(e,function(n){for(var i=Array.from(arguments),o=i.slice(1,4).find(function(u){return!!u}),s=o.split("."),a=r[s.shift()];a!==void 0&&s.length;)a=a[s.shift()];return a!==void 0?a:""})}},fC=function(t){var e=window.top.document;t=t||e.body;function r(n,i){for(var o=["webkit","moz","ms","o",""],s=0;s<o.length;s++){var a=o[s],u=a?a+i:i.substr(0,1).toLowerCase()+i.substr(1);if(n[u]!==void 0)return Vt(n[u])?n[u]():n[u]}}r(e,"FullscreenElement")||r(e,"FullScreenElement")?r(e,"ExitFullscreen")||r(e,"CancelFullScreen"):r(t,"RequestFullscreen")||r(t,"RequestFullScreen")};var hC=function(){};function Ys(t){t=kr(t);let e=Dt(t).reduce(function(r,n){return r[n.id]=n.clone(),r},{});return Dt(t).forEach(function(r){let n=e[r.id];if(n.isLink()){let s=n.source(),a=n.target();s.id&&e[s.id]&&n.prop("source/id",e[s.id].id),a.id&&e[a.id]&&n.prop("target/id",e[a.id].id)}let i=r.get("parent");i&&e[i]&&n.set("parent",e[i].id);let o=Dt(r.get("embeds")).reduce(function(s,a){return e[a]&&s.push(e[a].id),s},[]);ur(o)||n.set("embeds",o)}),e}var dC=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"],gC=dC.reduce((t,e)=>(t[e]=!0,t),{}),pC={qualify:function(t){return ae(t)},set:function(t,e,r){Object.keys(t).forEach(function(n){if(gC[n]&&n in r){let i=t[n];r.tagName==="SELECT"&&Array.isArray(i)?Array.from(r.options).forEach(function(o,s){o.selected=i.includes(o.value)}):r[n]=i}})}},wv=pC;var So=Qr(wn(),1);function Xn(t,e){return function(r,n){var i=ye(r);r=parseFloat(r),i&&(r/=100);var o={};if(isFinite(r)){var s=i||r>=0&&r<=1?r*n[e]:Math.max(r+n[e],0);o[t]=s}return o}}function eu(t,e,r){return function(n,i){var o=ye(n);n=parseFloat(n),o&&(n/=100);var s;if(isFinite(n)){var a=i[r]();o||n>0&&n<1?s=a[t]+i[e]*n:s=a[t]+n}var u=z();return u[t]=s||0,u}}function bv(t,e,r){return function(n,i){var o;n==="middle"?o=i[e]/2:n===r?o=i[e]:isFinite(n)?o=n>-1&&n<1?-i[e]*n:-n:ye(n)?o=i[e]*parseFloat(n)/100:o=0;var s=z();return s[t]=-(i[t]+o),s}}function Pv(t,e){var r="joint-shape",n=e&&e.resetOffset;return function(i,o,s){var a=(0,So.default)(s),u=a.data(r);if(!u||u.value!==i){var h=t(i);u={value:i,shape:h,shapeBBox:h.bbox()},a.data(r,u)}var d=u.shape.clone(),f=u.shapeBBox.clone(),I=f.origin(),A=o.origin();f.x=A.x,f.y=A.y;var b=o.maxRectScaleToFit(f,A),S=f.width===0||o.width===0?1:b.sx,P=f.height===0||o.height===0?1:b.sy;return d.scale(S,P,I),n&&d.translate(-I.x,-I.y),d}}function Nv(t){function e(n){return new yt(X.normalizePathData(n))}var r=Pv(e,t);return function(n,i,o){var s=r(n,i,o);return{d:s.serialize()}}}function Mv(t){var e=Pv(qt,t);return function(r,n,i){var o=e(r,n,i);return{points:o.serialize()}}}function ru(t,e){var r=new z(1,0);return function(n){var i,o,s=this[t](n);return s?(o=e.rotate?s.vector().vectorAngle(r):0,i=s.start):(i=this.path.start,o=0),o===0?{transform:"translate("+i.x+","+i.y+")"}:{transform:"translate("+i.x+","+i.y+") rotate("+o+")"}}}function Tv(t){return function(r,n,i){let o=X(i);o.attr(t)!==r&&o.attr(t,r)}}function To(t,e,r){return r.text!==void 0}function Fs(){return this.model.isLink()}function Lh(t){var e={},r=t.stroke;typeof r=="string"&&(e.stroke=r,e.fill=r);var n=t.strokeOpacity;return n===void 0&&(n=t["stroke-opacity"]),n===void 0&&(n=t.opacity),n!==void 0&&(e["stroke-opacity"]=n,e["fill-opacity"]=n),e}function Sv(t){let{paper:e}=this;return`url(#${t.type==="pattern"?e.definePattern(t):e.defineGradient(t)})`}var jt={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:Tv("href")},xlinkHref:{set:Tv("xlink:href")},filter:{qualify:ae,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}},fill:{qualify:ae,set:Sv},stroke:{qualify:ae,set:Sv},sourceMarker:{qualify:ae,set:function(t,e,r,n){return t=At(Lh(n),t),{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},targetMarker:{qualify:ae,set:function(t,e,r,n){return t=At(Lh(n),{transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},vertexMarker:{qualify:ae,set:function(t,e,r,n){return t=At(Lh(n),t),{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},text:{qualify:function(t,e,r){return!r.textWrap||!ae(r.textWrap)},set:function(t,e,r,n){let i=(0,So.default)(r),o="joint-text",s=i.data(o),{lineHeight:a,annotations:u,textVerticalAnchor:h,eol:d,displayEmpty:f}=n,I=n.textPath,A=n.x;Je(A)&&(A=Qe(A,e));let b=n["font-size"]||n.fontSize;Je(b)&&(b=Qe(b,e));let S=JSON.stringify([t,a,u,h,d,f,I,A,b]);if(s===void 0||s!==S){if(b&&r.setAttribute("font-size",b),Gt(I)){let P=I.selector;if(typeof P=="string"){let[E]=this.findBySelector(P);E instanceof SVGPathElement&&(I=At({"xlink:href":"#"+E.id},I))}}X(r).text(""+t,{lineHeight:a,annotations:u,textPath:I,x:A,textVerticalAnchor:h,eol:d,displayEmpty:f}),i.data(o,S)}}},textWrap:{qualify:ae,set:function(t,e,r,n){var i={},o=t.width||0;ye(o)?i.width=e.width*parseFloat(o)/100:Je(o)?i.width=Number(Qe(o,e)):t.width===null?i.width=1/0:o<=0?i.width=e.width+o:i.width=o;var s=t.height||0;ye(s)?i.height=e.height*parseFloat(s)/100:Je(s)?i.height=Number(Qe(s,e)):t.height===null||(s<=0?i.height=e.height+s:i.height=s);var a,u=t.text;if(u===void 0&&(u=n.text),u!==void 0){let h=t.breakText||js,d=n["font-size"]||n.fontSize;a=h(""+u,i,{"font-weight":n["font-weight"]||n.fontWeight,"font-size":Je(d)?Qe(d,e):d,"font-family":n["font-family"]||n.fontFamily,lineHeight:n.lineHeight,"letter-spacing":"letter-spacing"in n?n["letter-spacing"]:n.letterSpacing},{svgDocument:this.paper.svg,ellipsis:t.ellipsis,hyphen:t.hyphen,separator:t.separator,maxLineCount:t.maxLineCount,preserveSpaces:t.preserveSpaces})}else a="";jt.text.set.call(this,a,e,r,n)}},title:{qualify:function(t,e){return e instanceof SVGElement},set:function(t,e,r){var n=(0,So.default)(r),i="joint-title",o=n.data(i);if(o===void 0||o!==t){if(n.data(i,t),r.tagName==="title"){r.textContent=t;return}var s=r.firstElementChild;if(s&&s.tagName==="title")s.textContent=t;else{var a=document.createElementNS(r.namespaceURI,"title");a.textContent=t,r.insertBefore(a,s)}}}},lineHeight:{qualify:To},textVerticalAnchor:{qualify:To},textPath:{qualify:To},annotations:{qualify:To},eol:{qualify:To},displayEmpty:{qualify:To},port:{set:function(t){return t===null||t.id===void 0?t:t.id}},style:{qualify:ae,set:function(t,e,r){(0,So.default)(r).css(t)}},html:{set:function(t,e,r){(0,So.default)(r).html(t+"")}},props:wv,ref:{},refX:{position:eu("x","width","origin")},refY:{position:eu("y","height","origin")},refDx:{position:eu("x","width","corner")},refDy:{position:eu("y","height","corner")},refWidth:{set:Xn("width","width")},refHeight:{set:Xn("height","height")},refRx:{set:Xn("rx","width")},refRy:{set:Xn("ry","height")},refRInscribed:{set:function(t){var e=Xn(t,"width"),r=Xn(t,"height");return function(n,i){var o=i.height>i.width?e:r;return o(n,i)}}("r")},refRCircumscribed:{set:function(t,e){var r=ye(t);t=parseFloat(t),r&&(t/=100);var n=Math.sqrt(e.height*e.height+e.width*e.width),i;return isFinite(t)&&(r||t>=0&&t<=1?i=t*n:i=Math.max(t+n,0)),{r:i}}},refCx:{set:Xn("cx","width")},refCy:{set:Xn("cy","height")},xAlignment:{offset:bv("x","width","right")},yAlignment:{offset:bv("y","height","bottom")},resetOffset:{offset:function(t,e){return t?{x:-e.x,y:-e.y}:{x:0,y:0}}},refDResetOffset:{set:Nv({resetOffset:!0})},refDKeepOffset:{set:Nv({resetOffset:!1})},refPointsResetOffset:{set:Mv({resetOffset:!0})},refPointsKeepOffset:{set:Mv({resetOffset:!1})},connection:{qualify:Fs,set:function({stubs:t=0}){let e;if(isFinite(t)&&t!==0){let r;t<0?r=(this.getConnectionLength()+t)/2:r=t;let n=this.getConnection(),i=this.getConnectionSubdivisions(),o=n.divideAtLength(r,{segmentSubdivisions:i}),s=n.divideAtLength(-r,{segmentSubdivisions:i});o&&s&&(e=`${o[0].serialize()} ${s[1].serialize()}`)}return{d:e||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:Fs,set:ru("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:Fs,set:ru("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:Fs,set:ru("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:Fs,set:ru("getTangentAtRatio",{rotate:!1})}};jt["xlink:href"]=jt.xlinkHref;["transform","d","points","cx","cy","x1","x2","y1","y2","x","y","dx","dy"].forEach(t=>{jt[t]={qualify:Je,set:function(r,n){return{[t]:Qe(r,n)}}}});["width","height","r","rx","ry","font-size","stroke-width"].forEach(t=>{jt[t]={qualify:Je,set:function(r,n){return{[t]:Math.max(0,Qe(r,n))}}}});jt.refR=jt.refRInscribed;jt.refD=jt.refDResetOffset;jt.refPoints=jt.refPointsResetOffset;jt.atConnectionLength=jt.atConnectionLengthKeepGradient;jt.atConnectionRatio=jt.atConnectionRatioKeepGradient;jt.fontSize=jt["font-size"];jt.strokeWidth=jt["stroke-width"];jt.refX2=jt.refX;jt.refY2=jt.refY;jt.refWidth2=jt.refWidth;jt.refHeight2=jt.refHeight;jt["ref-x"]=jt.refX;jt["ref-y"]=jt.refY;jt["ref-dy"]=jt.refDy;jt["ref-dx"]=jt.refDx;jt["ref-width"]=jt.refWidth;jt["ref-height"]=jt.refHeight;jt["x-alignment"]=jt.xAlignment;jt["y-alignment"]=jt.yAlignment;var Vs=jt;var hr=kh.default.Model.extend({constructor:function(t,e){var r,n=t||{};typeof this.preinitialize=="function"&&this.preinitialize.apply(this,arguments),this.cid=$l("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(n=this.parse(n,e)||{}),(r=ue(this,"defaults"))&&(n=Ie({},r,n)),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,r){throw new Error("Must define a translate() method.")},toJSON:function(){let e=ue(this.constructor.prototype,"defaults").attrs||{},r=this.attributes.attrs,n={};nr(r,function(o,s){let a=e[s];nr(o,function(u,h){Gt(u)&&!Array.isArray(u)?nr(u,function(d,f){(!a||!a[h]||!tn(a[h][f],d))&&(n[s]=n[s]||{},(n[s][h]||(n[s][h]={}))[f]=d)}):(!a||!tn(a[h],u))&&(n[s]=n[s]||{},n[s][h]=u)})});let i=Be(Ar(this.attributes,"attrs"));return i.attrs=n,i},initialize:function(t){let e=this.getIdAttribute();(!t||t[e]===void 0)&&this.set(e,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return wh()},processPorts:function(){var t=this.ports,e={};nr(this.get("attrs"),function(o,s){o&&o.port&&(o.port.id!==void 0?e[o.port.id]=o.port:e[o.port]={id:o.port})});var r={};if(nr(t,function(o,s){e[s]||(r[s]=!0)}),this.graph&&!ur(r)){var n=this.graph.getConnectedLinks(this,{inbound:!0});n.forEach(function(o){r[o.get("target").port]&&o.remove()});var i=this.graph.getConnectedLinks(this,{outbound:!0});i.forEach(function(o){r[o.get("source").port]&&o.remove()})}this.ports=e},remove:function(t={}){let{graph:e,collection:r}=this;if(!e)return r&&r.remove(this,t),this;e.startBatch("remove");let n=this.getParentCell();n&&n.unembed(this,t);let i=this.getEmbeddedCells();for(let o=0,s=i.length;o<s;o++){let a=i[o];a&&a.remove(t)}return this.trigger("remove",this,e.attributes.cells,t),e.stopBatch("remove"),this},toFront:function(t){var e=this.graph;if(e){t=Ve(t||{},{foregroundEmbeds:!0});let r;t.deep?(r=this.getEmbeddedCells({deep:!0,breadthFirst:t.breadthFirst!==!1,sortSiblings:t.foregroundEmbeds}),r.unshift(this)):r=[this];let n=t.foregroundEmbeds?r:Co(r,u=>u.z()),o=e.maxZIndex()-r.length+1,s=e.get("cells"),a=s.indexOf(n[0])!==s.length-r.length;a||(a=n.some(function(u,h){return u.z()!==o+h})),a&&(this.startBatch("to-front"),o=o+r.length,n.forEach(function(u,h){u.set("z",o+h,t)}),this.stopBatch("to-front"))}return this},toBack:function(t){var e=this.graph;if(e){t=Ve(t||{},{foregroundEmbeds:!0});let n;t.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:t.breadthFirst!==!1,sortSiblings:t.foregroundEmbeds}),n.unshift(this)):n=[this];let i=t.foregroundEmbeds?n:Co(n,a=>a.z()),o=e.minZIndex();var r=e.get("cells");let s=r.indexOf(i[0])!==0;s||(s=i.some(function(a,u){return a.z()!==o+u})),s&&(this.startBatch("to-back"),o-=n.length,i.forEach(function(a,u){a.set("z",o+u,t)}),this.stopBatch("to-back"))}return this},parent:function(t,e){return t===void 0?this.get("parent"):this.set("parent",t,e)},embed:function(t,e){let r=Array.isArray(t)?t:[t];if(!this.canEmbed(r))throw new Error("Recursive embedding not allowed.");if(r.some(n=>n.isEmbedded()&&this.id!==n.parent()))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(r,e),this},unembed:function(t,e){let r=Array.isArray(t)?t:[t];return this._unembedCells(r,e),this},canEmbed:function(t){return(Array.isArray(t)?t:[t]).every(r=>this!==r&&!this.isEmbeddedIn(r))},_embedCells:function(t,e){let r="embed";this.startBatch(r);let n=At([],this.get("embeds"));t.forEach(i=>{n[i.isLink()?"unshift":"push"](i.id),i.parent(this.id,e)}),this.set("embeds",kr(n),e),this.stopBatch(r)},_unembedCells:function(t,e){let r="unembed";this.startBatch(r),t.forEach(n=>n.unset("parent",e)),this.set("embeds",bi(this.get("embeds"),...t.map(n=>n.id)),e),this.stopBatch(r)},getParentCell:function(){var t=this.parent(),e=this.graph;return t&&e&&e.getCell(t)||null},getAncestors:function(){var t=[];if(!this.graph)return t;for(var e=this.getParentCell();e;)t.push(e),e=e.getParentCell();return t},getEmbeddedCells:function(t){if(t=t||{},!this.graph)return[];if(t.deep)return t.breadthFirst?this._getEmbeddedCellsBfs(t.sortSiblings):this._getEmbeddedCellsDfs(t.sortSiblings);let e=this.get("embeds");if(ur(e))return[];let r=e.map(this.graph.getCell,this.graph);return t.sortSiblings&&(r=Co(r,n=>n.z())),r},_getEmbeddedCellsBfs:function(t){let e=[],r=[];for(r.push(this);r.length>0;){let n=r.shift();e.push(n);let i=n.getEmbeddedCells({sortSiblings:t});r.push(...i)}return e.shift(),e},_getEmbeddedCellsDfs:function(t){let e=[],r=[];for(r.push(this);r.length>0;){let n=r.pop();e.push(n);let i=n.getEmbeddedCells({sortSiblings:t});for(let o=i.length-1;o>=0;--o)r.push(i[o])}return e.shift(),e},isEmbeddedIn:function(t,e){var r=Te(t)?t:t.id,n=this.parent();if(e=At({deep:!0},e),this.graph&&e.deep){for(;n;){if(n===r)return!0;n=this.graph.getCell(n).parent()}return!1}else return n===r},isEmbedded:function(){return!!this.parent()},clone:function(t){if(t=t||{},t.deep)return Dt(Ys([this].concat(this.getEmbeddedCells({deep:!0}))));var e=kh.default.Model.prototype.clone.apply(this,arguments);return e.set(this.getIdAttribute(),this.generateId()),e.unset("embeds"),e.unset("parent"),e},prop:function(t,e,r){var n="/",i=Te(t);if(i||Array.isArray(t))if(arguments.length>1){var o,s;i?(o=t,s=o.split("/")):(o=t.join(n),s=t.slice());var a=s[0],u=s.length;let U=r||{};U.propertyPath=o,U.propertyValue=e,U.propertyPathArray=s,"rewrite"in U||(U.rewrite=!1);for(var h={},d=h,f=a,I=1;I<u;I++){var A=s[I],b=Number.isFinite(i?Number(A):A);d=d[f]=b?[]:{},f=A}h=bo(h,s,e,"/");var S=Ie({},this.attributes);U.rewrite&&tu(S,o,"/");var P=Ie(S,h);return this.set(a,P[a],U)}else return hn(this.attributes,t,n);let E=e||{};E.propertyPath=null,E.propertyValue=t,E.propertyPathArray=[],"rewrite"in E||(E.rewrite=!1);let j={};for(let U in t){let{changedValue:Q}=Ie({},{changedValue:this.attributes[U]},{changedValue:t[U]});j[U]=Q}return this.set(j,E)},removeProp:function(t,e){e=e||{};var r=Array.isArray(t)?t:t.split("/"),n=r[0];if(n==="attrs"&&(e.dirty=!0),r.length===1)return this.unset(t,e);var i=r.slice(1),o=this.get(n);return o==null?this:(o=Be(o),tu(o,i,"/"),this.set(n,o,e))},attr:function(t,e,r){var n=Array.from(arguments);return n.length===0?this.get("attrs"):(Array.isArray(t)?n[0]=["attrs"].concat(t):Te(t)?n[0]="attrs/"+t:n[0]={attrs:t},this.prop.apply(this,n))},removeAttr:function(t,e){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,e)},transition:function(t,e,r,n){n=n||"/";var i={duration:100,delay:10,timingFunction:Ph.linear,valueFunction:Ws.number};r=At(i,r);var o=0,s,a=function(f){var I,A,b;o=o||f,f-=o,A=f/r.duration,A<1?this._transitionIds[t]=I=No(a):(A=1,delete this._transitionIds[t]),b=s(r.timingFunction(A)),r.transitionId=I,this.prop(t,b,r),I||this.trigger("transition:end",this,t)}.bind(this);let{_scheduledTransitionIds:u}=this,h;var d=f=>{u[t]&&(u[t]=bi(u[t],h),u[t].length===0&&delete u[t]),this.stopPendingTransitions(t,n),s=r.valueFunction(hn(this.attributes,t,n),e),this._transitionIds[t]=No(f),this.trigger("transition:start",this,t)};return h=setTimeout(d,r.delay,a),u[t]||(u[t]=[]),u[t].push(h),h},getTransitions:function(){return Ni(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(t,e="/"){let{_scheduledTransitionIds:r={}}=this,n=Object.keys(r);if(t){let i=t.split(e);n=n.filter(o=>tn(i,o.split(e).slice(0,i.length)))}return n.forEach(i=>{r[i].forEach(s=>clearTimeout(s)),delete r[i]}),this},stopPendingTransitions(t,e="/"){let{_transitionIds:r={}}=this,n=Object.keys(r);if(t){let i=t.split(e);n=n.filter(o=>tn(i,o.split(e).slice(0,i.length)))}n.forEach(i=>{let o=r[i];Mo(o),delete r[i],this.trigger("transition:end",this,i)})},stopTransitions:function(t,e="/"){return this.stopScheduledTransitions(t,e),this.stopPendingTransitions(t,e),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,At({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,At({},e,{cell:this})),this},getChangeFlag:function(t){var e=0;if(!t)return e;for(var r in t)!t.hasOwnProperty(r)||!this.hasChanged(r)||(e|=t[r]);return e},angle:function(){return 0},position:function(){return new z(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new z},getBBox:function(){return new ft(0,0,0,0)},getPointRotatedAroundCenter(t,e,r){let n=new z(e,r);return t&&n.rotate(this.getBBox().center(),t),n},getAbsolutePointFromRelative(t,e){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(t,e))},getRelativePointFromAbsolute(t,e){return this.getPointRotatedAroundCenter(this.angle(),t,e).difference(this.position())}},{getAttributeDefinition:function(t){var e=this.attributes,r=Vs;return e&&e[t]||r[t]},define:function(t,e,r,n){r=At({defaults:Un({type:t},e,this.prototype.defaults)},r);var i=this.extend(r,n);return typeof joint!="undefined"&&cr(joint,"shapes")&&bo(joint.shapes,t,i,"."),i}});var Eh=function(t,e,r){if(Te(r)){if(!Us[r])throw new Error('Unknown wrapper: "'+r+'"');r=Us[r]}if(!Vt(r))throw new Error("Wrapper must be a function.");Dt(e).forEach(function(n){t[n]=r(t[n])})},Us={cells:function(t){return function(){var e=Array.from(arguments),r=e.length,n=r>0&&e[0]||[],i=r>1&&e[r-1]||{};return Array.isArray(n)||(i instanceof hr?n=e:n instanceof hr&&(e.length>1&&e.pop(),n=e)),i instanceof hr&&(i={}),t.call(this,n,i)}}};function mC(t,...e){let r=[];return t.forEach((i,o)=>{r.push(i),o in e&&r.push(e[o])}),vC(r.join(""))}function vC(t){let e=new DOMParser,r=`<svg>${t.trim()}</svg>`;if(e.parseFromString(r.replace(/@/g,""),"application/xml").getElementsByTagName("parsererror")[0])throw new Error("Invalid SVG markup");let o=e.parseFromString(r,"text/html").querySelector("svg");return IC(o)}function Dv(t){let e={},{tagName:r,attributes:n,namespaceURI:i,style:o,childNodes:s}=t;e.namespaceURI=i,e.tagName=i===X.namespace.xhtml?r.toLowerCase():r;let a={};for(var u=o.length;u--;){var h=o[u];a[h]=o.getPropertyValue(h)}e.style=a;let d=n.getNamedItem("@selector");d&&(e.selector=d.value,n.removeNamedItem("@selector"));let f=n.getNamedItem("@group-selector");if(f){let S=f.value.split(",");e.groupSelector=S.map(P=>P.trim()),n.removeNamedItem("@group-selector")}let I=n.getNamedItem("class");I&&(e.className=I.value);let A=[];s.forEach(S=>{switch(S.nodeType){case Node.TEXT_NODE:{let P=S.data.replace(/\s\s+/g," ");P.trim()&&A.push(P);break}case Node.ELEMENT_NODE:{A.push(Dv(S));break}default:break}}),A.length&&(e.children=A);let b={};return Array.from(n).forEach(S=>{let{name:P,value:E}=S;b[P]=E}),Object.keys(b).length>0&&(e.attributes=b),e}function IC(t){let e=[];return Array.from(t.children).forEach(r=>{e.push(Dv(r))}),e}var Ee={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function Po(t,e){let r=new ft(t);switch(e){case void 0:throw new Error("Position required");case Ee.LEFT:case"leftMiddle":return r.leftMiddle();case Ee.RIGHT:case"rightMiddle":return r.rightMiddle();case Ee.TOP:case"topMiddle":return r.topMiddle();case Ee.BOTTOM:case"bottomMiddle":return r.bottomMiddle();case Ee.TOP_LEFT:case"topLeft":case"origin":return r.topLeft();case Ee.TOP_RIGHT:case"topRight":return r.topRight();case Ee.BOTTOM_LEFT:case"bottomLeft":return r.bottomLeft();case Ee.BOTTOM_RIGHT:case"bottomRight":case"corner":return r.bottomRight();case Ee.CENTER:return r.center();default:throw new Error(`Unknown position: ${e}`)}}function Lv(t,e,r){var n=t.toJSON();return n.angle=e||0,Ve({},r,n)}function _s(t,e,r,n){return t.map(function(i,o,s){var a=this.pointAt((o+.5)/s.length);return(i.dx||i.dy)&&a.offset(i.dx||0,i.dy||0),Lv(a.round(),0,Oh(n,i))},vn(e,r))}function kv(t,e,r,n){var i=e.center(),o=e.width/e.height,s=e.topMiddle(),a=je.fromRect(e);return t.map(function(u,h,d){var f=r+n(h,d.length),I=s.clone().rotate(i,-f).scale(o,1,i),A=u.compensateRotation?-a.tangentTheta(I):0;return(u.dx||u.dy)&&I.offset(u.dx||0,u.dy||0),u.dr&&I.move(i,u.dr),Lv(I.round(),A,Oh(e,u))})}function Oh(t,e){let{x:r,y:n,angle:i}=e;return ye(r)?r=parseFloat(r)/100*t.width:Je(r)&&(r=Number(Qe(r,t))),ye(n)?n=parseFloat(n)/100*t.height:Je(n)&&(n=Number(Qe(n,t))),{x:r,y:n,angle:i}}function zh(t,e){let{x:r,y:n}=Oh(t,e);return new z(r||0,n||0)}var AC=function(t,e){return t.map(r=>{let n=zh(e,r).round().toJSON();return n.angle=r.angle||0,n})},yC=function(t,e,r){return r.fn(t,e,r)},CC=function(t,e,r){var n=zh(e,r.start||e.origin()),i=zh(e,r.end||e.corner());return _s(t,n,i,e)},xC=function(t,e,r){return _s(t,e.origin(),e.bottomLeft(),e)},wC=function(t,e,r){return _s(t,e.topRight(),e.corner(),e)},bC=function(t,e,r){return _s(t,e.origin(),e.topRight(),e)},NC=function(t,e,r){return _s(t,e.bottomLeft(),e.corner(),e)},MC=function(t,e,r){var n=r.startAngle||0,i=r.step||360/t.length;return kv(t,e,n,function(o){return o*i})},TC=function(t,e,r){var n=r.startAngle||0,i=r.step||20;return kv(t,e,n,function(o,s){return(o+.5-s/2)*i})};var Rh={};Ae(Rh,{bottom:()=>kC,inside:()=>BC,insideOriented:()=>OC,left:()=>PC,manual:()=>SC,outside:()=>zC,outsideOriented:()=>EC,radial:()=>RC,radialOriented:()=>GC,right:()=>DC,top:()=>LC});function Hn(t,e){return Un({},t,e,{x:0,y:0,angle:0,attrs:{}})}function Ev(t){var e=t.center(),r=e.theta(t.origin()),n=e.theta(t.bottomLeft()),i=e.theta(t.corner()),o=e.theta(t.topRight());return[r,o,i,n]}function zv(t,e,r,n){n=Ve({},n,{offset:15});var i=e.center().theta(t),o,s,a,u,h=n.offset,d=0;let[f,I,A,b]=Ev(e);i<I||i>A?(a=".3em",o=h,s=0,u="start"):i<f?(o=0,s=-h,r?(d=-90,u="start",a=".3em"):(u="middle",a="0")):i<b?(a=".3em",o=-h,s=0,u="end"):(o=0,s=h,r?(d=90,u="start",a=".3em"):(u="middle",a=".6em"));var S=Math.round;return Hn(n,{x:S(o),y:S(s),angle:d,attrs:{labelText:{y:a,textAnchor:u}}})}function Ov(t,e,r,n){n=Ve({},n,{offset:15});var i=e.center().theta(t),o,s,a,u,h=n.offset,d=0;let[f,I,A,b]=Ev(e);i<I||i>A?(a=".3em",o=-h,s=0,u="end"):i<f?(o=0,s=h,r?(d=90,u="start",a=".3em"):(u="middle",a=".6em")):i<b?(a=".3em",o=h,s=0,u="start"):(o=0,s=-h,r?(d=-90,u="start",a=".3em"):(u="middle",a="0"));var S=Math.round;return Hn(n,{x:S(o),y:S(s),angle:d,attrs:{labelText:{y:a,textAnchor:u}}})}function Bv(t,e,r){r=Ve({},r,{offset:20});var n=ji(0,0),i=-t.theta(n),o=i,s=t.clone().move(n,r.offset).difference(t).round(),a=".3em",u;(i+90)%180===0?(u=e?"end":"middle",!e&&i===-270&&(a="0em")):i>-270&&i<-90?(u="start",o=i-180):u="end";var h=Math.round;return Hn(r,{x:h(s.x),y:h(s.y),angle:e?o:0,attrs:{labelText:{y:a,textAnchor:u}}})}var SC=function(t,e,r){return Hn(r)},PC=function(t,e,r){return Hn(r,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},DC=function(t,e,r){return Hn(r,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},LC=function(t,e,r){return Hn(r,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})},kC=function(t,e,r){return Hn(r,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},EC=function(t,e,r){return zv(t,e,!0,r)},zC=function(t,e,r){return zv(t,e,!1,r)},OC=function(t,e,r){return Ov(t,e,!0,r)},BC=function(t,e,r){return Ov(t,e,!1,r)},RC=function(t,e,r){return Bv(t.difference(e.center()),!1,r)},GC=function(t,e,r){return Bv(t.difference(e.center()),!0,r)};var dn={};Ae(dn,{Cell:()=>hr,CellView:()=>Wt,Element:()=>fe,ElementView:()=>Se,Graph:()=>nu,HighlighterView:()=>Xe,LayersNames:()=>yr,Link:()=>ce,LinkView:()=>Pi,Paper:()=>Nw,PaperLayer:()=>Gh,ToolView:()=>or,ToolsView:()=>Mw,attributes:()=>Vs});var Jn=Qr(Ps(),1);var ce=hr.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(t){return this.set({source:{x:0,y:0},target:{x:0,y:0}},t)},source:function(t,e,r){if(t===void 0)return rr(this.get("source"));var n,i,o=t instanceof hr;if(o)return n=rr(e)||{},n.id=t.id,i=r,this.set("source",n,i);var s=!ae(t);return s?(n=rr(e)||{},n.x=t.x,n.y=t.y,i=r,this.set("source",n,i)):(n=t,i=e,this.set("source",n,i))},target:function(t,e,r){if(t===void 0)return rr(this.get("target"));var n,i,o=t instanceof hr;if(o)return n=rr(e)||{},n.id=t.id,i=r,this.set("target",n,i);var s=!ae(t);return s?(n=rr(e)||{},n.x=t.x,n.y=t.y,i=r,this.set("target",n,i)):(n=t,i=e,this.set("target",n,i))},router:function(t,e,r){if(t===void 0){var n=this.get("router");return n?typeof n=="object"?rr(n):n:this.get("manhattan")?{name:"orthogonal"}:null}var i=typeof t=="object"||typeof t=="function",o=i?t:{name:t,args:e},s=i?e:r;return this.set("router",o,s)},connector:function(t,e,r){if(t===void 0){var n=this.get("connector");return n?typeof n=="object"?rr(n):n:this.get("smooth")?{name:"smooth"}:null}var i=typeof t=="object"||typeof t=="function",o=i?t:{name:t,args:e},s=i?e:r;return this.set("connector",o,s)},label:function(t,e,r){var n=this.labels();return t=isFinite(t)&&t!==null?t|0:0,t<0&&(t=n.length+t),arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],e,r)},labels:function(t,e){return arguments.length===0?(t=this.get("labels"),Array.isArray(t)?t.slice():[]):(Array.isArray(t)||(t=[]),this.set("labels",t,e))},hasLabels:function(){let{labels:t}=this.attributes;return Array.isArray(t)&&t.length>0},insertLabel:function(t,e,r){if(!e)throw new Error("dia.Link: no label provided");var n=this.labels(),i=n.length;return t=isFinite(t)&&t!==null?t|0:i,t<0&&(t=i+t+1),n.splice(t,0,e),this.labels(n,r)},appendLabel:function(t,e){return this.insertLabel(-1,t,e)},removeLabel:function(t,e){var r=this.labels();return t=isFinite(t)&&t!==null?t|0:-1,r.splice(t,1),this.labels(r,e)},vertex:function(t,e,r){var n=this.vertices();if(t=isFinite(t)&&t!==null?t|0:0,t<0&&(t=n.length+t),arguments.length<=1)return this.prop(["vertices",t]);var i=this._normalizeVertex(e);return this.prop(["vertices",t],i,r)},vertices:function(t,e){if(arguments.length===0)return t=this.get("vertices"),Array.isArray(t)?t.slice():[];Array.isArray(t)||(t=[]);for(var r=[],n=0;n<t.length;n++){var i=t[n],o=this._normalizeVertex(i);r.push(o)}return this.set("vertices",r,e)},insertVertex:function(t,e,r){if(!e)throw new Error("dia.Link: no vertex provided");var n=this.vertices(),i=n.length;t=isFinite(t)&&t!==null?t|0:i,t<0&&(t=i+t+1);var o=this._normalizeVertex(e);return n.splice(t,0,o),this.vertices(n,r)},removeVertex:function(t,e){var r=this.vertices();return t=isFinite(t)&&t!==null?t|0:-1,r.splice(t,1),this.vertices(r,e)},_normalizeVertex:function(t){var e=!ae(t);return e?{x:t.x,y:t.y}:t},translate:function(t,e,r){return r=r||{},r.translateBy=r.translateBy||this.id,r.tx=t,r.ty=e,this.applyToPoints(function(n){return{x:(n.x||0)+t,y:(n.y||0)+e}},r)},scale:function(t,e,r,n){return this.applyToPoints(function(i){return z(i).scale(t,e,r).toJSON()},n)},applyToPoints:function(t,e){if(!Vt(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var r={},{source:n,target:i}=this.attributes;n.id||(r.source=t(n)),i.id||(r.target=t(i));var o=this.vertices();return o.length>0&&(r.vertices=o.map(t)),this.set(r,e)},getSourcePoint:function(){var t=this.getSourceCell();return t?t.getPointFromConnectedLink(this,"source"):new z(this.source())},getTargetPoint:function(){var t=this.getTargetCell();return t?t.getPointFromConnectedLink(this,"target"):new z(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){let t=[this.getSourcePoint(),...this.vertices().map(z),this.getTargetPoint()];return new qt(t)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(t){var e;if(this.graph){var r=this.getSourceElement(),n=this.getTargetElement(),i=this.getParentCell();r&&n&&(r===n||r.isEmbeddedIn(n)?e=n:n.isEmbeddedIn(r)?e=r:e=this.graph.getCommonAncestor(r,n)),i&&(!e||e.id!==i.id)&&i.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var{source:e,target:r}=this.attributes,n=e.id,i=r.id;if(!n||!i)return!1;var o=n===i;if(!o&&t.deep&&this.graph){var s=this.getSourceCell(),a=this.getTargetCell();o=s.isEmbeddedIn(a)||a.isEmbeddedIn(s)}return o},getSourceCell:function(){let{graph:t,attributes:e}=this;var r=e.source;return r&&r.id&&t&&t.getCell(r.id)||null},getSourceElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getSourceCell()}while(t&&t.isLink());return t},getTargetCell:function(){let{graph:t,attributes:e}=this;var r=e.target;return r&&r.id&&t&&t.getCell(r.id)||null},getTargetElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getTargetCell()}while(t&&t.isLink());return t},getRelationshipAncestor:function(){var t;if(this.graph){var e=[this,this.getSourceElement(),this.getTargetElement()].filter(function(r){return!!r});t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=Te(t)||Ge(t)?t:t.id,r=this.getRelationshipAncestor();return!!r&&(r.id===e||r.isEmbeddedIn(e))},_getDefaultLabel:function(){var t=this.get("defaultLabel")||this.defaultLabel||{},e={};return e.markup=t.markup||this.get("labelMarkup")||this.labelMarkup,e.position=t.position,e.attrs=t.attrs,e.size=t.size,e}},{endsEqual:function(t,e){var r=t.port===e.port||!t.port&&!e.port;return t.id===e.id&&r}});var Rv=function(t){var e=Be(t)||{};this.ports=[],this.groups={},this.portLayoutNamespace=Bh,this.portLabelLayoutNamespace=Rh,this._init(e)};Rv.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(t){return this.ports.filter(function(e){return e.group===t})},getGroupPortsMetrics:function(t,e){var r=this.getGroup(t),n=this.getPortsByGroup(t),i=r.position||{},o=i.name,s=this.portLayoutNamespace;s[o]||(o="left");var a=i.args||{},u=n.map(function(f){return f&&f.position&&f.position.args}),h=s[o](u,e,a),d={ports:n,result:[]};return Dt(h).reduce(function(f,I,A){var b=f.ports[A];return f.result.push({portId:b.id,portTransformation:I,labelTransformation:this._getPortLabelLayout(b,z(I),e),portAttrs:b.attrs,portSize:b.size,labelSize:b.label.size}),f}.bind(this),d),d.result},_getPortLabelLayout:function(t,e,r){var n=this.portLabelLayoutNamespace,i=t.label.position.name||"left";return n[i]?n[i](e,r,t.label.position.args):null},_init:function(t){if(Gt(t.groups))for(var e=Object.keys(t.groups),r=0,n=e.length;r<n;r++){var i=e[r];this.groups[i]=this._evaluateGroup(t.groups[i])}for(var o=Dt(t.items),s=0,a=o.length;s<a;s++)this.ports.push(this._evaluatePort(o[s]))},_evaluateGroup:function(t){return Ie(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var e=At({},t),r=this.getGroup(t.group);return e.markup=e.markup||r.markup,e.attrs=Ie({},r.attrs,e.attrs),e.position=this._createPositionNode(r,e),e.label=Ie({},r.label,this._getLabel(e)),e.z=this._getZIndex(r,e),e.size=At({},r.size,e.size),e},_getZIndex:function(t,e){return Ge(e.z)?e.z:Ge(t.z)||t.z==="auto"?t.z:"auto"},_createPositionNode:function(t,e){return Ie({name:"left",args:{}},t.position,{args:e.args})},_getPosition:function(t,e){var r={},n;Vt(t)?(n="fn",r.fn=t):Te(t)?n=t:t===void 0?n=e?"left":null:Array.isArray(t)?(n="absolute",r.x=t[0],r.y=t[1]):Gt(t)&&(n=t.name,At(r,t.args));var i={args:r};return n&&(i.name=n),i},_getLabel:function(t,e){var r=t.label||{},n=r;return n.position=this._getPosition(r.position,e),n}};var Gv={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var t=this.get("ports")||{},e={};Dt(t.items).forEach(function(a){e[a.id]=!0});var r=this.previous("ports")||{},n={};Dt(r.items).forEach(function(a){e[a.id]||(n[a.id]=!0)});var i=this.graph;if(i&&!ur(n)){var o=i.getConnectedLinks(this,{inbound:!0});o.forEach(function(a){n[a.get("target").port]&&a.remove()});var s=i.getConnectedLinks(this,{outbound:!0});s.forEach(function(a){n[a.get("source").port]&&a.remove()})}},hasPorts:function(){var t=this.prop("ports/items");return Array.isArray(t)&&t.length>0},hasPort:function(t){return this.getPortIndex(t)!==-1},getPorts:function(){return Be(this.prop("ports/items"))||[]},getGroupPorts:function(t){let e=Dt(this.prop(["ports","items"])).filter(r=>r.group===t);return Be(e)},getPort:function(t){return Be(Dt(this.prop("ports/items")).find(function(e){return e.id&&e.id===t}))},getPortsPositions:function(t){var e=this._portSettingsData.getGroupPortsMetrics(t,ft(this.size()));return e.reduce(function(r,n){var i=n.portTransformation;return r[n.portId]={x:i.x,y:i.y,angle:i.angle},r},{})},getPortIndex:function(t){var e=Gt(t)?t.id:t;return this._isValidPortId(e)?Dt(this.prop("ports/items")).findIndex(function(r){return r.id===e}):-1},addPort:function(t,e){if(!Gt(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var r=At([],this.prop("ports/items"));return r.push(t),this.prop("ports/items",r,e),this},insertPort:function(t,e,r){let n=typeof t=="number"?t:this.getPortIndex(t);if(!Gt(e)||Array.isArray(e))throw new Error("dia.Element: insertPort requires an object.");let i=At([],this.prop("ports/items"));return i.splice(n,0,e),this.prop("ports/items",i,r),this},portProp:function(t,e,r,n){var i=this.getPortIndex(t);if(i===-1)throw new Error("Element: unable to find port with id "+t);var o=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?o[0]=["ports","items",i].concat(e):Te(e)?o[0]=["ports/items/",i,"/",e].join(""):(o=["ports/items/"+i],ae(e)&&(o.push(e),o.push(r))),this.prop.apply(this,o)},_validatePorts:function(){var t=this.get("ports")||{},e=[];t=t||{};var r=Dt(t.items);return r.forEach(function(n){typeof n!="object"&&e.push("Element: invalid port ",n),this._isValidPortId(n.id)||(n.id=this.generatePortId())},this),kr(r,"id").length!==r.length&&e.push("Element: found id duplicities in ports."),e},generatePortId:function(){return this.generateId()},_isValidPortId:function(t){return t!=null&&!Gt(t)},addPorts:function(t,e){return t.length&&this.prop("ports/items",At([],this.prop("ports/items")).concat(t),e),this},removePort:function(t,e){let r=e||{},n=this.getPortIndex(t);if(n!==-1){let i=At([],this.prop(["ports","items"]));i.splice(n,1),r.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],i,r),this.stopBatch("port-remove")}return this},removePorts:function(t,e){let r,n;if(Array.isArray(t)){if(r=e||{},t.length===0)return this.this;n=At([],this.prop(["ports","items"])).filter(function(o){return!t.some(function(s){let a=Gt(s)?s.id:s;return o.id===a})})}else r=t||{},n=[];return this.startBatch("port-remove"),r.rewrite=!0,this.prop(["ports","items"],n,r),this.stopBatch("port-remove"),this},_createPortData:function(){var t=this._validatePorts();if(t.length>0)throw this.set("ports",this.previous("ports")),new Error(t.join(" "));var e;this._portSettingsData&&(e=this._portSettingsData.getPorts()),this._portSettingsData=new Rv(this.get("ports"));var r=this._portSettingsData.getPorts();if(e){var n=r.filter(function(o){if(!e.find(function(s){return s.id===o.id}))return o}),i=e.filter(function(o){if(!r.find(function(s){return s.id===o.id}))return o});i.length>0&&this.trigger("ports:remove",this,i),n.length>0&&this.trigger("ports:add",this,n)}}},Zv={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var t=[],e=this._getContainerElement(),r=0,n=e.node.childNodes.length;r<n;r++)t.push(e.node.childNodes[r]);var i=Ql(this.model._portSettingsData.getPorts(),"z"),o="auto";Dt(i[o]).forEach(function(d){var f=this._getPortElement(d);e.append(f),t.push(f)},this);for(var s=Object.keys(i),a=0;a<s.length;a++){var u=s[a];if(u!==o){var h=parseInt(u,10);this._appendPorts(i[u],h,t)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,e,r){var n=this._getContainerElement(),i=Dt(t).map(this._getPortElement,this);r[e]||e<0?X(r[Math.max(e,0)]).before(i):n.append(i)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},findPortNode:function(t,e){let r=this._portElementsCache[t];if(!r)return null;if(!e)return r.portContentElement.node;let n=r.portElement.node,i=r.portSelectors,[o=null]=this.findBySelector(e,n,i);return o},_updatePorts:function(){this._updatePortGroup(void 0);var t=Object.keys(this.model._portSettingsData.groups);t.forEach(this._updatePortGroup,this)},_removePorts:function(){er(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){let e,r,n,i;var o=X(this.portContainerMarkup).addClass("joint-port"),s=this._getPortMarkup(t);if(Array.isArray(s)){var a=this.parseDOMJSON(s,o.node),u=a.fragment;u.childNodes.length>1?e=X("g").append(u):e=X(u.firstChild),i=a.selectors}else e=X(s),Array.isArray(e)&&(e=X("g").append(e));if(!e)throw new Error("ElementView: Invalid port markup.");e.attr({port:t.id,"port-group":t.group});let h=this._getPortLabelMarkup(t.label);if(Array.isArray(h)){let{fragment:S,selectors:P}=this.parseDOMJSON(h,o.node),E=S.childNodes.length;E>0&&(n=P,r=E===1?X(S.firstChild):X("g").append(S))}else r=X(h),Array.isArray(r)&&(r=X("g").append(r));var d;if(i&&n){for(var f in n)if(i[f]&&f!==this.selector)throw new Error("ElementView: selectors within port must be unique.");d=At({},i,n)}else d=i||n||{};let I="portRoot",A="labelRoot",b="labelText";if(I in d||(d[I]=e.node),r){let S=r.node;if(A in d||(d[A]=S),!(b in d)){let P=r.tagName()==="TEXT"?S:Array.from(S.querySelectorAll("text"));d[b]=P,n||(n={}),n[b]=P}}return o.append(e.addClass("joint-port-body")),r&&o.append(r.addClass("joint-port-label")),this._portElementsCache[t.id]={portElement:o,portLabelElement:r,portSelectors:d,portLabelSelectors:n,portContentElement:e,portContentSelectors:i},o},_updatePortGroup:function(t){for(var e=ft(this.model.size()),r=this.model._portSettingsData.getGroupPortsMetrics(t,e),n=0,i=r.length;n<i;n++){var o=r[n],s=o.portId,a=this._portElementsCache[s]||{},u=o.portTransformation,h=o.labelTransformation;h&&a.portLabelElement&&(this.updateDOMSubtreeAttributes(a.portLabelElement.node,h.attrs,{rootBBox:new ft(o.labelSize),selectors:a.portLabelSelectors}),this.applyPortTransform(a.portLabelElement,h,-u.angle||0)),this.updateDOMSubtreeAttributes(a.portElement.node,o.portAttrs,{rootBBox:new ft(o.portSize),selectors:a.portSelectors}),this.applyPortTransform(a.portElement,u)}},applyPortTransform:function(t,e,r){var n=X.createSVGMatrix().rotate(r||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(n,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}};var fe=hr.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),hr.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(t,e,r){let n=Ge(e);r=(n?r:t)||{};let{parentRelative:i,deep:o,restrictedArea:s}=r,a;if(i){if(!this.graph)throw new Error("Element must be part of a graph.");let u=this.getParentCell();u&&!u.isLink()&&(a=u.get("position"))}if(n){if(a&&(t+=a.x,e+=a.y),o||s){let{x:u,y:h}=this.get("position");this.translate(t-u,e-h,r)}else this.set("position",{x:t,y:e},r);return this}else{let u=z(this.get("position"));return i?u.difference(a):u}},translate:function(t,e,r){if(t=t||0,e=e||0,t===0&&e===0)return this;r=r||{},r.translateBy=r.translateBy||this.id;var n=this.get("position")||{x:0,y:0},i=r.restrictedArea;if(i&&r.translateBy===this.id)if(typeof i=="function"){var o=i.call(this,n.x+t,n.y+e,r);t=o.x-n.x,e=o.y-n.y}else{var s=this.getBBox({deep:!0}),a=n.x-s.x,u=n.y-s.y,h=Math.max(i.x+a,Math.min(i.x+i.width+a-s.width,n.x+t)),d=Math.max(i.y+u,Math.min(i.y+i.height+u-s.height,n.y+e));t=h-n.x,e=d-n.y}var f={x:n.x+t,y:n.y+e};return r.tx=t,r.ty=e,r.transition?(Gt(r.transition)||(r.transition={}),this.transition("position",f,At({},r.transition,{valueFunction:Ws.object})),er(this.getEmbeddedCells(),"translate",t,e,r)):(this.startBatch("translate",r),this.set("position",f,r),er(this.getEmbeddedCells(),"translate",t,e,r),this.stopBatch("translate",r)),this},size:function(t,e,r){var n=this.get("size");return t===void 0?{width:n.width,height:n.height}:(Gt(t)&&(r=e,e=Ge(t.height)?t.height:n.height,t=Ge(t.width)?t.width:n.width),this.resize(t,e,r))},resize:function(t,e,r){if(r=r||{},this.startBatch("resize",r),r.direction){var n=this.get("size");switch(r.direction){case"left":case"right":e=n.height;break;case"top":case"bottom":t=n.width;break}var i=We(this.get("angle")||0),o=this.getBBox(),s;if(i){var a={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[r.direction];r.absolute&&(a+=Math.floor((i+45)/90),a%=4);var u=o[["bottomLeft","corner","topRight","origin"][a]](),h=z(u).rotate(o.center(),-i),d=Math.sqrt(t*t+e*e)/2,f=a*Math.PI/2;f+=Math.atan(a%2==0?e/t:t/e),f-=Oe(i);var I=z.fromPolar(d,f,h);s=z(I).offset(t/-2,e/-2)}else switch(s=o.topLeft(),r.direction){case"top":case"top-right":s.offset(0,o.height-e);break;case"left":case"bottom-left":s.offset(o.width-t,0);break;case"top-left":s.offset(o.width-t,o.height-e);break}this.set("size",{width:t,height:e},r),this.position(s.x,s.y,r)}else this.set("size",{width:t,height:e},r);return this.stopBatch("resize",r),this},scale:function(t,e,r,n){var i=this.getBBox().scale(t,e,r);return this.startBatch("scale",n),this.position(i.x,i.y,n),this.resize(i.width,i.height,n),this.stopBatch("scale"),this},fitEmbeds:function(t){return this.fitToChildren(t)},fitToChildren:function(t={}){let{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");let r=this.getEmbeddedCells().filter(n=>n.isElement());return r.length===0?this:(this.startBatch("fit-embeds",t),t.deep&&er(r,"fitToChildren",t),this._fitToElements(Object.assign({elements:r},t)),this.stopBatch("fit-embeds"),this)},fitParent:function(t={}){let{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");if(t.deep&&t.terminator&&(t.terminator===this||t.terminator===this.id))return this;let r=this.getParentCell();if(!r||!r.isElement())return this;let n=r.getEmbeddedCells().filter(i=>i.isElement());return n.length===0?this:(this.startBatch("fit-parent",t),r._fitToElements(Object.assign({elements:n},t)),t.deep&&r.fitParent(t),this.stopBatch("fit-parent"),this)},_fitToElements:function(t={}){let e=this.graph.getCellsBBox(t.elements);if(!e)return;let{expandOnly:r,shrinkOnly:n}=t;if(r&&n)return;let{x:i,y:o,width:s,height:a}=e,{left:u,right:h,top:d,bottom:f}=fr(t.padding);i-=u,o-=d,s+=u+h,a+=f+d;let I=new ft(i,o,s,a);if(r)I=this.getBBox().union(I);else if(n){let A=this.getBBox().intersect(I);if(!A)return;I=A}this.set({position:{x:I.x,y:I.y},size:{width:I.width,height:I.height}},t)},rotate:function(t,e,r,n){if(r){var i=this.getBBox().center(),o=this.get("size"),s=this.get("position");i.rotate(r,this.get("angle")-t);var a=i.x-o.width/2-s.x,u=i.y-o.height/2-s.y;this.startBatch("rotate",{angle:t,absolute:e,origin:r}),this.position(s.x+a,s.y+u,n),this.rotate(t,e,null,n),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,n);return this},angle:function(){return We(this.get("angle")||0)},getBBox:function(t={}){let{graph:e,attributes:r}=this,{deep:n,rotate:i}=t;if(n&&e){let f=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return f.push(this),e.getCellsBBox(f,t)}let{angle:o=0,position:{x:s,y:a},size:{width:u,height:h}}=r,d=new ft(s,a,u,h);return i&&d.rotateAroundCenter(o),d},getPointFromConnectedLink:function(t,e){var r=this.getBBox(),n=r.center(),i=t.get(e);if(!i)return n;var o=i.port;if(!o||!this.hasPort(o))return n;var s=this.portProp(o,["group"]),a=this.getPortsPositions(s),u=new z(a[o]).offset(r.origin()),h=this.angle();return h&&u.rotate(n,-h),u}});At(fe.prototype,Gv);var ZC=Jn.default.Collection.extend({initialize:function(t,e){e.cellNamespace?this.cellNamespace=e.cellNamespace:this.cellNamespace=typeof joint!="undefined"&&cr(joint,"shapes")?joint.shapes:null,this.graph=e.graph},model:function(t,e){var r=e.collection,n=r.cellNamespace,i=t.type==="link"?ce:hn(n,t.type,".")||fe,o=new i(t,e);return e.dry||(o.graph=r.graph),o},comparator:function(t){return t.get("z")||0}}),nu=Jn.default.Model.extend({initialize:function(t,e){e=e||{};var r=new ZC([],{model:e.cellModel,cellNamespace:e.cellNamespace,graph:this});Jn.default.Model.prototype.set.call(this,"cells",r),r.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},r.on("add",this._restructureOnAdd,this),r.on("remove",this._restructureOnRemove,this),r.on("reset",this._restructureOnReset,this),r.on("change:source",this._restructureOnChangeSource,this),r.on("change:target",this._restructureOnChangeTarget,this),r.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var{source:e,target:r}=t.attributes;e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0),r.id&&((this._in[r.id]||(this._in[r.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var{source:e,target:r}=t.attributes;e.id&&this._out[e.id]&&this._out[e.id][t.id]&&delete this._out[e.id][t.id],r.id&&this._in[r.id]&&this._in[r.id][t.id]&&delete this._in[r.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var r=t.attributes.source;r.id&&((this._out[r.id]||(this._out[r.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var r=t.get("target");r.id&&((this._in[r.id]||(this._in[r.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=Jn.default.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,e,r){var n;return typeof t=="object"?(n=t,r=e):(n={})[t]=e,n.hasOwnProperty("cells")&&(this.resetCells(n.cells,r),n=Ar(n,"cells")),Jn.default.Model.prototype.set.call(this,n,r)},clear:function(t){t=At({},t,{clear:!0});var e=this.get("cells");if(e.length===0)return this;this.startBatch("clear",t);var r=e.sortBy(function(n){return n.isLink()?1:2});do r.shift().remove(t);while(r.length>0);return this.stopBatch("clear"),this},_prepareCell:function(t,e){var r;if(t instanceof Jn.default.Model?(r=t.attributes,!t.graph&&(!e||!e.dry)&&(t.graph=this)):r=t,!Te(r.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},minZIndex:function(){var t=this.get("cells").first();return t&&t.get("z")||0},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,e){return Array.isArray(t)?this.addCells(t,e):(t instanceof Jn.default.Model?t.has("z")||t.set("z",this.maxZIndex()+1):t.z===void 0&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,e),e||{}),this)},addCells:function(t,e){return t.length===0?this:(t=Kl(t),e.maxPosition=e.position=t.length-1,this.startBatch("add",e),t.forEach(function(r){this.addCell(r,e),e.position--},this),this.stopBatch("add",e),this)},resetCells:function(t,e){var r=Dt(t).map(function(n){return this._prepareCell(n,e)},this);return this.get("cells").reset(r,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),er(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,r){r=r||{},r.clear||(r.disconnectLinks?this.disconnectLinks(t,r):this.removeLinks(t,r)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(t=>t.isElement())},getLinks:function(){return this.get("cells").filter(t=>t.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){e=e||{};var r=e.indirect,n=e.inbound,i=e.outbound;n===void 0&&i===void 0&&(n=i=!0);var o=[],s={};i&&a(this,t),n&&u(this,t);function a(f,I){if(nr(f.getOutboundEdges(I.id),function(b,S){if(!s[S]){var P=f.getCell(S);o.push(P),s[S]=!0,r&&(n&&u(f,P),i&&a(f,P))}}.bind(f)),r&&I.isLink()){var A=I.getTargetCell();A&&A.isLink()&&(s[A.id]||(o.push(A),a(f,A)))}}function u(f,I){if(nr(f.getInboundEdges(I.id),function(b,S){if(!s[S]){var P=f.getCell(S);o.push(P),s[S]=!0,r&&(n&&u(f,P),i&&a(f,P))}}.bind(f)),r&&I.isLink()){var A=I.getSourceCell();A&&A.isLink()&&(s[A.id]||(o.push(A),u(f,A)))}}if(e.deep){var h=t.getEmbeddedCells({deep:!0}),d={};h.forEach(function(f){f.isElement()&&(d[f.id]=!0)}),h.forEach(function(f){f.isLink()||(i&&nr(this.getOutboundEdges(f.id),function(I,A){if(!s[A]){var b=this.getCell(A),{source:S,target:P}=b.attributes,E=S.id,j=P.id;if(!e.includeEnclosed&&E&&d[E]&&j&&d[j])return;o.push(this.getCell(A)),s[A]=!0}}.bind(this)),n&&nr(this.getInboundEdges(f.id),function(I,A){if(!s[A]){var b=this.getCell(A),{source:S,target:P}=b.attributes,E=S.id,j=P.id;if(!e.includeEnclosed&&E&&d[E]&&j&&d[j])return;o.push(this.getCell(A)),s[A]=!0}}.bind(this)))},this)}return o},getNeighbors:function(t,e){e||(e={});var r=e.inbound,n=e.outbound;r===void 0&&n===void 0&&(r=n=!0);var i=this.getConnectedLinks(t,e).reduce(function(a,u){var{source:h,target:d}=u.attributes,f=u.hasLoop(e);if(r&&cr(h,"id")&&!a[h.id]){var I=this.getCell(h.id);I.isElement()&&(f||I&&I!==t&&(!e.deep||!I.isEmbeddedIn(t)))&&(a[h.id]=I)}if(n&&cr(d,"id")&&!a[d.id]){var A=this.getCell(d.id);A.isElement()&&(f||A&&A!==t&&(!e.deep||!A.isEmbeddedIn(t)))&&(a[d.id]=A)}return a}.bind(this),{});if(t.isLink()){if(r){var o=t.getSourceCell();o&&o.isElement()&&!i[o.id]&&(i[o.id]=o)}if(n){var s=t.getTargetCell();s&&s.isElement()&&!i[s.id]&&(i[s.id]=s)}}return Dt(i)},getCommonAncestor:function(){var t=Array.from(arguments).map(function(r){for(var n=[],i=r.get("parent");i;)n.push(i),i=this.getCell(i).get("parent");return n},this);t=t.sort(function(r,n){return r.length-n.length});var e=Dt(t.shift()).find(function(r){return t.every(function(n){return n.includes(r)})});return this.getCell(e)},getSuccessors:function(t,e){e=e||{};var r=[];return this.search(t,function(n){n!==t&&r.push(n)},At({},e,{outbound:!0})),r},cloneCells:Ys,cloneSubgraph:function(t,e){var r=this.getSubgraph(t,e);return this.cloneCells(r)},getSubgraph:function(t,e){e=e||{};var r=[],n={},i=[],o=[];return Dt(t).forEach(function(s){if(n[s.id]||(r.push(s),n[s.id]=s,s.isLink()?o.push(s):i.push(s)),e.deep){var a=s.getEmbeddedCells({deep:!0});a.forEach(function(u){n[u.id]||(r.push(u),n[u.id]=u,u.isLink()?o.push(u):i.push(u))})}}),o.forEach(function(s){var{source:a,target:u}=s.attributes;if(a.id&&!n[a.id]){var h=this.getCell(a.id);r.push(h),n[h.id]=h,i.push(h)}if(u.id&&!n[u.id]){var d=this.getCell(u.id);r.push(this.getCell(u.id)),n[d.id]=d,i.push(d)}},this),i.forEach(function(s){var a=this.getConnectedLinks(s,e);a.forEach(function(u){var{source:h,target:d}=u.attributes;!n[u.id]&&h.id&&n[h.id]&&d.id&&n[d.id]&&(r.push(u),n[u.id]=u)})},this),r},getPredecessors:function(t,e){e=e||{};var r=[];return this.search(t,function(n){n!==t&&r.push(n)},At({},e,{inbound:!0})),r},search:function(t,e,r){r=r||{},r.breadthFirst?this.bfs(t,e,r):this.dfs(t,e,r)},bfs:function(t,e,r={}){let n={},i={},o=[];for(o.push(t),i[t.id]=0;o.length>0;){var s=o.shift();if(n[s.id]||(n[s.id]=!0,e.call(this,s,i[s.id])===!1))continue;let a=this.getNeighbors(s,r);for(let u=0,h=a.length;u<h;u++){let d=a[u];i[d.id]=i[s.id]+1,o.push(d)}}},dfs:function(t,e,r={}){let n={},i={},o=[];for(o.push(t),i[t.id]=0;o.length>0;){let s=o.pop();if(n[s.id]||(n[s.id]=!0,e.call(this,s,i[s.id])===!1))continue;let a=this.getNeighbors(s,r),u=o.length;for(let h=0,d=a.length;h<d;h++){let f=a[h];i[f.id]=i[s.id]+1,o.splice(u,0,f)}}},getSources:function(){var t=[];return nr(this._nodes,function(e,r){(!this._in[r]||ur(this._in[r]))&&t.push(this.getCell(r))}.bind(this)),t},getSinks:function(){var t=[];return nr(this._nodes,function(e,r){(!this._out[r]||ur(this._out[r]))&&t.push(this.getCell(r))}.bind(this)),t},isSource:function(t){return!this._in[t.id]||ur(this._in[t.id])},isSink:function(t){return!this._out[t.id]||ur(this._out[t.id])},isSuccessor:function(t,e){var r=!1;return this.search(t,function(n){if(n===e&&n!==t)return r=!0,!1},{outbound:!0}),r},isPredecessor:function(t,e){var r=!1;return this.search(t,function(n){if(n===e&&n!==t)return r=!0,!1},{inbound:!0}),r},isNeighbor:function(t,e,r){r=r||{};var n=r.inbound,i=r.outbound;n===void 0&&i===void 0&&(n=i=!0);var o=!1;return this.getConnectedLinks(t,r).forEach(function(s){var{source:a,target:u}=s.attributes;if(n&&cr(a,"id")&&a.id===e.id||i&&cr(u,"id")&&u.id===e.id)return o=!0,!1}),o},disconnectLinks:function(t,e){this.getConnectedLinks(t).forEach(function(r){r.set(r.attributes.source.id===t.id?"source":"target",{x:0,y:0},e)})},removeLinks:function(t,e){er(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return this.getElements().filter(e=>e.getBBox({rotate:!0}).containsPoint(t))},findModelsInArea:function(t,e={}){let r=new ft(t),{strict:n=!1}=e,i=n?"containsRect":"intersect";return this.getElements().filter(o=>r[i](o.getBBox({rotate:!0})))},findModelsUnderElement:function(t,e={}){let{searchBy:r="bbox"}=e,n=t.getBBox().rotateAroundCenter(t.angle());return(r==="bbox"?this.findModelsInArea(n):this.findModelsFromPoint(Po(n,r))).filter(o=>t.id!==o.id&&!o.isEmbeddedIn(t))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(t,e={}){let{rotate:r=!0}=e;return Dt(t).reduce(function(n,i){let o=i.getBBox({rotate:r});return o?n?n.union(o):o:n},null)},translate:function(t,e,r){var n=this.getCells().filter(function(i){return!i.isEmbedded()});return er(n,"translate",t,e,r),this},resize:function(t,e,r){return this.resizeCells(t,e,this.getCells(),r)},resizeCells:function(t,e,r,n){var i=this.getCellsBBox(r);if(i){var o=Math.max(t/i.width,0),s=Math.max(e/i.height,0);er(r,"scale",o,s,i.origin(),n)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",At({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",At({},e,{batchName:t}))},hasActiveBatch:function(t){let e=this._batches,r;return arguments.length===0?r=Object.keys(e):Array.isArray(t)?r=t:r=[t],r.some(n=>e[n]>0)}},{validations:{multiLinks:function(t,e){var{source:r,target:n}=e.attributes;if(r.id&&n.id){var i=e.getSourceCell();if(i){var o=t.getConnectedLinks(i,{outbound:!0}),s=o.filter(function(a){var{source:u,target:h}=a.attributes;return u&&u.id===r.id&&(!u.port||u.port===r.port)&&h&&h.id===n.id&&(!h.port||h.port===n.port)});if(s.length>1)return!1}}return!0},linkPinning:function(t,e){var{source:r,target:n}=e.attributes;return r.id&&n.id}}});Eh(nu.prototype,["resetCells","addCells","removeCells"],Us.cells);var Mi=Qr(Ps(),1),Ti=Qr(wn(),1);var Qn={},_e=Mi.default.View.extend({options:{},theme:null,themeClassNamePrefix:Ue("theme-"),requireSetThemeOverride:!1,defaultTheme:tr.defaultTheme,children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,FLAG_INIT:1<<28,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=At({},this.options,t),Mi.default.View.call(this,t)},initialize:function(){Qn[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},isMounted:function(){return this.el.parentNode!==null},renderChildren:function(t){if(t||(t=ue(this,"children")),t){var e=this.svgElement,r=X.namespace[e?"svg":"xhtml"],n=_n(t,r);(e?this.vel:this.$el).empty().append(n.fragment),this.childNodes=n.selectors}return this},findAttribute:function(t,e){for(var r=e;r&&r.nodeType===1;){var n=r.getAttribute(t);if(n)return n;if(r===this.el)return null;r=r.parentNode}return null},_ensureElement:function(){if(this.el)this.setElement(ue(this,"el"));else{var t=ue(this,"tagName"),e=At({},ue(this,"attributes")),r=At({},ue(this,"style"));this.id&&(e.id=ue(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(e),this._setStyle(r)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_setStyle:function(t){this.$el.css(t)},_createElement:function(t){return this.svgElement?document.createElementNS(X.namespace.svg,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof Mi.default.$?t:Mi.default.$(t),this.el=this.$el[0],this.svgElement&&(this.vel=X(this.el))},_ensureElClassName:function(){var t=ue(this,"className");if(t){var e=Ue(t);this.svgElement?this.vel.removeClass(t).addClass(e):this.$el.removeClass(t).addClass(e)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override?this:(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t,this)},addThemeClassName:function(t){if(t=t||this.theme,!t)return this;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.addClass(e):this.$el.addClass(e),this},removeThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.removeClass(e):this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Qn[this.cid]=null,Mi.default.View.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(t,e,r){if(!e)return this;r||(r={});var n=this.getEventNamespace();for(var i in e){var o=e[i];typeof o!="function"&&(o=this[o]),o&&(0,Ti.default)(t).on(i+n,r,o.bind(this))}return this},undelegateElementEvents:function(t){return(0,Ti.default)(t).off(this.getEventNamespace()),this},delegateDocumentEvents:function(t,e){return t||(t=ue(this,"documentEvents")),this.delegateElementEvents(document,t,e)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(t,e){if(!t)throw new Error("eventData(): event object required.");var r=t.data,n="__"+this.cid+"__";return e===void 0?r?r[n]||{}:{}:(r||(r=t.data={}),r[n]||(r[n]={}),At(r[n],e),this)},stopPropagation:function(t){return this.eventData(t,{propagationStopped:!0}),this},isPropagationStopped:function(t){return!!this.eventData(t).propagationStopped}},{extend:function(){var t=Array.from(arguments),e=t[0]&&At({},t[0])||{},r=t[1]&&At({},t[1])||{},n=e.render||this.prototype&&this.prototype.render||null;return e.render=function(){return typeof n=="function"&&n.apply(this,arguments),this.render.__render__===n&&this.onRender(),this},e.render.__render__=n,Mi.default.View.extend.call(this,e,r)}}),jv="dbltap";if(Ti.default.event&&!(jv in Ti.default.event.special)){let t=tr.doubleTapInterval,e=30;Ti.default.event.special[jv]={bindType:"touchend",delegateType:"touchend",handle:function(r,...n){let{handleObj:i,target:o}=r,s=Ti.default.data(o),a=new Date().getTime(),u="lastTouch"in s?a-s.lastTouch:0;u<t&&u>e?(s.lastTouch=null,r.type=i.origType,i.handler.call(this,r,...n)):s.lastTouch=a}}}var yr={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},Gh=_e.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return Ue(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(t,e){this.el.insertBefore(t,this.insertPivot(e))},insertNode:function(t){let{el:e}=this;t.parentNode!==e&&e.appendChild(t)},insertPivot:function(t){let{el:e,pivotNodes:r}=this;t=+t,t||(t=0);let n=r[t];if(n)return n;n=r[t]=document.createComment("z-index:"+(t+1));let i=-1/0;for(let o in r)o=+o,o<t&&o>i&&(i=o,t-1);if(i!==-1/0){let o=r[i];e.insertBefore(n,o.nextSibling)}else e.insertBefore(n,e.firstChild);return n},removePivots:function(){let{el:t,pivotNodes:e}=this;for(let r in e)t.removeChild(e[r]);this.pivotNodes={}}});var Zh=Qr(wn(),1);function Xs(t){return t?Array.isArray(t)?t:[t]:[]}var Xe=_e.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(t,e){let{paper:r}=t;this.cellView=t,this.nodeSelector=e,r&&(this.updateRequested=!0,r.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;let{cellView:t,nodeSelector:e}=this;return t.isMounted()?(this.update(t,e),this.mount(),this.transform(),0):(this.postponedUpdate=!0,0)},findNode(t,e=null){let r;if(typeof e=="string")[r]=t.findBySelector(e);else if(ae(e)){let n=t.model.isLink(),{label:i=null,port:o,selector:s}=e;n&&i!==null?r=t.findLabelNode(i,s):!n&&o?r=t.findPortNode(o,s):[r]=t.findBySelector(s)}else e&&(r=X.toNode(e),r instanceof SVGElement||(r=null));return r||null},getNodeMatrix(t,e){let{options:r}=this,{layer:n}=r,{rotatableNode:i}=t,o=t.getNodeMatrix(e);return i?n?i.contains(e)?o:t.getRootRotateMatrix().inverse().multiply(o):t.getNodeRotateMatrix(e).multiply(o):o},mount(){let{MOUNTABLE:t,cellView:e,el:r,options:n,transformGroup:i,detachedTransformGroup:o,postponedUpdate:s,nodeSelector:a}=this;if(!t||i)return;if(s){this.update(e,a),this.transform();return}let{vel:u,paper:h}=e,{layer:d}=n;if(d){let f;o?(f=o,this.detachedTransformGroup=null):f=X("g").addClass("highlight-transform").append(r),this.transformGroup=f,h.getLayerView(d).insertSortedNode(f.node,n.z)}else(!r.parentNode||r.nextSibling)&&u.append(r)},unmount(){let{MOUNTABLE:t,transformGroup:e,vel:r}=this;t&&(e?(this.transformGroup=null,this.detachedTransformGroup=e,e.remove()):r.remove())},transform(){let{transformGroup:t,cellView:e,updateRequested:r}=this;if(!t||e.model.isLink()||r)return;let n=e.getRootTranslateMatrix(),i=e.getRootRotateMatrix(),o=n.multiply(i);t.attr("transform",X.matrixToTransformString(o))},update(){let{node:t,cellView:e,nodeSelector:r,updateRequested:n,id:i}=this;if(n)return;this.postponedUpdate=!1;let o=this.node=this.findNode(e,r);t&&this.unhighlight(e,t),o?(this.highlight(e,o),this.mount()):(this.unmount(),e.notify("cell:highlight:invalid",i,this))},onRemove(){let{node:t,cellView:e,id:r,constructor:n}=this;t&&this.unhighlight(e,t),this.unmount(),n._removeRef(e,r)},highlight(t,e){},unhighlight(t,e){},listenToUpdateAttributes(t){let e=ue(this,"UPDATE_ATTRIBUTES");!Array.isArray(e)||e.length===0||this.listenTo(t.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){let{cellView:t}=this;if(!t)return;let{model:e,paper:r}=t;ue(this,"UPDATE_ATTRIBUTES").some(i=>e.hasChanged(i))&&r.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(t,e,r){let n=this.uniqueId(e,r);this.add(t,e,n,r)},unhighlight:function(t,e,r){let n=this.uniqueId(e,r);this.remove(t,n)},get(t,e=null){let{cid:r}=t,{_views:n}=this,i=n[r];if(e===null){let o=[];if(!i)return o;for(let s in i){let a=i[s];a instanceof this&&o.push(a)}return o}else{if(!i)return null;if(e in i){let o=i[e];if(o instanceof this)return o}return null}},add(t,e,r,n={}){if(!r)throw new Error("dia.HighlighterView: An ID required.");let i=Xe.get(t,r);i&&i.remove();let o=new this(n);return o.id=r,this._addRef(t,r,o),o.requestUpdate(t,e),o.listenToUpdateAttributes(t),o},_addRef(t,e,r){let{cid:n}=t,{_views:i}=this,o=i[n];o||(o=i[n]={}),o[e]=r},_removeRef(t,e){let{cid:r}=t,{_views:n}=this,i=n[r];if(i){e&&delete i[e];for(let o in i)return;delete n[r]}},remove(t,e=null){Xs(this.get(t,e)).forEach(r=>{r.remove()})},removeAll(t,e=null){let{_views:r}=this;for(let n in r)for(let i in r[n]){let o=r[n][i];o.cellView.paper===t&&o instanceof this&&(e===null||i===e)&&o.remove()}},update(t,e=null,r=!1){Xs(this.get(t,e)).forEach(n=>{(r||n.UPDATABLE)&&n.update()})},transform(t,e=null){Xs(this.get(t,e)).forEach(r=>{r.UPDATABLE&&r.transform()})},unmount(t,e=null){Xs(this.get(t,e)).forEach(r=>r.unmount())},mount(t,e=null){Xs(this.get(t,e)).forEach(r=>r.mount())},uniqueId(t,e=""){return X.ensureId(t)+JSON.stringify(e)}});var Do={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},jC={TOOLS:"TOOLS"},Wt=_e.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var t=["cell"],e=this.model.get("type");return e&&e.toLowerCase().split(".").forEach(function(r,n,i){t.push("type-"+i.slice(0,n+1).join("-"))}),t.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var t={},e={},r=0,n,i,o,s=ue(this,"presentationAttributes");for(var a in s)if(s.hasOwnProperty(a)){var u=s[a];for(Array.isArray(u)||(u=[u]),n=0,i=u.length;n<i;n++){o=u[n];var h=t[o];h||(h=t[o]=1<<r++),e[a]|=h}}var d=ue(this,"initFlag");for(Array.isArray(d)||(d=[d]),n=0,i=d.length;n<i;n++)o=d[n],t[o]||(t[o]=1<<r++);if(r>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=t,this._presentationAttributes=e},hasFlag:function(t,e){return t&this.getFlag(e)},removeFlag:function(t,e){return t^t&this.getFlag(e)},getFlag:function(t){var e=this._flags;if(!e)return 0;var r=0;if(Array.isArray(t))for(var n=0,i=t.length;n<i;n++)r|=e[t[n]];else r|=e[t];return r},attributes:function(){var t=this.model;return{"model-id":t.id,"data-type":t.attributes.type}},constructor:function(t){t.id=t.id||Nn(this),_e.call(this,t)},initialize:function(){this.setFlags(),_e.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(t,e){var r=t.getChangeFlag(this._presentationAttributes);e.updateHandled||!r||(e.dirty&&this.hasFlag(r,"UPDATE")&&(r|=this.getFlag("RENDER")),e.tool&&(e.async=!1),this.requestUpdate(r,e))},requestUpdate:function(t,e){let{paper:r}=this;r&&t>0&&r.requestViewUpdate(this,t,this.UPDATE_PRIORITY,e)},parseDOMJSON:function(t,e){var r=_n(t),n=r.selectors,i=r.groupSelectors;for(var o in i){if(n[o])throw new Error("dia.CellView: ambiguous group selector");n[o]=i[o]}if(e){var s=this.selector;if(n[s])throw new Error("dia.CellView: ambiguous root selector.");n[s]=e}return{fragment:r.fragment,selectors:n}},can:function(t){var e=Vt(this.options.interactive)?this.options.interactive(this):this.options.interactive;return Gt(e)&&e[t]!==!1||Hl(e)&&e!==!1},findBySelector:function(t,e,r){if(e||(e=this.el),r||(r=this.selectors),!t||t===".")return[e];if(r){var n=r[t];if(n)return Array.isArray(n)?n:[n]}return tr.useCSSSelectors?(0,Zh.default)(e).find(t).toArray():[]},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getBBox:function(t){var e;if(t&&t.useModelGeometry){var r=this.model;e=r.getBBox().bbox(r.angle())}else e=this.getNodeBBox(this.el);return this.paper.localToPaperRect(e)},getNodeBBox:function(t){let e=this.getNodeBoundingRect(t),r=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(t)),n=this.getNodeMatrix(t);return X.transformRect(e,r.multiply(n))},getNodeRotateMatrix(t){return!this.rotatableNode||this.rotatableNode.contains(t)?this.getRootRotateMatrix():X.createSVGMatrix()},getNodeUnrotatedBBox:function(t){var e=this.getNodeBoundingRect(t),r=this.getNodeMatrix(t),n=this.getRootTranslateMatrix();return X.transformRect(e,n.multiply(r))},getRootTranslateMatrix:function(){var t=this.model,e=t.position(),r=X.createSVGMatrix().translate(e.x,e.y);return r},getRootRotateMatrix:function(){var t=X.createSVGMatrix(),e=this.model,r=e.angle();if(r){var n=e.getBBox(),i=n.width/2,o=n.height/2;t=t.translate(i,o).rotate(r).translate(-i,-o)}return t},_notifyHighlight:function(t,e,r={}){let{el:n}=this,i;if(typeof e=="string"?[i=n]=this.findBySelector(e):[i=n]=this.$(e),r.partial=i!==n,r.type===void 0){let o;switch(!0){case r.embedding:o=Do.EMBEDDING;break;case r.connecting:o=Do.CONNECTING;break;case r.magnetAvailability:o=Do.MAGNET_AVAILABILITY;break;case r.elementAvailability:o=Do.ELEMENT_AVAILABILITY;break;default:o=Do.DEFAULT;break}r.type=o}return this.notify(t,i,r),this},highlight:function(t,e){return this._notifyHighlight("cell:highlight",t,e)},unhighlight:function(t,e={}){return this._notifyHighlight("cell:unhighlight",t,e)},findMagnet:function(t){let e=this.el,r=this.$(t)[0];r||(r=e);do{let n=r.getAttribute("magnet"),i=r===e;if((n||i)&&n!=="false")return r;if(i)return;r=r.parentNode}while(r)},findProxyNode:function(t,e){t||(t=this.el);let r=t.getAttribute(`${e}-selector`);if(r){let[n]=this.findBySelector(r);if(n)return n}return t},getSelector:function(t,e){var r;if(t===this.el)return typeof e=="string"&&(r="> "+e),r;if(t){var n=X(t).index()+1;r=t.tagName+":nth-child("+n+")",e&&(r+=" > "+e),r=this.getSelector(t.parentNode,r)}return r},addLinkFromMagnet:function(t,e,r){var n=this.paper,i=n.model,o=n.getDefaultLink(this,t);return o.set({source:this.getLinkEnd(t,e,r,o,"source"),target:{x:e,y:r}}).addTo(i,{async:!1,ui:!0}),o.findView(n)},getLinkEnd:function(t,...e){var r=this.model,n=r.id,i=this.findAttribute("port",t),o=t.getAttribute("joint-selector"),s={id:n};return o!=null&&(s.magnet=o),i!=null?(s.port=i,!r.hasPort(i)&&!o&&(s.selector=this.getSelector(t))):o==null&&this.el!==t&&(s.selector=this.getSelector(t)),this.customizeLinkEnd(s,t,...e)},customizeLinkEnd:function(t,e,r,n,i,o){let{paper:s}=this,{connectionStrategy:a}=s.options;if(typeof a=="function"){var u=a.call(s,t,this,e,new z(r,n),i,o,s);if(u)return u}return t},getMagnetFromLinkEnd:function(t){var e=this.el,r=t.port,n=t.magnet,i=this.model,o;return r!=null&&i.isElement()&&i.hasPort(r)?o=this.findPortNode(r,n)||e:(n||(n=t.selector),!n&&r!=null&&(n='[port="'+r+'"]'),o=this.findBySelector(n,e,this.selectors)[0]),this.findProxyNode(o,"magnet")},dragLinkStart:function(t,e,r,n){this.model.startBatch("add-link");let i=this.addLinkFromMagnet(e,r,n);i.notifyPointerdown(t,r,n),i.eventData(t,i.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(t,{linkView:i})},dragLink:function(t,e,r){var n=this.eventData(t),i=n.linkView;if(i)i.pointermove(t,e,r);else{var o=this.paper,s=o.options.magnetThreshold,a=this.getEventTarget(t),u=n.targetMagnet;if(s==="onleave"){if(u===a||X(u).contains(a))return}else if(o.eventData(t).mousemoved<=s)return;this.dragLinkStart(t,u,e,r)}},dragLinkEnd:function(t,e,r){var n=this.eventData(t),i=n.linkView;i&&(i.pointerup(t,e,r),this.model.stopBatch("add-link"))},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,e){ur(e)||(t instanceof SVGElement?X(t).attr(e):(0,Zh.default)(t).attr(e))},processNodeAttributes:function(t,e){var r,n,i,o,s,a,u,h,d,f=[];for(r in e)e.hasOwnProperty(r)&&(n=e[r],i=this.getAttributeDefinition(r),i&&(!Vt(i.qualify)||i.qualify.call(this,n,t,e,this))?(Te(i.set)&&(a||(a={}),a[i.set]=n),n!==null&&f.push(r,i)):(a||(a={}),a[bh(r)]=n));for(o=0,s=f.length;o<s;o+=2)r=f[o],i=f[o+1],n=e[r],Vt(i.set)&&(u||(u={}),u[r]=n),Vt(i.position)&&(h||(h={}),h[r]=n),Vt(i.offset)&&(d||(d={}),d[r]=n);return{raw:e,normal:a,set:u,position:h,offset:d}},updateRelativeAttributes:function(t,e,r,n){n||(n={});var i,o,s,a=e.raw||{},u=e.normal||{},h=e.set,d=e.position,f=e.offset;for(i in h){o=h[i],s=this.getAttributeDefinition(i);var I=s.set.call(this,o,r.clone(),t,a,this);Gt(I)?At(u,I):I!==void 0&&(u[i]=I)}if(t instanceof HTMLElement){this.setNodeAttributes(t,u);return}var A=u.transform,b=X.transformStringToMatrix(A),S=z(b.e,b.f);A&&(u=Ar(u,"transform"),b.e=b.f=0);var P,E,j;if(d||f){var U=this.getNodeScale(t,n.scalableNode);P=U.sx,E=U.sy}var Q=!1;for(i in d)o=d[i],s=this.getAttributeDefinition(i),j=s.position.call(this,o,r.clone(),t,a,this),j&&(S.offset(z(j).scale(P,E)),Q||(Q=!0));this.setNodeAttributes(t,u);var rt=!1;if(f){var p=this.getNodeBoundingRect(t);if(p.width>0&&p.height>0){var v=X.transformRect(p,b).scale(1/P,1/E);for(i in f)o=f[i],s=this.getAttributeDefinition(i),j=s.offset.call(this,o,v,t,a,this),j&&(S.offset(z(j).scale(P,E)),rt||(rt=!0))}}(A!==void 0||Q||rt)&&(S.round(1),b.e=S.x,b.f=S.y,t.setAttribute("transform",X.matrixToTransformString(b)))},getNodeScale:function(t,e){var r,n;if(e&&e.contains(t)){var i=e.scale();r=1/i.sx,n=1/i.sy}else r=1,n=1;return{sx:r,sy:n}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(t){var e=this.metrics;if(!e)return{};var r=X.ensureId(t),n=e[r];return n||(n=e[r]={}),n},getNodeData:function(t){var e=this.nodeCache(t);return e.data||(e.data={}),e.data},getNodeBoundingRect:function(t){var e=this.nodeCache(t);return e.boundingRect===void 0&&(e.boundingRect=X(t).getBBox()),new ft(e.boundingRect)},getNodeMatrix:function(t){let e=this.nodeCache(t);if(e.magnetMatrix===void 0){let{rotatableNode:r,el:n}=this,i;r&&r.contains(t)?i=r:i=n,e.magnetMatrix=X(t).getTransformToElement(i)}return X.createSVGMatrix(e.magnetMatrix)},getNodeShape:function(t){var e=this.nodeCache(t);return e.geometryShape===void 0&&(e.geometryShape=X(t).toGeometryShape()),e.geometryShape.clone()},isNodeConnection:function(t){return this.model.isLink()&&(!t||t===this.el)},findNodesAttributes:function(t,e,r,n){var i,o,s,a,u={},h=[];for(var d in t)if(t.hasOwnProperty(d)&&(s=t[d],!!ae(s))){var f=r[d]=this.findBySelector(d,e,n);for(i=0,o=f.length;i<o;i++){var I=f[i];a=X.ensureId(I);var A=n&&n[d]===I,b=u[a];if(b){b.array||(h.push(a),b.array=!0,b.attributes=[b.attributes],b.selectedLength=[b.selectedLength]);var S=b.attributes,P=b.selectedLength;if(A)S.unshift(s),P.unshift(-1);else{var E=yo(P,o);S.splice(E,0,s),P.splice(E,0,o)}}else u[a]={attributes:s,selectedLength:A?-1:o,node:I,array:!1}}}for(i=0,o=h.length;i<o;i++)a=h[i],s=u[a],s.attributes=Ie({},...s.attributes.reverse());return u},getEventTarget:function(t,e={}){let{target:r,type:n,clientX:i=0,clientY:o=0}=t;return e.fromPoint||n==="touchmove"||n==="touchend"||"pointerId"in t&&r.hasPointerCapture(t.pointerId)?document.elementFromPoint(i,o):r},updateDOMSubtreeAttributes:function(t,e,r){r||(r={}),r.rootBBox||(r.rootBBox=ft()),r.selectors||(r.selectors=this.selectors);var n={},i={},o=[],s=[],a,u,h,d,f,I=r.roAttributes,A=this.findNodesAttributes(I||e,t,n,r.selectors),b=I?this.findNodesAttributes(e,t,n,r.selectors):A;for(var S in A)if(d=A[S],h=d.attributes,u=d.node,f=this.processNodeAttributes(u,h),!f.set&&!f.position&&!f.offset)this.setNodeAttributes(u,f.normal);else{var P=b[S]&&b[S].attributes,E=P&&h.ref===void 0?P.ref:h.ref,j;if(E){if(j=(n[E]||this.findBySelector(E,t,r.selectors))[0],!j)throw new Error('dia.CellView: "'+E+'" reference does not exist.')}else j=null;if(a={node:u,refNode:j,processedAttributes:f,allAttributes:P},j){var U=s.findIndex(function(Q){return Q.refNode===u});U>-1?s.splice(U,0,a):s.push(a)}else o.push(a)}o.push(...s);for(let Q=0,rt=o.length;Q<rt;Q++){a=o[Q],u=a.node,j=a.refNode;let p=j?X.ensureId(j):"",v=i[p];v||(v=i[p]=j?X(j).getBBox({target:WC(u,j)}):r.rootBBox),I?(f=this.processNodeAttributes(u,a.allAttributes),this.mergeProcessedAttributes(f,a.processedAttributes)):f=a.processedAttributes,this.updateRelativeAttributes(u,f,v,r)}},mergeProcessedAttributes:function(t,e){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),At(t.set,e.set),At(t.position,e.position),At(t.offset,e.offset);var r=t.normal&&t.normal.transform;r!==void 0&&e.normal&&(e.normal.transform=r),t.normal=e.normal},onMount(t){t||(this.mountTools(),Xe.mount(this))},onDetach(){this.unmountTools(),Xe.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(t){var e=this._toolsView;return e?t?e.getName()===t:!0:!1},addTools:function(t){return this.removeTools(),t&&(this._toolsView=t,t.configure({relatedView:this}),t.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){let t=this._toolsView;return t&&t.unmount(),this},mountTools(){let t=this._toolsView;return t&&!t.isMounted()&&t.mount(),this},updateTools:function(t){var e=this._toolsView;return e&&e.update(t),this},removeTools:function(){var t=this._toolsView;return t&&(t.remove(),this._toolsView=null),this},hideTools:function(){var t=this._toolsView;return t&&t.hide(),this},showTools:function(){var t=this._toolsView;return t&&t.show(),this},onToolEvent:function(t){switch(t){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools();break}},removeHighlighters:function(){Xe.remove(this)},updateHighlighters:function(t=!1){Xe.update(this,null,t)},transformHighlighters:function(){Xe.transform(this)},preventDefaultInteraction(t){this.eventData(t,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(t){let{defaultInteractionPrevented:e=!1}=this.eventData(t);return e},pointerdblclick:function(t,e,r){this.notify("cell:pointerdblclick",t,e,r)},pointerclick:function(t,e,r){this.notify("cell:pointerclick",t,e,r)},contextmenu:function(t,e,r){this.notify("cell:contextmenu",t,e,r)},pointerdown:function(t,e,r){let{model:n}=this,{graph:i}=n;i&&(n.startBatch("pointer"),this.eventData(t,{graph:i})),this.notify("cell:pointerdown",t,e,r)},pointermove:function(t,e,r){this.notify("cell:pointermove",t,e,r)},pointerup:function(t,e,r){let{graph:n}=this.eventData(t);this.notify("cell:pointerup",t,e,r),n&&n.stopBatch("pointer",{cell:this.model})},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,e,r,n){this.notify("cell:mousewheel",t,e,r,n)},onevent:function(t,e,r,n){this.notify(e,t,r,n)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(t){let{paper:e,model:r}=this;if(e.isAsync()){if(r.isLink()){let o=r.getSourceElement();if(o){let a=e.findViewByModel(o);a&&(e.dumpView(a),e.checkViewVisibility(a))}let s=r.getTargetElement();if(s){let a=e.findViewByModel(s);a&&(e.dumpView(a),e.checkViewVisibility(a))}}e.dumpView(this),e.checkViewVisibility(this)}let n=this.getEventTarget(t,{fromPoint:!0}),i=e.findView(n);i!==this&&(this.mouseleave(t),i&&i.mouseenter(t))},setInteractivity:function(t){this.options.interactive=t}},{Flags:jC,Highlighting:Do,addPresentationAttributes:function(t){return Ie({},ue(this.prototype,"presentationAttributes"),t,function(e,r){if(!(!e||!r)&&(typeof e=="string"&&(e=[e]),typeof r=="string"&&(r=[r]),Array.isArray(e)&&Array.isArray(r)))return kr(e.concat(r))})}});function WC(t,e){let r=t;do{if(r.contains(e))return r;r=r.parentNode}while(r);return null}var te={TOOLS:Wt.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Lo={MOVE:"move",MAGNET:"magnet"},Se=Wt.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=Wt.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){Wt.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[te.UPDATE],position:[te.TRANSLATE,te.TOOLS],size:[te.RESIZE,te.PORTS,te.TOOLS],angle:[te.ROTATE,te.TOOLS],markup:[te.RENDER],ports:[te.PORTS]},initFlag:[te.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(t,e){let{useCSSSelectors:r}=tr;this.hasFlag(t,te.PORTS)&&(this._removePorts(),this._cleanPortsCache());let n=!1;if(this.hasFlag(t,te.RENDER))this.render(),this.updateTools(e),this.updateHighlighters(!0),n=!0,t=this.removeFlag(t,[te.RENDER,te.UPDATE,te.RESIZE,te.TRANSLATE,te.ROTATE,te.PORTS,te.TOOLS]);else{let i=!1;this.hasFlag(t,te.RESIZE)&&(this.resize(e),i=!0,t=this.removeFlag(t,[te.RESIZE,te.UPDATE]),r&&(t=this.removeFlag(t,te.PORTS))),this.hasFlag(t,te.UPDATE)&&(this.update(this.model,null,e),t=this.removeFlag(t,te.UPDATE),i=!0,r&&(t=this.removeFlag(t,te.PORTS))),this.hasFlag(t,te.TRANSLATE)&&(this.translate(),t=this.removeFlag(t,te.TRANSLATE),n=!0),this.hasFlag(t,te.ROTATE)&&(this.rotate(),t=this.removeFlag(t,te.ROTATE),n=!0),this.hasFlag(t,te.PORTS)&&(this._renderPorts(),i=!0,t=this.removeFlag(t,te.PORTS)),i&&this.updateHighlighters(!1)}return n&&this.transformHighlighters(),this.hasFlag(t,te.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,te.TOOLS)),t},_initializePorts:function(){},update:function(t,e){this.cleanNodesCache();let{useCSSSelectors:r}=tr;r&&this._removePorts();var n=this.model,i=n.attr();this.updateDOMSubtreeAttributes(this.el,i,{rootBBox:new ft(n.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:e===i?null:e}),r&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.ElementView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if(typeof e=="string")return this.renderStringMarkup(e);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el),r=this.selectors=e.selectors;this.rotatableNode=X(r[this.rotatableSelector])||null,this.scalableNode=X(r[this.scalableSelector])||null,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=this.vel;e.append(X(t)),this.rotatableNode=e.findOne(".rotatable"),this.scalableNode=e.findOne(".scalable");var r=this.selectors={};r[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),tr.useCSSSelectors||this._renderPorts(),this},resize:function(t){if(this.scalableNode)return this.sgResize(t);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode){this.rgRotate(),this.update();return}this.updateTransformation()},updateTransformation:function(){var t=this.getTranslateString(),e=this.getRotateString();e&&(t+=" "+e),this.vel.attr("transform",t)},getTranslateString:function(){var t=this.model.attributes.position;return"translate("+t.x+","+t.y+")"},getRotateString:function(){var t=this.model.attributes,e=t.angle;if(!e)return null;var r=t.size;return"rotate("+e+","+r.width/2+","+r.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(t){var e=this.model,r=e.angle(),n=e.size(),i=this.scalableNode,o=!1;i.node.getElementsByTagName("path").length>0&&(o=!0);var s=i.getBBox({recursive:o}),a=n.width/(s.width||1),u=n.height/(s.height||1);i.attr("transform","scale("+a+","+u+")");var h=this.rotatableNode,d=h&&h.attr("transform");if(d){h.attr("transform",d+" rotate("+-r+","+n.width/2+","+n.height/2+")");var f=i.getBBox({target:this.paper.cells});e.set("position",{x:f.x,y:f.y},At({updateHandled:!0},t)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(t={}){let e=t.model||this.model,n=(t.paper||this.paper).model,i=t.initialZIndices={},o=e.getEmbeddedCells({deep:!0}),s=n.getConnectedLinks(e,{deep:!0,includeEnclosed:!0});[e,...o,...s].forEach(h=>i[h.id]=h.attributes.z),e.startBatch("to-front"),e.toFront({deep:!0,ui:!0});let a=n.getElements().reduce((h,d)=>Math.max(h,d.attributes.z||0),0);s.forEach(h=>{h.attributes.z<=a&&h.set("z",a+1,{ui:!0})}),e.stopBatch("to-front");let u=e.parent();u?(n.getCell(u).unembed(e,{ui:!0}),t.initialParentId=u):t.initialParentId=null},processEmbedding:function(t={},e,r,n){let i=t.model||this.model,o=t.paper||this.paper,s=o.model,{findParentBy:a,frontParentOnly:u,validateEmbedding:h}=o.options,d;Vt(a)?d=Dt(a.call(s,this,e,r,n)):a==="pointer"?d=Dt(s.findModelsFromPoint({x:r,y:n})):d=s.findModelsUnderElement(i,{searchBy:a}),d=d.filter(A=>A instanceof hr&&i.id!==A.id&&!A.isEmbeddedIn(i)),u&&(d=d.slice(-1));let f=null,I=t.candidateEmbedView;for(let A=d.length-1;A>=0;A--){let b=d[A];if(I&&I.model.id==b.id){f=I;break}else{let S=b.findView(o);if(!Vt(h)||h.call(o,this,S)){f=S;break}}}f&&f!=I&&(this.clearEmbedding(t),t.candidateEmbedView=f.highlight(f.findProxyNode(null,"container"),{embedding:!0})),!f&&I&&this.clearEmbedding(t)},clearEmbedding:function(t){t||(t={});var e=t.candidateEmbedView;e&&(e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null)},finalizeEmbedding:function(t={}){let e=t.candidateEmbedView,r=t.model||this.model,n=t.paper||this.paper;if(e)e.model.embed(r,{ui:!0}),e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null;else{let{validateUnembedding:i}=n.options,{initialParentId:o}=t;if(o&&typeof i=="function"&&!i.call(n,this)){this._disallowUnembed(t);return}}n.model.getConnectedLinks(r,{deep:!0}).forEach(i=>{i.reparent({ui:!0})})},_disallowUnembed:function(t){let{model:e,whenNotAllowed:r="revert"}=t,n=e||this.model,o=(t.paper||this.paper).model;switch(r){case"remove":{n.remove({ui:!0});break}case"revert":{let{initialParentId:s,initialPosition:a,initialZIndices:u}=t;if(a){let{x:d,y:f}=a;n.position(d,f,{deep:!0,ui:!0})}u&&Object.keys(u).forEach(d=>{let f=o.getCell(d);f&&f.set("z",u[d],{ui:!0})});let h=o.getCell(s);h&&h.embed(n,{ui:!0});break}}},getDelegatedView:function(){for(var t=this,e=t.model,r=t.paper;t&&!e.isLink();){if(!e.isEmbedded()||t.can("stopDelegation"))return t;e=e.getParentCell(),t=r.findViewByModel(e)}return null},findProxyNode:function(t,e){t||(t=this.el);let r=t.getAttribute(`${e}-selector`);if(r){let n=this.findAttribute("port",t);if(n){let i=this.findPortNode(n,r);if(i)return i}else{let[i]=this.findBySelector(r);if(i)return i}}return t},notifyPointerdown(t,e,r){Wt.prototype.pointerdown.call(this,t,e,r),this.notify("element:pointerdown",t,e,r)},notifyPointermove(t,e,r){Wt.prototype.pointermove.call(this,t,e,r),this.notify("element:pointermove",t,e,r)},notifyPointerup(t,e,r){this.notify("element:pointerup",t,e,r),Wt.prototype.pointerup.call(this,t,e,r)},pointerdblclick:function(t,e,r){Wt.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",t,e,r)},pointerclick:function(t,e,r){Wt.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",t,e,r)},contextmenu:function(t,e,r){Wt.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",t,e,r)},pointerdown:function(t,e,r){this.notifyPointerdown(t,e,r),this.dragStart(t,e,r)},pointermove:function(t,e,r){let n=this.eventData(t),{targetMagnet:i,action:o,delegatedView:s}=n;switch(i&&this.magnetpointermove(t,i,e,r),o){case Lo.MAGNET:this.dragMagnet(t,e,r);break;case Lo.MOVE:(s||this).drag(t,e,r);default:if(n.preventPointerEvents)break;this.notifyPointermove(t,e,r);break}this.eventData(t,n)},pointerup:function(t,e,r){let n=this.eventData(t),{targetMagnet:i,action:o,delegatedView:s}=n;switch(i&&this.magnetpointerup(t,i,e,r),o){case Lo.MAGNET:this.dragMagnetEnd(t,e,r);break;case Lo.MOVE:(s||this).dragEnd(t,e,r);default:if(n.preventPointerEvents)break;this.notifyPointerup(t,e,r)}i&&this.magnetpointerclick(t,i,e,r),this.checkMouseleave(t)},mouseover:function(t){Wt.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",t)},mouseout:function(t){Wt.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",t)},mouseenter:function(t){Wt.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){Wt.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)},mousewheel:function(t,e,r,n){Wt.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",t,e,r,n)},onmagnet:function(t,e,r){let{currentTarget:n}=t;this.magnetpointerdown(t,n,e,r),this.eventData(t,{targetMagnet:n}),this.dragMagnetStart(t,e,r)},magnetpointerdown:function(t,e,r,n){this.notify("element:magnet:pointerdown",t,e,r,n)},magnetpointermove:function(t,e,r,n){this.notify("element:magnet:pointermove",t,e,r,n)},magnetpointerup:function(t,e,r,n){this.notify("element:magnet:pointerup",t,e,r,n)},magnetpointerdblclick:function(t,e,r,n){this.notify("element:magnet:pointerdblclick",t,e,r,n)},magnetcontextmenu:function(t,e,r,n){this.notify("element:magnet:contextmenu",t,e,r,n)},dragStart:function(t,e,r){if(this.isDefaultInteractionPrevented(t))return;var n=this.getDelegatedView();if(!n||!n.can("elementMove"))return;this.eventData(t,{action:Lo.MOVE,delegatedView:n});let i=n.model.position();n.eventData(t,{initialPosition:i,pointerOffset:i.difference(e,r),restrictedArea:this.paper.getRestrictedArea(n,e,r)})},dragMagnetStart:function(t,e,r){let{paper:n}=this,i=t.isPropagationStopped();if(i&&this.eventData(t,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(t)||!this.can("addLinkFromMagnet"))return;let{targetMagnet:o=t.currentTarget}=this.eventData(t);if(t.stopPropagation(),!n.options.validateMagnet.call(n,this,o,t)){i?this.dragStart(t,e,r):this.pointerdown(t,e,r);return}n.options.magnetThreshold<=0&&this.dragLinkStart(t,o,e,r),this.eventData(t,{action:Lo.MAGNET})},drag:function(t,e,r){var n=this.paper,i=n.options.gridSize,o=this.model,s=this.eventData(t),{pointerOffset:a,restrictedArea:u,embedding:h}=s,d=ln(e+a.x,i),f=ln(r+a.y,i);o.position(d,f,{restrictedArea:u,deep:!0,ui:!0}),n.options.embeddingMode&&(h||(this.prepareEmbedding(s),h=!0),this.processEmbedding(s,t,e,r)),this.eventData(t,{embedding:h})},dragMagnet:function(t,e,r){this.dragLink(t,e,r)},dragEnd:function(t,e,r){var n=this.eventData(t);n.embedding&&this.finalizeEmbedding(n)},dragMagnetEnd:function(t,e,r){this.dragLinkEnd(t,e,r)},magnetpointerclick:function(t,e,r,n){var i=this.paper;i.eventData(t).mousemoved>i.options.clickThreshold||this.notify("element:magnet:pointerclick",t,e,r,n)}},{Flags:te});At(Se.prototype,Zv);var gu={};Ae(gu,{manhattan:()=>cu,metro:()=>sx,normal:()=>YC,oneSide:()=>FC,orthogonal:()=>lu,rightAngle:()=>dx});var YC=function(t,e,r){return t};var FC=function(t,e,r){var n=e.side||"bottom",i=fr(e.padding||40),o=r.sourceBBox,s=r.targetBBox,a=o.center(),u=s.center(),h,d,f;switch(n){case"bottom":f=1,h="y",d="height";break;case"top":f=-1,h="y",d="height";break;case"left":f=-1,h="x",d="width";break;case"right":f=1,h="x",d="width";break;default:throw new Error("Router: invalid side")}return a[h]+=f*(o[d]/2+i[n]),u[h]+=f*(s[d]/2+i[n]),f*(a[h]-u[h])>0?u[h]=a[h]:a[h]=u[h],[a].concat(t,u)};var VC={N:"S",S:"N",E:"W",W:"E"},UC={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function su(t,e,r){var n=new z(t.x,e.y);return r.containsPoint(n)&&(n=new z(e.x,t.y)),n}function Wh(t,e){return t[e==="W"||e==="E"?"width":"height"]}function Cr(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function iu(t){return new ft(t.x,t.y,0,0)}function au(t){var e=fr(t.padding||t.elementPadding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function Wv(t,e){return t.sourceBBox.clone().moveAndExpand(au(e))}function Yv(t,e){return t.targetBBox.clone().moveAndExpand(au(e))}function _C(t,e){if(t.sourceAnchor)return t.sourceAnchor;var r=Wv(t,e);return r.center()}function XC(t,e){if(t.targetAnchor)return t.targetAnchor;var r=Yv(t,e);return r.center()}function Fv(t,e,r){var n=new z(t.x,e.y),i=new z(e.x,t.y),o=Cr(t,n),s=Cr(t,i),a=VC[r],u=o===r||o!==a&&(s===a||s!==r)?n:i;return{points:[u],direction:Cr(u,e)}}function ou(t,e,r){var n=su(t,e,r);return{points:[n],direction:Cr(n,e)}}function HC(t,e,r,n){var i={},o=[new z(t.x,e.y),new z(e.x,t.y)],s=o.filter(function(f){return!r.containsPoint(f)}),a=s.filter(function(f){return Cr(f,t)!==n}),u;if(a.length>0)u=a.filter(function(f){return Cr(t,f)===n}).pop(),u=u||a[0],i.points=[u],i.direction=Cr(u,e);else{u=xo(o,s)[0];var h=new z(e).move(u,-Wh(r,n)/2),d=su(h,t,r);i.points=[d,h],i.direction=Cr(h,e)}return i}function JC(t,e,r,n){var i=ou(e,t,n),o=i.points[0];if(r.containsPoint(o)){i=ou(t,e,r);var s=i.points[0];if(n.containsPoint(s)){var a=new z(t).move(s,-Wh(r,Cr(t,s))/2),u=new z(e).move(o,-Wh(n,Cr(e,o))/2),h=new gt(a,u).midpoint(),d=ou(t,h,r),f=Fv(h,e,d.direction);i.points=[d.points[0],f.points[0]],i.direction=f.direction}}return i}function jh(t,e,r,n,i){var o={},s=r.union(n).inflate(1),a=s.center().distance(e)>s.center().distance(t),u=a?e:t,h=a?t:e,d,f,I;return i?(d=z.fromPolar(s.width+s.height,UC[i],u),d=s.pointNearestToPoint(d).move(d,-1)):d=s.pointNearestToPoint(u).move(u,1),f=su(d,h,s),d.round().equals(f.round())?(f=z.fromPolar(s.width+s.height,Oe(d.theta(u))+Math.PI/2,h),f=s.pointNearestToPoint(f).move(h,1).round(),I=su(d,f,s),o.points=a?[f,I,d]:[d,I,f]):o.points=a?[f,d]:[d,f],o.direction=Cr(a?d:f,e),o}function lu(t,e,r){var n=Wv(r,e),i=Yv(r,e),o=_C(r,e),s=XC(r,e);n=n.union(iu(o)),i=i.union(iu(s)),t=Dt(t).map(z),t.unshift(o),t.push(s);for(var a,u=[],h=0,d=t.length-1;h<d;h++){var f=null,I=t[h],A=t[h+1],b=!!Cr(I,A);if(h===0)h+1===d?n.intersect(i.clone().inflate(1))?f=jh(I,A,n,i):b||(f=JC(I,A,n,i)):n.containsPoint(A)?f=jh(I,A,n,iu(A).moveAndExpand(au(e))):b||(f=ou(I,A,n));else if(h+1===d){var S=b&&Cr(A,I)===a;i.containsPoint(I)||S?f=jh(I,A,iu(I).moveAndExpand(au(e)),i,a):b||(f=HC(I,A,i,a))}else b||(f=Fv(I,A,a));f?(Array.prototype.push.apply(u,f.points),a=f.direction):a=Cr(I,A),h+1<d&&u.push(A)}return u}var Hv={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var t=this.step,e=this.cost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:-t,offsetY:0,cost:e},{offsetX:0,offsetY:t,cost:e},{offsetX:0,offsetY:-t,cost:e}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},isPointObstacle:null,fallbackRouter:function(t,e,r){if(!Vt(lu))throw new Error("Manhattan requires the orthogonal router as default fallback.");return lu(t,At({},Hv,e),r)},fallbackRoute:function(t,e,r){return null},draggingRoute:null};function Vh(t){this.map={},this.options=t,this.mapGridSize=100}Vh.prototype.build=function(t,e){var r=this.options,n=Dt(r.excludeEnds).reduce(function(u,h){var d=e.get(h);if(d){var f=t.getCell(d.id);f&&u.push(f)}return u},[]),i=[],o=t.getCell(e.get("source").id);o&&(i=Ni(i,o.getAncestors().map(function(u){return u.id})));var s=t.getCell(e.get("target").id);s&&(i=Ni(i,s.getAncestors().map(function(u){return u.id})));var a=this.mapGridSize;return t.getElements().reduce(function(u,h){var d=Dt(r.excludeTypes).includes(h.get("type")),f=n.find(function(Q){return Q.id===h.id}),I=i.includes(h.id),A=d||f||I;if(!A)for(var b=h.getBBox().moveAndExpand(r.paddingBox),S=b.origin().snapToGrid(a),P=b.corner().snapToGrid(a),E=S.x;E<=P.x;E+=a)for(var j=S.y;j<=P.y;j+=a){var U=E+"@"+j;u[U]=u[U]||[],u[U].push(b)}return u},this.map),this};Vh.prototype.isPointAccessible=function(t){var e=t.clone().snapToGrid(this.mapGridSize).toString();return Dt(this.map[e]).every(function(r){return!r.containsPoint(t)})};function Si(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}Si.prototype.add=function(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=e;var r=yo(this.items,t,function(n){return this.values[n]}.bind(this));this.items.splice(r,0,t)};Si.prototype.remove=function(t){this.hash[t]=this.CLOSE};Si.prototype.isOpen=function(t){return this.hash[t]===this.OPEN};Si.prototype.isClose=function(t){return this.hash[t]===this.CLOSE};Si.prototype.isEmpty=function(){return this.items.length===0};Si.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t};function Jv(t,e){return e&&e.paddingBox?t.sourceBBox.clone().moveAndExpand(e.paddingBox):t.sourceBBox.clone()}function Qv(t,e){return e&&e.paddingBox?t.targetBBox.clone().moveAndExpand(e.paddingBox):t.targetBBox.clone()}function Kv(t,e){if(t.sourceAnchor)return t.sourceAnchor;var r=Jv(t,e);return r.center()}function QC(t,e){if(t.targetAnchor)return t.targetAnchor;var r=Qv(t,e);return r.center()}function Yh(t,e,r,n,i){var o=360/r,s=t.theta(KC(t,e,n,i)),a=We(s+o/2);return o*Math.floor(a/o)}function KC(t,e,r,n){var i=n.step,o=e.x-t.x,s=e.y-t.y,a=o/r.x,u=s/r.y,h=a*i,d=u*i;return new z(t.x+h,t.y+d)}function Vv(t,e){var r=Math.abs(t-e);return r>180?360-r:r}function qC(t,e,r){var n=r.step;Dt(r.directions).forEach(function(i){i.gridOffsetX=i.offsetX/n*e.x,i.gridOffsetY=i.offsetY/n*e.y})}function $C(t,e,r){return{source:e.clone(),x:Uv(r.x-e.x,t),y:Uv(r.y-e.y,t)}}function Uv(t,e){if(!t)return e;var r=Math.abs(t),n=Math.round(r/e);if(!n)return r;var i=n*e,o=r-i,s=o/n;return e+s}function tx(t,e){var r=e.source,n=ln(t.x-r.x,e.x)+r.x,i=ln(t.y-r.y,e.y)+r.y;return new z(n,i)}function Js(t,e){return t.round(e)}function uu(t,e,r){return Js(tx(t.clone(),e),r)}function Qs(t){return t.clone().toString()}function Fh(t){return new z(t.x===0?0:Math.abs(t.x)/t.x,t.y===0?0:Math.abs(t.y)/t.y)}function ex(t,e,r,n,i,o,s){for(var a=[],u=Fh(i.difference(r)),h=Qs(r),d=t[h],f;d;){f=e[h];var I=Fh(f.difference(d));I.equals(u)||(a.unshift(f),u=I),h=Qs(d),d=t[h]}var A=e[h],b=Fh(A.difference(n));return b.equals(u)||a.unshift(A),a}function _v(t,e){for(var r=1/0,n=0,i=e.length;n<i;n++){var o=t.manhattanDistance(e[n]);o<r&&(r=o)}return r}function Xv(t,e,r,n,i){var o=i.precision,s=i.directionMap,a=t.difference(e.center()),u=Gt(s)?Object.keys(s):[],h=Dt(r),d=u.reduce(function(f,I){if(h.includes(I)){for(var A=s[I],b=new z(t.x+A.x*(Math.abs(a.x)+e.width),t.y+A.y*(Math.abs(a.y)+e.height)),S=new gt(t,b),P=S.intersect(e)||[],E=P.length,j,U=null,Q=0;Q<E;Q++){var rt=P[Q],p=t.squaredDistance(rt);(j===void 0||p>j)&&(j=p,U=rt)}if(U){var v=uu(U,n,o);e.containsPoint(v)&&(v=uu(v.offset(A.x*n.x,A.y*n.y),n,o)),f.push(v)}}return f},[]);return e.containsPoint(t)||d.push(uu(t,n,o)),d}function rx(t,e,r,n){var i=n.precision,o,s;t instanceof ft?o=Js(Kv(this,n).clone(),i):o=Js(t.clone(),i),e instanceof ft?s=Js(QC(this,n).clone(),i):s=Js(e.clone(),i);var a=$C(n.step,o,s),u,h,d,f;if(t instanceof ft?(u=o,d=Xv(u,t,n.startDirections,a,n)):(u=o,d=[u]),e instanceof ft?(h=s,f=Xv(s,e,n.endDirections,a,n)):(h=s,f=[h]),d=d.filter(Tt=>!r(Tt)),f=f.filter(Tt=>!r(Tt)),d.length>0&&f.length>0){for(var I=new Si,A={},b={},S={},P=0,E=d.length;P<E;P++){var j=d[P],U=Qs(j);I.add(U,_v(j,f)),A[U]=j,S[U]=0}var Q=n.previousDirectionAngle,rt=Q===void 0,p,v,w=n.directions;qC(w,a,n);for(var M=w.length,D=Dt(f).reduce(function(Tt,ee){var C=Qs(ee);return Tt.push(C),Tt},[]),G=n.maximumLoops;!I.isEmpty()&&G>0;){var Z=I.pop(),_=A[Z],at=b[Z],ht=S[Z],Y=at===void 0,K=_.equals(u),J;Y?rt?K?J=null:J=Yh(u,_,M,a,n):J=Q:J=Yh(at,_,M,a,n);var q=d.length===f.length;if(q){for(var St=0;St<d.length;St++)if(!d[St].equals(f[St])){q=!1;break}}var Nt=Y&&q;if(!Nt&&D.indexOf(Z)>=0)return n.previousDirectionAngle=J,ex(b,A,_,u,h,a,n);for(P=0;P<M;P++){p=w[P];var oe=p.angle;if(v=Vv(J,oe),!(!(rt&&K)&&v>n.maxAllowedDirectionChange)){var pe=uu(_.clone().offset(p.gridOffsetX,p.gridOffsetY),a,i),wt=Qs(pe);if(!(I.isClose(wt)||r(pe))){if(D.indexOf(wt)>=0){var Mt=pe.equals(h);if(!Mt){var ot=Yh(pe,h,M,a,n),it=Vv(oe,ot);if(it>n.maxAllowedDirectionChange)continue}}var pt=p.cost,Bt=K?0:n.penalties[v],Qt=ht+pt+Bt;(!I.isOpen(wt)||Qt<S[wt])&&(A[wt]=pe,b[wt]=_,S[wt]=Qt,I.add(wt,Qt+_v(pe,f)))}}}G--}}return n.fallbackRoute.call(this,u,h,n)}function nx(t){if(t.directions=ue(t,"directions"),t.penalties=ue(t,"penalties"),t.paddingBox=ue(t,"paddingBox"),t.padding=ue(t,"padding"),t.padding){var e=fr(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}Dt(t.directions).forEach(function(r){var n=new z(0,0),i=new z(r.offsetX,r.offsetY);r.angle=We(n.theta(i))})}function ix(t,e,r){nx(e),r.options.perpendicular=!!e.perpendicular;var n=Jv(r,e),i=Qv(r,e),o=Kv(r,e);let s;if(typeof e.isPointObstacle=="function")s=e.isPointObstacle;else{let U=new Vh(e);U.build(r.paper.model,r.model),s=Q=>!U.isPointAccessible(Q)}for(var a=Dt(t).map(z),u=[],h=o,d,f,I=0,A=a.length;I<=A;I++){var b=null;if(f=d||n,d=a[I],!d){d=i;var S=!r.model.get("source").id||!r.model.get("target").id;if(S&&Vt(e.draggingRoute)){var P=f===n?o:f,E=d.origin();b=e.draggingRoute.call(r,P,E,e)}}if(b=b||rx.call(r,f,d,s,e),b===null)return e.fallbackRouter(t,e,r);var j=b[0];j&&j.equals(h)&&b.shift(),h=b[b.length-1]||h,Array.prototype.push.apply(u,b)}return u}var cu=function(t,e,r){return ix(t,At({},Hv,e),r)};var ox={maxAllowedDirectionChange:45,diagonalCost:function(){var t=this.step;return Math.ceil(Math.sqrt(t*t<<1))},directions:function(){var t=this.step,e=this.cost(),r=this.diagonalCost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:t,offsetY:t,cost:r},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:t,cost:r},{offsetX:-t,offsetY:0,cost:e},{offsetX:-t,offsetY:-t,cost:r},{offsetX:0,offsetY:-t,cost:e},{offsetX:t,offsetY:-t,cost:r}]},fallbackRoute:function(t,e,r){var n=t.theta(e),i=[],o={x:e.x,y:t.y},s={x:t.x,y:e.y};if(n%180>90){var a=o;o=s,s=a}var u=n%90<45?o:s,h=new gt(t,u),d=90*Math.ceil(n/90),f=z.fromPolar(h.squaredLength(),Oe(d+135),u),I=new gt(e,f),A=h.intersection(I),b=A||e,S=A?b:t,P=360/r.directions.length,E=S.theta(e),j=We(E+P/2),U=P*Math.floor(j/P);return r.previousDirectionAngle=U,b&&i.push(b.round()),i.push(e),i}},sx=function(t,e,r){if(!Vt(cu))throw new Error("Metro requires the manhattan router.");return cu(t,At({},ox,e),r)};var ct={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},qv=[ct.LEFT,ct.RIGHT,ct.TOP,ct.BOTTOM],ko={[ct.LEFT]:ct.RIGHT,[ct.RIGHT]:ct.LEFT,[ct.TOP]:ct.BOTTOM,[ct.BOTTOM]:ct.TOP},ax=[ct.TOP,ct.BOTTOM],fu={0:ct.RIGHT,180:ct.LEFT,270:ct.TOP,90:ct.BOTTOM};function Ks(t){return t.angle()}function hu(t){return new qt(t).simplify({threshold:1}).points}function du(t,e){let{point:r,x0:n,y0:i,view:o,bbox:s,direction:a}=t,{point:u,x0:h,y0:d,view:f,bbox:I,direction:A}=e,b;if(o)o.model.isLink()?b=$v(u,r,o):a===ct.ANCHOR_SIDE?b=s.sideNearestToPoint(r):a===ct.MAGNET_SIDE?b=o.model.getBBox().sideNearestToPoint(r):b=a;else{let P=new ft(n,i,0,0);b=qv.includes(a)?a:P.sideNearestToPoint(u)}let S;if(f)f.model.isLink()?S=$v(r,u,f):A===ct.ANCHOR_SIDE?S=I.sideNearestToPoint(u):A===ct.MAGNET_SIDE?S=f.model.getBBox().sideNearestToPoint(u):S=A;else{let P=new ft(h,d,0,0);S=qv.includes(A)?A:P.sideNearestToPoint(r)}return[b,S]}function lx(t,e,r){let{x0:n,y0:i,width:o,height:s,point:a,margin:u}=t,h=n+o,d=i+s,f=n-u,I=h+u,A=i-u,{x:b}=a,{x0:S,y0:P}=e;return S===b&&P<i?ct.BOTTOM:S<b&&P<A?ct.RIGHT:S>b&&P<A?ct.LEFT:S<f&&P>=i||S>I&&P>=i?ct.TOP:S>=f&&S<=b&&P>d||S<=I&&S>=b&&P>d?r.point.x<S?ct.RIGHT:ct.LEFT:ct.TOP}function ux(t,e,r){let{x0:n,y0:i,width:o,height:s,point:a,margin:u}=t,h=n+o,d=i+s,f=n-u,I=h+u,A=d+u,{x:b}=a,{x0:S,y0:P}=e;return S===b&&P>d?ct.TOP:S<b&&P>A?ct.RIGHT:S>b&&P>A?ct.LEFT:S<f&&P<=d||S>I&&P<=d?ct.BOTTOM:S>=f&&S<=b&&P<i||S<=I&&S>=b&&P<i?r.point.x<S?ct.RIGHT:ct.LEFT:ct.BOTTOM}function cx(t,e,r){let{y0:n,x0:i,width:o,height:s,point:a,margin:u}=t,h=i+o,d=n+s,f=i-u,I=n-u,A=d+u,{x:b,y:S}=a,{x0:P,y0:E}=e;return P<b&&E===S?ct.RIGHT:P<=f&&E<S?ct.BOTTOM:P<=f&&E>S?ct.TOP:P>=i&&E<=I||P>=i&&E>=A?ct.LEFT:P>h&&E>=I&&E<=S||P>h&&E<=A&&E>=S?r.point.y<E?ct.BOTTOM:ct.TOP:ct.LEFT}function fx(t,e,r){let{y0:n,x0:i,width:o,height:s,point:a,margin:u}=t,h=i+o,d=n+s,f=h+u,I=n-u,A=d+u,{x:b,y:S}=a,{x0:P,y0:E}=e;return P>b&&E===S?ct.LEFT:P>=f&&E<S?ct.BOTTOM:P>=f&&E>S?ct.TOP:P<=h&&E<=I||P<=h&&E>=A?ct.RIGHT:P<i&&E>=I&&E<=S||P<i&&E<=A&&E>=S?r.point.y<E?ct.BOTTOM:ct.TOP:ct.RIGHT}function hx(t,e,r){let[n]=du(t,e);switch(n){case ct.TOP:return lx(t,e,r);case ct.RIGHT:return fx(t,e,r);case ct.BOTTOM:return ux(t,e,r);case ct.LEFT:return cx(t,e,r)}}function $v(t,e,r){let n=r.getTangentAtLength(r.getClosestPointLength(e)),i=Math.round(Ks(n)/90)*90;if(i%180===0&&t.y===e.y)return t.x<e.x?ct.LEFT:ct.RIGHT;if(t.x===e.x)return t.y<e.y?ct.TOP:ct.BOTTOM;switch(i){case 0:case 180:case 360:return t.y<e.y?ct.TOP:ct.BOTTOM;case 90:case 270:return t.x<e.x?ct.LEFT:ct.RIGHT}}function t0(t,e,r,n,i,o,s){n===ct.AUTO&&(n=i?ct.MAGNET_SIDE:ct.ANCHOR_SIDE);let a=t&&t.model.isElement(),{x:u,y:h,width:d=0,height:f=0}=a?ft.fromRectUnion(r,t.model.getBBox()):o;return{point:e,x0:u,y0:h,view:t,bbox:r,width:d,height:f,direction:n,margin:a?s:0}}function Uh({x:t,y:e}){let r=new z(t,e);return{point:r,x0:r.x,y0:r.y,view:null,bbox:new ft(t,e,0,0),width:0,height:0,direction:null,margin:0}}function e0(t,e,r){let n=e.point.clone(),{x0:i,y0:o,width:s,height:a}=e;switch(t){case"left":n.x=i-r;break;case"right":n.x=i+s+r;break;case"top":n.y=o-r;break;case"bottom":n.y=o+a+r;break}return n}function Kn(t,e){let{point:r,x0:n,y0:i,view:o,width:s,height:a,margin:u}=t,{point:h,x0:d,y0:f,width:I,height:A,margin:b}=e,S=d+I,P=f+A,E=n+s,j=i+a,U=o&&o.model.isElement(),Q=n-u,rt=E+u,p=i-u,v=j+u,w=d-b,M=S+b,D=f-b,G=P+b,[Z,_]=du(t,e),at=e0(Z,{point:r,x0:n,y0:i,width:s,height:a},u),ht=e0(_,{point:h,x0:d,y0:f,width:I,height:A},b),{x:Y,y:K}=at,{x:J,y:q}=ht,St=(d+S)/2,Nt=(f+P)/2,oe=(n+E)/2,pe=(i+j)/2,wt=(oe<St?E+d:S+n)/2,Mt=(pe<Nt?j+f:P+i)/2;if(Z==="left"&&_==="right"){if(Q<=M){let it=Mt;return E<=d&&(P>=p&&q<K?it=Math.min(D,p):f<=v&&q>=K&&(it=Math.max(G,v))),[{x:Y,y:K},{x:Y,y:it},{x:J,y:it},{x:J,y:q}]}let ot=(Y+J)/2;return[{x:ot,y:K},{x:ot,y:q}]}else if(Z==="right"&&_==="left"){if(rt>=w){let it=Mt;return Y>S&&(P>=p&&q<K?it=Math.min(D,p):f<=v&&q>=K&&(it=Math.max(G,v))),[{x:Y,y:K},{x:Y,y:it},{x:J,y:it},{x:J,y:q}]}let ot=(Y+J)/2;return[{x:ot,y:K},{x:ot,y:q}]}else if(Z==="top"&&_==="bottom"){if(K<q){let it=wt,pt=K;return K<f&&(S>=Q&&J<Y?it=Math.min(w,Q):d<=rt&&J>=Y&&(it=Math.max(M,rt))),[{x:Y,y:pt},{x:it,y:pt},{x:it,y:q},{x:J,y:q}]}let ot=(K+q)/2;return[{x:Y,y:ot},{x:J,y:ot}]}else if(Z==="bottom"&&_==="top"){if(K-u>q){let it=wt,pt=K;return K>P&&(S>=Q&&J<Y?it=Math.min(w,Q):d<=rt&&J>=Y&&(it=Math.max(M,rt))),[{x:Y,y:pt},{x:it,y:pt},{x:it,y:q},{x:J,y:q}]}let ot=(K+q)/2;return[{x:Y,y:ot},{x:J,y:ot}]}else if(Z==="top"&&_==="top"){let ot,it=Math.min((j+f)/2,q),pt=Math.min((i+P)/2,K);if(q<K){if(Y>=M||Y<=w)return[{x:Y,y:Math.min(K,q)},{x:J,y:Math.min(K,q)}];J>Y?ot=Math.min(Y,w):ot=Math.max(Y,M)}else{if(J>=rt||J<=Q)return[{x:Y,y:Math.min(K,q)},{x:J,y:Math.min(K,q)}];J>=Y?ot=Math.max(J,rt):ot=Math.min(J,Q)}return[{x:Y,y:pt},{x:ot,y:pt},{x:ot,y:it},{x:J,y:it}]}else if(Z==="bottom"&&_==="bottom"){let ot,it=Math.max((i+P)/2,q),pt=Math.max((j+f)/2,K);if(q>K){if(Y>=M||Y<=w)return[{x:Y,y:Math.max(K,q)},{x:J,y:Math.max(K,q)}];J>Y?ot=Math.min(Y,w):ot=Math.max(Y,M)}else{if(J>=rt||J<=Q)return[{x:Y,y:Math.max(K,q)},{x:J,y:Math.max(K,q)}];J>=Y?ot=Math.max(J,rt):ot=Math.min(J,Q)}return[{x:Y,y:pt},{x:ot,y:pt},{x:ot,y:it},{x:J,y:it}]}else if(Z==="left"&&_==="left"){let ot,it=Math.min((E+d)/2,J),pt=Math.min((n+S)/2,Y);return J>Y?q<=K?ot=Math.min(p,q):ot=Math.max(v,q):q>=K?ot=Math.min(D,K):ot=Math.max(G,K),[{x:pt,y:K},{x:pt,y:ot},{x:it,y:ot},{x:it,y:q}]}else if(Z==="right"&&_==="right"){let ot,it=Math.max((n+S)/2,J),pt=Math.max((E+d)/2,Y);return J<Y?q<=K?ot=Math.min(p,q):ot=Math.max(v,q):q>=K?ot=Math.min(D,K):ot=Math.max(G,K),[{x:pt,y:K},{x:pt,y:ot},{x:it,y:ot},{x:it,y:q}]}else if(Z==="top"&&_==="right"){if(K>q){if(Y<J){let it=Mt;return(it>Nt||!U)&&it<G&&Y<d&&(it=D),[{x:Y,y:it},{x:J,y:it},{x:J,y:q}]}return[{x:Y,y:q}]}let ot=Math.max(wt,M);if(J<Y&&q>i&&q<j)return[{x:Y,y:K},{x:ot,y:K},{x:ot,y:q}];if(ot>Q&&q>i||d>E){let it=Math.min(i-u,f-b),pt=Math.max(E+u,S+b);return[{x:Y,y:it},{x:pt,y:it},{x:pt,y:q}]}return[{x:Y,y:K},{x:Math.max(ot,J),y:K},{x:Math.max(ot,J),y:q}]}else if(Z==="top"&&_==="left"){if(K>q){if(Y>J){let it=Mt;return(it>Nt||!U)&&it<G&&Y>S&&(it=D),[{x:Y,y:it},{x:J,y:it},{x:J,y:q}]}return[{x:Y,y:q}]}let ot=Math.min(w,wt);if(Y<J&&j>=q)return[{x:Y,y:K},{x:ot,y:K},{x:ot,y:q}];if(ot<rt&&K<P){let it=Math.min(p,D),pt=Math.min(Q,w);return[{x:Y,y:it},{x:pt,y:it},{x:pt,y:q}]}return[{x:Y,y:K},{x:ot,y:K},{x:ot,y:q}]}else if(Z==="bottom"&&_==="right"){if(K<q){if(Y<J){let it=Mt;return(it<Nt||!U)&&it>D&&Y<d&&(it=G),[{x:Y,y:it},{x:J,y:it},{x:J,y:q}]}return[{x:Y,y:q}]}else if(n<J){let it=Math.max(v,G),pt=Math.max(rt,M);return[{x:Y,y:it},{x:pt,y:it},{x:pt,y:q}]}let ot=wt;return[{x:Y,y:K},{x:ot,y:K},{x:ot,y:q}]}else if(Z==="bottom"&&_==="left"){if(K<q){if(Y>J){let it=Mt;return(it<Nt||!U)&&it>D&&Y>S&&(it=G),[{x:Y,y:it},{x:J,y:it},{x:J,y:q}]}return[{x:Y,y:q}]}else if(E>J){let it=Math.max(v,G),pt=Math.min(Q,w);return[{x:Y,y:it},{x:pt,y:it},{x:pt,y:q}]}let ot=wt;return[{x:Y,y:K},{x:ot,y:K},{x:ot,y:q}]}else if(Z==="left"&&_==="bottom"){if(Y>=J&&K>=G)return[{x:J,y:K}];if(Y>=S&&K<q){let pt=wt;return[{x:pt,y:K},{x:pt,y:q},{x:J,y:q}]}if(J<E&&P<=i){let pt=Mt;return[{x:Y,y:K},{x:Y,y:pt},{x:J,y:pt}]}let ot=Math.min(w,Y),it=Math.max(v,G);return[{x:ot,y:K},{x:ot,y:it},{x:J,y:it}]}else if(Z==="left"&&_==="top"){if(Y>J&&K<D)return[{x:J,y:K}];if(Y>=S&&K>q){let pt=wt;return[{x:pt,y:K},{x:pt,y:q},{x:J,y:q}]}if(J<=E&&q>K){let pt=Mt;return[{x:Y,y:K},{x:Y,y:pt},{x:J,y:pt}]}let ot=q<K?Math.min(Q,w):Q,it=Math.min(p,D);return[{x:ot,y:K},{x:ot,y:it},{x:J,y:it}]}else if(Z==="right"&&_==="top"){if(Y<=J&&K<D)return[{x:J,y:K}];if(E<d&&K>q){let pt=wt;return[{x:pt,y:K},{x:pt,y:q},{x:J,y:q}]}if(J<Y&&f>j){let pt=Mt;return[{x:Y,y:K},{x:Y,y:pt},{x:J,y:pt}]}let ot=Math.max(rt,M),it=Math.min(p,D);return[{x:ot,y:K},{x:ot,y:it},{x:J,y:it}]}else if(Z==="right"&&_==="bottom"){if(Y<=J&&K>=G)return[{x:J,y:K}];if(Y<=w&&K<q){let pt=wt;return[{x:pt,y:K},{x:pt,y:q},{x:J,y:q}]}if(J>n&&P<i){let pt=Mt;return[{x:Y,y:K},{x:Y,y:pt},{x:J,y:pt}]}let ot=Math.max(M,Y),it=Math.max(v,G);return[{x:ot,y:K},{x:ot,y:it},{x:J,y:it}]}}function r0(t,e,r){let{sourceDirection:n=ct.AUTO,targetDirection:i=ct.AUTO}=e,o=e.margin||20,s=e.useVertices||!1,a=!!r.model.source().port,u=t0(r.sourceView,r.sourceAnchor,r.sourceBBox,n,a,r.sourceAnchor,o),h=!!r.model.target().port,d=t0(r.targetView,r.targetAnchor,r.targetBBox,i,h,r.targetAnchor,o),f=[];if(!s||t.length===0)return hu(Kn(u,d));let I=t.map(S=>Uh(S)),[A]=I;if(u.view&&u.view.model.isElement()&&u.view.model.getBBox().inflate(o).containsPoint(A.point)){let[S]=du(u,A),P=S,E=Uh(u.point);E.margin=o,E.direction=S,A.direction=P,f.push(...Kn(E,A),A.point)}else{let S=I[1]||d,P=hx(u,A,S);A.direction=P,f.push(...Kn(u,A),A.point)}for(let S=0;S<I.length-1;S++){let P=I[S],E=I[S+1],j=new gt(P.point,E.point),U=Ks(j);if(U%90===0){let p=fu[U],v=ko[p];if(p!==P.direction)f.push(P.point,E.point),E.direction=v;else{let w=We(U-90),M=0,D=0;w===90?D=-o:w===180?M=-o:w===270?D=o:w===0&&(M=o);let G={x:P.point.x+M,y:P.point.y+D},Z={x:E.point.x+M,y:E.point.y+D},_=new gt(E.point,Z);E.direction=fu[Ks(_)],f.push(P.point,G,Z,E.point)}continue}let[Q,rt]=_h(P,E);P.direction=Q,E.direction=rt,f.push(...Kn(P,E),E.point)}let b=I[I.length-1];if(d.view&&d.view.model.isElement())if(d.view.model.getBBox().inflate(o).containsPoint(b.point)){let[S]=_h(b,d),P=Uh(d.point),[,E]=du(b,d);P.margin=o,P.direction=E,b.direction=S,f.push(...Kn(b,P))}else{let S=hu(f),P=new gt(S[S.length-2],b.point),E=fu[Math.round(Ks(P))];b.direction=E;let j=Kn(b,d),[U,Q]=hu([...j,d.point]),rt=new gt(U,Q),p=Math.round(Ks(rt)),v=fu[p];v!==E&&E===ko[v]&&(b.margin=o,j=Kn(b,d)),f.push(...j)}else{let[S]=_h(b,d);b.direction=S,f.push(...Kn(b,d))}return hu(f)}function _h(t,e){let r=t.direction,n=ax.includes(r),i=t.direction,o=e.direction;if(n){let s=t.point.y>e.point.y,a=e.point.x-t.point.x;r===ct.BOTTOM?(i=s?ko[r]:a>=0?ct.RIGHT:ct.LEFT,a>0?o=s?ct.LEFT:ct.TOP:a<0&&(o=s?ct.RIGHT:ct.TOP)):(i=s?a>=0?ct.RIGHT:ct.LEFT:ko[r],a>0?o=s?ct.BOTTOM:ct.LEFT:a<0&&(o=s?ct.BOTTOM:ct.RIGHT))}else{let s=t.point.x>e.point.x,a=e.point.y-t.point.y;r===ct.RIGHT?(i=s?ko[r]:a>=0?ct.BOTTOM:ct.TOP,a>0?o=s?ct.TOP:ct.LEFT:a<0&&(o=s?ct.BOTTOM:ct.LEFT)):(i=s?a>=0?ct.BOTTOM:ct.TOP:ko[r],a>0?o=s?ct.RIGHT:ct.TOP:a<0&&(o=s?ct.RIGHT:ct.BOTTOM))}return[i,o]}r0.Directions=ct;var dx=r0;var vu={};Ae(vu,{curve:()=>Jh,jumpover:()=>Mx,normal:()=>Tx,rounded:()=>Dx,smooth:()=>Lx,straight:()=>qs});var Eo={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},gx=Object.values(Eo),px=10,mx=1,qs=function(t,e,r=[],n={}){let{cornerType:i=Eo.POINT,cornerRadius:o=px,cornerPreserveAspectRatio:s=!1,precision:a=mx,raw:u=!1}=n;if(gx.indexOf(i)===-1)throw new Error("Invalid `cornerType` provided to `straight` connector.");let h;if(i===Eo.POINT||!o){let d=[t].concat(r).concat([e]),f=new qt(d);h=new yt(f)}else{h=new yt,h.appendSegment(yt.createSegment("M",t));let d,f=r.length;for(let I=0;I<f;I++){let A=new z(r[I]),b=r[I-1]||t,S=r[I+1]||e,P=d||A.distance(b)/2;d=A.distance(S)/2;let E,j;s?E=j=-Math.min(o,P,d):(E=-Math.min(o,P),j=-Math.min(o,d));let U=A.clone().move(b,E).round(a),Q=A.clone().move(S,j).round(a);switch(h.appendSegment(yt.createSegment("L",U)),i){case Eo.CUBIC:{let rt=.3333333333333333,p=2/3,v=new z(rt*U.x+p*A.x,p*A.y+rt*U.y),w=new z(rt*Q.x+p*A.x,p*A.y+rt*Q.y);h.appendSegment(yt.createSegment("C",v,w,Q));break}case Eo.LINE:{h.appendSegment(yt.createSegment("L",Q));break}case Eo.GAP:{h.appendSegment(yt.createSegment("M",Q));break}}}h.appendSegment(yt.createSegment("L",e))}return u?h:h.serialize()};var vx=5,n0=["arc","gap","cubic"],Ix=0,i0=1,Ax=["smooth"],pu=1/3,mu=2/3;function o0(t,e){let{x:r,y:n}=t,{x:i,y:o}=e;if(r>i){let s=r;r=i,i=s,s=n,n=o,o=s}if(n>o){let s=r;r=i,i=s,s=n,n=o,o=s}return[new z(r,n),new z(i,o)]}function yx(t,e){let[{x:r,y:n},{x:i,y:o}]=o0(t.start,t.end),[{x:s,y:a},{x:u,y:h}]=o0(e.start,e.end),d=r<=u&&s<=i,f=n<=h&&a<=o;return d&&f}function Xh(t,e,r){var n=[].concat(t,r,e);return n.reduce(function(i,o,s){var a=n[s+1];return a!=null&&(i[s]=vn(o,a)),i},[])}function Cx(t){var e=t.paper,r=e._jumpOverUpdateList;if(r==null){r=e._jumpOverUpdateList=[];var n=e.model;n.on("batch:stop",function(){this.hasActiveBatch()||xx(e)}),n.on("reset",function(){r=e._jumpOverUpdateList=[]})}r.indexOf(t)<0&&(r.push(t),t.listenToOnce(t.model,"change:connector remove",function(){r.splice(r.indexOf(t),1)}))}function xx(t){for(var e=t._jumpOverUpdateList,r=0;r<e.length;r++){let n=e[r],i=n.getFlag(n.constructor.Flags.CONNECTOR);n.requestUpdate(i)}}function wx(t,e){return Dt(e).reduce(function(r,n){var i=t.intersection(n);return i&&r.push(i),r},[])}function s0(t,e){return vn(t,e).squaredLength()}function bx(t,e,r){return e.reduce(function(n,i,o){if(i.skip===!0)return n;var s=n.pop()||t,a=ji(i).move(s.start,-r),u=ji(i).move(s.start,+r),h=e[o+1];if(h!=null){var d=u.distance(h);d<=r&&(u=h.move(s.start,d),h.skip=!0)}else{var f=a.distance(s.end);if(f<r*2+i0)return n.push(s),n}var I=u.distance(s.start);if(I<r*2+i0)return n.push(s),n;var A=vn(a,u);return A.isJump=!0,n.push(vn(s.start,a),A,vn(u,s.end)),n},[])}function a0(t,e,r,n){var i=new yt,o;return o=yt.createSegment("M",t[0].start),i.appendSegment(o),Dt(t).forEach(function(s,a){if(s.isJump){var u,h,d,f;if(r==="arc"){u=-90,h=s.start.difference(s.end);var I=+(h.x<0||h.x===0&&h.y<0);I&&(u+=180);var A=s.midpoint(),b=new gt(A,s.end).rotate(A,u),S;S=new gt(s.start,A),d=S.pointAt(2/3).rotate(s.start,u),f=b.pointAt(1/3).rotate(b.end,-u),o=yt.createSegment("C",d,f,b.end),i.appendSegment(o),S=new gt(A,s.end),d=b.pointAt(1/3).rotate(b.end,u),f=S.pointAt(1/3).rotate(s.end,-u),o=yt.createSegment("C",d,f,s.end),i.appendSegment(o)}else if(r==="gap")o=yt.createSegment("M",s.end),i.appendSegment(o);else if(r==="cubic"){u=s.start.theta(s.end);var P=e*.6,E=e*1.35;h=s.start.difference(s.end),I=+(h.x<0||h.x===0&&h.y<0),I&&(E*=-1),d=z(s.start.x+P,s.start.y+E).rotate(s.start,u),f=z(s.end.x-P,s.end.y+E).rotate(s.end,u),o=yt.createSegment("C",d,f,s.end),i.appendSegment(o)}}else{var j=t[a+1];n==0||!j||j.isJump?(o=yt.createSegment("L",s.end),i.appendSegment(o)):Nx(n,i,s.end,s.start,j.end)}}),i}function Nx(t,e,r,n,i){var o=r.distance(n)/2,s=r.distance(i)/2,a=-Math.min(t,o),u=-Math.min(t,s),h=r.clone().move(n,a).round(),d=r.clone().move(i,u).round(),f=new z(pu*h.x+mu*r.x,mu*r.y+pu*h.y),I=new z(pu*d.x+mu*r.x,mu*r.y+pu*d.y),A;A=yt.createSegment("L",h),e.appendSegment(A),A=yt.createSegment("C",f,I,d),e.appendSegment(A)}var Mx=function(t,e,r,n){Cx(this);var i=n.raw,o=n.size||vx,s=n.jump&&(""+n.jump).toLowerCase(),a=n.radius||Ix,u=n.ignoreConnectors||Ax;n0.indexOf(s)===-1&&(s=n0[0]);var h=this.paper,d=h.model,f=d.getLinks();if(f.length===1)return a0(Xh(t,e,r),o,s,a);var I=this.model,A=f.indexOf(I),b=h.options.defaultConnector||{},S=f.filter(function(rt,p){var v=rt.get("connector")||b;return Dt(u).includes(v.name)?!1:p>A?v.name!=="jumpover":!0}),P=S.map(function(rt){return h.findViewByModel(rt)}),E=Xh(t,e,r),j=P.map(function(rt){return rt==null?[]:rt===this?E:Xh(rt.sourcePoint,rt.targetPoint,rt.route)},this),U=E.reduce(function(rt,p){var v=S.reduce(function(w,M,D){if(M!==I){let G=j[D].slice(),Z=G.findIndex(at=>yx(p,at));Z>-1&&p.containsPoint(G[Z].end)&&G.splice(Z+1,1);let _=wx(p,G);w.push.apply(w,_)}return w},[]).sort(function(w,M){return s0(p.start,w)-s0(p.start,M)});return v.length>0?rt.push.apply(rt,bx(p,v,o)):rt.push(p),rt},[]),Q=a0(U,o,s,a);return i?Q:Q.serialize()};var Tx=function(t,e,r=[],n={}){let{raw:i}=n;return qs(t,e,r,{cornerType:"point",raw:i})};var Sx=10,Px=0,Dx=function(t,e,r=[],n={}){let{radius:i=Sx,raw:o}=n;return qs(t,e,r,{cornerType:"cubic",cornerRadius:i,precision:Px,raw:o})};var Lx=function(t,e,r,n){var i=n&&n.raw,o;if(r&&r.length!==0){var s=[t].concat(r).concat([e]),a=$t.throughPoints(s);o=new yt(a)}else{o=new yt;var u;if(u=yt.createSegment("M",t),o.appendSegment(u),Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)){var h=(t.x+e.x)/2;u=yt.createSegment("C",h,t.y,h,e.y,e.x,e.y),o.appendSegment(u)}else{var d=(t.y+e.y)/2;u=yt.createSegment("C",t.x,d,e.x,d,e.x,e.y),o.appendSegment(u)}}return i?o:o.serialize()};var Vr={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},xr={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Jh=function(t,e,r=[],n={},i){let o=!!n.raw,{direction:s=Vr.AUTO,precision:a=3}=n,u={coeff:n.distanceCoefficient||.6,angleTangentCoefficient:n.angleTangentCoefficient||80,tau:n.tension||.5,sourceTangent:n.sourceTangent?new z(n.sourceTangent):null,targetTangent:n.targetTangent?new z(n.targetTangent):null,rotate:!!n.rotate};typeof n.sourceDirection=="string"?u.sourceDirection=n.sourceDirection:typeof n.sourceDirection=="number"?u.sourceDirection=new z(1,0).rotate(null,n.sourceDirection):u.sourceDirection=n.sourceDirection?new z(n.sourceDirection).normalize():null,typeof n.targetDirection=="string"?u.targetDirection=n.targetDirection:typeof n.targetDirection=="number"?u.targetDirection=new z(1,0).rotate(null,n.targetDirection):u.targetDirection=n.targetDirection?new z(n.targetDirection).normalize():null;let h=[t,...r,e].map(S=>new z(S)),d;if(u.sourceTangent)d=u.sourceTangent;else{let S=Bx(i,h,s,u),P=h[0].distance(h[1])*u.coeff,E=h[1].difference(h[0]).normalize(),j=Hh(S,E);if(j>Math.PI/4){let U=P+(j-Math.PI/4)*u.angleTangentCoefficient;d=S.clone().scale(U,U)}else d=S.clone().scale(P,P)}let f;if(u.targetTangent)f=u.targetTangent;else{let S=Rx(i,h,s,u),P=h.length-1,E=h[P-1].distance(h[P])*u.coeff,j=h[P-1].difference(h[P]).normalize(),U=Hh(S,j);if(U>Math.PI/4){let Q=E+(U-Math.PI/4)*u.angleTangentCoefficient;f=S.clone().scale(Q,Q)}else f=S.clone().scale(E,E)}let A=Zx(h,d,f,u).map(S=>jx(S,u)),b=new yt(A).round(a);return o?b:b.serialize()};Jh.Directions=Vr;Jh.TangentDirections=xr;function kx(t,e,r){let{sourceBBox:n}=t,i,o;if(!t.sourceView)n.x>e[1].x?i="right":i="left";else if(o=t.sourceView.model.angle(),r.rotate&&o){let a=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),u=e[0].clone();u.rotate(n.center(),o),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(e[0]);let s;switch(i){case"left":s=new z(-1,0);break;case"right":default:s=new z(1,0);break}return r.rotate&&o&&s.rotate(null,-o),s}function Ex(t,e,r){let{targetBBox:n}=t,i,o;if(!t.targetView)n.x>e[e.length-2].x?i="left":i="right";else if(o=t.targetView.model.angle(),r.rotate&&o){let a=t.targetView.getNodeUnrotatedBBox(t.targetView.el),u=e[e.length-1].clone();u.rotate(n.center(),o),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(e[e.length-1]);let s;switch(i){case"left":s=new z(-1,0);break;case"right":default:s=new z(1,0);break}return r.rotate&&o&&s.rotate(null,-o),s}function zx(t,e,r){let{sourceBBox:n}=t,i,o;if(!t.sourceView)n.y>e[1].y?i="bottom":i="top";else if(o=t.sourceView.model.angle(),r.rotate&&o){let a=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),u=e[0].clone();u.rotate(n.center(),o),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(e[0]);let s;switch(i){case"top":s=new z(0,-1);break;case"bottom":default:s=new z(0,1);break}return r.rotate&&o&&s.rotate(null,-o),s}function Ox(t,e,r){let{targetBBox:n}=t,i,o;if(!t.targetView)n.y>e[e.length-2].y?i="top":i="bottom";else if(o=t.targetView.model.angle(),r.rotate&&o){let a=t.targetView.getNodeUnrotatedBBox(t.targetView.el),u=e[e.length-1].clone();u.rotate(n.center(),o),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(e[e.length-1]);let s;switch(i){case"top":s=new z(0,-1);break;case"bottom":default:s=new z(0,1);break}return r.rotate&&o&&s.rotate(null,-o),s}function l0(t,e,r){let{sourceBBox:n}=t,i,o;if(!t.sourceView)i=n.sideNearestToPoint(e[1]);else if(o=t.sourceView.model.angle(),r.rotate&&o){let a=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),u=e[0].clone();u.rotate(n.center(),o),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(e[0]);let s;switch(i){case"top":s=new z(0,-1);break;case"bottom":s=new z(0,1);break;case"right":s=new z(1,0);break;case"left":s=new z(-1,0);break}return r.rotate&&o&&s.rotate(null,-o),s}function u0(t,e,r){let{targetBBox:n}=t,i,o;if(!t.targetView)i=n.sideNearestToPoint(e[e.length-2]);else if(o=t.targetView.model.angle(),r.rotate&&o){let a=t.targetView.getNodeUnrotatedBBox(t.targetView.el),u=e[e.length-1].clone();u.rotate(n.center(),o),i=a.sideNearestToPoint(u)}else i=n.sideNearestToPoint(e[e.length-1]);let s;switch(i){case"top":s=new z(0,-1);break;case"bottom":s=new z(0,1);break;case"right":s=new z(1,0);break;case"left":s=new z(-1,0);break}return r.rotate&&o&&s.rotate(null,-o),s}function c0(t,e,r){return e[1].difference(e[0]).normalize()}function f0(t,e,r){let n=e.length-1;return e[n-1].difference(e[n]).normalize()}function h0(t,e,r){let{sourceBBox:n}=t,i=n.center();return e[0].difference(i).normalize()}function d0(t,e,r){let{targetBBox:n}=t,i=n.center();return e[e.length-1].difference(i).normalize()}function Bx(t,e,r,n){if(n.sourceDirection)switch(n.sourceDirection){case xr.UP:return new z(0,-1);case xr.DOWN:return new z(0,1);case xr.LEFT:return new z(-1,0);case xr.RIGHT:return new z(1,0);case xr.AUTO:return l0(t,e,n);case xr.CLOSEST_POINT:return c0(t,e,n);case xr.OUTWARDS:return h0(t,e,n);default:return n.sourceDirection}switch(r){case Vr.HORIZONTAL:return kx(t,e,n);case Vr.VERTICAL:return zx(t,e,n);case Vr.CLOSEST_POINT:return c0(t,e,n);case Vr.OUTWARDS:return h0(t,e,n);case Vr.AUTO:default:return l0(t,e,n)}}function Rx(t,e,r,n){if(n.targetDirection)switch(n.targetDirection){case xr.UP:return new z(0,-1);case xr.DOWN:return new z(0,1);case xr.LEFT:return new z(-1,0);case xr.RIGHT:return new z(1,0);case xr.AUTO:return u0(t,e,n);case xr.CLOSEST_POINT:return f0(t,e,n);case xr.OUTWARDS:return d0(t,e,n);default:return n.targetDirection}switch(r){case Vr.HORIZONTAL:return Ex(t,e,n);case Vr.VERTICAL:return Ox(t,e,n);case Vr.CLOSEST_POINT:return f0(t,e,n);case Vr.OUTWARDS:return d0(t,e,n);case Vr.AUTO:default:return u0(t,e,n)}}function Gx(t,e){let r=Math.cos(e),n=Math.sin(e),i=r*t.x-n*t.y,o=n*t.x+r*t.y;t.x=i,t.y=o}function Hh(t,e){let r=t.dot(e)/(t.magnitude()*e.magnitude());return r<-1&&(r=-1),r>1&&(r=1),Math.acos(r)}function g0(t,e){return t.x*e.y-t.y*e.x}function Zx(t,e,r,n){let{tau:i,coeff:o}=n,s=[],a=[],u=[],h=t.length-1;for(let d=0;d<h;d++)s[d]=t[d].distance(t[d+1]);a[0]=e,a[h]=r;for(let d=1;d<h;d++){let f,I;d===1?f=t[d-1].clone().offset(a[d-1].x,a[d-1].y):f=t[d-1].clone(),d===h-1?I=t[d+1].clone().offset(a[d+1].x,a[d+1].y):I=t[d+1].clone();let A=f.difference(t[d]).normalize(),b=I.difference(t[d]).normalize(),S=Hh(A,b),P=(Math.PI-S)/2,E,j=g0(A,b),U;U=g0(t[d].difference(t[d+1]),t[d].difference(t[d-1])),j<0&&(P=-P),S<Math.PI/2&&(P<0&&U<0||P>0&&U>0)&&(P=P-Math.PI),E=b.clone(),Gx(E,P);let Q=E.clone(),rt=E.clone(),p=s[d-1]*o,v=s[d]*o;Q.scale(p,p),rt.scale(v,v),a[d]=[Q,rt]}for(let d=0;d<h;d++){let f,I;d===0?f=t[d+1].difference(a[d].x/i,a[d].y/i):f=t[d+1].difference(a[d][1].x/i,a[d][1].y/i),d===h-1?I=t[d].clone().offset(a[d+1].x/i,a[d+1].y/i):I=t[d].difference(a[d+1][0].x/i,a[d+1][0].y/i),u[d]=[f,t[d],t[d+1],I]}return u}function jx(t,e){let{tau:r}=e,n=new z;n.x=t[1].x+(t[2].x-t[0].x)/(6*r),n.y=t[1].y+(t[2].y-t[0].y)/(6*r);let i=new z;return i.x=t[2].x+(t[3].x-t[1].x)/(6*r),i.y=t[2].y+(t[3].y-t[1].y)/(6*r),new $t(t[1],n,i,t[2])}var zo=Qr(wn(),1),zt={TOOLS:Wt.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},Pi=Wt.extend({className:function(){var t=Wt.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){Wt.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[zt.RENDER],attrs:[zt.UPDATE],router:[zt.UPDATE],connector:[zt.CONNECTOR],smooth:[zt.UPDATE],manhattan:[zt.UPDATE],toolMarkup:[zt.LEGACY_TOOLS],labels:[zt.LABELS],labelMarkup:[zt.LABELS],vertices:[zt.VERTICES,zt.UPDATE],vertexMarkup:[zt.VERTICES],source:[zt.SOURCE,zt.UPDATE],target:[zt.TARGET,zt.UPDATE]},initFlag:[zt.RENDER,zt.SOURCE,zt.TARGET,zt.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(t,e){if(e||(e={}),this.hasFlag(t,zt.SOURCE)){if(!this.updateEndProperties("source"))return t;t=this.removeFlag(t,zt.SOURCE)}if(this.hasFlag(t,zt.TARGET)){if(!this.updateEndProperties("target"))return t;t=this.removeFlag(t,zt.TARGET)}let{paper:r,sourceView:n,targetView:i}=this;if(r&&(n&&!r.isViewMounted(n)||i&&!r.isViewMounted(i)))return t;if(this.hasFlag(t,zt.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(e),t=this.removeFlag(t,[zt.RENDER,zt.UPDATE,zt.VERTICES,zt.LABELS,zt.TOOLS,zt.LEGACY_TOOLS,zt.CONNECTOR]),t;let o=!1;this.hasFlag(t,zt.VERTICES)&&(this.renderVertexMarkers(),t=this.removeFlag(t,zt.VERTICES));let{model:s}=this,{attributes:a}=s,u=this.hasFlag(t,zt.LABELS),h=this.hasFlag(t,zt.LEGACY_TOOLS);u&&(this.onLabelsChange(s,a.labels,e),t=this.removeFlag(t,zt.LABELS),o=!0),h&&(this.renderTools(),t=this.removeFlag(t,zt.LEGACY_TOOLS));let d=this.hasFlag(t,zt.UPDATE),f=this.hasFlag(t,zt.CONNECTOR);return(d||f)&&(d?e.translateBy&&s.isRelationshipEmbeddedIn(e.translateBy)?this.translate(e.tx,e.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(e),t=this.removeFlag(t,[zt.UPDATE,zt.TOOLS,zt.CONNECTOR]),u=!1,h=!1,o=!0),u&&this.updateLabelPositions(),h&&this.updateToolsPosition(),o&&this.updateHighlighters(),this.hasFlag(t,zt.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,zt.TOOLS)),t},requestConnectionUpdate:function(t){this.requestUpdate(this.getFlag(zt.UPDATE),t)},isLabelsRenderRequired:function(t={}){let e=this.model.previous("labels");if(!e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var r=t.propertyPathArray||[],n=r.length;if(n>1){var i=!!e[r[1]];if(i){if(n===2)return"markup"in Object(t.propertyValue);if(r[2]!=="markup")return!1}}}return!0},onLabelsChange:function(t,e,r){this.isLabelsRenderRequired(r)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.LinkView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if(typeof e=="string")return this.renderStringMarkup(e);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el);this.selectors=e.selectors,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=X(t);Array.isArray(e)||(e=[e]);for(var r=this._V,n=0,i=e.length;n<i;n++){var o=e[n],s=o.attr("class");s&&(s=xh(s),r[zo.default.camelCase(s)]=o)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(e)},_getLabelMarkup:function(t){if(t){if(Array.isArray(t))return this.parseDOMJSON(t,null);if(typeof t=="string")return this._getLabelStringMarkup(t);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(t){var e=X(t),r=document.createDocumentFragment();if(!Array.isArray(e))r.appendChild(e.node);else for(var n=0,i=e.length;n<i;n++){var o=e[n].node;r.appendChild(o)}return{fragment:r,selectors:{}}},_normalizeLabelMarkup:function(t){if(t){var e=t.fragment;if(!(t.fragment instanceof DocumentFragment)||!t.fragment.hasChildNodes())throw new Error("dia.LinkView: invalid label markup.");var r,n=e.childNodes;return n.length>1||n[0].nodeName.toUpperCase()!=="G"?r=X("g").append(e):r=X(n[0]),r.addClass("label"),{node:r.node,selectors:t.selectors}}},renderLabels:function(){var t=this._V,e=t.labels,r=this._labelCache={},n=this._labelSelectors={},i=this.model,o=i.attributes.labels||[],s=o.length;if(s===0)return e&&e.remove(),this;e?e.empty():(e=t.labels=X("g").addClass("labels"),this.options.labelsLayer&&(e.addClass(Ue(ue(this,"className"))),e.attr("model-id",i.id)));for(var a=0;a<s;a++){var u=o[a],h=this._normalizeLabelMarkup(this._getLabelMarkup(u.markup)),d,f;if(h)d=h.node,f=h.selectors;else{var I=i._builtins.defaultLabel,A=this._normalizeLabelMarkup(this._getLabelMarkup(I.markup)),b=i._getDefaultLabel(),S=this._normalizeLabelMarkup(this._getLabelMarkup(b.markup)),P=S||A;d=P.node,f=P.selectors}d.setAttribute("label-idx",a),e.append(d),r[a]=d;var E=this.selector;if(f[E])throw new Error("dia.LinkView: ambiguous label root selector.");f[E]=d,n[a]=f}return e.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){let{el:t,paper:e,model:r,_V:n,options:i}=this,{labels:o}=n;if(!o||!r.hasLabels())return;let{node:s}=o;i.labelsLayer?e.getLayerView(i.labelsLayer).insertSortedNode(s,r.get("z")):s.parentNode!==t&&t.appendChild(s)},unmountLabels:function(){let{options:t,_V:e}=this;if(!e)return;let{labels:r}=e;r&&t.labelsLayer&&r.remove()},findLabelNode:function(t,e){let r=this._labelCache[t];if(!r)return null;let n=this._labelSelectors[t],[i=null]=this.findBySelector(e,r,n);return i},_mergeLabelAttrs:function(t,e,r,n){return e===null?null:e===void 0?r===null?null:r===void 0?t?void 0:n:t?r:Ie({},n,r):t?Ie({},r,e):Ie({},n,r,e)},_mergeLabelSize:function(t,e){return t===null?null:t===void 0?e===null?null:e===void 0?void 0:e:Ie({},e,t)},updateLabels:function(){if(!this._V.labels)return this;for(var t=this.model,e=t.get("labels")||[],r=this.can("labelMove"),n=t._builtins.defaultLabel,i=n.attrs,o=t._getDefaultLabel(),s=o.markup,a=o.attrs,u=o.size,h=0,d=e.length;h<d;h++){var f=this._labelCache[h];f.setAttribute("cursor",r?"move":"default");var I=this._labelSelectors[h],A=e[h],b=A.markup,S=A.attrs,P=A.size,E=this._mergeLabelAttrs(b||s,S,a,i),j=this._mergeLabelSize(P,u);this.updateDOMSubtreeAttributes(f,E,{rootBBox:new ft(j),selectors:I})}return this},renderTools:function(){if(!this._V.linkTools)return this;var t=(0,zo.default)(this._V.linkTools.node).empty(),e=ir(this.model.get("toolMarkup")||this.model.toolMarkup),r=X(e());if(t.append(r.node),this._toolCache=r,this.options.doubleLinkTools){var n;this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(e=ir(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),n=X(e())):n=r.clone(),t.append(n.node),this._tool2Cache=n}return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=(0,zo.default)(this._V.markerVertices.node).empty(),e=ir(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(r,n){t.append(X(e(At({idx:n},r))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=(0,zo.default)(this._V.markerArrowheads.node);t.empty();var e=ir(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=X(e({end:"source"})),this._V.targetArrowhead=X(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(t){let r=this.model,n=r.vertices(),i=[this.sourceAnchor,...n,this.targetAnchor],o=i.length,s=new qt(i);s.simplify({threshold:.001});let a=s.points.map(h=>h.toJSON()),u=a.length;return o===u?0:(r.vertices(a.slice(1,u-1),t),o-u)},updateDefaultConnectionPath:function(){var t=this._V;t.connection&&t.connection.attr("d",this.getSerializedConnection()),t.connectionWrap&&t.connectionWrap.attr("d",this.getSerializedConnection()),t.markerSource&&t.markerTarget&&this._translateAndAutoOrientArrows(t.markerSource,t.markerTarget)},getEndView:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(t){switch(t){case"source":return new z(this.sourceAnchor);case"target":return new z(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(t){switch(t){case"source":return new z(this.sourcePoint);case"target":return new z(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(t){switch(t){case"source":var e=this.sourceView;if(!e)break;return this.sourceMagnet||e.el;case"target":var r=this.targetView;if(!r)break;return this.targetMagnet||r.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(t=0,e=0){let{route:r,path:n}=this;if(!r||!n)return;let i=new qt(r);i.translate(t,e),this.route=i.points,this._translateConnectionPoints(t,e),n.translate(t,e),this.updateDOM()},updateDOM(){let{el:t,model:e,selectors:r}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(t,e.attr(),{selectors:r}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){let{model:t}=this,e=t.vertices(),r=this.findAnchors(e),n=this.sourceAnchor=r.source,i=this.targetAnchor=r.target,o=this.findRoute(e);this.route=o;var s=this.findConnectionPoints(o,n,i);this.sourcePoint=s.source,this.targetPoint=s.target},updatePath:function(){let{route:t,sourcePoint:e,targetPoint:r}=this,n=this.findMarkerPoints(t,e,r),i=this.findPath(t,n.source||e,n.target||r);this.path=i},findMarkerPoints:function(t,e,r){var n=t[0],i=t[t.length-1],o=this._markerCache,s,a;return this._V.markerSource&&(o.sourceBBox=o.sourceBBox||this._V.markerSource.getBBox(),s=z(e).move(n||r,o.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(o.targetBBox=o.targetBBox||this._V.markerTarget.getBBox(),a=z(r).move(i||e,o.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),o.sourcePoint=s||e.clone(),o.targetPoint=a||r.clone(),{source:s,target:a}},findAnchorsOrdered:function(t,e,r,n){var i,o,s,a,u=this.model,h=u.get(t),d=u.get(r),f=this.getEndView(t),I=this.getEndView(r),A=this.getEndMagnet(t),b=this.getEndMagnet(r);f?(e?s=new z(e):I?s=b:s=new z(d),i=this.getAnchor(h.anchor,f,A,s,t)):i=new z(h),I?(a=new z(n||i),o=this.getAnchor(d.anchor,I,b,a,r)):o=new z(d);var S={};return S[t]=i,S[r]=o,S},findAnchors:function(t){var e=this.model,r=t[0],n=t[t.length-1];return e.target().priority&&!e.source().priority?this.findAnchorsOrdered("target",n,"source",r):this.findAnchorsOrdered("source",r,"target",n)},findConnectionPoints:function(t,e,r){var n=t[0],i=t[t.length-1],o=this.model,s=o.get("source"),a=o.get("target"),u=this.sourceView,h=this.targetView,d=this.paper.options,f,I,A;if(u&&!u.isNodeConnection(this.sourceMagnet)){f=this.sourceMagnet||u.el;var b=s.connectionPoint||d.defaultConnectionPoint,S=n||r,P=new gt(S,e);A=this.getConnectionPoint(b,u,f,P,"source")}else A=e;var E;if(h&&!h.isNodeConnection(this.targetMagnet)){I=this.targetMagnet||h.el;var j=a.connectionPoint||d.defaultConnectionPoint,U=i||e,Q=new gt(U,r);E=this.getConnectionPoint(j,h,I,Q,"target")}else E=r;return{source:A,target:E}},getAnchor:function(t,e,r,n,i){var o=e.isNodeConnection(r),s=this.paper.options;if(t||(o?t=s.defaultLinkAnchor:s.perpendicularLinks||this.options.perpendicular?t={name:"perpendicular"}:t=s.defaultAnchor),!t)throw new Error("Anchor required.");var a;if(typeof t=="function")a=t;else{var u=t.name,h=o?"linkAnchorNamespace":"anchorNamespace";if(a=s[h][u],typeof a!="function")throw new Error("Unknown anchor: "+u)}var d=a.call(this,e,r,n,t.args||{},i,this);return d?d.round(this.decimalsRounding):new z},getConnectionPoint:function(t,e,r,n,i){var o,s=n.end,a=this.paper.options;if(typeof a.linkConnectionPoint=="function"){var u=r===e.el?void 0:r;if(o=a.linkConnectionPoint(this,e,u,n.start,i),o)return o}if(!t)return s;var h;if(typeof t=="function")h=t;else{var d=t.name;if(h=a.connectionPointNamespace[d],typeof h!="function")throw new Error("Unknown connection point: "+d)}return o=h.call(this,n,e,r,t.args||{},i,this),o?o.round(this.decimalsRounding):s},_translateConnectionPoints:function(t,e){var r=this._markerCache;r.sourcePoint.offset(t,e),r.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e),this.sourceAnchor.offset(t,e),this.targetAnchor.offset(t,e)},_getDefaultLabelPositionProperty:function(){var t=this.model,e=t._builtins.defaultLabel,r=e.position,n=t._getDefaultLabel(),i=this._normalizeLabelPosition(n.position);return Ie({},r,i)},_normalizeLabelPosition:function(t){return typeof t=="number"?{distance:t,offset:null,angle:0,args:null}:t},_mergeLabelPositionProperty:function(t,e){return t===null?null:t===void 0?e===null?null:e:Ie({},e,t)},updateLabelPositions:function(){if(!this._V.labels)return this;var t=this.path;if(!t)return this;var e=this.model,r=e.get("labels")||[];if(!r.length)return this;for(var n=this._getDefaultLabelPositionProperty(),i=0,o=r.length;i<o;i++){var s=this._labelCache[i];if(s){var a=r[i],u=this._normalizeLabelPosition(a.position),h=this._mergeLabelPositionProperty(u,n),d=this._getLabelTransformationMatrix(h);s.setAttribute("transform",X.matrixToTransformString(d)),this._cleanLabelMatrices(i)}}return this},_cleanLabelMatrices:function(t){let{metrics:e,_labelSelectors:r}=this,n=r[t];if(n)for(let i in n){let{id:o}=n[i];o&&o in e&&delete e[o].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,r=this.getConnectionLength();if(!Number.isNaN(r)){r<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var n=this.getPointAtLength(e);if(this._toolCache.attr("transform","translate("+n.x+", "+n.y+") "+t),this.options.doubleLinkTools&&r>=this.options.longLinkLength){var i=this.options.doubleLinkToolsOffset||e;n=this.getPointAtLength(r-i),this._tool2Cache.attr("transform","translate("+n.x+", "+n.y+") "+t),this._tool2Cache.attr("display","inline")}else this.options.doubleLinkTools&&this._tool2Cache.attr("display","none")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if(zo.default.css(this._V.markerArrowheads.node,"display")==="none")return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(t){let{model:e,paper:r}=this,n=`${t}View`,i=e.get(t),o=i&&i.id;if(!o)return this[n]=null,this.updateEndMagnet(t),!0;let s=r.getModelById(o);if(!s)throw new Error("LinkView: invalid "+t+" cell.");let a=s.findView(r);return a?(this[n]=a,this.updateEndMagnet(t),!0):!1},updateEndMagnet:function(t){let e=`${t}Magnet`,r=this.getEndView(t);if(r){let n=r.getMagnetFromLinkEnd(this.model.get(t));n===r.el&&(n=null),this[e]=n}else this[e]=null},_translateAndAutoOrientArrows:function(t,e){var r=Dt(this.route);t&&t.translateAndAutoOrient(this.sourcePoint,r[0]||this.targetPoint,this.paper.cells),e&&e.translateAndAutoOrient(this.targetPoint,r[r.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionProperty:function(t){return this.model.label(t).position||{}},_getLabelPositionAngle:function(t){var e=this._getLabelPositionProperty(t);return e.angle||0},_getLabelPositionArgs:function(t){var e=this._getLabelPositionProperty(t);return e.args},_getDefaultLabelPositionArgs:function(){var t=this.model._getDefaultLabel(),e=t.position||{};return e.args},_mergeLabelPositionArgs:function(t,e){return t===null?null:t===void 0?e===null?null:e:Ie({},e,t)},addLabel:function(t,e,r,n){var i,o,s=0,a;typeof t!="number"?(i=t.x,o=t.y,typeof e=="number"?(s=e,a=r):a=e):(i=t,o=e,typeof r=="number"?(s=r,a=n):a=r);var u=this._getDefaultLabelPositionArgs(),h=a,d=this._mergeLabelPositionArgs(h,u),f={position:this.getLabelPosition(i,o,s,d)},I=-1;return this.model.insertLabel(I,f,a),I},addVertex:function(t,e,r){var n=typeof t!="number",i=n?t.x:t,o=n?t.y:e,s=n?e:r,a={x:i,y:o},u=this.getVertexIndex(i,o);return this.model.insertVertex(u,a,s),u},sendToken:function(t,e,r){function n(f,I){return function(){f.remove(),typeof I=="function"&&I()}}var i,o,s;Gt(e)?(i=e.duration,o=e.direction==="reverse",s=e.connection):(i=e,o=!1,s=null),i=i||1e3;var a={dur:i+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};o&&(a.keyPoints="1;0",a.keyTimes="0;1");var u=X(t),h;if(typeof s=="string")h=this.findBySelector(s,this.el,this.selectors)[0];else{var d=this._V;h=d.connection?d.connection.node:this.el.querySelector("path")}if(!(h instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");u.appendTo(this.paper.cells).animateAlongPath(a,h),setTimeout(n(u,r),i)},findRoute:function(t){t||(t=[]);var e=this.paper.options.routerNamespace||gu,r=this.model.router(),n=this.paper.options.defaultRouter;if(!r)if(n)r=n;else return t.map(z);var i=Vt(r)?r:e[r.name];if(!Vt(i))throw new Error('dia.LinkView: unknown router: "'+r.name+'".');var o=r.args||{},s=i.call(this,t,o,this);return s||t.map(z)},findPath:function(t,e,r){var n=this.paper.options.connectorNamespace||vu,i=this.model.connector(),o=this.paper.options.defaultConnector;i||(i=o||{});var s=Vt(i)?i:n[i.name];if(!Vt(s))throw new Error('dia.LinkView: unknown connector: "'+i.name+'".');var a=rr(i.args||{});a.raw=!0;var u=s.call(this,e,r,t,a,this);return typeof u=="string"&&(u=new yt(X.normalizePathData(u))),u},getConnection:function(){var t=this.path;return t?t.clone():null},getSerializedConnection:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("data"))return e.data;var r=t.serialize();return e.data=r,r},getConnectionSubdivisions:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("segmentSubdivisions"))return e.segmentSubdivisions;var r=t.getSegmentSubdivisions();return e.segmentSubdivisions=r,r},getConnectionLength:function(){var t=this.path;if(!t)return 0;var e=this.metrics;if(e.hasOwnProperty("length"))return e.length;var r=t.length({segmentSubdivisions:this.getConnectionSubdivisions()});return e.length=r,r},getPointAtLength:function(t){var e=this.path;return e?e.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(t){var e=this.path;return e?(ye(t)&&(t=parseFloat(t)/100),e.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(t){var e=this.path;return e?e.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(t){var e=this.path;return e?e.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(t){var e=this.path;return e?e.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(t){var e=this.path;return e?e.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(t){var e=this.path;return e?e.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(t,e,r,n){var i={},o=0,s;typeof r=="number"?(o=r,s=n):s=r,s&&(i.args=s);var a=!(s&&s.absoluteDistance),u=s&&s.absoluteDistance&&s.reverseDistance,h=s&&s.absoluteOffset,d=this.path,f={segmentSubdivisions:this.getConnectionSubdivisions()},I=new z(t,e),A=d.closestPointT(I,f),b=d.lengthAtT(A,f);a&&(b=b/this.getConnectionLength()||0),u&&(b=-1*(this.getConnectionLength()-b)||1),i.distance=b;var S;h||(S=d.tangentAtT(A));var P;if(S)P=S.pointOffset(I);else{var E=d.pointAtT(A),j=I.difference(E);P={x:j.x,y:j.y}}return i.offset=P,i.angle=o,i},_getLabelTransformationMatrix:function(t){var e,r=0,n={};if(typeof t=="number")e=t;else if(typeof t.distance=="number")n=t.args||{},e=t.distance,r=t.angle||0;else throw new Error("dia.LinkView: invalid label position distance.");var i=e>0&&e<=1,o=0,s={x:0,y:0};if(t.offset){var a=t.offset;typeof a=="number"&&(o=a),a.x&&(s.x=a.x),a.y&&(s.y=a.y)}var u=s.x!==0||s.y!==0||o===0,h=n.keepGradient,d=n.ensureLegibility,f=this.path,I={segmentSubdivisions:this.getConnectionSubdivisions()},A=i?e*this.getConnectionLength():e,b=f.tangentAtLength(A,I),S,P=r;if(b){if(u)S=b.start.clone(),S.offset(s);else{var E=b.clone();E.rotate(b.start,-90),E.setLength(o),S=E.end}h&&(P=b.angle()+r,d&&(P=We((P+90)%180-90)))}else S=f.start.clone(),u&&S.offset(s);return X.createSVGMatrix().translate(S.x,S.y).rotate(P)},getLabelCoordinates:function(t){var e=this._getLabelTransformationMatrix(t);return new z(e.e,e.f)},getVertexIndex:function(t,e){for(var r=this.model,n=r.vertices(),i=this.getClosestPointLength(new z(t,e)),o=0,s=n.length;o<s;o++){var a=n[o],u=this.getClosestPointLength(a);if(i<u)break}return o},notifyPointerdown(t,e,r){Wt.prototype.pointerdown.call(this,t,e,r),this.notify("link:pointerdown",t,e,r)},notifyPointermove(t,e,r){Wt.prototype.pointermove.call(this,t,e,r),this.notify("link:pointermove",t,e,r)},notifyPointerup(t,e,r){this.notify("link:pointerup",t,e,r),Wt.prototype.pointerup.call(this,t,e,r)},pointerdblclick:function(t,e,r){Wt.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",t,e,r)},pointerclick:function(t,e,r){Wt.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",t,e,r)},contextmenu:function(t,e,r){Wt.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",t,e,r)},pointerdown:function(t,e,r){this.notifyPointerdown(t,e,r);var n=t.target.getAttribute("class");switch(n){case"marker-vertex":this.dragVertexStart(t,e,r);return;case"marker-vertex-remove":case"marker-vertex-remove-area":this.dragVertexRemoveStart(t,e,r);return;case"marker-arrowhead":this.dragArrowheadStart(t,e,r);return;case"connection":case"connection-wrap":this.dragConnectionStart(t,e,r);return;case"marker-source":case"marker-target":return}this.dragStart(t,e,r)},pointermove:function(t,e,r){var n=this._dragData;n&&this.eventData(t,n);var i=this.eventData(t);switch(i.action){case"vertex-move":this.dragVertex(t,e,r);break;case"label-move":this.dragLabel(t,e,r);break;case"arrowhead-move":this.dragArrowhead(t,e,r);break;case"move":this.drag(t,e,r);break}n&&At(n,this.eventData(t)),this.notifyPointermove(t,e,r)},pointerup:function(t,e,r){var n=this._dragData;n&&(this.eventData(t,n),this._dragData=null);var i=this.eventData(t);switch(i.action){case"vertex-move":this.dragVertexEnd(t,e,r);break;case"label-move":this.dragLabelEnd(t,e,r);break;case"arrowhead-move":this.dragArrowheadEnd(t,e,r);break;case"move":this.dragEnd(t,e,r)}this.notifyPointerup(t,e,r),this.checkMouseleave(t)},mouseover:function(t){Wt.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",t)},mouseout:function(t){Wt.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",t)},mouseenter:function(t){Wt.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){Wt.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},mousewheel:function(t,e,r,n){Wt.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",t,e,r,n)},onevent:function(t,e,r,n){var i=X(t.target).findParentByClass("link-tool",this.el);if(i){if(t.stopPropagation(),this.can("useLinkTools"))if(e==="remove"){this.model.remove({ui:!0});return}else this.notify(e,t,r,n);this.notifyPointerdown(t,r,n),this.paper.delegateDragEvents(this,t.data)}else Wt.prototype.onevent.apply(this,arguments)},onlabel:function(t,e,r){this.notifyPointerdown(t,e,r),this.dragLabelStart(t,e,r);var n=this.eventData(t).stopPropagation;n&&t.stopPropagation()},dragConnectionStart:function(t,e,r){if(this.can("vertexAdd")){var n=this.addVertex({x:e,y:r},{ui:!0});this.eventData(t,{action:"vertex-move",vertexIdx:n})}},dragLabelStart:function(t,e,r){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(t))return;var n=t.currentTarget,i=parseInt(n.getAttribute("label-idx"),10),o=this._getDefaultLabelPositionProperty(),s=this._normalizeLabelPosition(this._getLabelPositionProperty(i)),a=this._mergeLabelPositionProperty(s,o),u=this.getLabelCoordinates(a),h=u.x-e,d=u.y-r,f=this._getLabelPositionAngle(i),I=this._getLabelPositionArgs(i),A=this._getDefaultLabelPositionArgs(),b=this._mergeLabelPositionArgs(I,A);this.eventData(t,{action:"label-move",labelIdx:i,dx:h,dy:d,positionAngle:f,positionArgs:b,stopPropagation:!0})}else this.eventData(t,{stopPropagation:!0});this.paper.delegateDragEvents(this,t.data)},dragVertexStart:function(t,e,r){if(this.can("vertexMove")){var n=t.target,i=parseInt(n.getAttribute("idx"),10);this.eventData(t,{action:"vertex-move",vertexIdx:i})}},dragVertexRemoveStart:function(t,e,r){if(this.can("vertexRemove")){var n=t.target,i=parseInt(n.getAttribute("idx"),10);this.model.removeVertex(i)}},dragArrowheadStart:function(t,e,r){if(this.can("arrowheadMove")){var n=t.target,i=n.getAttribute("end"),o=this.startArrowheadMove(i,{ignoreBackwardsCompatibility:!0});this.eventData(t,o)}},dragStart:function(t,e,r){this.isDefaultInteractionPrevented(t)||this.can("linkMove")&&this.eventData(t,{action:"move",dx:e,dy:r})},dragLabel:function(t,e,r){var n=this.eventData(t),i={position:this.getLabelPosition(e+n.dx,r+n.dy,n.positionAngle,n.positionArgs)};this.paper.options.snapLabels&&delete i.position.offset;let o={ui:!0};this.paper.isAsync()&&t.type==="touchmove"&&(o.async=!1),this.model.label(n.labelIdx,i,o)},dragVertex:function(t,e,r){var n=this.eventData(t);this.model.vertex(n.vertexIdx,{x:e,y:r},{ui:!0})},dragArrowhead:function(t,e,r){this.paper.options.snapLinks?!this._snapArrowhead(t,e,r)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(t,e,r):this.paper.options.snapLinksSelf?this._snapArrowheadSelf(t,e,r):this._connectArrowhead(this.getEventTarget(t),e,r,this.eventData(t))},drag:function(t,e,r){var n=this.eventData(t);this.model.translate(e-n.dx,r-n.dy,{ui:!0}),this.eventData(t,{dx:e,dy:r})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(t,e,r){var n=this.eventData(t),i=this.paper;i.options.snapLinks?this._snapArrowheadEnd(n):this._connectArrowheadEnd(n,e,r),i.linkAllowed(this)?(this._finishEmbedding(n),this._notifyConnectEvent(n,t)):this._disallow(n),this._afterArrowheadMove(n)},dragEnd:function(){},_disallow:function(t){switch(t.whenNotAllowed){case"remove":this.model.remove({ui:!0});break;case"revert":default:this.model.set(t.arrowhead,t.initialEnd,{ui:!0});break}},_finishEmbedding:function(t){this.paper.options.embeddingMode&&this.model.reparent()&&(t.z=null)},_notifyConnectEvent:function(t,e){var r=t.arrowhead,n=t.initialEnd,i=this.model.prop(r),o=i&&!ce.endsEqual(n,i);if(o){var s=this.paper;n.id&&this.notify("link:disconnect",e,s.findViewByModel(n.id),t.initialMagnet,r),i.id&&this.notify("link:connect",e,s.findViewByModel(i.id),t.magnetUnderPointer,r)}},_snapToPoints:function(t,e,r){let n=null,i=1/0,o=null,s=1/0,a=t.x,u=t.y;for(let h=0;h<e.length;h++){let d=Math.abs(e[h].x-t.x);d<i&&(i=d,n=e[h]);let f=Math.abs(e[h].y-t.y);f<s&&(s=f,o=e[h])}return i<r&&(a=n.x),s<r&&(u=o.y),{x:a,y:u}},_snapArrowheadSelf:function(t,e,r){let{paper:n,model:i}=this,{snapLinksSelf:o}=n.options,s=this.eventData(t),a=o.radius||20,u=this.getEndAnchor(s.arrowhead==="source"?"target":"source"),h=i.vertices(),d=[u,...h],f=this._snapToPoints({x:e,y:r},d,a),I=n.localToClientPoint(f);this._connectArrowhead(document.elementFromPoint(I.x,I.y),f.x,f.y,this.eventData(t))},_snapArrowhead:function(t,e,r){let{paper:n}=this,{snapLinks:i,connectionStrategy:o}=n.options,s=this.eventData(t),a=!1;var u=i.radius||50,h=n.findViewsInArea({x:e-u,y:r-u,width:2*u,height:2*u}),d=s.closestView||null,f=s.closestMagnet||null,I=s.magnetProxy||null;s.closestView=s.closestMagnet=s.magnetProxy=null;var A=Number.MAX_VALUE,b=new z(e,r);h.forEach(function(rt){let p=[];rt.el.getAttribute("magnet")!=="false"&&p.push({bbox:rt.model.getBBox(),magnet:rt.el}),rt.$("[magnet]").toArray().forEach(v=>{p.push({bbox:rt.getNodeBBox(v),magnet:v})}),p.forEach(v=>{let{magnet:w,bbox:M}=v,D=M.center().squaredDistance(b);D<A&&(f===w||n.options.validateConnection.apply(n,s.validateConnectionArgs(rt,rt.el===w?null:w)))&&(A=D,s.closestView=rt,s.closestMagnet=w)})},this);var S,P=null,E=s.closestView,j=s.closestMagnet;j&&(P=s.magnetProxy=E.findProxyNode(j,"highlighter"));var U=s.arrowhead,Q=f!==j;if(d&&Q&&d.unhighlight(I,{connecting:!0,snapping:!0}),E){let{prevEnd:rt,prevX:p,prevY:v}=s;if(s.prevX=e,s.prevY=r,a=!0,!Q&&(typeof o!="function"||p===e&&v===r)||(S=E.getLinkEnd(j,e,r,this.model,U),!Q&&tn(rt,S)))return a;s.prevEnd=S,Q&&E.highlight(P,{connecting:!0,snapping:!0})}else S={x:e,y:r};return this.model.set(U,S||{x:e,y:r},{ui:!0}),d&&this.notify("link:snap:disconnect",t,d,f,U),E&&this.notify("link:snap:connect",t,E,j,U),a},_snapArrowheadEnd:function(t){var e=t.closestView,r=t.closestMagnet;e&&r&&(e.unhighlight(t.magnetProxy,{connecting:!0,snapping:!0}),t.magnetUnderPointer=e.findMagnet(r)),t.closestView=t.closestMagnet=null},_connectArrowhead:function(t,e,r,n){let{paper:i,model:o}=this;if(n.eventTarget!==t){n.magnetProxy&&n.viewUnderPointer.unhighlight(n.magnetProxy,{connecting:!0});let s=n.viewUnderPointer=i.findView(t);if(s){let a=n.magnetUnderPointer=s.findMagnet(t),u=n.magnetProxy=s.findProxyNode(a,"highlighter");a&&this.paper.options.validateConnection.apply(i,n.validateConnectionArgs(s,a))?u&&s.highlight(u,{connecting:!0}):(n.magnetUnderPointer=null,n.magnetProxy=null)}else n.magnetUnderPointer=null,n.magnetProxy=null}n.eventTarget=t,o.set(n.arrowhead,{x:e,y:r},{ui:!0})},_connectArrowheadEnd:function(t={},e,r){let{model:n}=this,{viewUnderPointer:i,magnetUnderPointer:o,magnetProxy:s,arrowhead:a}=t;if(!o||!s||!i)return;i.unhighlight(s,{connecting:!0});let u=i.getLinkEnd(o,e,r,n,a);n.set(a,u,{ui:!0})},_beforeArrowheadMove:function(t){t.z=this.model.get("z"),this.model.toFront();var e=this.el.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(t)},_afterArrowheadMove:function(t){t.z!==null&&(this.model.set("z",t.z,{ui:!0}),t.z=null),this.el.style.pointerEvents=t.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(t)},_createValidateConnectionArgs:function(t){var e=[];e[4]=t,e[5]=this;var r,n=0,i=0;t==="source"?(n=2,r="target"):(i=2,r="source");var o=this.model.get(r);if(o.id){var s=e[n]=this.paper.findViewByModel(o.id),a=s.getMagnetFromLinkEnd(o);a===s.el&&(a=void 0),e[n+1]=a}function u(h,d){return e[i]=h,e[i+1]=h.el===d?void 0:d,e}return u},_markAvailableMagnets:function(t){function e(f,I){var A=f.paper,b=A.options.validateConnection;return b.apply(A,this.validateConnectionArgs(f,I))}var r=this.paper,n=r.model.getCells();t.marked={};for(var i=0,o=n.length;i<o;i++){var s=n[i].findView(r);if(s){var a=Array.prototype.slice.call(s.el.querySelectorAll("[magnet]"));s.el.getAttribute("magnet")!=="false"&&a.push(s.el);var u=a.filter(e.bind(t,s));if(u.length>0){for(var h=0,d=u.length;h<d;h++)s.highlight(u[h],{magnetAvailability:!0});s.highlight(null,{elementAvailability:!0}),t.marked[s.model.id]=u}}}},_unmarkAvailableMagnets:function(t){for(var e=Object.keys(t.marked),r,n,i=0,o=e.length;i<o;i++){r=e[i],n=t.marked[r];var s=this.paper.findViewByModel(r);if(s){for(var a=0,u=n.length;a<u;a++)s.unhighlight(n[a],{magnetAvailability:!0});s.unhighlight(null,{elementAvailability:!0})}}t.marked=null},startArrowheadMove:function(t,e){e||(e={});var r={action:"arrowhead-move",arrowhead:t,whenNotAllowed:e.whenNotAllowed||"revert",initialMagnet:this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),initialEnd:rr(this.model.get(t)),validateConnectionArgs:this._createValidateConnectionArgs(t)};return this._beforeArrowheadMove(r),e.ignoreBackwardsCompatibility!==!0&&(this._dragData=r),r},onMount:function(){Wt.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){Wt.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){Wt.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:zt});Object.defineProperty(Pi.prototype,"sourceBBox",{enumerable:!0,get:function(){var t=this.sourceView;if(!t){var e=this.model.source();return new ft(e.x,e.y)}var r=this.sourceMagnet;return t.isNodeConnection(r)?new ft(this.sourceAnchor):t.getNodeBBox(r||t.el)}});Object.defineProperty(Pi.prototype,"targetBBox",{enumerable:!0,get:function(){var t=this.targetView;if(!t){var e=this.model.target();return new ft(e.x,e.y)}var r=this.targetMagnet;return t.isNodeConnection(r)?new ft(this.targetAnchor):t.getNodeBBox(r||t.el)}});var Iu={};Ae(Iu,{addClass:()=>Ux,list:()=>_x,mask:()=>Fx,opacity:()=>Vx,stroke:()=>Wx});var Wx=Xe.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(t,e){let{options:r}=this,{useFirstSubpath:n}=r,i;try{let o=X(e);if(i=o.convertToPathData().trim(),o.tagName()==="PATH"&&n){let s=i.search(/.M/i)+1;s>0&&(i=i.substr(0,s))}}catch(o){let s=t.getNodeBoundingRect(e);i=X.rectToPath(At({},r,s.toJSON()))}return i},highlightConnection(t){this.vel.attr("d",t.getSerializedConnection())},highlightNode(t,e){let{vel:r,options:n}=this,{padding:i,layer:o}=n,s=this.getNodeMatrix(t,e);if(i){!o&&e===t.el&&r.remove();let a=t.getNodeBoundingRect(e),u=a.x+a.width/2,h=a.y+a.height/2;a=X.transformRect(a,s);let d=Math.max(a.width,1),f=Math.max(a.height,1),I=(d+i)/d,A=(f+i)/f,b=X.createSVGMatrix({a:I,b:0,c:0,d:A,e:u-I*u,f:h-A*h});s=s.multiply(b)}r.attr({d:this.getPathData(t,e),transform:X.matrixToTransformString(s)})},highlight(t,e){let{vel:r,options:n}=this;r.attr(n.attrs),t.isNodeConnection(e)?this.highlightConnection(t):this.highlightNode(t,e)}});var p0=20;function Yx(t,e){let r=t.children();for(;r.length>0;){let n=r.shift();e(n)&&r.push(...n.children())}}var Fx=Xe.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:p0,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(t,e){let{MASK_CHILD_ATTRIBUTE_BLACKLIST:r,MASK_REPLACE_TAGS:n,MASK_REMOVE_TAGS:i}=this,o=e.tagName();if(!X.isSVGGraphicsElement(e)||i.includes(o))return e.remove(),!1;if(n.includes(o)){let s=t.vel.findOne(`#${e.id}`);if(s){let{node:a}=s,u=t.getNodeBoundingRect(a);t.model.isElement()&&(u=X.transformRect(u,t.getNodeMatrix(a)));let h=X("rect",u.toJSON()),{x:d,y:f}=u.center(),{angle:I,cx:A=d,cy:b=f}=s.rotate();I&&h.rotate(I,A,b),e.parent().append(h)}return e.remove(),!1}return r.forEach(s=>{s==="fill"&&e.attr("fill")==="none"||e.removeAttr(s)}),!0},transformMaskRoot(t,e){let{MASK_ROOT_ATTRIBUTE_BLACKLIST:r}=this;r.forEach(n=>{e.removeAttr(n)})},getMaskShape(t,e){let{options:r,MASK_REPLACE_TAGS:n}=this,{deep:i}=r,o=e.tagName(),s;if(o==="G"){if(!i)return null;s=e.clone(),Yx(s,a=>this.transformMaskChild(t,a))}else{if(n.includes(o))return null;s=e.clone()}return this.transformMaskRoot(t,s),s},getMaskId(){return`highlight-mask-${this.cid}`},getMask(t,e){let{VISIBLE:r,INVISIBLE:n,options:i}=this,{padding:o,attrs:s}=i,a="stroke-width"in s?s["stroke-width"]:1,u=e.attr("fill")!=="none",h=parseFloat(e.attr("stroke-width"));isNaN(h)&&(h=1);let d=h+o*2,f=d+a*2,I=this.getMaskShape(t,e);if(!I){let A=t.getNodeBoundingRect(e.node);A.inflate(A.width?0:.5,A.height?0:.5),I=X("rect",A.toJSON())}return I.attr(s),X("mask",{id:this.getMaskId()}).append([I.clone().attr({fill:u?r:"none",stroke:r,"stroke-width":f}),I.clone().attr({fill:u?n:"none",stroke:n,"stroke-width":d})])},removeMask(t){let e=t.svg.getElementById(this.getMaskId());e&&t.defs.removeChild(e)},addMask(t,e){t.defs.appendChild(e.node)},highlight(t,e){let{options:r,vel:n}=this,{padding:i,attrs:o,maskClip:s=p0,layer:a}=r,u="stroke"in o?o.stroke:"#000000";!a&&e===t.el&&n.remove();let h=t.getNodeBoundingRect(e).inflate(i+s),d=this.getNodeMatrix(t,e),f=this.getMask(t,X(e));this.addMask(t.paper,f),n.attr(h.toJSON()),n.attr({transform:X.matrixToTransformString(d),mask:`url(#${f.id})`,fill:u})},unhighlight(t){this.removeMask(t.paper)}});var Vx=Xe.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:Ue("highlight-opacity"),highlight:function(t,e){X(e).addClass(this.opacityClassName)},unhighlight:function(t,e){X(e).removeClass(this.opacityClassName)}});var m0=Ue("highlighted"),Ux=Xe.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:m0},highlight:function(t,e){X(e).addClass(this.options.className)},unhighlight:function(t,e){X(e).removeClass(this.options.className)}},{className:m0});var Qh={ROW:"row",COLUMN:"column"},_x=Xe.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(t,e){let r=t.model,{attribute:n,size:i=20,gap:o=5,direction:s=Qh.ROW}=this.options;if(!n)throw new Error("List: attribute is required");let a=typeof i=="number"?{width:i,height:i}:i,u=s===Qh.ROW,h=u?a.width:a.height,d=r.get(n);Array.isArray(d)||(d=[]);let f=this._prevItems||[],I=d.map((P,E)=>tn(f[E],d[E]));if(f.length!==d.length||I.some(P=>!P)){let P=this.vel.children(),E=d.map((j,U)=>{let Q=U in P?P[U].node:null;if(I[U])return Q;let rt=this.createListItem(j,a,Q);if(!rt)return null;if(!(rt instanceof SVGElement))throw new Error("List: item must be an SVGElement");rt.dataset.index=U,rt.dataset.attribute=n;let p=U*(h+o);return rt.setAttribute("transform",u?`translate(${p}, 0)`:`translate(0, ${p})`),rt});this.vel.empty().append(E),this._prevItems=d}let A=d.length,b=A===0?0:A*h+(A-1)*o,S=u?{width:b,height:a.height}:{width:a.width,height:b};this.position(r,S)},position(t,e){let{vel:r,options:n}=this,{margin:i=5,position:o="top-left"}=n,{width:s,height:a}=t.size(),{left:u,right:h,top:d,bottom:f}=fr(i),I=new ft(u,d,s-(u+h),a-(d+f)),{x:A,y:b}=Po(I,o);switch(o){case Ee.CENTER:case Ee.TOP:case Ee.BOTTOM:{A-=e.width/2;break}case Ee.RIGHT:case Ee.BOTTOM_RIGHT:case Ee.TOP_RIGHT:{A-=e.width;break}}switch(o){case Ee.CENTER:case Ee.RIGHT:case Ee.LEFT:{b-=e.height/2;break}case Ee.BOTTOM:case Ee.BOTTOM_RIGHT:case Ee.BOTTOM_LEFT:{b-=e.height;break}}r.attr("transform",`translate(${A}, ${b})`)}},{Directions:Qh,Positions:Ee});var Au={};Ae(Au,{connectionClosest:()=>I0,connectionLength:()=>Hx,connectionPerpendicular:()=>Kx,connectionRatio:()=>Xx,resolveRef:()=>Oo});function Xx(t,e,r,n){var i="ratio"in n?n.ratio:.5;return t.getPointAtRatio(i)}function Hx(t,e,r,n){var i="length"in n?n.length:20;return t.getPointAtLength(i)}function Jx(t,e,r,n){var i=1e6,o=t.getConnection(),s=t.getConnectionSubdivisions(),a=new gt(r.clone().offset(0,i),r.clone().offset(0,-i)),u=new gt(r.clone().offset(i,0),r.clone().offset(-i,0)),h=a.intersect(o,{segmentSubdivisions:s}),d=u.intersect(o,{segmentSubdivisions:s}),f=[];return h&&Array.prototype.push.apply(f,h),d&&Array.prototype.push.apply(f,d),f.length>0?r.chooseClosest(f):"fallbackAt"in n?v0(t,n.fallbackAt):I0(t,e,r,n)}function Qx(t,e,r,n){var i=t.getClosestPoint(r);return i||new z}function Oo(t){return function(e,r,n,i){if(n instanceof Element){var o=this.paper.findView(n),s;if(o)if(o.isNodeConnection(n)){var a="fixedAt"in i?i.fixedAt:"50%";s=v0(o,a)}else s=o.getNodeBBox(n).center();else s=new z;return t.call(this,e,r,s,i)}return t.apply(this,arguments)}}function v0(t,e){var r=parseFloat(e);return ye(e)?t.getPointAtRatio(r/100):t.getPointAtLength(r)}var Kx=Oo(Jx),I0=Oo(Qx);var Cu={};Ae(Cu,{anchor:()=>nw,bbox:()=>iw,boundary:()=>sw,rectangle:()=>ow});function yu(t,e,r){if(ae(r)){let{x:i,y:o}=r;if(isFinite(o)){let s=new gt(e,t),{start:a,end:u}=s.parallel(o);e=a,t=u}r=i}if(!isFinite(r))return t;var n=t.distance(e);return r===0&&n>0?t:t.move(e,-Math.min(r,n-1))}function $h(t){var e=t.getAttribute("stroke-width");return e===null?0:parseFloat(e)||0}function qx(t,e,r=0){let n,i,o,s,{start:a,end:u}=t;switch(e){case"left":n="x",i=u,o=a,s=-1;break;case"right":n="x",i=a,o=u,s=1;break;case"top":n="y",i=u,o=a,s=-1;break;case"bottom":n="y",i=a,o=u,s=1;break;default:return}a[n]<u[n]?i[n]=o[n]:o[n]=i[n],isFinite(r)&&(i[n]+=s*r,o[n]+=s*r)}function $x(t,e,r,n){let{offset:i,alignOffset:o,align:s}=n;return s&&qx(t,s,o),yu(t.end,t.start,i)}function A0(t,e,r,n){var i=e.getNodeBBox(r);n.stroke&&i.inflate($h(r)/2);var o=t.intersect(i),s=o?t.start.chooseClosest(o):t.end;return yu(s,t.start,n.offset)}function tw(t,e,r,n){var i=e.model.angle();if(i===0)return A0(t,e,r,n);var o=e.getNodeUnrotatedBBox(r);n.stroke&&o.inflate($h(r)/2);var s=o.center(),a=t.clone().rotate(s,i),u=a.setLength(1e6).intersect(o),h=u?a.start.chooseClosest(u).rotate(s,-i):t.end;return yu(h,t.start,n.offset)}function ew(t){if(!t)return null;var e=t;do{var r=e.tagName;if(typeof r!="string")return null;if(r=r.toUpperCase(),r==="G")e=e.firstElementChild;else if(r==="TITLE")e=e.nextElementSibling;else break}while(e);return e}var Kh="segmentSubdivisons",qh="shapeBBox";function rw(t,e,r,n){var i,o,s=n.selector,a=t.end;if(typeof s=="string"?i=e.findBySelector(s)[0]:s===!1?i=r:Array.isArray(s)?i=hn(r,s):i=ew(r),!X.isSVGGraphicsElement(i)){if(i===r||!X.isSVGGraphicsElement(r))return a;i=r}var u=e.getNodeShape(i),h=e.getNodeMatrix(i),d=e.getRootTranslateMatrix(),f=e.getRootRotateMatrix(),I=d.multiply(f).multiply(h),A=I.inverse(),b=X.transformLine(t,A),S=b.start.clone(),P=e.getNodeData(i);if(n.insideout===!1){P[qh]||(P[qh]=u.bbox());var E=P[qh];if(E.containsPoint(S))return a}var j;if(u instanceof yt){var U=n.precision||2;P[Kh]||(P[Kh]=u.getSegmentSubdivisions({precision:U})),j={precision:U,segmentSubdivisions:P[Kh]}}n.extrapolate===!0&&b.setLength(1e6),o=b.intersect(u,j),o?X.isArray(o)&&(o=S.chooseClosest(o)):n.sticky===!0&&(u instanceof ft?o=u.pointNearestToPoint(S):u instanceof je?o=u.intersectionWithLineFromCenterToPoint(S):o=u.closestPoint(S,j));var Q=o?X.transformPoint(o,I):a,rt=n.offset||0;return n.stroke&&(rt+=$h(i)/2),yu(Q,t.start,rt)}var nw=$x,iw=A0,ow=tw,sw=rw;var xu={};Ae(xu,{bottom:()=>hw,bottomLeft:()=>vw,bottomRight:()=>Iw,center:()=>cw,left:()=>dw,midSide:()=>yw,modelCenter:()=>Cw,perpendicular:()=>Aw,right:()=>gw,top:()=>fw,topLeft:()=>pw,topRight:()=>mw});function Mn(t){return function(e,r,n,i){var o=!!i.rotate,s=o?e.getNodeUnrotatedBBox(r):e.getNodeBBox(r),a=s[t](),u=i.dx;if(u){var h=ye(u);u=parseFloat(u),isFinite(u)&&(h&&(u/=100,u*=s.width),a.x+=u)}var d=i.dy;if(d){var f=ye(d);d=parseFloat(d),isFinite(d)&&(f&&(d/=100,d*=s.height),a.y+=d)}return o?a.rotate(e.model.getBBox().center(),-e.model.angle()):a}}function aw(t,e,r,n){var i=t.model.angle(),o=t.getNodeBBox(e),s=o.center(),a=o.origin(),u=o.corner(),h=n.padding;if(isFinite(h)||(h=0),a.y+h<=r.y&&r.y<=u.y-h){var d=r.y-s.y;s.x+=i===0||i===180?0:d*1/Math.tan(Oe(i)),s.y+=d}else if(a.x+h<=r.x&&r.x<=u.x-h){var f=r.x-s.x;s.y+=i===90||i===270?0:f*Math.tan(Oe(i)),s.x+=f}return s}function lw(t,e,r,n){var i=!!n.rotate,o,s,a;i?(o=t.getNodeUnrotatedBBox(e),a=t.model.getBBox().center(),s=t.model.angle()):o=t.getNodeBBox(e);var u=n.padding;isFinite(u)&&o.inflate(u),i&&r.rotate(a,s);var h=o.sideNearestToPoint(r),d;switch(h){case"left":d=o.leftMiddle();break;case"right":d=o.rightMiddle();break;case"top":d=o.topMiddle();break;case"bottom":d=o.bottomMiddle();break}return i?d.rotate(a,-s):d}function uw(t,e,r,n,i){return t.model.getPointFromConnectedLink(this.model,i).offset(n.dx,n.dy)}var cw=Mn("center"),fw=Mn("topMiddle"),hw=Mn("bottomMiddle"),dw=Mn("leftMiddle"),gw=Mn("rightMiddle"),pw=Mn("origin"),mw=Mn("topRight"),vw=Mn("bottomLeft"),Iw=Mn("corner"),Aw=Oo(aw),yw=Oo(lw),Cw=uw;var Ur=Qr(wn(),1),w0=Qr(Ps(),1),Bo={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},xw=50,y0=20,C0=1e3,ww=1/0,wu=9007199254740991,td=Wt.Highlighting,x0={[td.DEFAULT]:{name:"stroke",options:{padding:3}},[td.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[td.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},bw=[{name:yr.BACK},{name:yr.CELLS},{name:yr.LABELS},{name:yr.FRONT},{name:yr.TOOLS}],Nw=_e.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,perpendicularLinks:!1,elementView:Se,linkView:Pi,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:x0,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new ce,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(t,e,r){return e.getAttribute("magnet")!=="passive"},validateConnection:function(t,e,r,n,i,o){return(i==="target"?r:t)instanceof Se},embeddingMode:!1,validateEmbedding:function(t,e){return!0},validateUnembedding:function(t){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:Bo.EXACT,frozen:!1,autoFreeze:!1,onViewUpdate:function(t,e,r,n,i){e&(t.FLAG_INSERT|t.FLAG_REMOVE)||n.mounting||n.isolate||i.requestConnectedLinksUpdate(t,r,n)},onViewPostponed:function(t,e,r){return r.forcePostponedViewUpdate(t,e)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:Iu,anchorNamespace:xu,linkAnchorNamespace:Au,connectionPointNamespace:Cu,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,init:function(){let{options:t,el:e}=this;t.cellViewNamespace||(t.cellViewNamespace=typeof joint!="undefined"&&cr(joint,"shapes")?joint.shapes:null);let r=this.model=t.model||new nu;this._layers={},this.setGrid(t.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.$document=(0,Ur.default)(e.ownerDocument),this.resetViews(r.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var t=this.model;this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.onCellRemoved).listenTo(t,"change",this.onCellChange).listenTo(t,"reset",this.onGraphReset).listenTo(t,"sort",this.onGraphSort).listenTo(t,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(t,e,r){var n=r.position;this.isAsync()||!Ge(n)?this.renderView(t,r):(r.maxPosition===n&&this.freeze({key:"addCells"}),this.renderView(t,r),n===0&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(t,e,r){let n=this.findViewByModel(t);n&&this.requestViewUpdate(n,n.FLAG_REMOVE,n.UPDATE_PRIORITY,r)},onCellChange:function(t,e){if(t!==this.model.attributes.cells&&t.hasChanged("z")&&this.options.sorting===Bo.APPROX){let r=this.findViewByModel(t);r&&this.requestViewUpdate(r,r.FLAG_INSERT,r.UPDATE_PRIORITY,e)}},onGraphReset:function(t,e){this.resetLayers(),this.resetViews(t.models,e)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(t){if(!this.isFrozen()){var e=t&&t.batchName,r=this.model;if(!this.isAsync()){var n=this.UPDATE_DELAYING_BATCHES;n.includes(e)&&!r.hasActiveBatch(n)&&this.updateViews(t)}var i=this.SORT_DELAYING_BATCHES;i.includes(e)&&!r.hasActiveBatch(i)&&this.sortViews()}},cloneOptions:function(){let{options:t}=this,{defaultConnector:e,defaultRouter:r,defaultConnectionPoint:n,defaultAnchor:i,defaultLinkAnchor:o,origin:s,highlighting:a,cellViewNamespace:u,interactive:h}=t;!u&&typeof joint!="undefined"&&cr(joint,"shapes")&&(t.cellViewNamespace=joint.shapes),Vt(e)||(t.defaultConnector=Be(e)),Vt(r)||(t.defaultRouter=Be(r)),Vt(n)||(t.defaultConnectionPoint=Be(n)),Vt(i)||(t.defaultAnchor=Be(i)),Vt(o)||(t.defaultLinkAnchor=Be(o)),ae(h)&&(t.interactive=At({},h)),ae(a)&&(t.highlighting=Un({},a,x0)),t.origin=At({},s)},children:function(){var t=X.namespace;return[{namespaceURI:t.xhtml,tagName:"div",className:Ue("paper-background"),selector:"background"},{namespaceURI:t.xhtml,tagName:"div",className:Ue("paper-grid"),selector:"grid"},{namespaceURI:t.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":t.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:Ue("layers"),selector:"layers"}]}]},hasLayerView(t){return t in this._layers},getLayerView(t){let{_layers:e}=this;if(t in e)return e[t];throw new Error(`dia.Paper: Unknown layer "${t}"`)},getLayerNode(t){return this.getLayerView(t).el},render:function(){this.renderChildren();let{childNodes:t,options:e}=this,{svg:r,defs:n,layers:i,background:o,grid:s}=t;return r.style.overflow=e.overflow?"visible":"hidden",this.svg=r,this.defs=n,this.layers=i,this.$background=(0,Ur.default)(o),this.$grid=(0,Ur.default)(s),this.renderLayers(),X.ensureId(r),e.background&&this.drawBackground(e.background),e.drawGrid&&this.drawGrid(),this},renderLayers:function(t=bw){this.removeLayers(),t.forEach(({name:i,sorted:o})=>{let s=new Gh({name:i});this.layers.appendChild(s.el),this._layers[i]=s});let e=this.getLayerView(yr.CELLS),r=this.getLayerView(yr.TOOLS),n=this.getLayerView(yr.LABELS);this.tools=r.el,this.cells=this.viewport=e.el,e.vel.addClass(Ue("viewport")),n.vel.addClass(Ue("viewport"))},removeLayers:function(){let{_layers:t}=this;Object.keys(t).forEach(e=>{t[e].remove(),delete t[e]})},resetLayers:function(){let{_layers:t}=this;Object.keys(t).forEach(e=>{t[e].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(t){var e=this.layers;if(t===void 0){var r=e.getAttribute("transform");return(this._viewportTransformString||null)===r?t=this._viewportMatrix:(t=e.getCTM(),this._viewportMatrix=t,this._viewportTransformString=r),X.createSVGMatrix(t)}t=X.createSVGMatrix(t);var n=X.matrixToTransformString(t);return e.setAttribute("transform",n),this._viewportMatrix=t,this._viewportTransformString=e.getAttribute("transform"),this},clientMatrix:function(){return X.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(t,e,r){if(t instanceof Wt)for(var n=t.model,i=this.model.getConnectedLinks(n),o=0,s=i.length;o<s;o++){var a=i[o],u=this.findViewByModel(a);if(u){var h=["UPDATE"];a.getTargetCell()===n&&h.push("TARGET"),a.getSourceCell()===n&&h.push("SOURCE");var d=Math.max(e+1,u.UPDATE_PRIORITY);this.scheduleViewUpdate(u,u.getFlag(h),d,r)}}},forcePostponedViewUpdate:function(t,e){if(!t||!(t instanceof Wt))return!1;var r=t.model;if(r.isElement())return!1;if(!(e&t.getFlag(["SOURCE","TARGET"]))){var n={silent:!0},i=0,o=this.findViewByModel(r.getSourceCell());o&&!this.isViewMounted(o)&&(i=this.dumpView(o,n),t.updateEndMagnet("source"));var s=0,a=this.findViewByModel(r.getTargetCell());if(a&&!this.isViewMounted(a)&&(s=this.dumpView(a,n),t.updateEndMagnet("target")),i===0&&s===0)return!this.dumpView(t,n)}return!1},requestViewUpdate:function(t,e,r,n){n||(n={}),this.scheduleViewUpdate(t,e,r,n);var i=this.isAsync();if(!(this.isFrozen()||i&&n.async!==!1)&&!this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES)){var o=this.updateViews(n);i&&this.notifyAfterRender(o,n)}},scheduleViewUpdate:function(t,e,r,n){let{_updates:i,options:o}=this;i.idle&&o.autoFreeze&&(i.idle=!1,this.unfreeze());let{FLAG_REMOVE:s,FLAG_INSERT:a,UPDATE_PRIORITY:u,cid:h}=t,d=i.priorities[r];if(d||(d=i.priorities[r]={}),r>u)for(let A=r-1;A>=u;A--){let b=i.priorities[A];!b||!(h in b)||(d[h]|=b[h],delete b[h])}let f=d[h]||0;if((f&e)===e)return;f||i.count++,e&s&&f&a?d[h]^=a:e&a&&f&s&&(d[h]^=s),d[h]|=e;let I=o.onViewUpdate;typeof I=="function"&&I.call(this,t,e,r,n||{},this)},dumpViewUpdate:function(t){if(!t)return 0;var e=this._updates,r=t.cid,n=e.priorities[t.UPDATE_PRIORITY],i=this.registerMountedView(t)|n[r];return delete n[r],i},dumpView:function(t,e={}){let r=this.dumpViewUpdate(t);if(!r)return 0;let n=!e.silent;n&&this.notifyBeforeRender(e);let i=this.updateView(t,r,e);if(n){let o={updated:1,priority:t.UPDATE_PRIORITY};this.notifyAfterRender(o,e)}return i},updateView:function(t,e,r){if(!t)return 0;let{FLAG_REMOVE:n,FLAG_INSERT:i,FLAG_INIT:o,model:s}=t;if(t instanceof Wt){if(e&n)return this.removeView(s),0;if(e&i){let a=!!(e&o);a&&(e^=o),this.insertView(t,a),e^=i}}return e?t.confirmUpdate(e,r||{}):0},requireView:function(t,e){var r=this.findViewByModel(t);return r?(this.dumpView(r,e),r):null},registerUnmountedView:function(t){var e=t.cid,r=this._updates;if(e in r.unmounted)return 0;var n=r.unmounted[e]|=t.FLAG_INSERT;return r.unmountedCids.push(e),delete r.mounted[e],n},registerMountedView:function(t){var e=t.cid,r=this._updates;if(e in r.mounted)return 0;r.mounted[e]=!0,r.mountedCids.push(e);var n=r.unmounted[e]||0;return delete r.unmounted[e],n},isViewMounted:function(t){if(!t)return!1;var e=t.cid,r=this._updates;return e in r.mounted},dumpViews:function(t){var e=Ve({},t,{viewport:null});this.checkViewport(e),this.updateViews(e)},updateViews:function(t){this.notifyBeforeRender(t);let e,r=0,n=0,i=wu;do n++,e=this.updateViewsBatch(t),r+=e.updated,i=Math.min(e.priority,i);while(!e.empty);let o={updated:r,batches:n,priority:i};return this.notifyAfterRender(o,t),o},hasScheduledUpdates:function(){let t=this._updates.priorities,e=Object.keys(t),r=e.length;for(;r>0&&r--;)for(let n in t[e[r]])return!0;return!1},updateViewsAsync:function(t,e){t||(t={}),e||(e={processed:0,priority:wu});let{_updates:r,options:n}=this,i=r.id;if(i){Mo(i),e.processed===0&&this.hasScheduledUpdates()&&this.notifyBeforeRender(t);let o=this.updateViewsBatch(t),s=Ve({},t,{mountBatchSize:C0-o.mounted,unmountBatchSize:C0-o.unmounted}),a=this.checkViewport(s),u=a.unmounted,h=a.mounted,d=e.processed,f=r.count;o.updated>0?(d+=o.updated+o.unmounted,o.processed=d,e.priority=Math.min(o.priority,e.priority),o.empty&&h===0?(o.unmounted+=u,o.mounted+=h,o.priority=e.priority,this.notifyAfterRender(o,t),e.processed=0,e.priority=wu,r.count=0):e.processed=d):r.idle||n.autoFreeze&&(this.freeze(),r.idle=!0,this.trigger("render:idle",t));let I=t.progress;if(f&&typeof I=="function"&&I.call(this,o.empty,d,f,o,this),r.id!==i)return}if(r.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");r.id=No(this.updateViewsAsync,this,t,e)},notifyBeforeRender:function(t={}){let e=t.beforeRender;typeof e!="function"&&(e=this.options.beforeRender,typeof e!="function")||e.call(this,t,this)},notifyAfterRender:function(t,e={}){let r=e.afterRender;typeof r!="function"&&(r=this.options.afterRender),typeof r=="function"&&r.call(this,t,e,this),this.trigger("render:done",t,e)},updateViewsBatch:function(t){t||(t={});var e=t.batchSize||ww,r=this._updates,n=0,i=0,o=0,s=0,a=wu,u=!0,h=this.options,d=r.priorities,f="viewport"in t?t.viewport:h.viewport;typeof f!="function"&&(f=null);var I=h.onViewPostponed;typeof I!="function"&&(I=null);var A=Object.keys(d);t:for(var b=0,S=A.length;b<S;b++){var P=+A[b],E=d[P];for(var j in E){if(n>=e){u=!1;break t}var U=Qn[j];if(!U){delete E[j];continue}var Q=E[j];if(!(Q&U.FLAG_REMOVE)){var rt=j in r.unmounted;if(U.DETACHABLE&&f&&!f.call(this,U,!rt,this)){rt||(this.registerUnmountedView(U),this.detachView(U)),r.unmounted[j]|=Q,delete E[j],o++;continue}rt&&(Q|=U.FLAG_INSERT,s++),Q|=this.registerMountedView(U)}var p=this.updateView(U,Q,t);if(p>0&&(E[j]=p,!I||!I.call(this,U,p,this)||E[j])){i++,u=!1;continue}a>P&&(a=P),n++,delete E[j]}}return{priority:a,updated:n,postponed:i,unmounted:o,mounted:s,empty:u}},getUnmountedViews:function(){let t=this._updates,e=Object.keys(t.unmounted),r=e.length,n=new Array(r);for(var i=0;i<r;i++)n[i]=Qn[e[i]];return n},getMountedViews:function(){let t=this._updates,e=Object.keys(t.mounted),r=e.length,n=new Array(r);for(var i=0;i<r;i++)n[i]=Qn[e[i]];return n},checkUnmountedViews:function(t,e){e||(e={});var r=0;typeof t!="function"&&(t=null);for(var n=("mountBatchSize"in e)?e.mountBatchSize:1/0,i=this._updates,o=i.unmountedCids,s=i.unmounted,a=0,u=Math.min(o.length,n);a<u;a++){var h=o[a];if(h in s){var d=Qn[h];if(d){if(d.DETACHABLE&&t&&!t.call(this,d,!1,this)){o.push(h);continue}r++;var f=this.registerMountedView(d);f&&this.scheduleViewUpdate(d,f,d.UPDATE_PRIORITY,{mounting:!0})}}}return o.splice(0,a),r},checkMountedViews:function(t,e){e||(e={});var r=0;if(typeof t!="function")return r;for(var n=("unmountBatchSize"in e)?e.unmountBatchSize:1/0,i=this._updates,o=i.mountedCids,s=i.mounted,a=0,u=Math.min(o.length,n);a<u;a++){var h=o[a];if(h in s){var d=Qn[h];if(d){if(!d.DETACHABLE||t.call(this,d,!0,this)){o.push(h);continue}r++;var f=this.registerUnmountedView(d);f&&this.detachView(d)}}}return o.splice(0,a),r},checkViewVisibility:function(t,e={}){let r="viewport"in e?e.viewport:this.options.viewport;typeof r!="function"&&(r=null);let n=this._updates,{mounted:i,unmounted:o}=n,s=!t.DETACHABLE||!r||r.call(this,t,!1,this),a=!1,u=!1;if(t.cid in i&&!s){this.registerUnmountedView(t)&&this.detachView(t);let f=n.mountedCids.indexOf(t.cid);n.mountedCids.splice(f,1),a=!0}if(!a&&t.cid in o&&s){let d=n.unmountedCids.indexOf(t.cid);n.unmountedCids.splice(d,1);var h=this.registerMountedView(t);h&&this.scheduleViewUpdate(t,h,t.UPDATE_PRIORITY,{mounting:!0}),u=!0}return{mounted:u?1:0,unmounted:a?1:0}},checkViewport:function(t){var e=Ve({},t,{mountBatchSize:1/0,unmountBatchSize:1/0}),r="viewport"in e?e.viewport:this.options.viewport,n=this.checkMountedViews(r,e);if(n>0){var i=this._updates.unmountedCids;e.mountBatchSize=Math.min(i.length-n,e.mountBatchSize)}var o=this.checkUnmountedViews(r,e);return{mounted:o,unmounted:n}},freeze:function(t){t||(t={});var e=this._updates,r=t.key,n=this.options.frozen,i=e.freezeKey;if(r&&r!==i){if(n&&i)return;e.freezeKey=r,e.keyFrozen=n}this.options.frozen=!0;var o=e.id;e.id=null,this.isAsync()&&o&&Mo(o)},unfreeze:function(t){t||(t={});var e=this._updates,r=t.key,n=e.freezeKey;r&&n&&r!==n||(e.freezeKey=null,!(r&&r===n&&e.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(t)):this.updateViews(t),this.options.frozen=e.keyFrozen=!1,e.sort&&(this.sortViews(),e.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===Bo.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var t=this.options,e=t.width,r=t.height;return Ge(e)||(e=this.el.clientWidth),Ge(r)||(r=this.el.clientHeight),{width:e,height:r}},setDimensions:function(t,e){let{options:r}=this,{width:n,height:i}=r,o=t===void 0?n:t,s=e===void 0?i:e;if(n===o&&i===s)return;r.width=o,r.height=s,this._setDimensions();let a=this.getComputedSize();this.trigger("resize",a.width,a.height)},_setDimensions:function(){let{options:t}=this,e=t.width,r=t.height;Ge(e)&&(e=Math.round(e)),Ge(r)&&(r=Math.round(r)),this.$el.css({width:e===null?"":e,height:r===null?"":r})},setOrigin:function(t,e){return this.translate(t||0,e||0)},fitToContent:function(t,e,r,n){Gt(t)?n=t:n=At({gridWidth:t,gridHeight:e,padding:r},n);let{x:i,y:o,width:s,height:a}=this.getFitToContentArea(n),{sx:u,sy:h}=this.scale();return this.setOrigin(-i*u,-o*h),this.setDimensions(s*u,a*h),new ft(i,o,s,a)},getFitToContentArea:function(t={}){let e=t.gridWidth||1,r=t.gridHeight||1,n=fr(t.padding||0),i=Math.max(t.minWidth||0,e),o=Math.max(t.minHeight||0,r),s=t.maxWidth||Number.MAX_VALUE,a=t.maxHeight||Number.MAX_VALUE,u=t.allowNewOrigin,h="contentArea"in t?new ft(t.contentArea):this.getContentArea(t),{sx:d,sy:f}=this.scale();h.x*=d,h.y*=f,h.width*=d,h.height*=f;let I=Math.ceil((h.width+h.x)/e),A=Math.ceil((h.height+h.y)/r);t.allowNegativeBottomRight||(I=Math.max(I,1),A=Math.max(A,1)),I*=e,A*=r;let b=0;(u==="negative"&&h.x<0||u==="positive"&&h.x>=0||u==="any")&&(b=Math.ceil(-h.x/e)*e,b+=n.left,I+=b);let S=0;return(u==="negative"&&h.y<0||u==="positive"&&h.y>=0||u==="any")&&(S=Math.ceil(-h.y/r)*r,S+=n.top,A+=S),I+=n.right,A+=n.bottom,I=Math.max(I,i),A=Math.max(A,o),I=Math.min(I,s),A=Math.min(A,a),new ft(-b/d,-S/f,I/d,A/f)},transformToFitContent:function(t){t||(t={});let e,r;if("contentArea"in t){let P=t.contentArea;e=this.localToPaperRect(P),r=new z(P)}else e=this.getContentBBox(t),r=this.paperToLocalPoint(e);if(!e.width||!e.height)return;Ve(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});let n=fr(t.padding),i=t.minScaleX||t.minScale,o=t.maxScaleX||t.maxScale,s=t.minScaleY||t.minScale,a=t.maxScaleY||t.maxScale,u;if(t.fittingBBox)u=t.fittingBBox;else{let P=this.translate(),E=this.getComputedSize();u={x:P.tx,y:P.ty,width:E.width,height:E.height}}u=new ft(u).moveAndExpand({x:n.left,y:n.top,width:-n.left-n.right,height:-n.top-n.bottom});let h=this.scale(),d=u.width/e.width*h.sx,f=u.height/e.height*h.sy;if(t.preserveAspectRatio&&(d=f=Math.min(d,f)),t.scaleGrid){let P=t.scaleGrid;d=P*Math.floor(d/P),f=P*Math.floor(f/P)}d=Math.min(o,Math.max(i,d)),f=Math.min(a,Math.max(s,f));let I={x:d/h.sx,y:f/h.sy},A=this.options.origin,b=u.x-r.x*d-A.x,S=u.y-r.y*f-A.y;switch(t.verticalAlign){case"middle":S=S+(u.height-e.height*I.y)/2;break;case"bottom":S=S+(u.height-e.height*I.y);break;case"top":default:break}switch(t.horizontalAlign){case"middle":b=b+(u.width-e.width*I.x)/2;break;case"right":b=b+(u.width-e.width*I.x);break;case"left":default:break}this.scale(d,f),this.translate(b,S)},scaleContentToFit:function(t){this.transformToFitContent(t)},getContentArea:function(t){return t&&t.useModelGeometry?this.model.getBBox()||new ft:X(this.cells).getBBox()},getContentBBox:function(t){return this.localToPaperRect(this.getContentArea(t))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...t){let{restrictTranslate:e}=this.options,r;return Vt(e)?r=e.apply(this,t):e===!0?r=this.getArea():e?r=new ft(e):r=null,r},createViewForModel:function(t){let{options:e}=this;var r,n,i=e.cellViewNamespace,o=t.get("type")+"View",s=hn(i,o,".");t.isLink()?(r=e.linkView,n=Pi):(r=e.elementView,n=Se);var a=r.prototype instanceof w0.default.View?s||r:r.call(this,t)||s||n;return new a({model:t,interactive:e.interactive,labelsLayer:e.labelsLayer===!0?yr.LABELS:e.labelsLayer})},removeView:function(t){let{id:e}=t,{_views:r,_updates:n}=this,i=r[e];if(i){var{cid:o}=i;let{mounted:s,unmounted:a}=n;i.remove(),delete r[e],delete s[o],delete a[o]}return i},renderView:function(t,e){let{id:r}=t,n=this._views,i,o,s=!0;return r in n&&(i=n[r],i.model===t?(o=i.FLAG_INSERT,s=!1):this.removeView(t)),s&&(i=n[r]=this.createViewForModel(t),i.paper=this,o=this.registerUnmountedView(i)|this.FLAG_INIT|i.getFlag(ue(i,"initFlag"))),this.requestViewUpdate(i,o,i.UPDATE_PRIORITY,e),i},onImageDragStart:function(){return!1},resetViews:function(t,e){e||(e={}),t||(t=[]),this._resetUpdates(),this.removeViews();let r=this.options.autoFreeze?null:"reset";this.freeze({key:r});for(var n=0,i=t.length;n<i;n++)this.renderView(t[n],e);this.unfreeze({key:r}),this.sortViews()},removeViews:function(){er(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen()){this._updates.sort=!0;return}this.sortViewsExact()}},sortViewsExact:function(){var t=(0,Ur.default)(this.cells).children("[model-id]"),e=this.model.get("cells");Sh(t,function(r,n){var i=e.get(r.getAttribute("model-id")),o=e.get(n.getAttribute("model-id")),s=i.attributes.z||0,a=o.attributes.z||0;return s===a?0:s<a?-1:1})},insertView:function(t,e){let r=this.getLayerView(yr.CELLS),{el:n,model:i}=t;switch(this.options.sorting){case Bo.APPROX:r.insertSortedNode(n,i.get("z"));break;case Bo.EXACT:default:r.insertNode(n);break}t.onMount(e)},detachView(t){t.unmount(),t.onDetach()},scale:function(t,e,r,n){if(t===void 0)return X.matrixToScale(this.matrix());e===void 0&&(e=t),r===void 0&&(r=0,n=0);var i=this.translate();if(r||n||i.tx||i.ty){var o=i.tx-r*(t-1),s=i.ty-n*(e-1);this.translate(o,s)}t=Math.max(t||0,this.MIN_SCALE),e=Math.max(e||0,this.MIN_SCALE);var a=this.matrix();return a.a=t,a.d=e,this.matrix(a),this.trigger("scale",t,e,r,n),this},rotate:function(t,e,r){if(t===void 0)return X.matrixToRotate(this.matrix());if(e===void 0){var n=this.cells.getBBox();e=n.width/2,r=n.height/2}var i=this.matrix().translate(e,r).rotate(t).translate(-e,-r);return this.matrix(i),this},translate:function(t,e){if(t===void 0)return X.matrixToTranslate(this.matrix());let{options:r}=this,{origin:n,drawGrid:i}=r;t||(t=0),e||(e=0);let o=this.matrix();if(o.e===t&&o.f===e)return this;o.e=t,o.f=e,this.matrix(o);let{tx:s,ty:a}=this.translate();return n.x=s,n.y=a,this.trigger("translate",s,a),i&&this.drawGrid(),this},findView:function(t){var e=Te(t)?this.cells.querySelector(t):t instanceof Ur.default?t[0]:t,r=this.findAttribute("model-id",e);if(r)return this._views[r]},findViewByModel:function(t){var e=Te(t)||Ge(t)?t:t&&t.id;return this._views[e]},findViewsFromPoint:function(t){t=new z(t);var e=this.model.getElements().map(this.findViewByModel,this);return e.filter(function(r){return r&&r.vel.getBBox({target:this.cells}).containsPoint(t)},this)},findViewsInArea:function(t,e){e=Ve(e||{},{strict:!1}),t=new ft(t);var r=this.model.getElements().map(this.findViewByModel,this),n=e.strict?"containsRect":"intersect";return r.filter(function(i){return i&&t[n](i.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(t,...e){typeof t=="string"&&this.trigger("tools:event",t,...e)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,e){return this.clientToLocalPoint(t,e).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,e){var r=new z(t,e),n=X.transformPoint(r,this.matrix());return n},localToPaperRect:function(t,e,r,n){var i=new ft(t,e,r,n),o=X.transformRect(i,this.matrix());return o},paperToLocalPoint:function(t,e){var r=new z(t,e),n=X.transformPoint(r,this.matrix().inverse());return n},paperToLocalRect:function(t,e,r,n){var i=new ft(t,e,r,n),o=X.transformRect(i,this.matrix().inverse());return o},localToClientPoint:function(t,e){var r=new z(t,e),n=X.transformPoint(r,this.clientMatrix());return n},localToClientRect:function(t,e,r,n){var i=new ft(t,e,r,n),o=X.transformRect(i,this.clientMatrix());return o},clientToLocalPoint:function(t,e){var r=new z(t,e),n=X.transformPoint(r,this.clientMatrix().inverse());return n},clientToLocalRect:function(t,e,r,n){var i=new ft(t,e,r,n),o=X.transformRect(i,this.clientMatrix().inverse());return o},localToPagePoint:function(t,e){return this.localToPaperPoint(t,e).offset(this.pageOffset())},localToPageRect:function(t,e,r,n){return this.localToPaperRect(t,e,r,n).offset(this.pageOffset())},pageToLocalPoint:function(t,e){var r=new z(t,e),n=r.difference(this.pageOffset());return this.paperToLocalPoint(n)},pageToLocalRect:function(t,e,r,n){var i=this.pageOffset(),o=new ft(t,e,r,n);return o.x-=i.x,o.y-=i.y,this.paperToLocalRect(o)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return new z(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){if(!(t instanceof Pi))throw new Error("Must provide a linkView.");var e=t.model,r=this.options,n=this.model,i=n.constructor.validations;return!(!r.multiLinks&&!i.multiLinks.call(this,n,e)||!r.linkPinning&&!i.linkPinning.call(this,n,e)||typeof r.allowLink=="function"&&!r.allowLink.call(this,t,this))},getDefaultLink:function(t,e){return Vt(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(t={}){let{highlighter:e,type:r}=t,{highlighting:n,highlighterNamespace:i}=this.options;if(e===void 0){if(!n||r&&(e=n[r],e===!1))return!1;e||(e=n.default)}if(!e)return!1;Te(e)&&(e={name:e});let o=e.name,s=i[o];if(!s)throw new Error('Unknown highlighter ("'+o+'")');if(typeof s.highlight!="function")throw new Error('Highlighter ("'+o+'") is missing required highlight() method');if(typeof s.unhighlight!="function")throw new Error('Highlighter ("'+o+'") is missing required unhighlight() method');return{highlighter:s,options:e.options||{},name:o}},onCellHighlight:function(t,e,r){let n=this.resolveHighlighter(r);if(!n)return;let{highlighter:i,options:o}=n;i.highlight(t,e,o)},onCellUnhighlight:function(t,e,r){let n=this.resolveHighlighter(r);if(!n)return;let{highlighter:i,options:o}=n;i.unhighlight(t,e,o)},pointerdblclick:function(t){t.preventDefault(),t=Jt(t);var e=this.findView(t.target);if(!this.guard(t,e)){var r=this.snapToGrid(t.clientX,t.clientY);e?e.pointerdblclick(t,r.x,r.y):this.trigger("blank:pointerdblclick",t,r.x,r.y)}},pointerclick:function(t){var e=this.eventData(t);if(e.mousemoved<=this.options.clickThreshold){t=Jt(t);var r=this.findView(t.target);if(this.guard(t,r))return;var n=this.snapToGrid(t.clientX,t.clientY);r?r.pointerclick(t,n.x,n.y):this.trigger("blank:pointerclick",t,n.x,n.y)}},contextmenu:function(t){if(this.options.preventContextMenu&&t.preventDefault(),this.contextMenuFired){this.contextMenuFired=!1;return}t=Jt(t),this.contextMenuTrigger(t)},contextMenuTrigger:function(t){var e=this.findView(t.target);if(!this.guard(t,e)){var r=this.snapToGrid(t.clientX,t.clientY);e?e.contextmenu(t,r.x,r.y):this.trigger("blank:contextmenu",t,r.x,r.y)}},pointerdown:function(t){t=Jt(t);let{target:e,button:r}=t,n=this.findView(e),i=r===2;if(n){if(!i&&this.guard(t,n))return;let o=this.FORM_CONTROL_TAG_NAMES.includes(e.tagName);this.options.preventDefaultViewAction&&!o&&t.preventDefault(),o&&n.preventDefaultInteraction(t);let s=this.customEventTrigger(t,n);if(s){if(s.isPropagationStopped())return;t.data=s.data}let a=e.closest("[magnet]");if(a&&n.el!==a&&n.el.contains(a)){let u=Jt(Ur.default.Event(t.originalEvent,{data:t.data,currentTarget:a}));if(this.onmagnet(u),u.isDefaultPrevented()&&t.preventDefault(),u.isPropagationStopped()){if(i)return;this.delegateDragEvents(n,u.data);return}t.data=u.data}}if(i){this.contextMenuFired=!0;let o=Ur.default.Event(t.originalEvent,{type:"contextmenu",data:t.data});this.contextMenuTrigger(o)}else{let o=this.snapToGrid(t.clientX,t.clientY);n?n.pointerdown(t,o.x,o.y):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,o.x,o.y)),this.delegateDragEvents(n,t.data)}},pointermove:function(t){var e=this.eventData(t);e.mousemoved||(e.mousemoved=0,this.undelegateEvents());var r=++e.mousemoved;if(!(r<=this.options.moveThreshold)){t=Jt(t);var n=this.snapToGrid(t.clientX,t.clientY),i=e.sourceView;i?i.pointermove(t,n.x,n.y):this.trigger("blank:pointermove",t,n.x,n.y),this.eventData(t,e)}},pointerup:function(t){this.undelegateDocumentEvents();var e=Jt(t),r=this.snapToGrid(e.clientX,e.clientY),n=this.eventData(t).sourceView;n?n.pointerup(e,r.x,r.y):this.trigger("blank:pointerup",e,r.x,r.y),e.isPropagationStopped()||this.pointerclick(Ur.default.Event(t.originalEvent,{type:"click",data:t.data})),this.delegateEvents()},mouseover:function(t){t=Jt(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseover(t);else{if(this.el===t.target)return;this.trigger("blank:mouseover",t)}},mouseout:function(t){t=Jt(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseout(t);else{if(this.el===t.target)return;this.trigger("blank:mouseout",t)}},mouseenter:function(t){t=Jt(t);let{target:e,relatedTarget:r,currentTarget:n}=t,i=this.findView(e);if(this.guard(t,i))return;let o=this.findView(r);i&&(o===i||(i.mouseenter(t),this.el.contains(r)))||o||n===this.el&&this.trigger("paper:mouseenter",t)},mouseleave:function(t){t=Jt(t);let{target:e,relatedTarget:r,currentTarget:n}=t,i=this.findView(e);if(this.guard(t,i))return;let o=this.findView(r);i&&(o===i||(i.mouseleave(t),this.el.contains(r)))||o||n===this.el&&this.trigger("paper:mouseleave",t)},_processMouseWheelEvtBuf:Jl(function(){let{event:t,deltas:e}=this._mw_evt_buffer,r=e.reduce((s,a)=>s+Mh(a,xw),0),n=Math.pow(.995,r),{x:i,y:o}=this.clientToLocalPoint(t.clientX,t.clientY);this.trigger("paper:pinch",t,i,o,n),this._mw_evt_buffer={event:null,deltas:[]}},y0,{maxWait:y0}),mousewheel:function(t){t=Jt(t);let e=this.findView(t.target);if(this.guard(t,e))return;let r=t.originalEvent,n=this.snapToGrid(r.clientX,r.clientY),{deltaX:i,deltaY:o}=Nh(r),s=this._events["paper:pinch"];if(t.ctrlKey&&s&&s.length>0)r.preventDefault(),this._mw_evt_buffer.event=r,this._mw_evt_buffer.deltas.push(o),this._processMouseWheelEvtBuf();else{let a=Math.max(-1,Math.min(1,r.wheelDelta));e?e.mousewheel(t,n.x,n.y,a):this.trigger("blank:mousewheel",t,n.x,n.y,a),this.trigger("paper:pan",t,i,o)}},onevent:function(t){var e=t.currentTarget,r=e.getAttribute("event");if(r){var n=this.findView(e);if(n){if(t=Jt(t),this.guard(t,n))return;var i=this.snapToGrid(t.clientX,t.clientY);n.onevent(t,r,i.x,i.y)}}},magnetEvent:function(t,e){var r=t.currentTarget,n=r.getAttribute("magnet");if(n){var i=this.findView(r);if(i){if(t=Jt(t),this.guard(t,i))return;var o=this.snapToGrid(t.clientX,t.clientY);e.call(this,i,t,r,o.x,o.y)}}},onmagnet:function(t){if(t.button===2){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;let e=Ur.default.Event(t.originalEvent,{type:"contextmenu",data:t.data,currentTarget:t.currentTarget});this.magnetContextMenuTrigger(e),e.isPropagationStopped()&&t.stopPropagation()}else this.magnetEvent(t,function(e,r,n,i,o){e.onmagnet(r,i,o)})},magnetpointerdblclick:function(t){this.magnetEvent(t,function(e,r,n,i,o){e.magnetpointerdblclick(r,n,i,o)})},magnetcontextmenu:function(t){if(this.options.preventContextMenu&&t.preventDefault(),this.magnetContextMenuFired){this.magnetContextMenuFired=!1;return}this.magnetContextMenuTrigger(t)},magnetContextMenuTrigger:function(t){this.magnetEvent(t,function(e,r,n,i,o){e.magnetcontextmenu(r,n,i,o)})},onlabel:function(t){var e=t.currentTarget,r=this.findView(e);if(!r||(t=Jt(t),this.guard(t,r)))return;let n=this.customEventTrigger(t,r,e);if(n){if(n.isPropagationStopped())return;t.data=n.data}var i=this.snapToGrid(t.clientX,t.clientY);r.onlabel(t,i.x,i.y)},getPointerArgs(t){let e=Jt(t),{x:r,y:n}=this.snapToGrid(e.clientX,e.clientY);return[e,r,n]},delegateDragEvents:function(t,e){e||(e={}),this.eventData({data:e},{sourceView:t||null,mousemoved:0}),this.delegateDocumentEvents(null,e)},guard:function(t,e){if(t.type==="mousedown"&&t.button===2||this.options.guard&&this.options.guard(t,e))return!0;if(t.data&&t.data.guarded!==void 0)return t.data.guarded;let{target:r}=t;return this.GUARDED_TAG_NAMES.includes(r.tagName)?!0:!(e&&e.model&&e.model instanceof hr||this.svg===r||this.el===r||Ur.default.contains(this.svg,r))},setGridSize:function(t){let{options:e}=this;return e.gridSize=t,e.drawGrid&&!e.drawGridSize&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:X("svg",{width:"100%",height:"100%"},X("defs")),patterns:{},add:function(t,e){X(this.root.node.childNodes[0]).append(e),this.patterns[t]=e,this.root.append(X("rect",{width:"100%",height:"100%",fill:"url(#"+t+")"}))},get:function(t){return this.patterns[t]},exist:function(t){return this.patterns[t]!==void 0}}),this._gridCache},setGrid:function(t){this.clearGrid(),this._gridCache=null,this._gridSettings=[];var e=Array.isArray(t)?t:[t||{}];return e.forEach(function(r){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(r))},this),this},_resolveDrawGridOption:function(t){var e=this.constructor.gridPatterns;if(Te(t)&&Array.isArray(e[t]))return e[t].map(function(u){return At({},u)});var r=t||{args:[{}]},n=Array.isArray(r),i=r.name;if(!n&&!i&&!r.markup&&(i="dot"),i&&Array.isArray(e[i])){var o=e[i].map(function(u){return At({},u)}),s=Array.isArray(r.args)?r.args:[r.args||{}];Ve(s[0],Ar(t,"args"));for(var a=0;a<s.length;a++)o[a]&&At(o[a],s[a]);return o}return n?r:[r]},drawGrid:function(t){let e=this.options.drawGridSize||this.options.gridSize;if(e<=1)return this.clearGrid();var r=Array.isArray(t)?t:[t],n=this.matrix(),i=this._getGridRefs();this._gridSettings.forEach(function(s,a){var u="pattern_"+a,h=Ie(s,r[a],{sx:n.a||1,sy:n.d||1,ox:n.e||0,oy:n.f||0});h.width=e*(n.a||1)*(h.scaleFactor||1),h.height=e*(n.d||1)*(h.scaleFactor||1),i.exist(u)||i.add(u,X("pattern",{id:u,patternUnits:"userSpaceOnUse"},X(h.markup)));var d=i.get(u);Vt(h.update)&&h.update(d.node.childNodes[0],h);var f=h.ox%h.width;f<0&&(f+=h.width);var I=h.oy%h.height;I<0&&(I+=h.height),d.attr({x:f,y:I,width:h.width,height:h.height})});var o=new XMLSerializer().serializeToString(i.root.node);return o="url(data:image/svg+xml;base64,"+btoa(o)+")",this.$grid.css("backgroundImage",o),this},updateBackgroundImage:function(t){t=t||{};var e=t.position||"center",r=t.size||"auto auto",n=this.scale(),i=this.translate();if(Gt(e)){var o=i.tx+n.sx*(e.x||0),s=i.ty+n.sy*(e.y||0);e=o+"px "+s+"px"}Gt(r)&&(r=new ft(r).scale(n.sx,n.sy),r=r.width+"px "+r.height+"px"),this.$background.css({backgroundSize:r,backgroundPosition:e})},drawBackgroundImage:function(t,e){if(!(t instanceof HTMLImageElement)){this.$background.css("backgroundImage","");return}if(!(!this._background||this._background.id!==e.id)){e=e||{};var r,n=e.size,i=e.repeat||"no-repeat",o=e.opacity||1,s=Math.abs(e.quality)||1,a=this.constructor.backgroundPatterns[ql(i)];if(Vt(a)){t.width*=s,t.height*=s;var u=a(t,e);if(!(u instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");r=u.toDataURL("image/png"),i="repeat",Gt(n)?(n.width*=u.width/t.width,n.height*=u.height/t.height):n===void 0&&(e.size={width:u.width/s,height:u.height/s})}else r=t.src,n===void 0&&(e.size={width:t.width,height:t.height});this.$background.css({opacity:o,backgroundRepeat:i,backgroundImage:"url("+r+")"}),this.updateBackgroundImage(e)}},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(t=t||{},this.updateBackgroundColor(t.color),t.image){t=this._background=Be(t),Nn(t);var e=document.createElement("img");e.onload=this.drawBackgroundImage.bind(this,e,t),e.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,er(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!Gt(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var e=t.id,r=t.name;if(e||(e=r+this.svg.id+wo(JSON.stringify(t))),!this.isDefined(e)){var n=Dh,i=n[r]&&n[r](t.args||{});if(!i)throw new Error("Non-existing filter "+r);var o=At({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},t.attrs,{id:e});X(i,o).appendTo(this.defs)}return e},defineGradient:function(t){if(!Gt(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");let{svg:e,defs:r}=this,{type:n,id:i=n+e.id+wo(JSON.stringify(t)),stops:o,attrs:s={}}=t;if(this.isDefined(i))return i;let a=Dt(o).map(({offset:h,color:d,opacity:f})=>X("stop").attr({offset:h,"stop-color":d,"stop-opacity":Number.isFinite(f)?f:1})),u=X(n,s,a);return u.id=i,u.appendTo(r),i},definePattern:function(t){if(!Gt(t))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");let{svg:e,defs:r}=this,{id:n=e.id+wo(JSON.stringify(t)),markup:i,attrs:o={}}=t;if(!i)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(n))return n;let s=X("pattern",{patternUnits:"userSpaceOnUse"});if(s.id=n,s.attr(o),typeof i=="string")s.append(X(i));else{let{fragment:a}=_n(i);s.append(a)}return s.appendTo(r),n},defineMarker:function(t){if(!Gt(t))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");let{svg:e,defs:r}=this,{id:n=e.id+wo(JSON.stringify(t)),markup:i,attrs:o={},markerUnits:s="userSpaceOnUse"}=t;if(this.isDefined(n))return n;let a=X("marker",{orient:"auto",overflow:"visible",markerUnits:s});a.id=n,a.attr(o);let u;if(i){let f;if(typeof i=="string")f=X(i),f=Array.isArray(f)?f:[f];else{let{fragment:I}=_n(i);f=X(I).children()}f.length>1?u=X("g").append(f):u=f[0]}else{let{type:f="path"}=t;u=X(f)}let h=Ar(t,"type","id","markup","attrs","markerUnits");return Object.keys(h).forEach(f=>{let I=h[f],A=u.attr(f);if(A==null)u.attr(f,I);else switch(f){case"transform":u.attr(f,I+" "+A);break}}),u.appendTo(a),a.appendTo(r),n},customEventTrigger:function(t,e,r=e.el){let n=t.target.closest("[event]");if(n&&r!==n&&e.el.contains(n)){let i=Jt(Ur.default.Event(t.originalEvent,{data:t.data,currentTarget:n}));return this.onevent(i),i.isDefaultPrevented()&&t.preventDefault(),i}return null}},{sorting:Bo,Layers:yr,backgroundPatterns:{flipXy:function(t){var e=document.createElement("canvas"),r=t.width,n=t.height;e.width=2*r,e.height=2*n;var i=e.getContext("2d");return i.drawImage(t,0,0,r,n),i.setTransform(-1,0,0,-1,e.width,e.height),i.drawImage(t,0,0,r,n),i.setTransform(-1,0,0,1,e.width,0),i.drawImage(t,0,0,r,n),i.setTransform(1,0,0,-1,0,e.height),i.drawImage(t,0,0,r,n),e},flipX:function(t){var e=document.createElement("canvas"),r=t.width,n=t.height;e.width=r*2,e.height=n;var i=e.getContext("2d");return i.drawImage(t,0,0,r,n),i.translate(2*r,0),i.scale(-1,1),i.drawImage(t,0,0,r,n),e},flipY:function(t){var e=document.createElement("canvas"),r=t.width,n=t.height;e.width=r,e.height=n*2;var i=e.getContext("2d");return i.drawImage(t,0,0,r,n),i.translate(0,2*n),i.scale(1,-1),i.drawImage(t,0,0,r,n),e},watermark:function(t,e){e=e||{};var r=t.width,n=t.height,i=document.createElement("canvas");i.width=r*3,i.height=n*3;for(var o=i.getContext("2d"),s=Ge(e.watermarkAngle)?-e.watermarkAngle:-20,a=Oe(s),u=i.width/4,h=i.height/4,d=0;d<4;d++)for(var f=0;f<4;f++)(d+f)%2>0&&(o.setTransform(1,0,0,1,(2*d-1)*u,(2*f-1)*h),o.rotate(a),o.drawImage(t,-r/2,-n/2,r,n));return i}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){X(t).attr({width:e.thickness*e.sx,height:e.thickness*e.sy,fill:e.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(t,e){var r=e.sx<=1?e.thickness*e.sx:e.thickness;X(t).attr({width:r,height:r,fill:e.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var r,n=e.width,i=e.height,o=e.thickness;n-o>=0&&i-o>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",X(t).attr({d:r,stroke:e.color,"stroke-width":e.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(t,e){var r,n=e.width,i=e.height,o=e.thickness;n-o>=0&&i-o>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",X(t).attr({d:r,stroke:e.color,"stroke-width":e.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(t,e){var r,n=e.width,i=e.height,o=e.thickness;n-o>=0&&i-o>=0?r=["M",n,0,"H0 M0 0 V0",i].join(" "):r="M 0 0 0 0",X(t).attr({d:r,stroke:e.color,"stroke-width":e.thickness})}}]}});var or=_e.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,init:function(){var t=this.name;t&&this.vel.attr("data-tool-name",t)},configure:function(t,e){return this.relatedView=t,this.paper=t.paper,this.parentView=e,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(t){t&&t.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},show:function(){this.el.style.display="",this._visible=!0},hide:function(){this.el.style.display="none",this._visible=!1},isVisible:function(){return!!this._visible},focus:function(){var t=this.options.focusOpacity;isFinite(t)&&(this.el.style.opacity=t),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(t){let{paper:e,relatedView:r}=this;return!e||!r?!0:e.guard(t,r)}});var Mw=_e.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null},configure:function(t){t=At(this.options,t);var e=t.tools;if(!Array.isArray(e))return this;var r=t.relatedView;if(!(r instanceof Wt))return this;for(var n=this.tools=[],i=0,o=e.length;i<o;i++){var s=e[i];s instanceof or&&(s.configure(r,this),this.vel.append(s.el),n.push(s))}return this.isRendered=!1,r.requestUpdate(r.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(t){t||(t={});var e=this.tools;if(!e)return this;for(var r=this.isRendered,n=0,i=e.length;n<i;n++){var o=e[n];r?t.tool!==o.cid&&o.isVisible()&&o.update():o.render()}return this.isMounted()||this.mount(),r||(this.blurTool(),this.isRendered=!0),this},focusTool:function(t){var e=this.tools;if(!e)return this;for(var r=0,n=e.length;r<n;r++){var i=e[r];t===i?i.show():i.hide()}return this},blurTool:function(t){var e=this.tools;if(!e)return this;for(var r=0,n=e.length;r<n;r++){var i=e[r];i!==t&&!i.isVisible()&&(i.show(),i.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var t=this.tools;if(!t)return this;for(var e=0,r=t.length;e<r;e++)t[e].remove();this.tools=null},mount:function(){let{options:t,el:e}=this,{relatedView:r,layer:n=yr.TOOLS,z:i}=t;return r&&(n?r.paper.getLayerView(n).insertSortedNode(e,i):r.el.appendChild(e)),this}});var ra={};Ae(ra,{basic:()=>ed,chess:()=>ud,devs:()=>od,erd:()=>cd,fsa:()=>fd,logic:()=>ld,org:()=>hd,pn:()=>dd,standard:()=>nd,uml:()=>md});var ed={};Ae(ed,{Circle:()=>ta,Ellipse:()=>Dw,Generic:()=>Ut,Image:()=>Ew,Path:()=>b0,Polygon:()=>Lw,Polyline:()=>kw,Rect:()=>Tw,Rhombus:()=>zw,Text:()=>Pw,TextBlock:()=>Ow,TextBlockView:()=>Bw,TextView:()=>Sw});var $s={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return this._tests[t]=e},test:function(t){var e=this._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var r=this._results[t];if(typeof r!="undefined")return r;try{r=e()}catch(n){r=!1}return this._results[t]=r,r}};var Ut=fe.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}}),Tw=Ut.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'}),Sw=Se.extend({presentationAttributes:Se.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var t=Se.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"SCALE")&&(this.resize(),t=this.removeFlag(t,"SCALE")),t}}),Pw=Ut.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'}),ta=Ut.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'}),Dw=Ut.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'}),Lw=Ut.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),kw=Ut.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'}),Ew=Ut.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'}),b0=Ut.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'}),zw=b0.define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}}),bu=$s.test("svgforeignobject"),Ow=Ut.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',bu?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),Ut.prototype.initialize.apply(this,arguments)},updateSize:function(t,e){this.attr({".fobj":At({},e),div:{style:At({},e)}})},updateContent:function(t,e){bu?this.attr({".content":{html:Th(e)}}):this.attr({".content":{text:e}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}}),Bw=Se.extend({presentationAttributes:bu?Se.prototype.presentationAttributes:Se.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var t=Se.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(t,"CONTENT")&&(this.updateContent(this.model),t=this.removeFlag(t,"CONTENT")),t},update:function(t,e){var r=this.model;if(bu)Se.prototype.update.call(this,r,e);else{var n=Ar(e||r.get("attrs"),".content");Se.prototype.update.call(this,r,n),(!e||cr(e,".content"))&&this.updateContent(r,e)}},updateContent:function(t,e){var r=Ie({},(e||t.get("attrs"))[".content"]);r=Ar(r,"text");var n=js(t.get("content"),t.get("size"),r,{svgDocument:this.paper.svg}),i=bo({},".content",r,"/");i[".content"].text=n,Se.prototype.update.call(this,t,i)}});var nd={};Ae(nd,{BorderedImage:()=>Vw,Circle:()=>Gw,Cylinder:()=>Hw,DoubleLink:()=>tb,Ellipse:()=>Zw,EmbeddedImage:()=>Uw,HeaderedRectangle:()=>Xw,Image:()=>Fw,InscribedImage:()=>_w,Link:()=>$w,Path:()=>jw,Polygon:()=>Ww,Polyline:()=>Yw,Rectangle:()=>Rw,ShadowLink:()=>eb,TextBlock:()=>qw});var Rw=fe.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),Gw=fe.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),Zw=fe.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),jw=fe.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Ww=fe.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Yw=fe.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),Fw=fe.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Vw=fe.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Uw=fe.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),_w=fe.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Xw=fe.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),rd=10,Hw=fe.define("standard.Cylinder",{attrs:{body:{lateralArea:rd,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:rd,refRx:"50%",ry:rd,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(t,e){if(t===void 0)return this.attr("body/lateralArea");var r=ye(t),n={lateralArea:t},i=r?{refCy:t,refRy:t,cy:null,ry:null}:{refCy:null,refRy:null,cy:t,ry:t};return this.attr({body:n,top:i},e)}},{attributes:{lateralArea:{set:function(t,e){var r=ye(t);r&&(t=parseFloat(t)/100);var n=e.x,i=e.y,o=e.width,s=e.height,a=o/2,u=r?s*t:t,h=X.KAPPA,d=h*a,f=h*(r?s*t:t),I=n,A=n+o/2,b=n+o,S=i+u,P=S-u,E=i+s-u,j=i+s,U=["M",I,S,"L",I,E,"C",n,E+f,A-d,j,A,j,"C",A+d,j,b,E+f,b,E,"L",b,S,"C",b,S-f,A+d,P,A,P,"C",A-d,P,I,S-f,I,S,"Z"];return{d:U.join(" ")}}}}}),Jw={tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]},Qw={tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},Kw=$s.test("svgforeignobject")?Jw:Qw,qw=fe.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Kw]},{attributes:{text:{set:function(t,e,r,n){if(r instanceof HTMLElement)r.textContent=t;else{var i=n.style||{},o={text:t,width:-5,height:"100%"},s=At({textVerticalAnchor:"middle"},i);return Vs.textWrap.set.call(this,o,e,r,s),{fill:i.color||null}}},position:function(t,e,r){if(r instanceof SVGElement)return e.center()}}}}),$w=ce.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),tb=ce.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none",cursor:"pointer"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),eb=ce.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none","pointer-events":"none"}},{tagName:"path",selector:"line",attributes:{fill:"none",cursor:"pointer"}}]});var od={};Ae(od,{Atomic:()=>rb,Coupled:()=>nb,Link:()=>ib,Model:()=>id});var id=Ut.define("devs.Model",{inPorts:[],outPorts:[],size:{width:80,height:80},attrs:{".":{magnet:!1},".label":{text:"Model","ref-x":.5,"ref-y":10,"font-size":18,"text-anchor":"middle",fill:"#000"},".body":{"ref-width":"100%","ref-height":"100%",stroke:"#000"}},ports:{groups:{in:{position:{name:"left"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"left",args:{y:10}}}},out:{position:{name:"right"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"right",args:{y:10}}}}}}},{markup:'<g class="rotatable"><rect class="body"/><text class="label"/></g>',portMarkup:'<circle class="port-body"/>',portLabelMarkup:'<text class="port-label"/>',initialize:function(){Ut.prototype.initialize.apply(this,arguments),this.on("change:inPorts change:outPorts",this.updatePortItems,this),this.updatePortItems()},updatePortItems:function(t,e,r){var n=kr(this.get("inPorts")),i=xo(kr(this.get("outPorts")),n),o=this.createPortItems("in",n),s=this.createPortItems("out",i);this.prop("ports/items",o.concat(s),At({rewrite:!0},r))},createPortItem:function(t,e){return{id:e,group:t,attrs:{".port-label":{text:e}}}},createPortItems:function(t,e){return Dt(e).map(this.createPortItem.bind(this,t))},_addGroupPort:function(t,e,r){var n=this.get(e);return this.set(e,Array.isArray(n)?n.concat(t):[t],r)},addOutPort:function(t,e){return this._addGroupPort(t,"outPorts",e)},addInPort:function(t,e){return this._addGroupPort(t,"inPorts",e)},_removeGroupPort:function(t,e,r){return this.set(e,bi(this.get(e),t),r)},removeOutPort:function(t,e){return this._removeGroupPort(t,"outPorts",e)},removeInPort:function(t,e){return this._removeGroupPort(t,"inPorts",e)},_changeGroup:function(t,e,r){return this.prop("ports/groups/"+t,Gt(e)?e:{},r)},changeInGroup:function(t,e){return this._changeGroup("in",t,e)},changeOutGroup:function(t,e){return this._changeGroup("out",t,e)}}),rb=id.define("devs.Atomic",{size:{width:80,height:80},attrs:{".label":{text:"Atomic"}}}),nb=id.define("devs.Coupled",{size:{width:200,height:300},attrs:{".label":{text:"Coupled"}}}),ib=ce.define("devs.Link",{attrs:{".connection":{"stroke-width":2}}});var ld={};Ae(ld,{And:()=>cb,Gate:()=>Nu,Gate11:()=>ad,Gate21:()=>Di,IO:()=>sd,Input:()=>ob,Nand:()=>hb,Nor:()=>fb,Not:()=>lb,Or:()=>ub,Output:()=>sb,Repeater:()=>ab,Wire:()=>pb,Xnor:()=>gb,Xor:()=>db});var Nu=Ut.define("logic.Gate",{size:{width:80,height:40},attrs:{".":{magnet:!1},".body":{width:100,height:50},circle:{r:7,stroke:"black",fill:"transparent","stroke-width":2}}},{operation:function(){return!0}}),sd=Nu.define("logic.IO",{size:{width:60,height:30},attrs:{".body":{fill:"white",stroke:"black","stroke-width":2},".wire":{ref:".body","ref-y":.5,stroke:"black"},text:{fill:"black",ref:".body","ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle","font-weight":"bold","font-variant":"small-caps","text-transform":"capitalize","font-size":"14px"}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><path class="wire"/><circle/><text/></g>'}),ob=sd.define("logic.Input",{attrs:{".wire":{"ref-dx":0,d:"M 0 0 L 23 0"},circle:{ref:".body","ref-dx":30,"ref-y":.5,magnet:!0,class:"output",port:"out"},text:{text:"input"}}}),sb=sd.define("logic.Output",{attrs:{".wire":{"ref-x":0,d:"M 0 0 L -23 0"},circle:{ref:".body","ref-x":-30,"ref-y":.5,magnet:"passive",class:"input",port:"in"},text:{text:"output"}}}),ad=Nu.define("logic.Gate11",{attrs:{".input":{ref:".body","ref-x":-2,"ref-y":.5,magnet:"passive",port:"in"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},{markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input"/><circle class="output"/></g>'}),Di=Nu.define("logic.Gate21",{attrs:{".input1":{ref:".body","ref-x":-2,"ref-y":.3,magnet:"passive",port:"in1"},".input2":{ref:".body","ref-x":-2,"ref-y":.7,magnet:"passive",port:"in2"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},{markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input input1"/><circle  class="input input2"/><circle class="output"/></g>'}),ab=ad.define("logic.Repeater",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzIuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo="}}},{operation:function(t){return t}}),lb=ad.define("logic.Not",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzkuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDI2NzEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzYiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA4MCwyNSBBIDQsNCAwIDEgMSA3MiwyNSBBIDQsNCAwIDEgMSA4MCwyNSB6IgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEsMCkiIC8+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t){return!t}}),ub=Di.define("logic.Or",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik9SIEFOU0kuc3ZnIgogICBpbmtzY2FwZTpvdXRwdXRfZXh0ZW5zaW9uPSJvcmcuaW5rc2NhcGUub3V0cHV0LnN2Zy5pbmtzY2FwZSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTAgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjcxNCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iMSA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMC41IDogMC4zMzMzMzMzMyA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODA2IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODE5IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjM3Mi4wNDcyNCA6IDM1MC43ODczOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI3NDQuMDk0NDggOiA1MjYuMTgxMDkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzc3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49Ijc1IDogNDAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTUwIDogNjAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDYwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTMyNzUiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNTAgOiAzMy4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTAwIDogNTAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTU1MzMiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzIgOiAyMS4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNjQgOiAzMiA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMzIgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjU1NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDE2LjY2NjY2NyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDI1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAyNSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNCIKICAgICBpbmtzY2FwZTpjeD0iMTEzLjAwMDM5IgogICAgIGlua3NjYXBlOmN5PSIxMi44OTM3MzEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImcyNTYwIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTpncmlkLWJib3g9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1wb2ludHM9InRydWUiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAwMDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzk5IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijg3NCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMzciCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii00IgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzAsMjUgYyAyMCwwIDI1LDAgMjUsMCIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMSwxNSA1LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzIsMzUgNSwzNSIKICAgICAgIGlkPSJwYXRoMzk0NCIgLz4KICAgIDxnCiAgICAgICBpZD0iZzI1NjAiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjUsLTM5LjUpIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo="}}},{operation:function(t,e){return t||e}}),cb=Di.define("logic.And",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IkFORCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI4IgogICAgIGlua3NjYXBlOmN4PSI1Ni42OTgzNDgiCiAgICAgaW5rc2NhcGU6Y3k9IjI1LjMyNjg5OSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozO21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6Qml0c3RyZWFtIFZlcmEgU2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOkJpdHN0cmVhbSBWZXJhIFNhbnMiCiAgICAgICBkPSJNIDMwLDUgTCAzMCw2LjQyODU3MTQgTCAzMCw0My41NzE0MjkgTCAzMCw0NSBMIDMxLjQyODU3MSw0NSBMIDUwLjQ3NjE5LDQ1IEMgNjEuNzQ0MDk4LDQ1IDcwLjQ3NjE5LDM1Ljk5OTk1NSA3MC40NzYxOSwyNSBDIDcwLjQ3NjE5LDE0LjAwMDA0NSA2MS43NDQwOTksNS4wMDAwMDAyIDUwLjQ3NjE5LDUgQyA1MC40NzYxOSw1IDUwLjQ3NjE5LDUgMzEuNDI4NTcxLDUgTCAzMCw1IHogTSAzMi44NTcxNDMsNy44NTcxNDI5IEMgNDAuODM0MjY0LDcuODU3MTQyOSA0NS45MTgzNjgsNy44NTcxNDI5IDQ4LjA5NTIzOCw3Ljg1NzE0MjkgQyA0OS4yODU3MTQsNy44NTcxNDI5IDQ5Ljg4MDk1Miw3Ljg1NzE0MjkgNTAuMTc4NTcxLDcuODU3MTQyOSBDIDUwLjMyNzM4MSw3Ljg1NzE0MjkgNTAuNDA5MjI3LDcuODU3MTQyOSA1MC40NDY0MjksNy44NTcxNDI5IEMgNTAuNDY1MDI5LDcuODU3MTQyOSA1MC40NzE1NDMsNy44NTcxNDI5IDUwLjQ3NjE5LDcuODU3MTQyOSBDIDYwLjIzNjg1Myw3Ljg1NzE0MyA2Ny4xNDI4NTcsMTUuNDk3MDk4IDY3LjE0Mjg1NywyNSBDIDY3LjE0Mjg1NywzNC41MDI5MDIgNTkuNzYwNjYyLDQyLjE0Mjg1NyA1MCw0Mi4xNDI4NTcgTCAzMi44NTcxNDMsNDIuMTQyODU3IEwgMzIuODU3MTQzLDcuODU3MTQyOSB6IgogICAgICAgaWQ9InBhdGgyODg0IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NzY2NjY3Nzc3NzY2NjIiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return t&&e}}),fb=Di.define("logic.Nor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjEiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjY3NzY0NCIKICAgICBpbmtzY2FwZTpjeT0iMjIuMTAyMzQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjM3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItNCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc5LDI1IEMgOTksMjUgOTUsMjUgOTUsMjUiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgICBpZD0icGF0aDI2MDQiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI3NSIKICAgICAgICAgc29kaXBvZGk6Y3k9IjI1IgogICAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgICAgc29kaXBvZGk6cnk9IjQiCiAgICAgICAgIGQ9Ik0gNzksMjUgQSA0LDQgMCAxIDEgNzEsMjUgQSA0LDQgMCAxIDEgNzksMjUgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjUsMzkuNSkiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t,e){return!(t||e)}}),hb=Di.define("logic.Nand",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5BTkQgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMTYiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjI4MzMwNyIKICAgICBpbmtzY2FwZTpjeT0iMTYuNDQyODQzIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzksMjUgQyA5MS44LDI1IDk1LDI1IDk1LDI1IgogICAgICAgaWQ9InBhdGgzMDU5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMxLDE1IDUsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMiwzNSA1LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmb250LXNpemU6bWVkaXVtO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2RpcmVjdGlvbjpsdHI7YmxvY2stcHJvZ3Jlc3Npb246dGI7d3JpdGluZy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MzttYXJrZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlO2ZvbnQtZmFtaWx5OkJpdHN0cmVhbSBWZXJhIFNhbnM7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpCaXRzdHJlYW0gVmVyYSBTYW5zIgogICAgICAgZD0iTSAzMCw1IEwgMzAsNi40Mjg1NzE0IEwgMzAsNDMuNTcxNDI5IEwgMzAsNDUgTCAzMS40Mjg1NzEsNDUgTCA1MC40NzYxOSw0NSBDIDYxLjc0NDA5OCw0NSA3MC40NzYxOSwzNS45OTk5NTUgNzAuNDc2MTksMjUgQyA3MC40NzYxOSwxNC4wMDAwNDUgNjEuNzQ0MDk5LDUuMDAwMDAwMiA1MC40NzYxOSw1IEMgNTAuNDc2MTksNSA1MC40NzYxOSw1IDMxLjQyODU3MSw1IEwgMzAsNSB6IE0gMzIuODU3MTQzLDcuODU3MTQyOSBDIDQwLjgzNDI2NCw3Ljg1NzE0MjkgNDUuOTE4MzY4LDcuODU3MTQyOSA0OC4wOTUyMzgsNy44NTcxNDI5IEMgNDkuMjg1NzE0LDcuODU3MTQyOSA0OS44ODA5NTIsNy44NTcxNDI5IDUwLjE3ODU3MSw3Ljg1NzE0MjkgQyA1MC4zMjczODEsNy44NTcxNDI5IDUwLjQwOTIyNyw3Ljg1NzE0MjkgNTAuNDQ2NDI5LDcuODU3MTQyOSBDIDUwLjQ2NTAyOSw3Ljg1NzE0MjkgNTAuNDcxNTQzLDcuODU3MTQyOSA1MC40NzYxOSw3Ljg1NzE0MjkgQyA2MC4yMzY4NTMsNy44NTcxNDMgNjcuMTQyODU3LDE1LjQ5NzA5OCA2Ny4xNDI4NTcsMjUgQyA2Ny4xNDI4NTcsMzQuNTAyOTAyIDU5Ljc2MDY2Miw0Mi4xNDI4NTcgNTAsNDIuMTQyODU3IEwgMzIuODU3MTQzLDQyLjE0Mjg1NyBMIDMyLjg1NzE0Myw3Ljg1NzE0MjkgeiIKICAgICAgIGlkPSJwYXRoMjg4NCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2Njc2NjY2Nzc3Nzc2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDQwMDgiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return!(t&&e)}}),db=Di.define("logic.Xor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhPUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjUuNjU2ODU0MiIKICAgICBpbmtzY2FwZTpjeD0iMjUuOTM4MTE2IgogICAgIGlua3NjYXBlOmN5PSIxNy4yMzAwNSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzAuMzg1NzE3LDE1IEwgNC45OTk5OTk4LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5NzY7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEuMzYyMDkxLDM1IEwgNC45OTk5OTk4LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPGcKICAgICAgIGlkPSJnMjU2MCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNSwtMzkuNSkiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDM1MTYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi4yNSw4MS41MDAwMDUgQyAtMy44NDczNzQsODQuMTQ0NDA1IC00LjUsODQuNTAwMDA1IC00LjUsODQuNTAwMDA1IEwgLTguMTU2MjUsODQuNTAwMDA1IEwgLTYuMTU2MjUsODIuMDYyNTA1IEMgLTYuMTU2MjUsODIuMDYyNTA1IC0wLjUsNzUuMDYyNDUxIC0wLjUsNjQuNSBDIC0wLjUsNTMuOTM3NTQ5IC02LjE1NjI1LDQ2LjkzNzUgLTYuMTU2MjUsNDYuOTM3NSBMIC04LjE1NjI1LDQ0LjUgTCAtNC41LDQ0LjUgQyAtMy43MTg3NSw0NS40Mzc1IC0zLjA3ODEyNSw0Ni4xNTYyNSAtMi4yODEyNSw0Ny41IEMgLTAuNDA4NTMxLDUwLjU5OTgxNSAyLjUsNTYuNTI2NjQ2IDIuNSw2NC41IEMgMi41LDcyLjQ1MDY1IC0wLjM5NjY5Nyw3OC4zNzk0MjUgLTIuMjUsODEuNTAwMDA1IHoiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY3NjY2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(t,e){return(!t||e)&&(t||!e)}}),gb=Di.define("logic.Xnor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhOT1IgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNTU3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTYuNjY2NjY3IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDI1IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI0IgogICAgIGlua3NjYXBlOmN4PSI5NS43MjM2NiIKICAgICBpbmtzY2FwZTpjeT0iLTI2Ljc3NTAyMyIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyLjAwMDAwMDI0O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc4LjMzMzMzMiwyNSBDIDkxLjY2NjY2NiwyNSA5NSwyNSA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMC4zODU3MTcsMTUgTCA0Ljk5OTk5OTgsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk3NjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMS4zNjIwOTEsMzUgTCA0Ljk5OTk5OTgsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzUxNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjI1LDgxLjUwMDAwNSBDIC0zLjg0NzM3NCw4NC4xNDQ0MDUgLTQuNSw4NC41MDAwMDUgLTQuNSw4NC41MDAwMDUgTCAtOC4xNTYyNSw4NC41MDAwMDUgTCAtNi4xNTYyNSw4Mi4wNjI1MDUgQyAtNi4xNTYyNSw4Mi4wNjI1MDUgLTAuNSw3NS4wNjI0NTEgLTAuNSw2NC41IEMgLTAuNSw1My45Mzc1NDkgLTYuMTU2MjUsNDYuOTM3NSAtNi4xNTYyNSw0Ni45Mzc1IEwgLTguMTU2MjUsNDQuNSBMIC00LjUsNDQuNSBDIC0zLjcxODc1LDQ1LjQzNzUgLTMuMDc4MTI1LDQ2LjE1NjI1IC0yLjI4MTI1LDQ3LjUgQyAtMC40MDg1MzEsNTAuNTk5ODE1IDIuNSw1Ni41MjY2NDYgMi41LDY0LjUgQyAyLjUsNzIuNDUwNjUgLTAuMzk2Njk3LDc4LjM3OTQyNSAtMi4yNSw4MS41MDAwMDUgeiIKICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2Njc2NjY2NzYyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDM1NTEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(t,e){return(!t||!e)&&(t||e)}}),pb=ce.define("logic.Wire",{attrs:{".connection":{"stroke-width":2},".marker-vertex":{r:7}},router:{name:"orthogonal"},connector:{name:"rounded",args:{radius:10}}},{arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<circle class="marker-arrowhead" end="<%= end %>" r="7"/>',"</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<g class="marker-vertex-remove-group">','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>","</g>"].join("")});var ud={};Ae(ud,{BishopBlack:()=>wb,BishopWhite:()=>xb,KingBlack:()=>vb,KingWhite:()=>mb,KnightBlack:()=>Nb,KnightWhite:()=>bb,PawnBlack:()=>Tb,PawnWhite:()=>Mb,QueenBlack:()=>Ab,QueenWhite:()=>Ib,RookBlack:()=>Cb,RookWhite:()=>yb});var mb=Ut.define("chess.KingWhite",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;"><path      d="M 22.5,11.63 L 22.5,6"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 20,8 L 25,8"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"      style="fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 11.5,30 C 17,27 27,27 32.5,30"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,37 C 17,34 27,34 32.5,37"      style="fill:none; stroke:#000000;" />  </g></g></g>'}),vb=Ut.define("chess.KingBlack",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path       d="M 22.5,11.63 L 22.5,6"       style="fill:none; stroke:#000000; stroke-linejoin:miter;"       id="path6570" />    <path       d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"       style="fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;" />    <path       d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "       style="fill:#000000; stroke:#000000;" />    <path       d="M 20,8 L 25,8"       style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path       d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37"       style="fill:none; stroke:#ffffff;" />  </g></g></g>'}),Ib=Ut.define("chess.QueenWhite",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(-1,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(15.5,-5.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(32,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(7,-4.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(24,-4)" />    <path      d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 11.5,30 C 15,29 30,29 33.5,30"      style="fill:none;" />    <path      d="M 12,33.5 C 18,32.5 27,32.5 33,33.5"      style="fill:none;" />  </g></g></g>'}),Ab=Ut.define("chess.QueenBlack",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:none;">      <circle cx="6"    cy="12" r="2.75" />      <circle cx="14"   cy="9"  r="2.75" />      <circle cx="22.5" cy="8"  r="2.75" />      <circle cx="31"   cy="9"  r="2.75" />      <circle cx="39"   cy="12" r="2.75" />    </g>    <path       d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"       style="stroke-linecap:butt; stroke:#000000;" />    <path       d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"       style="stroke-linecap:butt;" />    <path       d="M 11,38.5 A 35,35 1 0 0 34,38.5"       style="fill:none; stroke:#000000; stroke-linecap:butt;" />    <path       d="M 11,29 A 35,35 1 0 1 34,29"       style="fill:none; stroke:#ffffff;" />    <path       d="M 12.5,31.5 L 32.5,31.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"       style="fill:none; stroke:#ffffff;" />  </g></g></g>'}),yb=Ut.define("chess.RookWhite",{size:{width:32,height:34}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"      style="stroke-linecap:butt;" />    <path      d="M 34,14 L 31,17 L 14,17 L 11,14" />    <path      d="M 31,17 L 31,29.5 L 14,29.5 L 14,17"      style="stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>'}),Cb=Ut.define("chess.RookBlack",{size:{width:32,height:34}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z "      style="stroke-linecap:butt;stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "      style="stroke-linecap:butt;" />    <path      d="M 12,35.5 L 33,35.5 L 33,35.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 13,31.5 L 32,31.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,29.5 L 31,29.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 31,16.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />  </g></g></g>'}),xb=Ut.define("chess.BishopWhite",{size:{width:38,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#ffffff; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path      d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>'}),wb=Ut.define("chess.BishopBlack",{size:{width:38,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path       d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"       style="fill:none; stroke:#ffffff; stroke-linejoin:miter;" />  </g></g></g>'}),bb=Ut.define("chess.KnightWhite",{size:{width:38,height:37}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#000000; stroke:#000000;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#000000; stroke:#000000;" />  </g></g></g>'}),Nb=Ut.define("chess.KnightBlack",{size:{width:38,height:37}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#000000; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#000000; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "      style="fill:#ffffff; stroke:none;" />  </g></g></g>'}),Mb=Ut.define("chess.PawnWhite",{size:{width:28,height:33}},{markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>'}),Tb=Ut.define("chess.PawnBlack",{size:{width:28,height:33}},{markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>'});var cd={};Ae(cd,{Attribute:()=>ea,Derived:()=>Lb,Entity:()=>N0,ISA:()=>zb,IdentifyingRelationship:()=>Pb,Key:()=>kb,Line:()=>Ob,Multivalued:()=>Db,Normal:()=>Eb,Relationship:()=>M0,WeakEntity:()=>Sb});var N0=fe.define("erd.Entity",{size:{width:150,height:60},attrs:{".outer":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"100,0 100,60 0,60 0,0"},".inner":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"95,5 95,55 5,55 5,5",display:"none"},text:{text:"Entity","font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>'}),Sb=N0.define("erd.WeakEntity",{attrs:{".inner":{display:"auto"},text:{text:"Weak Entity"}}}),M0=fe.define("erd.Relationship",{size:{width:80,height:80},attrs:{".outer":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,0 80,40 40,80 0,40"},".inner":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,5 75,40 40,75 5,40",display:"none"},text:{text:"Relationship","font-family":"Arial","font-size":12,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>'}),Pb=M0.define("erd.IdentifyingRelationship",{attrs:{".inner":{display:"auto"},text:{text:"Identifying"}}}),ea=fe.define("erd.Attribute",{size:{width:100,height:50},attrs:{ellipse:{transform:"translate(50, 25)"},".outer":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:50,ry:25,fill:"#E67E22"},".inner":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:45,ry:20,fill:"#E67E22",display:"none"},text:{"font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse class="outer"/><ellipse class="inner"/></g><text/></g>'}),Db=ea.define("erd.Multivalued",{attrs:{".inner":{display:"block"},text:{text:"multivalued"}}}),Lb=ea.define("erd.Derived",{attrs:{".outer":{"stroke-dasharray":"3,5"},text:{text:"derived"}}}),kb=ea.define("erd.Key",{attrs:{ellipse:{"stroke-width":4},text:{text:"key","font-weight":"800","text-decoration":"underline"}}}),Eb=ea.define("erd.Normal",{attrs:{text:{text:"Normal"}}}),zb=fe.define("erd.ISA",{type:"erd.ISA",size:{width:100,height:50},attrs:{polygon:{points:"0,0 50,50 100,0",fill:"#F1C40F",stroke:"#F39C12","stroke-width":2},text:{text:"ISA","font-size":18,"ref-x":.5,"ref-y":.3,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),Ob=ce.define("erd.Line",{},{cardinality:function(t){this.set("labels",[{position:-20,attrs:{text:{dy:-8,text:t}}}])}});var fd={};Ae(fd,{Arrow:()=>Zb,EndState:()=>Gb,StartState:()=>Rb,State:()=>Bb});var Bb=ta.define("fsa.State",{attrs:{circle:{"stroke-width":3},text:{"font-weight":"800"}}}),Rb=fe.define("fsa.StartState",{size:{width:20,height:20},attrs:{circle:{transform:"translate(10, 10)",r:10,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g></g>'}),Gb=fe.define("fsa.EndState",{size:{width:20,height:20},attrs:{".outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#000000"},".inner":{transform:"translate(10, 10)",r:6,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>'}),Zb=ce.define("fsa.Arrow",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}},smooth:!0});var hd={};Ae(hd,{Arrow:()=>Wb,Member:()=>jb});var jb=fe.define("org.Member",{size:{width:180,height:70},attrs:{rect:{width:170,height:60},".card":{fill:"#FFFFFF",stroke:"#000000","stroke-width":2,"pointer-events":"visiblePainted",rx:10,ry:10},image:{width:48,height:48,ref:".card","ref-x":10,"ref-y":5},".rank":{"text-decoration":"underline",ref:".card","ref-x":.9,"ref-y":.2,"font-family":"Courier New","font-size":14,"text-anchor":"end"},".name":{"font-weight":"800",ref:".card","ref-x":.9,"ref-y":.6,"font-family":"Courier New","font-size":14,"text-anchor":"end"}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="card"/><image/></g><text class="rank"/><text class="name"/></g>'}),Wb=ce.define("org.Arrow",{source:{selector:".card"},target:{selector:".card"},attrs:{".connection":{stroke:"#585858","stroke-width":3}},z:-1});var dd={};Ae(dd,{Link:()=>Ub,Place:()=>Yb,PlaceView:()=>Fb,Transition:()=>Vb});var Yb=Ut.define("pn.Place",{size:{width:50,height:50},attrs:{".root":{r:25,fill:"#ffffff",stroke:"#000000",transform:"translate(25, 25)"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:".root",fill:"#000000","font-size":12},".tokens > circle":{fill:"#000000",r:5},".tokens.one > circle":{transform:"translate(25, 25)"},".tokens.two > circle:nth-child(1)":{transform:"translate(19, 25)"},".tokens.two > circle:nth-child(2)":{transform:"translate(31, 25)"},".tokens.three > circle:nth-child(1)":{transform:"translate(18, 29)"},".tokens.three > circle:nth-child(2)":{transform:"translate(25, 19)"},".tokens.three > circle:nth-child(3)":{transform:"translate(32, 29)"},".tokens.alot > text":{transform:"translate(25, 18)","text-anchor":"middle",fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="root"/><g class="tokens" /></g><text class="label"/></g>'}),Fb=Se.extend({presentationAttributes:Se.addPresentationAttributes({tokens:["TOKENS"]}),initFlag:Se.prototype.initFlag.concat(["TOKENS"]),confirmUpdate:function(...t){let e=Se.prototype.confirmUpdate.call(this,...t);return this.hasFlag(e,"TOKENS")&&(this.renderTokens(),this.update(),e=this.removeFlag(e,"TOKENS")),e},renderTokens:function(){let t=this.vel.findOne(".tokens").empty();["one","two","three","alot"].forEach(function(r){t.removeClass(r)});var e=this.model.get("tokens");if(e)switch(e){case 1:t.addClass("one"),t.append(X("circle"));break;case 2:t.addClass("two"),t.append([X("circle"),X("circle")]);break;case 3:t.addClass("three"),t.append([X("circle"),X("circle"),X("circle")]);break;default:t.addClass("alot"),t.append(X("text").text(e+""));break}}}),Vb=Ut.define("pn.Transition",{size:{width:12,height:50},attrs:{rect:{width:12,height:50,fill:"#000000",stroke:"#000000"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:"rect",fill:"#000000","font-size":12}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="root"/></g></g><text class="label"/>'}),Ub=ce.define("pn.Link",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}}});var md={};Ae(md,{Abstract:()=>_b,AbstractView:()=>Xb,Aggregation:()=>qb,Association:()=>t1,Class:()=>gd,ClassView:()=>pd,Composition:()=>$b,EndState:()=>n1,Generalization:()=>Qb,Implementation:()=>Kb,Interface:()=>Hb,InterfaceView:()=>Jb,StartState:()=>r1,State:()=>e1,Transition:()=>i1});var gd=Ut.define("uml.Class",{attrs:{rect:{width:200},".uml-class-name-rect":{stroke:"black","stroke-width":2,fill:"#3498db"},".uml-class-attrs-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-methods-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-name-text":{ref:".uml-class-name-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle","font-weight":"bold",fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-attrs-text":{ref:".uml-class-attrs-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-methods-text":{ref:".uml-class-methods-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"}},name:[],attributes:[],methods:[]},{markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-class-name-rect"/><rect class="uml-class-attrs-rect"/><rect class="uml-class-methods-rect"/>',"</g>",'<text class="uml-class-name-text"/><text class="uml-class-attrs-text"/><text class="uml-class-methods-text"/>',"</g>"].join(""),initialize:function(){this.on("change:name change:attributes change:methods",function(){this.updateRectangles(),this.trigger("uml-update")},this),this.updateRectangles(),Ut.prototype.initialize.apply(this,arguments)},getClassName:function(){return this.get("name")},updateRectangles:function(){var t=this.get("attrs"),e=[{type:"name",text:this.getClassName()},{type:"attrs",text:this.get("attributes")},{type:"methods",text:this.get("methods")}],r=0;e.forEach(function(n){var i=Array.isArray(n.text)?n.text:[n.text],o=i.length*20+20;t[".uml-class-"+n.type+"-text"].text=i.join(`
`),t[".uml-class-"+n.type+"-rect"].height=o,t[".uml-class-"+n.type+"-rect"].transform="translate(0,"+r+")",r+=o})}}),pd=Se.extend({initialize:function(){Se.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"uml-update",function(){this.update(),this.resize()})}}),_b=gd.define("uml.Abstract",{attrs:{".uml-class-name-rect":{fill:"#e74c3c"},".uml-class-attrs-rect":{fill:"#c0392b"},".uml-class-methods-rect":{fill:"#c0392b"}}},{getClassName:function(){return["<<Abstract>>",this.get("name")]}}),Xb=pd,Hb=gd.define("uml.Interface",{attrs:{".uml-class-name-rect":{fill:"#f1c40f"},".uml-class-attrs-rect":{fill:"#f39c12"},".uml-class-methods-rect":{fill:"#f39c12"}}},{getClassName:function(){return["<<Interface>>",this.get("name")]}}),Jb=pd,Qb=ce.define("uml.Generalization",{attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"}}}),Kb=ce.define("uml.Implementation",{attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"},".connection":{"stroke-dasharray":"3,3"}}}),qb=ce.define("uml.Aggregation",{attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"white"}}}),$b=ce.define("uml.Composition",{attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"black"}}}),t1=ce.define("uml.Association"),e1=Ut.define("uml.State",{attrs:{".uml-state-body":{width:200,height:200,rx:10,ry:10,fill:"#ecf0f1",stroke:"#bdc3c7","stroke-width":3},".uml-state-separator":{stroke:"#bdc3c7","stroke-width":2},".uml-state-name":{ref:".uml-state-body","ref-x":.5,"ref-y":5,"text-anchor":"middle",fill:"#000000","font-family":"Courier New","font-size":14},".uml-state-events":{ref:".uml-state-separator","ref-x":5,"ref-y":5,fill:"#000000","font-family":"Courier New","font-size":14}},name:"State",events:[]},{markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-state-body"/>',"</g>",'<path class="uml-state-separator"/>','<text class="uml-state-name"/>','<text class="uml-state-events"/>',"</g>"].join(""),initialize:function(){this.on({"change:name":this.updateName,"change:events":this.updateEvents,"change:size":this.updatePath},this),this.updateName(),this.updateEvents(),this.updatePath(),Ut.prototype.initialize.apply(this,arguments)},updateName:function(){this.attr(".uml-state-name/text",this.get("name"))},updateEvents:function(){this.attr(".uml-state-events/text",this.get("events").join(`
`))},updatePath:function(){var t="M 0 20 L "+this.get("size").width+" 20";this.attr(".uml-state-separator/d",t,{silent:!0})}}),r1=ta.define("uml.StartState",{type:"uml.StartState",attrs:{circle:{fill:"#34495e",stroke:"#2c3e50","stroke-width":2,rx:1}}}),n1=Ut.define("uml.EndState",{size:{width:20,height:20},attrs:{"circle.outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#2c3e50"},"circle.inner":{transform:"translate(10, 10)",r:6,fill:"#34495e"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>'}),i1=ce.define("uml.Transition",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z",fill:"#34495e",stroke:"#2c3e50"},".connection":{stroke:"#2c3e50"}}});function T0(t,e){if(e===0)return"0%";let r=1e3;return`${Math.round(t/e*100*r)/r}%`}function S0(t){return function(e,r,n,i){var o=r.isNodeConnection(n)?s1:o1;return o(t,e,r,n,i)}}function o1(t,e,r,n,i){var o=r.model.angle(),s=r.getNodeUnrotatedBBox(n),a=r.model.getBBox().center();i.rotate(a,o);var u=i.x-s.x,h=i.y-s.y;return t&&(u=T0(u,s.width),h=T0(h,s.height)),e.anchor={name:"topLeft",args:{dx:u,dy:h,rotate:!0}},e}function s1(t,e,r,n,i){var o=r.getConnection();if(!o)return e;var s=o.closestPointLength(i);if(t){var a=o.length();e.anchor={name:"connectionRatio",args:{ratio:s/a}}}else e.anchor={name:"connectionLength",args:{length:s}};return e}var bR=S0(!1),P0=S0(!0);var na={};Ae(na,{Boundary:()=>vd,Button:()=>Ro,Connect:()=>ki,HoverConnect:()=>Ad,Remove:()=>Id,Segments:()=>l1,SourceAnchor:()=>f1,SourceArrowhead:()=>c1,TargetAnchor:()=>h1,TargetArrowhead:()=>u1,Vertices:()=>a1});var L0=_e.extend({tagName:"circle",svgElement:!0,className:"marker-vertex",events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onDoubleClick",dbltap:"onDoubleClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},attributes:{r:6,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move"},position:function(t,e){let{vel:r,options:n}=this,{scale:i}=n,o=X.createSVGMatrix().translate(t,e);i&&(o=o.scale(i)),r.transform(o,{absolute:!0})},onPointerDown:function(t){this.options.guard(t)||(t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data),this.trigger("will-change",this,t))},onPointerMove:function(t){this.trigger("changing",this,t)},onDoubleClick:function(t){this.trigger("remove",this,t)},onPointerUp:function(t){this.trigger("changed",this,t),this.undelegateDocumentEvents(),this.options.paper.delegateEvents()}}),a1=or.extend({name:"vertices",options:{handleClass:L0,snapRadius:20,redundancyRemoval:!0,vertexAdding:!0,stopPropagation:!0,scale:null},children:[{tagName:"path",selector:"connection",className:"joint-vertices-path",attributes:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"cell"}}],handles:null,events:{"mousedown .joint-vertices-path":"onPathPointerDown","touchstart .joint-vertices-path":"onPathPointerDown"},onRender:function(){return this.options.vertexAdding&&(this.renderChildren(),this.updatePath()),this.resetHandles(),this.renderHandles(),this},update:function(){var t=this.relatedView,e=t.model.vertices();return e.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.vertexAdding&&this.updatePath(),this},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),!!Array.isArray(t))for(var e=0,r=t.length;e<r;e++)t[e].remove()},renderHandles:function(){for(var t=this.relatedView,e=t.model.vertices(),r=0,n=e.length;r<n;r++){var i=e[r],o=new this.options.handleClass({index:r,paper:this.paper,scale:this.options.scale,guard:s=>this.guard(s)});o.render(),o.position(i.x,i.y),this.simulateRelatedView(o.el),o.vel.appendTo(this.el),this.handles.push(o),this.startHandleListening(o)}},updateHandles:function(){for(var t=this.relatedView,e=t.model.vertices(),r=0,n=e.length;r<n;r++){var i=e[r],o=this.handles[r];if(!o)return;o.position(i.x,i.y)}},updatePath:function(){var t=this.childNodes.connection;t&&t.setAttribute("d",this.relatedView.getSerializedConnection())},startHandleListening:function(t){var e=this.relatedView;e.can("vertexMove")&&(this.listenTo(t,"will-change",this.onHandleWillChange),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"changed",this.onHandleChanged)),e.can("vertexRemove")&&this.listenTo(t,"remove",this.onHandleRemove)},getNeighborPoints:function(t){var e=this.relatedView,r=e.model.vertices(),n=t>0?r[t-1]:e.sourceAnchor,i=t<r.length-1?r[t+1]:e.targetAnchor;return{prev:new z(n),next:new z(i)}},onHandleWillChange:function(t,e){this.focus();let{relatedView:r,options:n}=this;r.model.startBatch("vertex-move",{ui:!0,tool:this.cid}),n.stopPropagation||r.notifyPointerdown(...r.paper.getPointerArgs(e))},onHandleChanging:function(t,e){let{options:r,relatedView:n}=this;var i=t.options.index,[o,s,a]=n.paper.getPointerArgs(e),u={x:s,y:a};this.snapVertex(u,i),n.model.vertex(i,u,{ui:!0,tool:this.cid}),t.position(u.x,u.y),r.stopPropagation||n.notifyPointermove(o,s,a)},onHandleChanged:function(t,e){let{options:r,relatedView:n}=this;if(r.vertexAdding&&this.updatePath(),!!r.redundancyRemoval){var i=n.removeRedundantLinearVertices({ui:!0,tool:this.cid});i&&this.render(),this.blur(),n.model.stopBatch("vertex-move",{ui:!0,tool:this.cid}),this.eventData(e).vertexAdded&&n.model.stopBatch("vertex-add",{ui:!0,tool:this.cid});var[o,s,a]=n.paper.getPointerArgs(e);r.stopPropagation||n.notifyPointerup(o,s,a),n.checkMouseleave(o)}},snapVertex:function(t,e){var r=this.options.snapRadius;if(r>0){var n=this.getNeighborPoints(e),i=n.prev,o=n.next;Math.abs(t.x-i.x)<r?t.x=i.x:Math.abs(t.x-o.x)<r&&(t.x=o.x),Math.abs(t.y-i.y)<r?t.y=n.prev.y:Math.abs(t.y-o.y)<r&&(t.y=o.y)}},onHandleRemove:function(t,e){var r=t.options.index,n=this.relatedView;n.model.removeVertex(r,{ui:!0}),this.options.vertexAdding&&this.updatePath(),n.checkMouseleave(Jt(e))},onPathPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=Jt(t),r=this.paper.snapToGrid(e.clientX,e.clientY).toJSON(),n=this.relatedView;n.model.startBatch("vertex-add",{ui:!0,tool:this.cid});var i=n.getVertexIndex(r.x,r.y);this.snapVertex(r,i),n.model.insertVertex(i,r,{ui:!0,tool:this.cid}),this.update();var o=this.handles[i];this.eventData(e,{vertexAdded:!0}),o.onPointerDown(e)}},onRemove:function(){this.resetHandles()}},{VertexHandle:L0});function Li(t,e){let{model:r}=t;return e?r.getBBox():r.isLink()?t.getConnection().bbox():t.getNodeUnrotatedBBox(t.el)}function Mu(t,e,r){var n=P0.call(this.paper,{},e,r,t,this.model);return n.anchor}function k0(t,e,r,n,i,o){var s=o.options.snapRadius,a=n==="source",u=a?0:-1,h=this.model.vertex(u)||this.getEndAnchor(a?"target":"source");return h&&(Math.abs(h.x-t.x)<s&&(t.x=h.x),Math.abs(h.y-t.y)<s&&(t.y=h.y)),t}var E0=_e.extend({tagName:"g",svgElement:!0,className:"marker-segment",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},children:[{tagName:"line",selector:"line",attributes:{stroke:"#33334F","stroke-width":2,fill:"none","pointer-events":"none"}},{tagName:"rect",selector:"handle",attributes:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2}}],onRender:function(){this.renderChildren()},position:function(t,e,r,n){let{scale:i}=this.options,o=X.createSVGMatrix().translate(t,e).rotate(r);i&&(o=o.scale(i));var s=this.childNodes.handle;s.setAttribute("transform",X.matrixToTransformString(o)),s.setAttribute("cursor",r%180===0?"row-resize":"col-resize");var a=n.getClosestPoint(new z(t,e)),u=this.childNodes.line;u.setAttribute("x1",t),u.setAttribute("y1",e),u.setAttribute("x2",a.x),u.setAttribute("y2",a.y)},onPointerDown:function(t){this.options.guard(t)||(this.trigger("change:start",this,t),t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data))},onPointerMove:function(t){this.trigger("changing",this,t)},onPointerUp:function(t){this.undelegateDocumentEvents(),this.options.paper.delegateEvents(),this.trigger("change:end",this,t)},show:function(){this.el.style.display=""},hide:function(){this.el.style.display="none"}}),l1=or.extend({name:"segments",precision:.5,options:{handleClass:E0,segmentLengthThreshold:40,redundancyRemoval:!0,anchor:Mu,snapRadius:10,snapHandle:!0,stopPropagation:!0},handles:null,onRender:function(){this.resetHandles();var t=this.relatedView,e=t.model.vertices();e.unshift(t.sourcePoint),e.push(t.targetPoint);for(var r=0,n=e.length;r<n-1;r++){var i=e[r],o=e[r+1],s=this.renderHandle(i,o);this.simulateRelatedView(s.el),this.handles.push(s),s.options.index=r}return this},renderHandle:function(t,e){var r=new this.options.handleClass({paper:this.paper,scale:this.options.scale,guard:n=>this.guard(n)});return r.render(),this.updateHandle(r,t,e),r.vel.appendTo(this.el),this.startHandleListening(r),r},update:function(){return this.render(),this},startHandleListening:function(t){this.listenTo(t,"change:start",this.onHandleChangeStart),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"change:end",this.onHandleChangeEnd)},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),!!Array.isArray(t))for(var e=0,r=t.length;e<r;e++)t[e].remove()},shiftHandleIndexes:function(t){for(var e=this.handles,r=0,n=e.length;r<n;r++)e[r].options.index+=t},resetAnchor:function(t,e){var r=this.relatedView.model;e?r.prop([t,"anchor"],e,{rewrite:!0,ui:!0,tool:this.cid}):r.removeProp([t,"anchor"],{ui:!0,tool:this.cid})},snapHandle:function(t,e,r){var n=t.options.index,i=this.relatedView,o=i.model,s=o.vertices(),a=t.options.axis,u=s[n-2]||r.sourceAnchor,h=s[n+1]||r.targetAnchor,d=this.options.snapRadius;return Math.abs(e[a]-u[a])<d?e[a]=u[a]:Math.abs(e[a]-h[a])<d&&(e[a]=h[a]),e},onHandleChanging:function(t,e){let{options:r}=this;var n=this.eventData(e),i=this.relatedView,o=i.paper,s=t.options.index-1,a=Jt(e),u=o.snapToGrid(a.clientX,a.clientY),h=this.snapHandle(t,u.clone(),n),d=t.options.axis,f=this.options.snapHandle?0:u[d]-h[d],I=i.model,A=Be(I.vertices()),b=this.options.anchor;typeof b!="function"&&(b=null);let S=t.options.index,P=[i.sourcePoint.clone(),...A,i.targetPoint.clone()],E=0;if(S-1>=0){let Y=P[S-1],K=P[S];new gt(Y,K).vector().theta()%90!==0&&(A.splice(S-1,0,n.originalVertices[S-1]),E++,this.shiftHandleIndexes(1))}var j=A[s+E],U=A[s+1+E];if(S+2<P.length){let Y=P[S+1],K=P[S+2];if(new gt(Y,K).vector().theta()%90!==0){let q=n.originalVertices.length===1,St=q?0:S,Nt=n.firstHandleShifted&&!q?1:0,oe=1+E;A.splice(S+oe,0,n.originalVertices[St-Nt])}}var Q=i.sourceView,rt=i.sourceBBox,p=!1,v=!1;if(j?s===0?rt.containsPoint(j)?(A.shift(),this.shiftHandleIndexes(-1),p=!0):(j[d]=h[d],v=!0):j[d]=h[d]:(j=i.sourceAnchor.toJSON(),j[d]=h[d],rt.containsPoint(j)?(j[d]=h[d],p=!0):(A.unshift(j),this.shiftHandleIndexes(1),n.firstHandleShifted=!0,v=!0)),b&&Q){if(p){var w=n.sourceAnchor.clone();w[d]=h[d];var M=b.call(i,w,Q,i.sourceMagnet||Q.el,"source",i);this.resetAnchor("source",M)}v&&this.resetAnchor("source",n.sourceAnchorDef)}var D=i.targetView,G=i.targetBBox,Z=!1,_=!1;if(U?s===A.length-2?G.containsPoint(U)?(A.pop(),Z=!0):(U[d]=h[d],_=!0):U[d]=h[d]:(U=i.targetAnchor.toJSON(),U[d]=h[d],G.containsPoint(U)?Z=!0:(A.push(U),_=!0)),b&&D){if(Z){var at=n.targetAnchor.clone();at[d]=h[d];var ht=b.call(i,at,D,i.targetMagnet||D.el,"target",i);this.resetAnchor("target",ht)}_&&this.resetAnchor("target",n.targetAnchorDef)}if(A.some(Y=>!Y))throw new Error("Segments: incompatible router in use");I.vertices(A,{ui:!0,tool:this.cid}),this.updateHandle(t,j,U,f),r.stopPropagation||i.notifyPointermove(a,u.x,u.y)},onHandleChangeStart:function(t,e){let{options:r,handles:n,relatedView:i}=this,{model:o,paper:s}=i;var a=t.options.index;if(Array.isArray(n)){for(var u=0,h=n.length;u<h;u++)u!==a&&n[u].hide();this.focus(),this.eventData(e,{sourceAnchor:i.sourceAnchor.clone(),targetAnchor:i.targetAnchor.clone(),sourceAnchorDef:rr(o.prop(["source","anchor"])),targetAnchorDef:rr(o.prop(["target","anchor"])),originalVertices:Be(o.vertices()),firstHandleShifted:!1}),o.startBatch("segment-move",{ui:!0,tool:this.cid}),r.stopPropagation||i.notifyPointerdown(...s.getPointerArgs(e))}},onHandleChangeEnd:function(t,e){let{options:r,relatedView:n}=this,{paper:i,model:o}=n;r.redundancyRemoval&&n.removeRedundantLinearVertices({ui:!0,tool:this.cid});let s=Jt(e),a=i.snapToGrid(s.clientX,s.clientY);this.render(),this.blur(),o.stopBatch("segment-move",{ui:!0,tool:this.cid}),r.stopPropagation||n.notifyPointerup(s,a.x,a.y),n.checkMouseleave(s)},updateHandle:function(t,e,r,n){var i=Math.abs(e.x-r.x)<this.precision,o=Math.abs(e.y-r.y)<this.precision;if(i||o){var s=new gt(e,r),a=s.length();if(a<this.options.segmentLengthThreshold)t.hide();else{var u=s.midpoint(),h=i?"x":"y";u[h]+=n||0;var d=s.vector().vectorAngle(new z(1,0));t.position(u.x,u.y,d,this.relatedView),t.show(),t.options.axis=h}}else t.hide()},onRemove:function(){this.resetHandles()}},{SegmentHandle:E0});var z0=or.extend({tagName:"path",xAxisVector:new z(1,0),events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},options:{scale:null},onRender:function(){this.update()},update:function(){var t=this.ratio,e=this.relatedView,r=e.getTangentAtRatio(t),n,i;if(r?(n=r.start,i=r.vector().vectorAngle(this.xAxisVector)||0):(n=e.getPointAtRatio(t),i=0),!n)return this;var o=X.createSVGMatrix().translate(n.x,n.y).rotate(i);let{scale:s}=this.options;return s&&(o=o.scale(s)),this.vel.transform(o,{absolute:!0}),this},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.relatedView;e.model.startBatch("arrowhead-move",{ui:!0,tool:this.cid}),e.can("arrowheadMove")&&(e.startArrowheadMove(this.arrowheadType),this.delegateDocumentEvents(),e.paper.undelegateEvents()),this.focus(),this.el.style.pointerEvents="none"}},onPointerMove:function(t){var e=Jt(t),r=this.paper.snapToGrid(e.clientX,e.clientY);this.relatedView.pointermove(e,r.x,r.y)},onPointerUp:function(t){this.undelegateDocumentEvents();var e=this.relatedView,r=e.paper,n=Jt(t),i=r.snapToGrid(n.clientX,n.clientY);e.pointerup(n,i.x,i.y),r.delegateEvents(),this.blur(),this.el.style.pointerEvents="",e.model.stopBatch("arrowhead-move",{ui:!0,tool:this.cid})}}),u1=z0.extend({name:"target-arrowhead",ratio:1,arrowheadType:"target",attributes:{d:"M -10 -8 10 0 -10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"target-arrowhead"}}),c1=z0.extend({name:"source-arrowhead",ratio:0,arrowheadType:"source",attributes:{d:"M 10 -8 -10 0 10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"source-arrowhead"}});var vd=or.extend({name:"boundary",tagName:"rect",options:{padding:10,useModelGeometry:!1},attributes:{fill:"none",stroke:"#33334F","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"},onRender:function(){this.update()},update:function(){let{relatedView:t,options:e,vel:r}=this,{useModelGeometry:n,rotate:i}=e,o=fr(e.padding),s=Li(t,n).moveAndExpand({x:-o.left,y:-o.top,width:o.left+o.right,height:o.top+o.bottom});var a=t.model;if(a.isElement()){var u=a.angle();if(u)if(i){var h=a.getBBox().center();r.rotate(u,h.x,h.y,{absolute:!0})}else s=s.bbox(u)}return r.attr(s.toJSON()),this}});var O0=or.extend({tagName:"g",type:null,children:[{tagName:"circle",selector:"anchor",attributes:{cursor:"pointer"}},{tagName:"rect",selector:"area",attributes:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onPointerDblClick",dbltap:"onPointerDblClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},options:{snap:k0,anchor:Mu,scale:null,resetAnchor:!0,customAnchorAttributes:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttributes:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,restrictArea:!0,redundancyRemoval:!0},onRender:function(){this.renderChildren(),this.toggleArea(!1),this.update()},update:function(){var t=this.type,e=this.relatedView,r=e.getEndView(t);return r?(this.updateAnchor(),this.updateArea(),this.el.style.display=""):this.el.style.display="none",this},updateAnchor:function(){var t=this.childNodes;if(!t)return;var e=t.anchor;if(!e)return;var r=this.relatedView,n=this.type,i=r.getEndAnchor(n),o=this.options,s=r.model.prop([n,"anchor"]);let a=`translate(${i.x},${i.y})`;o.scale&&(a+=` scale(${o.scale})`),e.setAttribute("transform",a);var u=s?o.customAnchorAttributes:o.defaultAnchorAttributes;for(var h in u)e.setAttribute(h,u[h])},updateArea:function(){var t=this.childNodes;if(t){var e=t.area;if(e){var r=this.relatedView,n=this.type,i=r.getEndView(n),o=i.model,s=r.getEndMagnet(n),a=this.options.areaPadding;isFinite(a)||(a=0);var u,h,d;i.isNodeConnection(s)?(u=i.getNodeBBox(s),h=0,d=u.center()):(u=i.getNodeUnrotatedBBox(s),h=o.angle(),d=u.center(),h&&d.rotate(o.getBBox().center(),-h)),u.inflate(a),e.setAttribute("x",-u.width/2),e.setAttribute("y",-u.height/2),e.setAttribute("width",u.width),e.setAttribute("height",u.height),e.setAttribute("transform","translate("+d.x+","+d.y+") rotate("+h+")")}}},toggleArea:function(t){var e=this.childNodes;if(e){var r=e.area;r&&(r.style.display=t?"":"none")}},onPointerDown:function(t){this.guard(t)||(t.stopPropagation(),t.preventDefault(),this.paper.undelegateEvents(),this.delegateDocumentEvents(),this.focus(),this.toggleArea(this.options.restrictArea),this.relatedView.model.startBatch("anchor-move",{ui:!0,tool:this.cid}))},resetAnchor:function(t){var e=this.type,r=this.relatedView.model;t?r.prop([e,"anchor"],t,{rewrite:!0,ui:!0,tool:this.cid}):r.removeProp([e,"anchor"],{ui:!0,tool:this.cid})},onPointerMove:function(t){var e=this.relatedView,r=this.type,n=e.getEndView(r),i=n.model,o=e.getEndMagnet(r),s=Jt(t),a=this.paper.clientToLocalPoint(s.clientX,s.clientY),u=this.options.snap;if(typeof u=="function"&&(a=u.call(e,a,n,o,r,e,this),a=new z(a)),this.options.restrictArea)if(n.isNodeConnection(o)){var h=n.getClosestPoint(a);h&&(a=h)}else{var d=n.getNodeUnrotatedBBox(o),f=i.angle(),I=i.getBBox().center(),A=a.clone().rotate(I,f);d.containsPoint(A)||(a=d.pointNearestToPoint(A).rotate(I,-f))}var b,S=this.options.anchor;typeof S=="function"&&(b=S.call(e,a,n,o,r,e)),this.resetAnchor(b),this.update()},onPointerUp:function(t){let e=Jt(t);this.paper.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);var r=this.relatedView;this.options.redundancyRemoval&&r.removeRedundantLinearVertices({ui:!0,tool:this.cid}),r.checkMouseleave(e),r.model.stopBatch("anchor-move",{ui:!0,tool:this.cid})},onPointerDblClick:function(){var t=this.options.resetAnchor;t!==!1&&(t===!0&&(t=null),this.resetAnchor(Be(t)),this.update())}}),f1=O0.extend({name:"source-anchor",type:"source"}),h1=O0.extend({name:"target-anchor",type:"target"});var Ro=or.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,scale:null,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){let{vel:t}=this;t.transform(this.getCellMatrix(),{absolute:!0})},getCellMatrix(){return this.relatedView.model.isLink()?this.getLinkMatrix():this.getElementMatrix()},getElementMatrix(){let{relatedView:t,options:e}=this,{x:r=0,y:n=0,offset:i={},useModelGeometry:o,rotate:s,scale:a}=e,u=Li(t,o),h=t.model.angle();s||(u=u.bbox(h));let{x:d=0,y:f=0}=i;ye(r)?r=parseFloat(r)/100*u.width:Je(r)&&(r=Number(Qe(r,u))),ye(n)?n=parseFloat(n)/100*u.height:Je(n)&&(n=Number(Qe(n,u)));let I=X.createSVGMatrix().translate(u.x+u.width/2,u.y+u.height/2);return s&&(I=I.rotate(h)),I=I.translate(r+d-u.width/2,n+f-u.height/2),a&&(I=I.scale(a)),I},getLinkMatrix(){let{relatedView:t,options:e}=this,{offset:r=0,distance:n=0,rotate:i,scale:o}=e,s,a,u;ye(n)?s=t.getTangentAtRatio(parseFloat(n)/100):s=t.getTangentAtLength(n),s?(a=s.start,u=s.vector().vectorAngle(new z(1,0))||0):(a=t.getConnection().start,u=0);let h=X.createSVGMatrix().translate(a.x,a.y).rotate(u).translate(0,r);return i||(h=h.rotate(-u)),o&&(h=h.scale(o)),h},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.options.action;typeof e=="function"&&e.call(this.relatedView,t,this.relatedView,this)}}}),Id=Ro.extend({children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(t,e,r){e.model.remove({ui:!0,tool:r.cid})}}});var ki=Ro.extend({name:"connect",documentEvents:{mousemove:"drag",touchmove:"drag",mouseup:"dragend",touchend:"dragend",touchcancel:"dragend"},children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#333333",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -4 -1 L 0 -1 L 0 -4 L 4 0 L 0 4 0 1 -4 1 z",fill:"#FFFFFF",stroke:"none","stroke-width":2,"pointer-events":"none"}}],options:{distance:80,offset:0,magnet:t=>t.el,action:(t,e,r)=>r.dragstart(t)},getMagnetNode:function(){let{options:t,relatedView:e}=this,{magnet:r}=t,n;switch(typeof r){case"function":{n=r.call(this,e,this);break}case"string":{[n]=e.findBySelector(r);break}default:{n=r;break}}if(n||(n=e.el),n instanceof SVGElement)return n;throw new Error("Connect: magnet must be an SVGElement")},dragstart:function(t){let{paper:e,relatedView:r}=this,n=Jt(t),{x:i,y:o}=e.clientToLocalPoint(n.clientX,n.clientY);r.dragLinkStart(n,this.getMagnetNode(),i,o),e.undelegateEvents(),this.delegateDocumentEvents(null,n.data),this.focus()},drag:function(t){let{paper:e,relatedView:r}=this,n=Jt(t),{x:i,y:o}=e.snapToGrid(n.clientX,n.clientY);r.dragLink(n,i,o)},dragend:function(t){let{paper:e,relatedView:r}=this,n=Jt(t),{x:i,y:o}=e.snapToGrid(n.clientX,n.clientY);r.dragLinkEnd(n,i,o),this.undelegateDocumentEvents(),e.delegateEvents(),this.blur(),r.checkMouseleave(n)}});var B0=Qr(wn(),1);var Ad=ki.extend({name:"hover-connect",defaultMarkup:[{tagName:"circle",attributes:{r:7,fill:"#333333",cursor:"pointer"}},{tagName:"path",attributes:{d:"M -4 -1 L 0 -1 L 0 -4 L 4 0 L 0 4 0 1 -4 1 z",fill:"#FFFFFF",stroke:"none","stroke-width":2}}],children(){let{options:t,defaultMarkup:e}=this;return[{tagName:"path",selector:"track",attributes:{fill:"none",stroke:"transparent","stroke-width":t.trackWidth||15,cursor:"pointer"}},{tagName:"g",selector:"button",attributes:{"pointer-events":"none",display:"none"},children:t.markup||e}]},events:Object.assign({mousemove:"onMousemove",mouseenter:"onMouseenter",mouseleave:"onMouseleave"},ki.prototype.events),onRender:function(){this.renderChildren(),this.update()},trackPath:null,update(){let{childNodes:t}=this;this.trackPath=this.getTrackPath(),ki.prototype.update.apply(this,arguments),t.track.setAttribute("d",this.trackPath.serialize())},position(){let{el:t,childNodes:e}=this;e.button.setAttribute("transform",X.matrixToTransformString(this.getButtonMatrix())),t.setAttribute("transform",X.matrixToTransformString(this.getTrackMatrix()))},getButtonMatrix(){let{options:t,trackPath:e}=this,{offset:r=0,distance:n=0,rotate:i,scale:o}=t,s,a,u;ye(n)?s=e.tangentAtRatio(parseFloat(n)/100):s=e.tangentAtLength(n),s?(a=s.start,u=s.vector().vectorAngle(new z(1,0))||0):(a=e.start,u=0);let h=X.createSVGMatrix().translate(a.x,a.y).rotate(u).translate(0,r);return i||(h=h.rotate(-u)),o&&(h=h.scale(o)),h},getTrackPath(){return this.relatedView.getConnection()},getTrackMatrix(){return X.createSVGMatrix()},getTrackRatioFromEvent(t){let{relatedView:e,trackPath:r}=this,n=e.paper.clientToLocalPoint(t.clientX,t.clientY),i=X.transformPoint(n,this.getTrackMatrix().inverse());return r.closestPointLength(i)},canShowButton(){return B0.default._data(this.paper.el,"events")},showButton(){this.childNodes.button.style.display="block"},hideButton(){this.childNodes.button.style.display=""},onMousemove(t){let{trackPath:e}=this;if(!e)return;let{options:r}=this;r.distance=this.getTrackRatioFromEvent(t),this.position()},onMouseenter(){this.canShowButton()&&this.showButton()},onMouseleave(){this.hideButton()}});var ia={};Ae(ia,{Boundary:()=>vd,Button:()=>Ro,Connect:()=>ki,Control:()=>d1,HoverConnect:()=>R0,Remove:()=>Id});var d1=or.extend({tagName:"g",children:[{tagName:"circle",selector:"handle",attributes:{cursor:"pointer","stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6}},{tagName:"rect",selector:"extras",attributes:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onPointerDblClick",dbltap:"onPointerDblClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},options:{handleAttributes:null,selector:"root",padding:6,scale:null},getPosition:function(){},setPosition:function(){},resetPosition:function(){},onRender:function(){this.renderChildren(),this.toggleExtras(!1),this.update()},update:function(){let{handle:t,extras:e}=this.childNodes;if(t)this.updateHandle(t);else throw new Error("Control: markup selector `handle` is required");return e&&this.updateExtras(e),this},updateHandle:function(t){let{relatedView:e,options:r}=this,{model:n}=e,i=this.getPosition(e,this),o=n.getAbsolutePointFromRelative(i),{handleAttributes:s,scale:a}=r,u=`translate(${o.x},${o.y})`;if(a&&(u+=` scale(${a})`),t.setAttribute("transform",u),s)for(let h in s)t.setAttribute(h,s[h])},updateExtras:function(t){let{relatedView:e,options:r}=this,{selector:n}=this.options;if(!n){this.toggleExtras(!1);return}let[i]=e.findBySelector(n);if(!i)throw new Error("Control: invalid selector.");let o=r.padding;isFinite(o)||(o=0);let s=e.getNodeUnrotatedBBox(i),a=e.model,u=a.angle(),h=s.center();u&&h.rotate(a.getBBox().center(),-u),s.inflate(o),t.setAttribute("x",-s.width/2),t.setAttribute("y",-s.height/2),t.setAttribute("width",s.width),t.setAttribute("height",s.height),t.setAttribute("transform",`translate(${h.x},${h.y}) rotate(${u})`)},toggleExtras:function(t){let{extras:e}=this.childNodes;e&&(e.style.display=t?"":"none")},onPointerDown:function(t){let{relatedView:e,paper:r}=this;this.guard(t)||(t.stopPropagation(),t.preventDefault(),r.undelegateEvents(),this.delegateDocumentEvents(),this.focus(),this.toggleExtras(!0),e.model.startBatch("control-move",{ui:!0,tool:this.cid}))},onPointerMove:function(t){let{relatedView:e,paper:r}=this,{model:n}=e,{clientX:i,clientY:o}=Jt(t),s=r.clientToLocalPoint(i,o),a=n.getRelativePointFromAbsolute(s);this.setPosition(e,a,this),this.update()},onPointerUp:function(t){let{relatedView:e,paper:r}=this;r.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleExtras(!1),e.model.stopBatch("control-move",{ui:!0,tool:this.cid})},onPointerDblClick:function(){let{relatedView:t}=this;this.resetPosition(t,this),this.update()}});var R0=Ad.extend({getTrackPath(){let{relatedView:t,options:e}=this,{useModelGeometry:r,trackPath:n="M 0 0 H calc(w) V calc(h) H 0 Z"}=e;if(typeof n=="function"&&(n=n.call(this,t)),Je(n)){let i=Li(t,r);n=Qe(n,i)}return new yt(X.normalizePathData(n))},getTrackMatrix(){let{relatedView:t,options:e}=this,{useModelGeometry:r,rotate:n}=e,i=Li(t,r),o=t.model.angle();n||(i=i.bbox(o));let s=X.createSVGMatrix().translate(i.x+i.width/2,i.y+i.height/2);return n&&(s=s.rotate(o)),s=s.translate(-i.width/2,-i.height/2),s}});var G0=.7,g1=.3,Z0=.15,yd=["#3f84e5","#49306B","#fe7f2d","#ad343e","#899e8b","#ede9e9","#b2a29f","#392F2D"],Tu=class extends dn.Element{defaults(){return $d(qd({},super.defaults),{type:"Actor",size:{width:40,height:80},attrs:{background:{width:"calc(w)",height:"calc(h)",fill:"transparent"},body:{d:`M 0 calc(0.4 * h) h calc(w) M 0 calc(h) calc(0.5 * w) calc(${G0} * h) calc(w) calc(h) M calc(0.5 * w) calc(${G0} * h) V calc(${g1} * h)`,fill:"none",stroke:yd[7],strokeWidth:2},head:{cx:"calc(0.5 * w)",cy:`calc(${Z0} * h)`,r:`calc(${Z0} * h)`,stroke:yd[7],strokeWidth:2,fill:"#ffffff"},label:{y:"calc(h + 10)",x:"calc(0.5 * w)",textAnchor:"middle",textVerticalAnchor:"top",fontSize:14,fontFamily:"sans-serif",fill:yd[7],textWrap:{width:"calc(3 * w)",height:null}}}})}preinitialize(...e){super.preinitialize(...e),this.markup=le.svg`
            <rect @selector="background" />
            <path @selector="body" />
            <circle @selector="head" />
            <text @selector="label" />
        `}};var Su=class extends ra.standard.Rectangle{constructor(){super({markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"headerText"},{tagName:"rect",selector:"variablesRect"},{tagName:"rect",selector:"functionsRect"}]}),this.variablesCounter=0,this.functions=[]}defaults(){let e=150,r=100,n=20,i=(r-n)/2;return le.defaultsDeep({type:"UmlClass.Class",size:{width:e,height:r},attrs:{body:{fill:"#2ECC71",rx:5,ry:5,strokeWidth:2,stroke:"black"},headerText:{width:e,height:40,text:"Class",fontSize:12,fontWeight:"bold",fontFamily:"Arial, helvetica, sans-serif","ref-y":0,"ref-x":0,ref:"body","text-anchor":"middle"},variablesRect:{width:e,height:i,fill:"#3498db",stroke:"black","ref-y":n,"ref-x":0,ref:"body"},functionsRect:{width:e,height:i,fill:"#9b59b6",stroke:"black","ref-y":r-i,"ref-x":0,ref:"body"}}},ra.standard.Rectangle.prototype.defaults)}updateView(){var e=this.attributes;let r=e.attrs.variablesRect.height+20;e.attrs.variablesRect.height=r,this.attr(e.attrs),this.resize(this.attributes.size.width,this.attributes.size.height+20)}counterVariablesUp(){this.variablesCounter+=20}getcounterVariables(){return this.variablesCounter}removeVariable(e){this.variables.splice(e,1),this.updateView()}};var p1=`
    <style>
        :host {
            display: flex;
            flex-direction: row;
            height: 100%;
            width: 100%;
            gap: 2px;
            padding: 4px;
        }
        
        .left {
            width: 30%;
            background-color: grey;
        }
        
        .right {
            width: 100%;
        }
    
        #editor {
            width: 100%;
            height: 100%;
            border: 1px solid #ccc;
        }
    </style>
    
    <div class="left">
        <div id="toolBox"></div>
    </div>
    <div class="right">
        <div id="editor"></div>
    </div>
`,Pu=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=p1;let e=this.shadowRoot.querySelector("#editor"),r=this.shadowRoot.querySelector("#toolBox"),n=new dn.Graph,i=new dn.Graph,o=u(e,n,!0),s=u(r,i,!1);a(),s.on("element:pointerup",(h,d,f,I)=>{let A=h.model.clone(),b=Math.floor(Math.random()*481)+20,S=Math.floor(Math.random()*481)+20;A.position(b,S),n.addCell(A)}),o.on("cell:mouseenter",function(h){let d=new dn.ToolsView({tools:[new ia.Boundary({padding:3,rotate:!0,useModelGeometry:!0}),new na.Remove({scale:1.2,distance:15})]});h.addTools(d)}),o.on("element:pointerdblclick",function(h,d){let f="headerText",I="variablesRect",A="functionsRect";switch(d.target.attributes[0].value){case f:console.log("Header section double-clicked");break;case I:let P=["test"],E=150,j=100,U=20,Q=(j-U)/2;h.model.updateView();let rt=0,p=h.model.position(),v=new shapes.standard.TextBlock({position:{x:p.x,y:p.y+U+h.model.getcounterVariables()},size:{width:E,height:20},text:"Sample Text",fill:"black",fontSize:10,fontFamily:"Arial, helvetica, sans-serif","ref-y":U,"ref-x":0,ref:"variablesRect","text-anchor":"middle","pointer-events":"none"});var S=h.model.attr();S.body2=v,h.model.embed(v),n.addCell(v),rt+=20,h.model.counterVariablesUp();break;case A:console.log("Functions section double-clicked");break;default:console.log("Clicked outside the sections");break}}),o.on("cell:mouseleave",function(h){h.removeTools()});function a(){let h=new Tu,d=new Su;h.position(20,120),d.position(20,20),i.addCell(h),i.addCell(d)}function u(h,d,f){return new dn.Paper({el:h,model:d,width:"100%",height:"100%",gridSize:10,drawGrid:!0,interactive:f})}}};var j0="diagramChanged";function W0(t){t.target.value=t.detail.diagram}customElements.define("uml-editor",Pu);document.addEventListener(j0,W0.bind(null));
/*! Bundled license information:

jquery/dist/jquery.js:
  (*!
   * jQuery JavaScript Library v3.7.1
   * https://jquery.com/
   *
   * Copyright OpenJS Foundation and other contributors
   * Released under the MIT license
   * https://jquery.org/license
   *
   * Date: 2023-08-28T13:37Z
   *)
*/
